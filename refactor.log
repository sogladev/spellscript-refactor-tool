INFO:refactor.py:263:format_first_block_in_file():path_in='tests/test_aura_script/aura_script_read.cpp'
INFO:refactor.py:264:format_first_block_in_file():path_out='tests/test_aura_script/aura_script_write.cpp'
DEBUG:refactor.py:268:format_first_block_in_file():len(lines)=36 path_in='tests/test_aura_script/aura_script_read.cpp'
DEBUG:refactor.py:018:find_start_last_index():2 line='class spell_yogg_saron_malady_of_the_mind : public SpellScriptLoader'
DEBUG:refactor.py:018:find_start_last_index():3 line='{'
DEBUG:refactor.py:018:find_start_last_index():4 line='public:'
DEBUG:refactor.py:018:find_start_last_index():5 line='    spell_yogg_saron_malady_of_the_mind() : SpellScriptLoader("spell_yogg_saron_malady_of_the_mind") { }'
DEBUG:refactor.py:018:find_start_last_index():6 line=''
DEBUG:refactor.py:018:find_start_last_index():7 line='    class spell_yogg_saron_malady_of_the_mind_AuraScript : public AuraScript'
DEBUG:refactor.py:018:find_start_last_index():8 line='    {'
DEBUG:refactor.py:018:find_start_last_index():9 line='        PrepareAuraScript(spell_yogg_saron_malady_of_the_mind_AuraScript);'
DEBUG:refactor.py:018:find_start_last_index():10 line=''
DEBUG:refactor.py:018:find_start_last_index():11 line='        void OnApply(AuraEffect const* /*aurEff*/, AuraEffectHandleModes /*mode*/)'
DEBUG:refactor.py:018:find_start_last_index():12 line='        {'
DEBUG:refactor.py:018:find_start_last_index():13 line='            GetUnitOwner()->ApplySpellImmune(SPELL_DEATH_RAY_DAMAGE_REAL, IMMUNITY_ID, SPELL_DEATH_RAY_DAMAGE_REAL, true);'
DEBUG:refactor.py:018:find_start_last_index():14 line='        }'
DEBUG:refactor.py:018:find_start_last_index():15 line=''
DEBUG:refactor.py:018:find_start_last_index():16 line='        void OnRemove(AuraEffect const* /*aurEff*/, AuraEffectHandleModes /*mode*/)'
DEBUG:refactor.py:018:find_start_last_index():17 line='        {'
DEBUG:refactor.py:018:find_start_last_index():18 line='            GetUnitOwner()->ApplySpellImmune(SPELL_DEATH_RAY_DAMAGE_REAL, IMMUNITY_ID, SPELL_DEATH_RAY_DAMAGE_REAL, false);'
DEBUG:refactor.py:018:find_start_last_index():19 line='            GetUnitOwner()->CastCustomSpell(SPELL_MALADY_OF_THE_MIND_TRIGGER, SPELLVALUE_MAX_TARGETS, 1, GetUnitOwner(), true);'
DEBUG:refactor.py:018:find_start_last_index():20 line='        }'
DEBUG:refactor.py:018:find_start_last_index():21 line=''
DEBUG:refactor.py:018:find_start_last_index():22 line='        void Register() override'
DEBUG:refactor.py:018:find_start_last_index():23 line='        {'
DEBUG:refactor.py:018:find_start_last_index():24 line='            OnEffectApply += AuraEffectApplyFn(spell_yogg_saron_malady_of_the_mind_AuraScript::OnApply, EFFECT_1, SPELL_AURA_MOD_FEAR, AURA_EFFECT_HANDLE_REAL);'
DEBUG:refactor.py:018:find_start_last_index():25 line='            OnEffectRemove += AuraEffectRemoveFn(spell_yogg_saron_malady_of_the_mind_AuraScript::OnRemove, EFFECT_1, SPELL_AURA_MOD_FEAR, AURA_EFFECT_HANDLE_REAL);'
DEBUG:refactor.py:018:find_start_last_index():26 line='        }'
DEBUG:refactor.py:018:find_start_last_index():27 line='    };'
DEBUG:refactor.py:018:find_start_last_index():28 line=''
DEBUG:refactor.py:018:find_start_last_index():29 line='    AuraScript* GetAuraScript() const override'
DEBUG:refactor.py:018:find_start_last_index():30 line='    {'
DEBUG:refactor.py:018:find_start_last_index():31 line='        return new spell_yogg_saron_malady_of_the_mind_AuraScript();'
DEBUG:refactor.py:018:find_start_last_index():32 line='    }'
DEBUG:refactor.py:018:find_start_last_index():33 line='};'
DEBUG:refactor.py:223:convert_function_block():start_index=2last_index=33
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:036:     get_script_type():AuraScript line='    class spell_yogg_saron_malady_of_the_mind_AuraScript : public AuraScript'
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:036:     get_script_type():AuraScript line='        PrepareAuraScript(spell_yogg_saron_malady_of_the_mind_AuraScript);'
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:036:     get_script_type():AuraScript line='            OnEffectApply += AuraEffectApplyFn(spell_yogg_saron_malady_of_the_mind_AuraScript::OnApply, EFFECT_1, SPELL_AURA_MOD_FEAR, AURA_EFFECT_HANDLE_REAL);'
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:036:     get_script_type():AuraScript line='            OnEffectRemove += AuraEffectRemoveFn(spell_yogg_saron_malady_of_the_mind_AuraScript::OnRemove, EFFECT_1, SPELL_AURA_MOD_FEAR, AURA_EFFECT_HANDLE_REAL);'
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:036:     get_script_type():AuraScript line='    AuraScript* GetAuraScript() const override'
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:036:     get_script_type():AuraScript line='        return new spell_yogg_saron_malady_of_the_mind_AuraScript();'
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:225:convert_function_block():script_type=<ScriptType.AURA: 1>
DEBUG:refactor.py:027: find_name_of_script():name='spell_yogg_saron_malady_of_the_mind'
DEBUG:refactor.py:228:convert_function_block():script_name='spell_yogg_saron_malady_of_the_mind'
DEBUG:refactor.py:054:find_register_start_end_index():start_index=0
DEBUG:refactor.py:056:find_register_start_end_index():000;class spell_yogg_saron_malady_of_the_mind : public SpellScriptLoader
DEBUG:refactor.py:056:find_register_start_end_index():001;{
DEBUG:refactor.py:056:find_register_start_end_index():002;public:
DEBUG:refactor.py:056:find_register_start_end_index():003;    spell_yogg_saron_malady_of_the_mind() : SpellScriptLoader("spell_yogg_saron_malady_of_the_mind") { }
DEBUG:refactor.py:056:find_register_start_end_index():004;
DEBUG:refactor.py:056:find_register_start_end_index():005;    class spell_yogg_saron_malady_of_the_mind_AuraScript : public AuraScript
DEBUG:refactor.py:056:find_register_start_end_index():006;    {
DEBUG:refactor.py:056:find_register_start_end_index():007;        PrepareAuraScript(spell_yogg_saron_malady_of_the_mind_AuraScript);
DEBUG:refactor.py:056:find_register_start_end_index():008;
DEBUG:refactor.py:056:find_register_start_end_index():009;        void OnApply(AuraEffect const* /*aurEff*/, AuraEffectHandleModes /*mode*/)
DEBUG:refactor.py:056:find_register_start_end_index():010;        {
DEBUG:refactor.py:056:find_register_start_end_index():011;            GetUnitOwner()->ApplySpellImmune(SPELL_DEATH_RAY_DAMAGE_REAL, IMMUNITY_ID, SPELL_DEATH_RAY_DAMAGE_REAL, true);
DEBUG:refactor.py:056:find_register_start_end_index():012;        }
DEBUG:refactor.py:056:find_register_start_end_index():013;
DEBUG:refactor.py:056:find_register_start_end_index():014;        void OnRemove(AuraEffect const* /*aurEff*/, AuraEffectHandleModes /*mode*/)
DEBUG:refactor.py:056:find_register_start_end_index():015;        {
DEBUG:refactor.py:056:find_register_start_end_index():016;            GetUnitOwner()->ApplySpellImmune(SPELL_DEATH_RAY_DAMAGE_REAL, IMMUNITY_ID, SPELL_DEATH_RAY_DAMAGE_REAL, false);
DEBUG:refactor.py:056:find_register_start_end_index():017;            GetUnitOwner()->CastCustomSpell(SPELL_MALADY_OF_THE_MIND_TRIGGER, SPELLVALUE_MAX_TARGETS, 1, GetUnitOwner(), true);
DEBUG:refactor.py:056:find_register_start_end_index():018;        }
DEBUG:refactor.py:056:find_register_start_end_index():019;
DEBUG:refactor.py:056:find_register_start_end_index():020;        void Register() override
DEBUG:refactor.py:056:find_register_start_end_index():021;        {
DEBUG:refactor.py:056:find_register_start_end_index():022;            OnEffectApply += AuraEffectApplyFn(spell_yogg_saron_malady_of_the_mind_AuraScript::OnApply, EFFECT_1, SPELL_AURA_MOD_FEAR, AURA_EFFECT_HANDLE_REAL);
DEBUG:refactor.py:056:find_register_start_end_index():023;            OnEffectRemove += AuraEffectRemoveFn(spell_yogg_saron_malady_of_the_mind_AuraScript::OnRemove, EFFECT_1, SPELL_AURA_MOD_FEAR, AURA_EFFECT_HANDLE_REAL);
DEBUG:refactor.py:056:find_register_start_end_index():024;        }
DEBUG:refactor.py:063:find_register_start_end_index():20;20         void Register() override
DEBUG:refactor.py:064:find_register_start_end_index():24;24         }
DEBUG:refactor.py:072:find_register_statements():22;26
DEBUG:refactor.py:074:find_register_statements():000:            OnEffectApply += AuraEffectApplyFn(spell_yogg_saron_malady_of_the_mind_AuraScript::OnApply, EFFECT_1, SPELL_AURA_MOD_FEAR, AURA_EFFECT_HANDLE_REAL);
DEBUG:refactor.py:074:find_register_statements():001:            OnEffectRemove += AuraEffectRemoveFn(spell_yogg_saron_malady_of_the_mind_AuraScript::OnRemove, EFFECT_1, SPELL_AURA_MOD_FEAR, AURA_EFFECT_HANDLE_REAL);
DEBUG:refactor.py:088:format_register_statements():before:000:            OnEffectApply += AuraEffectApplyFn(spell_yogg_saron_malady_of_the_mind_AuraScript::OnApply, EFFECT_1, SPELL_AURA_MOD_FEAR, AURA_EFFECT_HANDLE_REAL);
DEBUG:refactor.py:088:format_register_statements():before:001:            OnEffectRemove += AuraEffectRemoveFn(spell_yogg_saron_malady_of_the_mind_AuraScript::OnRemove, EFFECT_1, SPELL_AURA_MOD_FEAR, AURA_EFFECT_HANDLE_REAL);
DEBUG:refactor.py:090:format_register_statements():after :000:        OnEffectApply += AuraEffectApplyFn(spell_yogg_saron_malady_of_the_mind_aura::OnApply, EFFECT_1, SPELL_AURA_MOD_FEAR, AURA_EFFECT_HANDLE_REAL);
DEBUG:refactor.py:090:format_register_statements():after :001:        OnEffectRemove += AuraEffectRemoveFn(spell_yogg_saron_malady_of_the_mind_aura::OnRemove, EFFECT_1, SPELL_AURA_MOD_FEAR, AURA_EFFECT_HANDLE_REAL);
DEBUG:refactor.py:103:find_content_start_end_index():absolute_start=7,absolute_end=20
DEBUG:refactor.py:145:format_content_statements():before:000:
DEBUG:refactor.py:145:format_content_statements():before:001:        void OnApply(AuraEffect const* /*aurEff*/, AuraEffectHandleModes /*mode*/)
DEBUG:refactor.py:145:format_content_statements():before:002:        {
DEBUG:refactor.py:145:format_content_statements():before:003:            GetUnitOwner()->ApplySpellImmune(SPELL_DEATH_RAY_DAMAGE_REAL, IMMUNITY_ID, SPELL_DEATH_RAY_DAMAGE_REAL, true);
DEBUG:refactor.py:145:format_content_statements():before:004:        }
DEBUG:refactor.py:145:format_content_statements():before:005:
DEBUG:refactor.py:145:format_content_statements():before:006:        void OnRemove(AuraEffect const* /*aurEff*/, AuraEffectHandleModes /*mode*/)
DEBUG:refactor.py:145:format_content_statements():before:007:        {
DEBUG:refactor.py:145:format_content_statements():before:008:            GetUnitOwner()->ApplySpellImmune(SPELL_DEATH_RAY_DAMAGE_REAL, IMMUNITY_ID, SPELL_DEATH_RAY_DAMAGE_REAL, false);
DEBUG:refactor.py:145:format_content_statements():before:009:            GetUnitOwner()->CastCustomSpell(SPELL_MALADY_OF_THE_MIND_TRIGGER, SPELLVALUE_MAX_TARGETS, 1, GetUnitOwner(), true);
DEBUG:refactor.py:145:format_content_statements():before:010:        }
DEBUG:refactor.py:145:format_content_statements():before:011:
DEBUG:refactor.py:147:format_content_statements():after :000:
DEBUG:refactor.py:147:format_content_statements():after :001:    void OnApply(AuraEffect const* /*aurEff*/, AuraEffectHandleModes /*mode*/)
DEBUG:refactor.py:147:format_content_statements():after :002:    {
DEBUG:refactor.py:147:format_content_statements():after :003:        GetUnitOwner()->ApplySpellImmune(SPELL_DEATH_RAY_DAMAGE_REAL, IMMUNITY_ID, SPELL_DEATH_RAY_DAMAGE_REAL, true);
DEBUG:refactor.py:147:format_content_statements():after :004:    }
DEBUG:refactor.py:147:format_content_statements():after :005:
DEBUG:refactor.py:147:format_content_statements():after :006:    void OnRemove(AuraEffect const* /*aurEff*/, AuraEffectHandleModes /*mode*/)
DEBUG:refactor.py:147:format_content_statements():after :007:    {
DEBUG:refactor.py:147:format_content_statements():after :008:        GetUnitOwner()->ApplySpellImmune(SPELL_DEATH_RAY_DAMAGE_REAL, IMMUNITY_ID, SPELL_DEATH_RAY_DAMAGE_REAL, false);
DEBUG:refactor.py:147:format_content_statements():after :009:        GetUnitOwner()->CastCustomSpell(SPELL_MALADY_OF_THE_MIND_TRIGGER, SPELLVALUE_MAX_TARGETS, 1, GetUnitOwner(), true);
DEBUG:refactor.py:147:format_content_statements():after :010:    }
DEBUG:refactor.py:147:format_content_statements():after :011:
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:000:class spell_yogg_saron_malady_of_the_mind : public SpellScriptLoader
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:001:{
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:002:public:
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:003:    spell_yogg_saron_malady_of_the_mind() : SpellScriptLoader("spell_yogg_saron_malady_of_the_mind") { }
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:004:
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:005:    class spell_yogg_saron_malady_of_the_mind_AuraScript : public AuraScript
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:006:    {
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:007:        PrepareAuraScript(spell_yogg_saron_malady_of_the_mind_AuraScript);
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:008:
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:009:        void OnApply(AuraEffect const* /*aurEff*/, AuraEffectHandleModes /*mode*/)
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:010:        {
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:011:            GetUnitOwner()->ApplySpellImmune(SPELL_DEATH_RAY_DAMAGE_REAL, IMMUNITY_ID, SPELL_DEATH_RAY_DAMAGE_REAL, true);
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:012:        }
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:013:
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:014:        void OnRemove(AuraEffect const* /*aurEff*/, AuraEffectHandleModes /*mode*/)
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:015:        {
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:016:            GetUnitOwner()->ApplySpellImmune(SPELL_DEATH_RAY_DAMAGE_REAL, IMMUNITY_ID, SPELL_DEATH_RAY_DAMAGE_REAL, false);
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:017:            GetUnitOwner()->CastCustomSpell(SPELL_MALADY_OF_THE_MIND_TRIGGER, SPELLVALUE_MAX_TARGETS, 1, GetUnitOwner(), true);
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:018:        }
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:019:
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:020:        void Register() override
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:021:        {
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:022:            OnEffectApply += AuraEffectApplyFn(spell_yogg_saron_malady_of_the_mind_AuraScript::OnApply, EFFECT_1, SPELL_AURA_MOD_FEAR, AURA_EFFECT_HANDLE_REAL);
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:023:            OnEffectRemove += AuraEffectRemoveFn(spell_yogg_saron_malady_of_the_mind_AuraScript::OnRemove, EFFECT_1, SPELL_AURA_MOD_FEAR, AURA_EFFECT_HANDLE_REAL);
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:024:        }
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:025:    };
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:026:
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:027:    AuraScript* GetAuraScript() const override
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:028:    {
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:029:        return new spell_yogg_saron_malady_of_the_mind_AuraScript();
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:030:    }
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:031:};
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :000:class spell_yogg_saron_malady_of_the_mind_aura : public AuraScript
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :001:{
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :002:    PrepareAuraScript(spell_yogg_saron_malady_of_the_mind_aura);
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :003:
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :004:    void OnApply(AuraEffect const* /*aurEff*/, AuraEffectHandleModes /*mode*/)
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :005:    {
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :006:        GetUnitOwner()->ApplySpellImmune(SPELL_DEATH_RAY_DAMAGE_REAL, IMMUNITY_ID, SPELL_DEATH_RAY_DAMAGE_REAL, true);
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :007:    }
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :008:
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :009:    void OnRemove(AuraEffect const* /*aurEff*/, AuraEffectHandleModes /*mode*/)
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :010:    {
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :011:        GetUnitOwner()->ApplySpellImmune(SPELL_DEATH_RAY_DAMAGE_REAL, IMMUNITY_ID, SPELL_DEATH_RAY_DAMAGE_REAL, false);
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :012:        GetUnitOwner()->CastCustomSpell(SPELL_MALADY_OF_THE_MIND_TRIGGER, SPELLVALUE_MAX_TARGETS, 1, GetUnitOwner(), true);
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :013:    }
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :014:
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :015:    void Register() override
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :016:    {
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :017:        OnEffectApply += AuraEffectApplyFn(spell_yogg_saron_malady_of_the_mind_aura::OnApply, EFFECT_1, SPELL_AURA_MOD_FEAR, AURA_EFFECT_HANDLE_REAL);
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :018:        OnEffectRemove += AuraEffectRemoveFn(spell_yogg_saron_malady_of_the_mind_aura::OnRemove, EFFECT_1, SPELL_AURA_MOD_FEAR, AURA_EFFECT_HANDLE_REAL);
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :019:    }
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :020:};
DEBUG:refactor.py:246:format_RegisterSpellScript():register_statement='    RegisterSpellScript(spell_yogg_saron_malady_of_the_mind_aura);'
DEBUG:refactor.py:255:replace_new_with_RegisterSpellScript():script_name_search='new spell_yogg_saron_malady_of_the_mind'
DEBUG:refactor.py:256:replace_new_with_RegisterSpellScript():script_name='spell_yogg_saron_malady_of_the_mind_aura'
DEBUG:refactor.py:257:replace_new_with_RegisterSpellScript():before:    RegisterSpellScript(spell_yogg_saron_malady_of_the_mind_aura);
DEBUG:refactor.py:258:replace_new_with_RegisterSpellScript():after :    RegisterSpellScript(spell_yogg_saron_malady_of_the_mind_aura);
DEBUG:refactor.py:277:format_first_block_in_file():000:
DEBUG:refactor.py:277:format_first_block_in_file():001:// 63830, 63881 - Malady of the Mind
DEBUG:refactor.py:277:format_first_block_in_file():002:class spell_yogg_saron_malady_of_the_mind_aura : public AuraScript
DEBUG:refactor.py:277:format_first_block_in_file():003:{
DEBUG:refactor.py:277:format_first_block_in_file():004:    PrepareAuraScript(spell_yogg_saron_malady_of_the_mind_aura);
DEBUG:refactor.py:277:format_first_block_in_file():005:
DEBUG:refactor.py:277:format_first_block_in_file():006:    void OnApply(AuraEffect const* /*aurEff*/, AuraEffectHandleModes /*mode*/)
DEBUG:refactor.py:277:format_first_block_in_file():007:    {
DEBUG:refactor.py:277:format_first_block_in_file():008:        GetUnitOwner()->ApplySpellImmune(SPELL_DEATH_RAY_DAMAGE_REAL, IMMUNITY_ID, SPELL_DEATH_RAY_DAMAGE_REAL, true);
DEBUG:refactor.py:277:format_first_block_in_file():009:    }
DEBUG:refactor.py:277:format_first_block_in_file():010:
DEBUG:refactor.py:277:format_first_block_in_file():011:    void OnRemove(AuraEffect const* /*aurEff*/, AuraEffectHandleModes /*mode*/)
DEBUG:refactor.py:277:format_first_block_in_file():012:    {
DEBUG:refactor.py:277:format_first_block_in_file():013:        GetUnitOwner()->ApplySpellImmune(SPELL_DEATH_RAY_DAMAGE_REAL, IMMUNITY_ID, SPELL_DEATH_RAY_DAMAGE_REAL, false);
DEBUG:refactor.py:277:format_first_block_in_file():014:        GetUnitOwner()->CastCustomSpell(SPELL_MALADY_OF_THE_MIND_TRIGGER, SPELLVALUE_MAX_TARGETS, 1, GetUnitOwner(), true);
DEBUG:refactor.py:277:format_first_block_in_file():015:    }
DEBUG:refactor.py:277:format_first_block_in_file():016:
DEBUG:refactor.py:277:format_first_block_in_file():017:    void Register() override
DEBUG:refactor.py:277:format_first_block_in_file():018:    {
DEBUG:refactor.py:277:format_first_block_in_file():019:        OnEffectApply += AuraEffectApplyFn(spell_yogg_saron_malady_of_the_mind_aura::OnApply, EFFECT_1, SPELL_AURA_MOD_FEAR, AURA_EFFECT_HANDLE_REAL);
DEBUG:refactor.py:277:format_first_block_in_file():020:        OnEffectRemove += AuraEffectRemoveFn(spell_yogg_saron_malady_of_the_mind_aura::OnRemove, EFFECT_1, SPELL_AURA_MOD_FEAR, AURA_EFFECT_HANDLE_REAL);
DEBUG:refactor.py:277:format_first_block_in_file():021:    }
DEBUG:refactor.py:277:format_first_block_in_file():022:};
DEBUG:refactor.py:277:format_first_block_in_file():023:
DEBUG:refactor.py:277:format_first_block_in_file():024:    RegisterSpellScript(spell_yogg_saron_malady_of_the_mind_aura);
INFO:refactor.py:263:format_first_block_in_file():path_in='tests/test_spell_script/spell_script_read.cpp'
INFO:refactor.py:264:format_first_block_in_file():path_out='tests/test_spell_script/spell_script_write.cpp'
DEBUG:refactor.py:268:format_first_block_in_file():len(lines)=47 path_in='tests/test_spell_script/spell_script_read.cpp'
DEBUG:refactor.py:018:find_start_last_index():2 line='class spell_yogg_saron_titanic_storm : public SpellScriptLoader'
DEBUG:refactor.py:018:find_start_last_index():3 line='{'
DEBUG:refactor.py:018:find_start_last_index():4 line='public:'
DEBUG:refactor.py:018:find_start_last_index():5 line='    spell_yogg_saron_titanic_storm() : SpellScriptLoader("spell_yogg_saron_titanic_storm") { }'
DEBUG:refactor.py:018:find_start_last_index():6 line=''
DEBUG:refactor.py:018:find_start_last_index():7 line='    class spell_yogg_saron_titanic_storm_SpellScript : public SpellScript'
DEBUG:refactor.py:018:find_start_last_index():8 line='    {'
DEBUG:refactor.py:018:find_start_last_index():9 line='        PrepareSpellScript(spell_yogg_saron_titanic_storm_SpellScript);'
DEBUG:refactor.py:018:find_start_last_index():10 line=''
DEBUG:refactor.py:018:find_start_last_index():11 line='        void HandleDummyEffect(SpellEffIndex effIndex)'
DEBUG:refactor.py:018:find_start_last_index():12 line='        {'
DEBUG:refactor.py:018:find_start_last_index():13 line='            PreventHitDefaultEffect(effIndex);'
DEBUG:refactor.py:018:find_start_last_index():14 line='            if (Unit* target = GetHitUnit())'
DEBUG:refactor.py:018:find_start_last_index():15 line='                Unit::Kill(GetCaster(), target);'
DEBUG:refactor.py:018:find_start_last_index():16 line='        }'
DEBUG:refactor.py:018:find_start_last_index():17 line=''
DEBUG:refactor.py:018:find_start_last_index():18 line='        void FilterTargets(std::list<WorldObject*>& targets)'
DEBUG:refactor.py:018:find_start_last_index():19 line='        {'
DEBUG:refactor.py:018:find_start_last_index():20 line='            WorldObject* target = nullptr;'
DEBUG:refactor.py:018:find_start_last_index():21 line='            for (std::list<WorldObject*>::iterator itr = targets.begin(); itr != targets.end(); ++itr)'
DEBUG:refactor.py:018:find_start_last_index():22 line='                if ((*itr)->ToUnit()->HasAura(SPELL_WEAKENED))'
DEBUG:refactor.py:018:find_start_last_index():23 line='                {'
DEBUG:refactor.py:018:find_start_last_index():24 line='                    target = *itr;'
DEBUG:refactor.py:018:find_start_last_index():25 line='                    break;'
DEBUG:refactor.py:018:find_start_last_index():26 line='                }'
DEBUG:refactor.py:018:find_start_last_index():27 line=''
DEBUG:refactor.py:018:find_start_last_index():28 line='            targets.clear();'
DEBUG:refactor.py:018:find_start_last_index():29 line='            if (target)'
DEBUG:refactor.py:018:find_start_last_index():30 line='                targets.push_back(target);'
DEBUG:refactor.py:018:find_start_last_index():31 line='        }'
DEBUG:refactor.py:018:find_start_last_index():32 line=''
DEBUG:refactor.py:018:find_start_last_index():33 line='        void Register() override'
DEBUG:refactor.py:018:find_start_last_index():34 line='        {'
DEBUG:refactor.py:018:find_start_last_index():35 line='            OnEffectHitTarget += SpellEffectFn(spell_yogg_saron_titanic_storm_SpellScript::HandleDummyEffect, EFFECT_0, SPELL_EFFECT_DUMMY);'
DEBUG:refactor.py:018:find_start_last_index():36 line='            OnObjectAreaTargetSelect += SpellObjectAreaTargetSelectFn(spell_yogg_saron_titanic_storm_SpellScript::FilterTargets, EFFECT_0, TARGET_UNIT_SRC_AREA_ENTRY);'
DEBUG:refactor.py:018:find_start_last_index():37 line='        }'
DEBUG:refactor.py:018:find_start_last_index():38 line='    };'
DEBUG:refactor.py:018:find_start_last_index():39 line=''
DEBUG:refactor.py:018:find_start_last_index():40 line='    SpellScript* GetSpellScript() const override'
DEBUG:refactor.py:018:find_start_last_index():41 line='    {'
DEBUG:refactor.py:018:find_start_last_index():42 line='        return new spell_yogg_saron_titanic_storm_SpellScript();'
DEBUG:refactor.py:018:find_start_last_index():43 line='    }'
DEBUG:refactor.py:018:find_start_last_index():44 line='};'
DEBUG:refactor.py:223:convert_function_block():start_index=2last_index=44
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:039:     get_script_type():SpellScript line='    class spell_yogg_saron_titanic_storm_SpellScript : public SpellScript'
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:039:     get_script_type():SpellScript line='        PrepareSpellScript(spell_yogg_saron_titanic_storm_SpellScript);'
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:039:     get_script_type():SpellScript line='            OnEffectHitTarget += SpellEffectFn(spell_yogg_saron_titanic_storm_SpellScript::HandleDummyEffect, EFFECT_0, SPELL_EFFECT_DUMMY);'
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:039:     get_script_type():SpellScript line='            OnObjectAreaTargetSelect += SpellObjectAreaTargetSelectFn(spell_yogg_saron_titanic_storm_SpellScript::FilterTargets, EFFECT_0, TARGET_UNIT_SRC_AREA_ENTRY);'
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:039:     get_script_type():SpellScript line='    SpellScript* GetSpellScript() const override'
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:039:     get_script_type():SpellScript line='        return new spell_yogg_saron_titanic_storm_SpellScript();'
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:225:convert_function_block():script_type=<ScriptType.SPELL: 2>
DEBUG:refactor.py:027: find_name_of_script():name='spell_yogg_saron_titanic_storm'
DEBUG:refactor.py:228:convert_function_block():script_name='spell_yogg_saron_titanic_storm'
DEBUG:refactor.py:054:find_register_start_end_index():start_index=0
DEBUG:refactor.py:056:find_register_start_end_index():000;class spell_yogg_saron_titanic_storm : public SpellScriptLoader
DEBUG:refactor.py:056:find_register_start_end_index():001;{
DEBUG:refactor.py:056:find_register_start_end_index():002;public:
DEBUG:refactor.py:056:find_register_start_end_index():003;    spell_yogg_saron_titanic_storm() : SpellScriptLoader("spell_yogg_saron_titanic_storm") { }
DEBUG:refactor.py:056:find_register_start_end_index():004;
DEBUG:refactor.py:056:find_register_start_end_index():005;    class spell_yogg_saron_titanic_storm_SpellScript : public SpellScript
DEBUG:refactor.py:056:find_register_start_end_index():006;    {
DEBUG:refactor.py:056:find_register_start_end_index():007;        PrepareSpellScript(spell_yogg_saron_titanic_storm_SpellScript);
DEBUG:refactor.py:056:find_register_start_end_index():008;
DEBUG:refactor.py:056:find_register_start_end_index():009;        void HandleDummyEffect(SpellEffIndex effIndex)
DEBUG:refactor.py:056:find_register_start_end_index():010;        {
DEBUG:refactor.py:056:find_register_start_end_index():011;            PreventHitDefaultEffect(effIndex);
DEBUG:refactor.py:056:find_register_start_end_index():012;            if (Unit* target = GetHitUnit())
DEBUG:refactor.py:056:find_register_start_end_index():013;                Unit::Kill(GetCaster(), target);
DEBUG:refactor.py:056:find_register_start_end_index():014;        }
DEBUG:refactor.py:056:find_register_start_end_index():015;
DEBUG:refactor.py:056:find_register_start_end_index():016;        void FilterTargets(std::list<WorldObject*>& targets)
DEBUG:refactor.py:056:find_register_start_end_index():017;        {
DEBUG:refactor.py:056:find_register_start_end_index():018;            WorldObject* target = nullptr;
DEBUG:refactor.py:056:find_register_start_end_index():019;            for (std::list<WorldObject*>::iterator itr = targets.begin(); itr != targets.end(); ++itr)
DEBUG:refactor.py:056:find_register_start_end_index():020;                if ((*itr)->ToUnit()->HasAura(SPELL_WEAKENED))
DEBUG:refactor.py:056:find_register_start_end_index():021;                {
DEBUG:refactor.py:056:find_register_start_end_index():022;                    target = *itr;
DEBUG:refactor.py:056:find_register_start_end_index():023;                    break;
DEBUG:refactor.py:056:find_register_start_end_index():024;                }
DEBUG:refactor.py:056:find_register_start_end_index():025;
DEBUG:refactor.py:056:find_register_start_end_index():026;            targets.clear();
DEBUG:refactor.py:056:find_register_start_end_index():027;            if (target)
DEBUG:refactor.py:056:find_register_start_end_index():028;                targets.push_back(target);
DEBUG:refactor.py:056:find_register_start_end_index():029;        }
DEBUG:refactor.py:056:find_register_start_end_index():030;
DEBUG:refactor.py:056:find_register_start_end_index():031;        void Register() override
DEBUG:refactor.py:056:find_register_start_end_index():032;        {
DEBUG:refactor.py:056:find_register_start_end_index():033;            OnEffectHitTarget += SpellEffectFn(spell_yogg_saron_titanic_storm_SpellScript::HandleDummyEffect, EFFECT_0, SPELL_EFFECT_DUMMY);
DEBUG:refactor.py:056:find_register_start_end_index():034;            OnObjectAreaTargetSelect += SpellObjectAreaTargetSelectFn(spell_yogg_saron_titanic_storm_SpellScript::FilterTargets, EFFECT_0, TARGET_UNIT_SRC_AREA_ENTRY);
DEBUG:refactor.py:056:find_register_start_end_index():035;        }
DEBUG:refactor.py:063:find_register_start_end_index():31;31         void Register() override
DEBUG:refactor.py:064:find_register_start_end_index():35;35         }
DEBUG:refactor.py:072:find_register_statements():33;37
DEBUG:refactor.py:074:find_register_statements():000:            OnEffectHitTarget += SpellEffectFn(spell_yogg_saron_titanic_storm_SpellScript::HandleDummyEffect, EFFECT_0, SPELL_EFFECT_DUMMY);
DEBUG:refactor.py:074:find_register_statements():001:            OnObjectAreaTargetSelect += SpellObjectAreaTargetSelectFn(spell_yogg_saron_titanic_storm_SpellScript::FilterTargets, EFFECT_0, TARGET_UNIT_SRC_AREA_ENTRY);
DEBUG:refactor.py:088:format_register_statements():before:000:            OnEffectHitTarget += SpellEffectFn(spell_yogg_saron_titanic_storm_SpellScript::HandleDummyEffect, EFFECT_0, SPELL_EFFECT_DUMMY);
DEBUG:refactor.py:088:format_register_statements():before:001:            OnObjectAreaTargetSelect += SpellObjectAreaTargetSelectFn(spell_yogg_saron_titanic_storm_SpellScript::FilterTargets, EFFECT_0, TARGET_UNIT_SRC_AREA_ENTRY);
DEBUG:refactor.py:090:format_register_statements():after :000:        OnEffectHitTarget += SpellEffectFn(spell_yogg_saron_titanic_storm::HandleDummyEffect, EFFECT_0, SPELL_EFFECT_DUMMY);
DEBUG:refactor.py:090:format_register_statements():after :001:        OnObjectAreaTargetSelect += SpellObjectAreaTargetSelectFn(spell_yogg_saron_titanic_storm::FilterTargets, EFFECT_0, TARGET_UNIT_SRC_AREA_ENTRY);
DEBUG:refactor.py:103:find_content_start_end_index():absolute_start=7,absolute_end=31
DEBUG:refactor.py:145:format_content_statements():before:000:
DEBUG:refactor.py:145:format_content_statements():before:001:        void HandleDummyEffect(SpellEffIndex effIndex)
DEBUG:refactor.py:145:format_content_statements():before:002:        {
DEBUG:refactor.py:145:format_content_statements():before:003:            PreventHitDefaultEffect(effIndex);
DEBUG:refactor.py:145:format_content_statements():before:004:            if (Unit* target = GetHitUnit())
DEBUG:refactor.py:145:format_content_statements():before:005:                Unit::Kill(GetCaster(), target);
DEBUG:refactor.py:145:format_content_statements():before:006:        }
DEBUG:refactor.py:145:format_content_statements():before:007:
DEBUG:refactor.py:145:format_content_statements():before:008:        void FilterTargets(std::list<WorldObject*>& targets)
DEBUG:refactor.py:145:format_content_statements():before:009:        {
DEBUG:refactor.py:145:format_content_statements():before:010:            WorldObject* target = nullptr;
DEBUG:refactor.py:145:format_content_statements():before:011:            for (std::list<WorldObject*>::iterator itr = targets.begin(); itr != targets.end(); ++itr)
DEBUG:refactor.py:145:format_content_statements():before:012:                if ((*itr)->ToUnit()->HasAura(SPELL_WEAKENED))
DEBUG:refactor.py:145:format_content_statements():before:013:                {
DEBUG:refactor.py:145:format_content_statements():before:014:                    target = *itr;
DEBUG:refactor.py:145:format_content_statements():before:015:                    break;
DEBUG:refactor.py:145:format_content_statements():before:016:                }
DEBUG:refactor.py:145:format_content_statements():before:017:
DEBUG:refactor.py:145:format_content_statements():before:018:            targets.clear();
DEBUG:refactor.py:145:format_content_statements():before:019:            if (target)
DEBUG:refactor.py:145:format_content_statements():before:020:                targets.push_back(target);
DEBUG:refactor.py:145:format_content_statements():before:021:        }
DEBUG:refactor.py:145:format_content_statements():before:022:
DEBUG:refactor.py:147:format_content_statements():after :000:
DEBUG:refactor.py:147:format_content_statements():after :001:    void HandleDummyEffect(SpellEffIndex effIndex)
DEBUG:refactor.py:147:format_content_statements():after :002:    {
DEBUG:refactor.py:147:format_content_statements():after :003:        PreventHitDefaultEffect(effIndex);
DEBUG:refactor.py:147:format_content_statements():after :004:        if (Unit* target = GetHitUnit())
DEBUG:refactor.py:147:format_content_statements():after :005:            Unit::Kill(GetCaster(), target);
DEBUG:refactor.py:147:format_content_statements():after :006:    }
DEBUG:refactor.py:147:format_content_statements():after :007:
DEBUG:refactor.py:147:format_content_statements():after :008:    void FilterTargets(std::list<WorldObject*>& targets)
DEBUG:refactor.py:147:format_content_statements():after :009:    {
DEBUG:refactor.py:147:format_content_statements():after :010:        WorldObject* target = nullptr;
DEBUG:refactor.py:147:format_content_statements():after :011:        for (std::list<WorldObject*>::iterator itr = targets.begin(); itr != targets.end(); ++itr)
DEBUG:refactor.py:147:format_content_statements():after :012:            if ((*itr)->ToUnit()->HasAura(SPELL_WEAKENED))
DEBUG:refactor.py:147:format_content_statements():after :013:            {
DEBUG:refactor.py:147:format_content_statements():after :014:                target = *itr;
DEBUG:refactor.py:147:format_content_statements():after :015:                break;
DEBUG:refactor.py:147:format_content_statements():after :016:            }
DEBUG:refactor.py:147:format_content_statements():after :017:
DEBUG:refactor.py:147:format_content_statements():after :018:        targets.clear();
DEBUG:refactor.py:147:format_content_statements():after :019:        if (target)
DEBUG:refactor.py:147:format_content_statements():after :020:            targets.push_back(target);
DEBUG:refactor.py:147:format_content_statements():after :021:    }
DEBUG:refactor.py:147:format_content_statements():after :022:
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:000:class spell_yogg_saron_titanic_storm : public SpellScriptLoader
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:001:{
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:002:public:
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:003:    spell_yogg_saron_titanic_storm() : SpellScriptLoader("spell_yogg_saron_titanic_storm") { }
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:004:
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:005:    class spell_yogg_saron_titanic_storm_SpellScript : public SpellScript
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:006:    {
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:007:        PrepareSpellScript(spell_yogg_saron_titanic_storm_SpellScript);
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:008:
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:009:        void HandleDummyEffect(SpellEffIndex effIndex)
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:010:        {
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:011:            PreventHitDefaultEffect(effIndex);
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:012:            if (Unit* target = GetHitUnit())
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:013:                Unit::Kill(GetCaster(), target);
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:014:        }
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:015:
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:016:        void FilterTargets(std::list<WorldObject*>& targets)
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:017:        {
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:018:            WorldObject* target = nullptr;
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:019:            for (std::list<WorldObject*>::iterator itr = targets.begin(); itr != targets.end(); ++itr)
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:020:                if ((*itr)->ToUnit()->HasAura(SPELL_WEAKENED))
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:021:                {
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:022:                    target = *itr;
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:023:                    break;
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:024:                }
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:025:
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:026:            targets.clear();
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:027:            if (target)
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:028:                targets.push_back(target);
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:029:        }
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:030:
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:031:        void Register() override
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:032:        {
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:033:            OnEffectHitTarget += SpellEffectFn(spell_yogg_saron_titanic_storm_SpellScript::HandleDummyEffect, EFFECT_0, SPELL_EFFECT_DUMMY);
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:034:            OnObjectAreaTargetSelect += SpellObjectAreaTargetSelectFn(spell_yogg_saron_titanic_storm_SpellScript::FilterTargets, EFFECT_0, TARGET_UNIT_SRC_AREA_ENTRY);
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:035:        }
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:036:    };
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:037:
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:038:    SpellScript* GetSpellScript() const override
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:039:    {
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:040:        return new spell_yogg_saron_titanic_storm_SpellScript();
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:041:    }
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:042:};
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :000:class spell_yogg_saron_titanic_storm : public SpellScript
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :001:{
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :002:    PrepareSpellScript(spell_yogg_saron_titanic_storm);
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :003:
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :004:    void HandleDummyEffect(SpellEffIndex effIndex)
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :005:    {
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :006:        PreventHitDefaultEffect(effIndex);
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :007:        if (Unit* target = GetHitUnit())
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :008:            Unit::Kill(GetCaster(), target);
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :009:    }
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :010:
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :011:    void FilterTargets(std::list<WorldObject*>& targets)
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :012:    {
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :013:        WorldObject* target = nullptr;
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :014:        for (std::list<WorldObject*>::iterator itr = targets.begin(); itr != targets.end(); ++itr)
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :015:            if ((*itr)->ToUnit()->HasAura(SPELL_WEAKENED))
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :016:            {
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :017:                target = *itr;
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :018:                break;
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :019:            }
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :020:
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :021:        targets.clear();
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :022:        if (target)
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :023:            targets.push_back(target);
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :024:    }
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :025:
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :026:    void Register() override
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :027:    {
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :028:        OnEffectHitTarget += SpellEffectFn(spell_yogg_saron_titanic_storm::HandleDummyEffect, EFFECT_0, SPELL_EFFECT_DUMMY);
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :029:        OnObjectAreaTargetSelect += SpellObjectAreaTargetSelectFn(spell_yogg_saron_titanic_storm::FilterTargets, EFFECT_0, TARGET_UNIT_SRC_AREA_ENTRY);
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :030:    }
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :031:};
DEBUG:refactor.py:246:format_RegisterSpellScript():register_statement='    RegisterSpellScript(spell_yogg_saron_titanic_storm);'
DEBUG:refactor.py:255:replace_new_with_RegisterSpellScript():script_name_search='new spell_yogg_saron_titanic_storm'
DEBUG:refactor.py:256:replace_new_with_RegisterSpellScript():script_name='spell_yogg_saron_titanic_storm'
DEBUG:refactor.py:257:replace_new_with_RegisterSpellScript():before:    RegisterSpellScript(spell_yogg_saron_titanic_storm);
DEBUG:refactor.py:258:replace_new_with_RegisterSpellScript():after :    RegisterSpellScript(spell_yogg_saron_titanic_storm);
DEBUG:refactor.py:277:format_first_block_in_file():000:
DEBUG:refactor.py:277:format_first_block_in_file():001:// 64172 - Titanic Storm
DEBUG:refactor.py:277:format_first_block_in_file():002:class spell_yogg_saron_titanic_storm : public SpellScript
DEBUG:refactor.py:277:format_first_block_in_file():003:{
DEBUG:refactor.py:277:format_first_block_in_file():004:    PrepareSpellScript(spell_yogg_saron_titanic_storm);
DEBUG:refactor.py:277:format_first_block_in_file():005:
DEBUG:refactor.py:277:format_first_block_in_file():006:    void HandleDummyEffect(SpellEffIndex effIndex)
DEBUG:refactor.py:277:format_first_block_in_file():007:    {
DEBUG:refactor.py:277:format_first_block_in_file():008:        PreventHitDefaultEffect(effIndex);
DEBUG:refactor.py:277:format_first_block_in_file():009:        if (Unit* target = GetHitUnit())
DEBUG:refactor.py:277:format_first_block_in_file():010:            Unit::Kill(GetCaster(), target);
DEBUG:refactor.py:277:format_first_block_in_file():011:    }
DEBUG:refactor.py:277:format_first_block_in_file():012:
DEBUG:refactor.py:277:format_first_block_in_file():013:    void FilterTargets(std::list<WorldObject*>& targets)
DEBUG:refactor.py:277:format_first_block_in_file():014:    {
DEBUG:refactor.py:277:format_first_block_in_file():015:        WorldObject* target = nullptr;
DEBUG:refactor.py:277:format_first_block_in_file():016:        for (std::list<WorldObject*>::iterator itr = targets.begin(); itr != targets.end(); ++itr)
DEBUG:refactor.py:277:format_first_block_in_file():017:            if ((*itr)->ToUnit()->HasAura(SPELL_WEAKENED))
DEBUG:refactor.py:277:format_first_block_in_file():018:            {
DEBUG:refactor.py:277:format_first_block_in_file():019:                target = *itr;
DEBUG:refactor.py:277:format_first_block_in_file():020:                break;
DEBUG:refactor.py:277:format_first_block_in_file():021:            }
DEBUG:refactor.py:277:format_first_block_in_file():022:
DEBUG:refactor.py:277:format_first_block_in_file():023:        targets.clear();
DEBUG:refactor.py:277:format_first_block_in_file():024:        if (target)
DEBUG:refactor.py:277:format_first_block_in_file():025:            targets.push_back(target);
DEBUG:refactor.py:277:format_first_block_in_file():026:    }
DEBUG:refactor.py:277:format_first_block_in_file():027:
DEBUG:refactor.py:277:format_first_block_in_file():028:    void Register() override
DEBUG:refactor.py:277:format_first_block_in_file():029:    {
DEBUG:refactor.py:277:format_first_block_in_file():030:        OnEffectHitTarget += SpellEffectFn(spell_yogg_saron_titanic_storm::HandleDummyEffect, EFFECT_0, SPELL_EFFECT_DUMMY);
DEBUG:refactor.py:277:format_first_block_in_file():031:        OnObjectAreaTargetSelect += SpellObjectAreaTargetSelectFn(spell_yogg_saron_titanic_storm::FilterTargets, EFFECT_0, TARGET_UNIT_SRC_AREA_ENTRY);
DEBUG:refactor.py:277:format_first_block_in_file():032:    }
DEBUG:refactor.py:277:format_first_block_in_file():033:};
DEBUG:refactor.py:277:format_first_block_in_file():034:
DEBUG:refactor.py:277:format_first_block_in_file():035:    RegisterSpellScript(spell_yogg_saron_titanic_storm);
DEBUG:refactor.py:018:find_start_last_index():2234 line='class spell_yogg_saron_malady_of_the_mind : public SpellScriptLoader'
DEBUG:refactor.py:018:find_start_last_index():2235 line='{'
DEBUG:refactor.py:018:find_start_last_index():2236 line='public:'
DEBUG:refactor.py:018:find_start_last_index():2237 line='    spell_yogg_saron_malady_of_the_mind() : SpellScriptLoader("spell_yogg_saron_malady_of_the_mind") { }'
DEBUG:refactor.py:018:find_start_last_index():2238 line=''
DEBUG:refactor.py:018:find_start_last_index():2239 line='    class spell_yogg_saron_malady_of_the_mind_AuraScript : public AuraScript'
DEBUG:refactor.py:018:find_start_last_index():2240 line='    {'
DEBUG:refactor.py:018:find_start_last_index():2241 line='        PrepareAuraScript(spell_yogg_saron_malady_of_the_mind_AuraScript);'
DEBUG:refactor.py:018:find_start_last_index():2242 line=''
DEBUG:refactor.py:018:find_start_last_index():2243 line='        void OnApply(AuraEffect const* /*aurEff*/, AuraEffectHandleModes /*mode*/)'
DEBUG:refactor.py:018:find_start_last_index():2244 line='        {'
DEBUG:refactor.py:018:find_start_last_index():2245 line='            GetUnitOwner()->ApplySpellImmune(SPELL_DEATH_RAY_DAMAGE_REAL, IMMUNITY_ID, SPELL_DEATH_RAY_DAMAGE_REAL, true);'
DEBUG:refactor.py:018:find_start_last_index():2246 line='        }'
DEBUG:refactor.py:018:find_start_last_index():2247 line=''
DEBUG:refactor.py:018:find_start_last_index():2248 line='        void OnRemove(AuraEffect const* /*aurEff*/, AuraEffectHandleModes /*mode*/)'
DEBUG:refactor.py:018:find_start_last_index():2249 line='        {'
DEBUG:refactor.py:018:find_start_last_index():2250 line='            GetUnitOwner()->ApplySpellImmune(SPELL_DEATH_RAY_DAMAGE_REAL, IMMUNITY_ID, SPELL_DEATH_RAY_DAMAGE_REAL, false);'
DEBUG:refactor.py:018:find_start_last_index():2251 line='            GetUnitOwner()->CastCustomSpell(SPELL_MALADY_OF_THE_MIND_TRIGGER, SPELLVALUE_MAX_TARGETS, 1, GetUnitOwner(), true);'
DEBUG:refactor.py:018:find_start_last_index():2252 line='        }'
DEBUG:refactor.py:018:find_start_last_index():2253 line=''
DEBUG:refactor.py:018:find_start_last_index():2254 line='        void Register() override'
DEBUG:refactor.py:018:find_start_last_index():2255 line='        {'
DEBUG:refactor.py:018:find_start_last_index():2256 line='            OnEffectApply += AuraEffectApplyFn(spell_yogg_saron_malady_of_the_mind_AuraScript::OnApply, EFFECT_1, SPELL_AURA_MOD_FEAR, AURA_EFFECT_HANDLE_REAL);'
DEBUG:refactor.py:018:find_start_last_index():2257 line='            OnEffectRemove += AuraEffectRemoveFn(spell_yogg_saron_malady_of_the_mind_AuraScript::OnRemove, EFFECT_1, SPELL_AURA_MOD_FEAR, AURA_EFFECT_HANDLE_REAL);'
DEBUG:refactor.py:018:find_start_last_index():2258 line='        }'
DEBUG:refactor.py:018:find_start_last_index():2259 line='    };'
DEBUG:refactor.py:018:find_start_last_index():2260 line=''
DEBUG:refactor.py:018:find_start_last_index():2261 line='    AuraScript* GetAuraScript() const override'
DEBUG:refactor.py:018:find_start_last_index():2262 line='    {'
DEBUG:refactor.py:018:find_start_last_index():2263 line='        return new spell_yogg_saron_malady_of_the_mind_AuraScript();'
DEBUG:refactor.py:018:find_start_last_index():2264 line='    }'
DEBUG:refactor.py:018:find_start_last_index():2265 line='};'
DEBUG:refactor.py:018:find_start_last_index():2234 line='class spell_yogg_saron_malady_of_the_mind : public SpellScriptLoader'
DEBUG:refactor.py:018:find_start_last_index():2235 line='{'
DEBUG:refactor.py:018:find_start_last_index():2236 line='public:'
DEBUG:refactor.py:018:find_start_last_index():2237 line='    spell_yogg_saron_malady_of_the_mind() : SpellScriptLoader("spell_yogg_saron_malady_of_the_mind") { }'
DEBUG:refactor.py:018:find_start_last_index():2238 line=''
DEBUG:refactor.py:018:find_start_last_index():2239 line='    class spell_yogg_saron_malady_of_the_mind_AuraScript : public AuraScript'
DEBUG:refactor.py:018:find_start_last_index():2240 line='    {'
DEBUG:refactor.py:018:find_start_last_index():2241 line='        PrepareAuraScript(spell_yogg_saron_malady_of_the_mind_AuraScript);'
DEBUG:refactor.py:018:find_start_last_index():2242 line=''
DEBUG:refactor.py:018:find_start_last_index():2243 line='        void OnApply(AuraEffect const* /*aurEff*/, AuraEffectHandleModes /*mode*/)'
DEBUG:refactor.py:018:find_start_last_index():2244 line='        {'
DEBUG:refactor.py:018:find_start_last_index():2245 line='            GetUnitOwner()->ApplySpellImmune(SPELL_DEATH_RAY_DAMAGE_REAL, IMMUNITY_ID, SPELL_DEATH_RAY_DAMAGE_REAL, true);'
DEBUG:refactor.py:018:find_start_last_index():2246 line='        }'
DEBUG:refactor.py:018:find_start_last_index():2247 line=''
DEBUG:refactor.py:018:find_start_last_index():2248 line='        void OnRemove(AuraEffect const* /*aurEff*/, AuraEffectHandleModes /*mode*/)'
DEBUG:refactor.py:018:find_start_last_index():2249 line='        {'
DEBUG:refactor.py:018:find_start_last_index():2250 line='            GetUnitOwner()->ApplySpellImmune(SPELL_DEATH_RAY_DAMAGE_REAL, IMMUNITY_ID, SPELL_DEATH_RAY_DAMAGE_REAL, false);'
DEBUG:refactor.py:018:find_start_last_index():2251 line='            GetUnitOwner()->CastCustomSpell(SPELL_MALADY_OF_THE_MIND_TRIGGER, SPELLVALUE_MAX_TARGETS, 1, GetUnitOwner(), true);'
DEBUG:refactor.py:018:find_start_last_index():2252 line='        }'
DEBUG:refactor.py:018:find_start_last_index():2253 line=''
DEBUG:refactor.py:018:find_start_last_index():2254 line='        void Register() override'
DEBUG:refactor.py:018:find_start_last_index():2255 line='        {'
DEBUG:refactor.py:018:find_start_last_index():2256 line='            OnEffectApply += AuraEffectApplyFn(spell_yogg_saron_malady_of_the_mind_AuraScript::OnApply, EFFECT_1, SPELL_AURA_MOD_FEAR, AURA_EFFECT_HANDLE_REAL);'
DEBUG:refactor.py:018:find_start_last_index():2257 line='            OnEffectRemove += AuraEffectRemoveFn(spell_yogg_saron_malady_of_the_mind_AuraScript::OnRemove, EFFECT_1, SPELL_AURA_MOD_FEAR, AURA_EFFECT_HANDLE_REAL);'
DEBUG:refactor.py:018:find_start_last_index():2258 line='        }'
DEBUG:refactor.py:018:find_start_last_index():2259 line='    };'
DEBUG:refactor.py:018:find_start_last_index():2260 line=''
DEBUG:refactor.py:018:find_start_last_index():2261 line='    AuraScript* GetAuraScript() const override'
DEBUG:refactor.py:018:find_start_last_index():2262 line='    {'
DEBUG:refactor.py:018:find_start_last_index():2263 line='        return new spell_yogg_saron_malady_of_the_mind_AuraScript();'
DEBUG:refactor.py:018:find_start_last_index():2264 line='    }'
DEBUG:refactor.py:018:find_start_last_index():2265 line='};'
DEBUG:refactor.py:027: find_name_of_script():name='spell_yogg_saron_malady_of_the_mind'
DEBUG:refactor.py:018:find_start_last_index():2234 line='class spell_yogg_saron_malady_of_the_mind : public SpellScriptLoader'
DEBUG:refactor.py:018:find_start_last_index():2235 line='{'
DEBUG:refactor.py:018:find_start_last_index():2236 line='public:'
DEBUG:refactor.py:018:find_start_last_index():2237 line='    spell_yogg_saron_malady_of_the_mind() : SpellScriptLoader("spell_yogg_saron_malady_of_the_mind") { }'
DEBUG:refactor.py:018:find_start_last_index():2238 line=''
DEBUG:refactor.py:018:find_start_last_index():2239 line='    class spell_yogg_saron_malady_of_the_mind_AuraScript : public AuraScript'
DEBUG:refactor.py:018:find_start_last_index():2240 line='    {'
DEBUG:refactor.py:018:find_start_last_index():2241 line='        PrepareAuraScript(spell_yogg_saron_malady_of_the_mind_AuraScript);'
DEBUG:refactor.py:018:find_start_last_index():2242 line=''
DEBUG:refactor.py:018:find_start_last_index():2243 line='        void OnApply(AuraEffect const* /*aurEff*/, AuraEffectHandleModes /*mode*/)'
DEBUG:refactor.py:018:find_start_last_index():2244 line='        {'
DEBUG:refactor.py:018:find_start_last_index():2245 line='            GetUnitOwner()->ApplySpellImmune(SPELL_DEATH_RAY_DAMAGE_REAL, IMMUNITY_ID, SPELL_DEATH_RAY_DAMAGE_REAL, true);'
DEBUG:refactor.py:018:find_start_last_index():2246 line='        }'
DEBUG:refactor.py:018:find_start_last_index():2247 line=''
DEBUG:refactor.py:018:find_start_last_index():2248 line='        void OnRemove(AuraEffect const* /*aurEff*/, AuraEffectHandleModes /*mode*/)'
DEBUG:refactor.py:018:find_start_last_index():2249 line='        {'
DEBUG:refactor.py:018:find_start_last_index():2250 line='            GetUnitOwner()->ApplySpellImmune(SPELL_DEATH_RAY_DAMAGE_REAL, IMMUNITY_ID, SPELL_DEATH_RAY_DAMAGE_REAL, false);'
DEBUG:refactor.py:018:find_start_last_index():2251 line='            GetUnitOwner()->CastCustomSpell(SPELL_MALADY_OF_THE_MIND_TRIGGER, SPELLVALUE_MAX_TARGETS, 1, GetUnitOwner(), true);'
DEBUG:refactor.py:018:find_start_last_index():2252 line='        }'
DEBUG:refactor.py:018:find_start_last_index():2253 line=''
DEBUG:refactor.py:018:find_start_last_index():2254 line='        void Register() override'
DEBUG:refactor.py:018:find_start_last_index():2255 line='        {'
DEBUG:refactor.py:018:find_start_last_index():2256 line='            OnEffectApply += AuraEffectApplyFn(spell_yogg_saron_malady_of_the_mind_AuraScript::OnApply, EFFECT_1, SPELL_AURA_MOD_FEAR, AURA_EFFECT_HANDLE_REAL);'
DEBUG:refactor.py:018:find_start_last_index():2257 line='            OnEffectRemove += AuraEffectRemoveFn(spell_yogg_saron_malady_of_the_mind_AuraScript::OnRemove, EFFECT_1, SPELL_AURA_MOD_FEAR, AURA_EFFECT_HANDLE_REAL);'
DEBUG:refactor.py:018:find_start_last_index():2258 line='        }'
DEBUG:refactor.py:018:find_start_last_index():2259 line='    };'
DEBUG:refactor.py:018:find_start_last_index():2260 line=''
DEBUG:refactor.py:018:find_start_last_index():2261 line='    AuraScript* GetAuraScript() const override'
DEBUG:refactor.py:018:find_start_last_index():2262 line='    {'
DEBUG:refactor.py:018:find_start_last_index():2263 line='        return new spell_yogg_saron_malady_of_the_mind_AuraScript();'
DEBUG:refactor.py:018:find_start_last_index():2264 line='    }'
DEBUG:refactor.py:018:find_start_last_index():2265 line='};'
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:036:     get_script_type():AuraScript line='    class spell_yogg_saron_malady_of_the_mind_AuraScript : public AuraScript'
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:036:     get_script_type():AuraScript line='        PrepareAuraScript(spell_yogg_saron_malady_of_the_mind_AuraScript);'
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:036:     get_script_type():AuraScript line='            OnEffectApply += AuraEffectApplyFn(spell_yogg_saron_malady_of_the_mind_AuraScript::OnApply, EFFECT_1, SPELL_AURA_MOD_FEAR, AURA_EFFECT_HANDLE_REAL);'
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:036:     get_script_type():AuraScript line='            OnEffectRemove += AuraEffectRemoveFn(spell_yogg_saron_malady_of_the_mind_AuraScript::OnRemove, EFFECT_1, SPELL_AURA_MOD_FEAR, AURA_EFFECT_HANDLE_REAL);'
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:036:     get_script_type():AuraScript line='    AuraScript* GetAuraScript() const override'
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:036:     get_script_type():AuraScript line='        return new spell_yogg_saron_malady_of_the_mind_AuraScript();'
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:018:find_start_last_index():2234 line='class spell_yogg_saron_malady_of_the_mind : public SpellScriptLoader'
DEBUG:refactor.py:018:find_start_last_index():2235 line='{'
DEBUG:refactor.py:018:find_start_last_index():2236 line='public:'
DEBUG:refactor.py:018:find_start_last_index():2237 line='    spell_yogg_saron_malady_of_the_mind() : SpellScriptLoader("spell_yogg_saron_malady_of_the_mind") { }'
DEBUG:refactor.py:018:find_start_last_index():2238 line=''
DEBUG:refactor.py:018:find_start_last_index():2239 line='    class spell_yogg_saron_malady_of_the_mind_AuraScript : public AuraScript'
DEBUG:refactor.py:018:find_start_last_index():2240 line='    {'
DEBUG:refactor.py:018:find_start_last_index():2241 line='        PrepareAuraScript(spell_yogg_saron_malady_of_the_mind_AuraScript);'
DEBUG:refactor.py:018:find_start_last_index():2242 line=''
DEBUG:refactor.py:018:find_start_last_index():2243 line='        void OnApply(AuraEffect const* /*aurEff*/, AuraEffectHandleModes /*mode*/)'
DEBUG:refactor.py:018:find_start_last_index():2244 line='        {'
DEBUG:refactor.py:018:find_start_last_index():2245 line='            GetUnitOwner()->ApplySpellImmune(SPELL_DEATH_RAY_DAMAGE_REAL, IMMUNITY_ID, SPELL_DEATH_RAY_DAMAGE_REAL, true);'
DEBUG:refactor.py:018:find_start_last_index():2246 line='        }'
DEBUG:refactor.py:018:find_start_last_index():2247 line=''
DEBUG:refactor.py:018:find_start_last_index():2248 line='        void OnRemove(AuraEffect const* /*aurEff*/, AuraEffectHandleModes /*mode*/)'
DEBUG:refactor.py:018:find_start_last_index():2249 line='        {'
DEBUG:refactor.py:018:find_start_last_index():2250 line='            GetUnitOwner()->ApplySpellImmune(SPELL_DEATH_RAY_DAMAGE_REAL, IMMUNITY_ID, SPELL_DEATH_RAY_DAMAGE_REAL, false);'
DEBUG:refactor.py:018:find_start_last_index():2251 line='            GetUnitOwner()->CastCustomSpell(SPELL_MALADY_OF_THE_MIND_TRIGGER, SPELLVALUE_MAX_TARGETS, 1, GetUnitOwner(), true);'
DEBUG:refactor.py:018:find_start_last_index():2252 line='        }'
DEBUG:refactor.py:018:find_start_last_index():2253 line=''
DEBUG:refactor.py:018:find_start_last_index():2254 line='        void Register() override'
DEBUG:refactor.py:018:find_start_last_index():2255 line='        {'
DEBUG:refactor.py:018:find_start_last_index():2256 line='            OnEffectApply += AuraEffectApplyFn(spell_yogg_saron_malady_of_the_mind_AuraScript::OnApply, EFFECT_1, SPELL_AURA_MOD_FEAR, AURA_EFFECT_HANDLE_REAL);'
DEBUG:refactor.py:018:find_start_last_index():2257 line='            OnEffectRemove += AuraEffectRemoveFn(spell_yogg_saron_malady_of_the_mind_AuraScript::OnRemove, EFFECT_1, SPELL_AURA_MOD_FEAR, AURA_EFFECT_HANDLE_REAL);'
DEBUG:refactor.py:018:find_start_last_index():2258 line='        }'
DEBUG:refactor.py:018:find_start_last_index():2259 line='    };'
DEBUG:refactor.py:018:find_start_last_index():2260 line=''
DEBUG:refactor.py:018:find_start_last_index():2261 line='    AuraScript* GetAuraScript() const override'
DEBUG:refactor.py:018:find_start_last_index():2262 line='    {'
DEBUG:refactor.py:018:find_start_last_index():2263 line='        return new spell_yogg_saron_malady_of_the_mind_AuraScript();'
DEBUG:refactor.py:018:find_start_last_index():2264 line='    }'
DEBUG:refactor.py:018:find_start_last_index():2265 line='};'
DEBUG:refactor.py:054:find_register_start_end_index():start_index=2234
DEBUG:refactor.py:056:find_register_start_end_index():000;class spell_yogg_saron_malady_of_the_mind : public SpellScriptLoader
DEBUG:refactor.py:056:find_register_start_end_index():001;{
DEBUG:refactor.py:056:find_register_start_end_index():002;public:
DEBUG:refactor.py:056:find_register_start_end_index():003;    spell_yogg_saron_malady_of_the_mind() : SpellScriptLoader("spell_yogg_saron_malady_of_the_mind") { }
DEBUG:refactor.py:056:find_register_start_end_index():004;
DEBUG:refactor.py:056:find_register_start_end_index():005;    class spell_yogg_saron_malady_of_the_mind_AuraScript : public AuraScript
DEBUG:refactor.py:056:find_register_start_end_index():006;    {
DEBUG:refactor.py:056:find_register_start_end_index():007;        PrepareAuraScript(spell_yogg_saron_malady_of_the_mind_AuraScript);
DEBUG:refactor.py:056:find_register_start_end_index():008;
DEBUG:refactor.py:056:find_register_start_end_index():009;        void OnApply(AuraEffect const* /*aurEff*/, AuraEffectHandleModes /*mode*/)
DEBUG:refactor.py:056:find_register_start_end_index():010;        {
DEBUG:refactor.py:056:find_register_start_end_index():011;            GetUnitOwner()->ApplySpellImmune(SPELL_DEATH_RAY_DAMAGE_REAL, IMMUNITY_ID, SPELL_DEATH_RAY_DAMAGE_REAL, true);
DEBUG:refactor.py:056:find_register_start_end_index():012;        }
DEBUG:refactor.py:056:find_register_start_end_index():013;
DEBUG:refactor.py:056:find_register_start_end_index():014;        void OnRemove(AuraEffect const* /*aurEff*/, AuraEffectHandleModes /*mode*/)
DEBUG:refactor.py:056:find_register_start_end_index():015;        {
DEBUG:refactor.py:056:find_register_start_end_index():016;            GetUnitOwner()->ApplySpellImmune(SPELL_DEATH_RAY_DAMAGE_REAL, IMMUNITY_ID, SPELL_DEATH_RAY_DAMAGE_REAL, false);
DEBUG:refactor.py:056:find_register_start_end_index():017;            GetUnitOwner()->CastCustomSpell(SPELL_MALADY_OF_THE_MIND_TRIGGER, SPELLVALUE_MAX_TARGETS, 1, GetUnitOwner(), true);
DEBUG:refactor.py:056:find_register_start_end_index():018;        }
DEBUG:refactor.py:056:find_register_start_end_index():019;
DEBUG:refactor.py:056:find_register_start_end_index():020;        void Register() override
DEBUG:refactor.py:056:find_register_start_end_index():021;        {
DEBUG:refactor.py:056:find_register_start_end_index():022;            OnEffectApply += AuraEffectApplyFn(spell_yogg_saron_malady_of_the_mind_AuraScript::OnApply, EFFECT_1, SPELL_AURA_MOD_FEAR, AURA_EFFECT_HANDLE_REAL);
DEBUG:refactor.py:056:find_register_start_end_index():023;            OnEffectRemove += AuraEffectRemoveFn(spell_yogg_saron_malady_of_the_mind_AuraScript::OnRemove, EFFECT_1, SPELL_AURA_MOD_FEAR, AURA_EFFECT_HANDLE_REAL);
DEBUG:refactor.py:056:find_register_start_end_index():024;        }
DEBUG:refactor.py:063:find_register_start_end_index():20;2254 #include "Object.h"
DEBUG:refactor.py:064:find_register_start_end_index():24;2258 #include "ScriptedCreature.h"
DEBUG:refactor.py:054:find_register_start_end_index():start_index=0
DEBUG:refactor.py:056:find_register_start_end_index():000; * This file is part of the AzerothCore Project. See AUTHORS file for Copyright information
DEBUG:refactor.py:056:find_register_start_end_index():001; *
DEBUG:refactor.py:056:find_register_start_end_index():002; * This program is free software; you can redistribute it and/or modify it
DEBUG:refactor.py:056:find_register_start_end_index():003; * under the terms of the GNU Affero General Public License as published by the
DEBUG:refactor.py:056:find_register_start_end_index():004; * Free Software Foundation; either version 3 of the License, or (at your
DEBUG:refactor.py:056:find_register_start_end_index():005; * option) any later version.
DEBUG:refactor.py:056:find_register_start_end_index():006; *
DEBUG:refactor.py:056:find_register_start_end_index():007; * This program is distributed in the hope that it will be useful, but WITHOUT
DEBUG:refactor.py:056:find_register_start_end_index():008; * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
DEBUG:refactor.py:056:find_register_start_end_index():009; * FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero General Public License for
DEBUG:refactor.py:056:find_register_start_end_index():010; * more details.
DEBUG:refactor.py:056:find_register_start_end_index():011; *
DEBUG:refactor.py:056:find_register_start_end_index():012; * You should have received a copy of the GNU General Public License along
DEBUG:refactor.py:056:find_register_start_end_index():013; * with this program. If not, see <http://www.gnu.org/licenses/>.
DEBUG:refactor.py:056:find_register_start_end_index():014; */
DEBUG:refactor.py:056:find_register_start_end_index():015;
DEBUG:refactor.py:056:find_register_start_end_index():016;#include "AchievementCriteriaScript.h"
DEBUG:refactor.py:056:find_register_start_end_index():017;#include "CreatureAI.h"
DEBUG:refactor.py:056:find_register_start_end_index():018;#include "CreatureScript.h"
DEBUG:refactor.py:056:find_register_start_end_index():019;#include "Object.h"
DEBUG:refactor.py:056:find_register_start_end_index():020;#include "Opcodes.h"
DEBUG:refactor.py:056:find_register_start_end_index():021;#include "PassiveAI.h"
DEBUG:refactor.py:056:find_register_start_end_index():022;#include "Player.h"
DEBUG:refactor.py:056:find_register_start_end_index():023;#include "ScriptedCreature.h"
DEBUG:refactor.py:056:find_register_start_end_index():024;#include "ScriptedEscortAI.h"
DEBUG:refactor.py:056:find_register_start_end_index():025;#include "SpellAuras.h"
DEBUG:refactor.py:056:find_register_start_end_index():026;#include "SpellScript.h"
DEBUG:refactor.py:056:find_register_start_end_index():027;#include "SpellScriptLoader.h"
DEBUG:refactor.py:056:find_register_start_end_index():028;#include "ulduar.h"
DEBUG:refactor.py:056:find_register_start_end_index():029;
DEBUG:refactor.py:056:find_register_start_end_index():030;enum YoggSpells
DEBUG:refactor.py:056:find_register_start_end_index():031;{
DEBUG:refactor.py:056:find_register_start_end_index():032;    // KEEPERS
DEBUG:refactor.py:056:find_register_start_end_index():033;    SPELL_KEEPER_ACTIVE                 = 62647,
DEBUG:refactor.py:056:find_register_start_end_index():034;    SPELL_MIMIRON_PASSIVE               = 62671,
DEBUG:refactor.py:056:find_register_start_end_index():035;    SPELL_THORIM_PASSIVE                = 62702,
DEBUG:refactor.py:056:find_register_start_end_index():036;    SPELL_HODIR_PASSIVE                 = 62650,
DEBUG:refactor.py:056:find_register_start_end_index():037;    SPELL_FREYA_PASSIVE                 = 62670,
DEBUG:refactor.py:056:find_register_start_end_index():038;
DEBUG:refactor.py:056:find_register_start_end_index():039;    SPELL_DESTABILIZATION_MATRIX        = 65206,
DEBUG:refactor.py:056:find_register_start_end_index():040;    SPELL_DESTABILIZATION_MATRIX_ATTACK = 65210,
DEBUG:refactor.py:056:find_register_start_end_index():041;    SPELL_SANITY_WELL_VISUAL            = 63288,
DEBUG:refactor.py:056:find_register_start_end_index():042;    SPELL_SANITY_WELL_BUFF              = 64169,
DEBUG:refactor.py:056:find_register_start_end_index():043;    SPELL_PROTECTIVE_GAZE               = 64174, // COOLDOWN 25 SECS BEFORE NEXT USE
DEBUG:refactor.py:056:find_register_start_end_index():044;    SPELL_HODIR_FLASH_FREEZE            = 64175,
DEBUG:refactor.py:056:find_register_start_end_index():045;    SPELL_CONJURE_SANITY_WELL           = 64170,
DEBUG:refactor.py:056:find_register_start_end_index():046;
DEBUG:refactor.py:056:find_register_start_end_index():047;    SPELL_TITANIC_STORM_PASSIVE         = 64171,
DEBUG:refactor.py:056:find_register_start_end_index():048;    SPELL_WEAKENED                      = 64162,
DEBUG:refactor.py:056:find_register_start_end_index():049;
DEBUG:refactor.py:056:find_register_start_end_index():050;    // GLOBAL
DEBUG:refactor.py:056:find_register_start_end_index():051;    SPELL_SANITY_BASE                   = 63786,
DEBUG:refactor.py:056:find_register_start_end_index():052;    SPELL_SANITY                        = 63050,
DEBUG:refactor.py:056:find_register_start_end_index():053;    SPELL_EXTINGUISH_ALL_LIFE           = 64166,
DEBUG:refactor.py:056:find_register_start_end_index():054;    SPELL_CLOUD_VISUAL                  = 63084,
DEBUG:refactor.py:056:find_register_start_end_index():055;    SPELL_SUMMON_GUARDIAN_OF_YS         = 63031,
DEBUG:refactor.py:056:find_register_start_end_index():056;    SPELL_INSANE1                       = 63120,
DEBUG:refactor.py:056:find_register_start_end_index():057;    SPELL_INSANE2                       = 64464,
DEBUG:refactor.py:056:find_register_start_end_index():058;    SPELL_INSANE_PERIODIC               = 64554, // this checks if player dc'ed and insanes him instantly after logging in
DEBUG:refactor.py:056:find_register_start_end_index():059;
DEBUG:refactor.py:056:find_register_start_end_index():060;    // SARA P1
DEBUG:refactor.py:056:find_register_start_end_index():061;    SPELL_SARAS_FAVOR                       = 63138,
DEBUG:refactor.py:056:find_register_start_end_index():062;    SPELL_SARAS_FAVOR_TARGET_SELECTOR       = 63747,
DEBUG:refactor.py:056:find_register_start_end_index():063;    SPELL_SARAS_BLESSING                    = 63134,
DEBUG:refactor.py:056:find_register_start_end_index():064;    SPELL_SARAS_BLESSING_TARGET_SELECTOR    = 63745,
DEBUG:refactor.py:056:find_register_start_end_index():065;    SPELL_SARAS_ANGER                       = 63147,
DEBUG:refactor.py:056:find_register_start_end_index():066;    SPELL_SARAS_ANGER_TARGET_SELECTOR       = 63744,
DEBUG:refactor.py:056:find_register_start_end_index():067;    SPELL_SHADOWY_BARRIER                   = 64775,
DEBUG:refactor.py:056:find_register_start_end_index():068;
DEBUG:refactor.py:056:find_register_start_end_index():069;    // GUARDIANS OF YOGG-SARON
DEBUG:refactor.py:056:find_register_start_end_index():070;    SPELL_SHADOW_NOVA                   = 62714,
DEBUG:refactor.py:056:find_register_start_end_index():071;    SPELL_DARK_VOLLEY                   = 63038,
DEBUG:refactor.py:056:find_register_start_end_index():072;
DEBUG:refactor.py:056:find_register_start_end_index():073;    // SARA P2
DEBUG:refactor.py:056:find_register_start_end_index():074;    SPELL_SARA_PSYCHOSIS_10             = 63795,
DEBUG:refactor.py:056:find_register_start_end_index():075;    SPELL_SARA_PSYCHOSIS_25             = 65301,
DEBUG:refactor.py:056:find_register_start_end_index():076;    SPELL_MALADY_OF_THE_MIND            = 63830,
DEBUG:refactor.py:056:find_register_start_end_index():077;    SPELL_MALADY_OF_THE_MIND_TRIGGER    = 63881,
DEBUG:refactor.py:056:find_register_start_end_index():078;    SPELL_BRAIN_LINK                    = 63802,
DEBUG:refactor.py:056:find_register_start_end_index():079;    SPELL_BRAIN_LINK_DAMAGE             = 63803,
DEBUG:refactor.py:056:find_register_start_end_index():080;    SPELL_BRAIN_LINK_OK                 = 63804,
DEBUG:refactor.py:056:find_register_start_end_index():081;
DEBUG:refactor.py:056:find_register_start_end_index():082;    SPELL_DEATH_RAY_DAMAGE_VISUAL       = 63886,
DEBUG:refactor.py:056:find_register_start_end_index():083;    SPELL_DEATH_RAY_ORIGIN_VISUAL       = 63893,
DEBUG:refactor.py:056:find_register_start_end_index():084;    SPELL_DEATH_RAY_WARNING             = 63882,
DEBUG:refactor.py:056:find_register_start_end_index():085;    SPELL_DEATH_RAY_DAMAGE              = 63883,
DEBUG:refactor.py:056:find_register_start_end_index():086;    SPELL_DEATH_RAY_DAMAGE_REAL         = 63884,
DEBUG:refactor.py:056:find_register_start_end_index():087;
DEBUG:refactor.py:056:find_register_start_end_index():088;    // YOGG-SARON P2
DEBUG:refactor.py:056:find_register_start_end_index():089;    SPELL_SHADOW_BARRIER                = 63894,
DEBUG:refactor.py:056:find_register_start_end_index():090;    SPELL_KNOCK_AWAY                    = 64022,
DEBUG:refactor.py:056:find_register_start_end_index():091;
DEBUG:refactor.py:056:find_register_start_end_index():092;    // TENTACLES
DEBUG:refactor.py:056:find_register_start_end_index():093;    SPELL_VOID_ZONE_SMALL               = 64384,
DEBUG:refactor.py:056:find_register_start_end_index():094;    SPELL_VOID_ZONE_LARGE               = 64017,
DEBUG:refactor.py:056:find_register_start_end_index():095;    SPELL_TENTACLE_ERUPT                = 64144,
DEBUG:refactor.py:056:find_register_start_end_index():096;
DEBUG:refactor.py:056:find_register_start_end_index():097;    // CRUSHER TENTACLE
DEBUG:refactor.py:056:find_register_start_end_index():098;    SPELL_CRUSH                         = 64146,
DEBUG:refactor.py:056:find_register_start_end_index():099;    SPELL_DIMINISH_POWER                = 64145,
DEBUG:refactor.py:056:find_register_start_end_index():100;    SPELL_FOCUSED_ANGER                 = 57688,
DEBUG:refactor.py:056:find_register_start_end_index():101;
DEBUG:refactor.py:056:find_register_start_end_index():102;    // CONSTRICTOR TENTACLE
DEBUG:refactor.py:056:find_register_start_end_index():103;    SPELL_LUNGE                         = 64123,
DEBUG:refactor.py:056:find_register_start_end_index():104;    SPELL_SQUEEZE_10                    = 64125,
DEBUG:refactor.py:056:find_register_start_end_index():105;    SPELL_SQUEEZE_25                    = 64126,
DEBUG:refactor.py:056:find_register_start_end_index():106;
DEBUG:refactor.py:056:find_register_start_end_index():107;    // CORRUPTOR TENTACLE
DEBUG:refactor.py:056:find_register_start_end_index():108;    SPELL_APATHY                        = 64156,
DEBUG:refactor.py:056:find_register_start_end_index():109;    SPELL_BLACK_PLAGUE                  = 64153,
DEBUG:refactor.py:056:find_register_start_end_index():110;    SPELL_CURSE_OF_DOOM                 = 64157,
DEBUG:refactor.py:056:find_register_start_end_index():111;    SPELL_DRAINING_POISON               = 64152,
DEBUG:refactor.py:056:find_register_start_end_index():112;
DEBUG:refactor.py:056:find_register_start_end_index():113;    // MISC
DEBUG:refactor.py:056:find_register_start_end_index():114;    SPELL_REVEALED_TENTACLE             = 64012,
DEBUG:refactor.py:056:find_register_start_end_index():115;    SPELL_IN_THE_MAWS_OF_THE_OLD_GOD    = 64184,
DEBUG:refactor.py:056:find_register_start_end_index():116;
DEBUG:refactor.py:056:find_register_start_end_index():117;    // BRAIN OF YOGG-SARON
DEBUG:refactor.py:056:find_register_start_end_index():118;    SPELL_SHATTERED_ILLUSION            = 64173,
DEBUG:refactor.py:056:find_register_start_end_index():119;    SPELL_INDUCE_MADNESS                = 64059,
DEBUG:refactor.py:056:find_register_start_end_index():120;    SPELL_BRAIN_HURT_VISUAL             = 64361,
DEBUG:refactor.py:056:find_register_start_end_index():121;
DEBUG:refactor.py:056:find_register_start_end_index():122;    // PORTALS
DEBUG:refactor.py:056:find_register_start_end_index():123;    SPELL_TELEPORT_TO_CHAMBER           = 63997,
DEBUG:refactor.py:056:find_register_start_end_index():124;    SPELL_TELEPORT_TO_ICECROWN          = 63998,
DEBUG:refactor.py:056:find_register_start_end_index():125;    SPELL_TELEPORT_TO_STORMWIND         = 63989,
DEBUG:refactor.py:056:find_register_start_end_index():126;    SPELL_TELEPORT_BACK                 = 63992,
DEBUG:refactor.py:056:find_register_start_end_index():127;    SPELL_CANCEL_ILLUSION_AURA          = 63993,
DEBUG:refactor.py:056:find_register_start_end_index():128;
DEBUG:refactor.py:056:find_register_start_end_index():129;    // LAUGHING SKULL AND INFLUENCE TENTACLE AND OTHERS
DEBUG:refactor.py:056:find_register_start_end_index():130;    SPELL_LUNATIC_GAZE                  = 64167,
DEBUG:refactor.py:056:find_register_start_end_index():131;    SPELL_GRIM_REPRISAL                 = 63305,
DEBUG:refactor.py:056:find_register_start_end_index():132;    SPELL_GRIM_REPRISAL_DAMAGE          = 64039,
DEBUG:refactor.py:056:find_register_start_end_index():133;    SPELL_DEATHGRASP                    = 63037,
DEBUG:refactor.py:056:find_register_start_end_index():134;
DEBUG:refactor.py:056:find_register_start_end_index():135;    // YOGG-SARON P3
DEBUG:refactor.py:056:find_register_start_end_index():136;    SPELL_LUNATIC_GAZE_YS               = 64163,
DEBUG:refactor.py:056:find_register_start_end_index():137;    SPELL_DEAFENING_ROAR                = 64189,
DEBUG:refactor.py:056:find_register_start_end_index():138;    SPELL_SHADOW_BEACON                 = 64465,
DEBUG:refactor.py:056:find_register_start_end_index():139;
DEBUG:refactor.py:056:find_register_start_end_index():140;    // IMMORTAL GUARDIAN
DEBUG:refactor.py:056:find_register_start_end_index():141;    SPELL_SIMPLE_TELEPORT               = 64195,
DEBUG:refactor.py:056:find_register_start_end_index():142;    SPELL_EMPOWERED                     = 65294,
DEBUG:refactor.py:056:find_register_start_end_index():143;    SPELL_EMPOWERED_PASSIVE             = 64161,
DEBUG:refactor.py:056:find_register_start_end_index():144;    SPELL_DRAIN_LIFE_10                 = 64159,
DEBUG:refactor.py:056:find_register_start_end_index():145;    SPELL_DRAIN_LIFE_25                 = 64160,
DEBUG:refactor.py:056:find_register_start_end_index():146;    SPELL_RECENTLY_SPAWNED              = 64497,
DEBUG:refactor.py:056:find_register_start_end_index():147;};
DEBUG:refactor.py:056:find_register_start_end_index():148;
DEBUG:refactor.py:056:find_register_start_end_index():149;#define SPELL_PSYCHOSIS         RAID_MODE(SPELL_SARA_PSYCHOSIS_10, SPELL_SARA_PSYCHOSIS_25)
DEBUG:refactor.py:056:find_register_start_end_index():150;#define SPELL_SQUEEZE           RAID_MODE(SPELL_SQUEEZE_10, SPELL_SQUEEZE_25)
DEBUG:refactor.py:056:find_register_start_end_index():151;#define SPELL_DRAIN_LIFE        RAID_MODE(SPELL_DRAIN_LIFE_10, SPELL_DRAIN_LIFE_25)
DEBUG:refactor.py:056:find_register_start_end_index():152;
DEBUG:refactor.py:056:find_register_start_end_index():153;enum YoggEvents
DEBUG:refactor.py:056:find_register_start_end_index():154;{
DEBUG:refactor.py:056:find_register_start_end_index():155;    EVENT_SARA_P1_DOORS_CLOSE           = 1,
DEBUG:refactor.py:056:find_register_start_end_index():156;    EVENT_SARA_P1_SUMMON                = 2,
DEBUG:refactor.py:056:find_register_start_end_index():157;    EVENT_SARA_P1_SPELLS                = 3,
DEBUG:refactor.py:056:find_register_start_end_index():158;    EVENT_SARA_P1_BERSERK               = 4,
DEBUG:refactor.py:056:find_register_start_end_index():159;
DEBUG:refactor.py:056:find_register_start_end_index():160;    EVENT_SARA_P2_START                 = 10,
DEBUG:refactor.py:056:find_register_start_end_index():161;    EVENT_SARA_P2_SUMMON_T1             = 11,
DEBUG:refactor.py:056:find_register_start_end_index():162;    EVENT_SARA_P2_SUMMON_T2             = 12,
DEBUG:refactor.py:056:find_register_start_end_index():163;    EVENT_SARA_P2_SUMMON_T3             = 13,
DEBUG:refactor.py:056:find_register_start_end_index():164;    EVENT_SARA_P2_BRAIN_LINK            = 14,
DEBUG:refactor.py:056:find_register_start_end_index():165;    EVENT_SARA_P2_DEATH_RAY             = 15,
DEBUG:refactor.py:056:find_register_start_end_index():166;    EVENT_SARA_P2_MALADY                = 16,
DEBUG:refactor.py:056:find_register_start_end_index():167;    EVENT_SARA_P2_PSYCHOSIS             = 17,
DEBUG:refactor.py:056:find_register_start_end_index():168;    EVENT_SARA_P2_OPEN_PORTALS          = 18,
DEBUG:refactor.py:056:find_register_start_end_index():169;    EVENT_SARA_P2_REMOVE_STUN           = 19,
DEBUG:refactor.py:056:find_register_start_end_index():170;    EVENT_SARA_P2_SPAWN_START_TENTACLES = 20,
DEBUG:refactor.py:056:find_register_start_end_index():171;
DEBUG:refactor.py:056:find_register_start_end_index():172;    EVENT_YS_LUNATIC_GAZE               = 30,
DEBUG:refactor.py:056:find_register_start_end_index():173;    EVENT_YS_DEAFENING_ROAR             = 31,
DEBUG:refactor.py:056:find_register_start_end_index():174;    EVENT_YS_SUMMON_GUARDIAN            = 32,
DEBUG:refactor.py:056:find_register_start_end_index():175;    EVENT_YS_SHADOW_BEACON              = 33,
DEBUG:refactor.py:056:find_register_start_end_index():176;};
DEBUG:refactor.py:056:find_register_start_end_index():177;
DEBUG:refactor.py:056:find_register_start_end_index():178;enum NPCsGOs
DEBUG:refactor.py:056:find_register_start_end_index():179;{
DEBUG:refactor.py:056:find_register_start_end_index():180;    // NPCs
DEBUG:refactor.py:056:find_register_start_end_index():181;    NPC_OMINOUS_CLOUD                   = 33292,
DEBUG:refactor.py:056:find_register_start_end_index():182;    NPC_GUARDIAN_OF_YS                  = 33136,
DEBUG:refactor.py:056:find_register_start_end_index():183;    NPC_SANITY_WELL                     = 33991,
DEBUG:refactor.py:056:find_register_start_end_index():184;    NPC_YOGG_SARON                      = 33288,
DEBUG:refactor.py:056:find_register_start_end_index():185;    NPC_VOICE_OF_YOGG_SARON             = 33280,
DEBUG:refactor.py:056:find_register_start_end_index():186;    NPC_YOGG_SARON_VISION               = 33552,
DEBUG:refactor.py:056:find_register_start_end_index():187;
DEBUG:refactor.py:056:find_register_start_end_index():188;    NPC_CRUSHER_TENTACLE                = 33966, // 50 secs ?
DEBUG:refactor.py:056:find_register_start_end_index():189;    NPC_CONSTRICTOR_TENTACLE            = 33983, // 15-20 secs ?
DEBUG:refactor.py:056:find_register_start_end_index():190;    NPC_CORRUPTOR_TENTACLE              = 33985, // 30-40 secs ?
DEBUG:refactor.py:056:find_register_start_end_index():191;
DEBUG:refactor.py:056:find_register_start_end_index():192;    NPC_INFLUENCE_TENTACLE              = 33943,
DEBUG:refactor.py:056:find_register_start_end_index():193;    NPC_DEATH_ORB                       = 33882,
DEBUG:refactor.py:056:find_register_start_end_index():194;    NPC_DESCEND_INTO_MADNESS            = 34072,
DEBUG:refactor.py:056:find_register_start_end_index():195;    NPC_LAUGHING_SKULL                  = 33990,
DEBUG:refactor.py:056:find_register_start_end_index():196;
DEBUG:refactor.py:056:find_register_start_end_index():197;    NPC_IMMORTAL_GUARDIAN               = 33988,
DEBUG:refactor.py:056:find_register_start_end_index():198;    NPC_MARKED_IMMORTAL_GUARDIAN        = 36064,
DEBUG:refactor.py:056:find_register_start_end_index():199;
DEBUG:refactor.py:056:find_register_start_end_index():200;    // CHAMBER ILLUSION
DEBUG:refactor.py:056:find_register_start_end_index():201;    NPC_CONSORT_FIRST                   = 33716,
DEBUG:refactor.py:056:find_register_start_end_index():202;    NPC_CONSORT_LAST                    = 33720,
DEBUG:refactor.py:056:find_register_start_end_index():203;    NPC_ALEXTRASZA                      = 33536,
DEBUG:refactor.py:056:find_register_start_end_index():204;    NPC_MALYGOS                         = 33535,
DEBUG:refactor.py:056:find_register_start_end_index():205;    NPC_NELTHARION                      = 33523,
DEBUG:refactor.py:056:find_register_start_end_index():206;    NPC_YSERA                           = 33495,
DEBUG:refactor.py:056:find_register_start_end_index():207;    GO_DRAGON_SOUL                      = 194462,
DEBUG:refactor.py:056:find_register_start_end_index():208;
DEBUG:refactor.py:056:find_register_start_end_index():209;    // ICECROWN ILLUSION
DEBUG:refactor.py:056:find_register_start_end_index():210;    NPC_DEATHSWORN_ZEALOT               = 33567,
DEBUG:refactor.py:056:find_register_start_end_index():211;    NPC_LICH_KING                       = 33441,
DEBUG:refactor.py:056:find_register_start_end_index():212;    NPC_IMMOLATED_CHAMPION              = 33442,
DEBUG:refactor.py:056:find_register_start_end_index():213;
DEBUG:refactor.py:056:find_register_start_end_index():214;    // STORMWIND ILLUSION
DEBUG:refactor.py:056:find_register_start_end_index():215;    NPC_SUIT_OF_ARMOR                   = 33433,
DEBUG:refactor.py:056:find_register_start_end_index():216;    NPC_GARONA                          = 33436,
DEBUG:refactor.py:056:find_register_start_end_index():217;    NPC_KING_LLANE                      = 33437,
DEBUG:refactor.py:056:find_register_start_end_index():218;
DEBUG:refactor.py:056:find_register_start_end_index():219;    // GOs
DEBUG:refactor.py:056:find_register_start_end_index():220;    GO_DOORS                            = 194773,
DEBUG:refactor.py:056:find_register_start_end_index():221;    GO_FLEE_TO_THE_SURFACE_PORTAL       = 194625,
DEBUG:refactor.py:056:find_register_start_end_index():222;    GO_CHAMBER_ILLUSION_DOORS           = 194635,
DEBUG:refactor.py:056:find_register_start_end_index():223;    GO_ICECROWN_ILLUSION_DOORS          = 194636,
DEBUG:refactor.py:056:find_register_start_end_index():224;    GO_STORMWIND_ILLUSION_DOORS         = 194637,
DEBUG:refactor.py:056:find_register_start_end_index():225;
DEBUG:refactor.py:056:find_register_start_end_index():226;    // MODELs
DEBUG:refactor.py:056:find_register_start_end_index():227;    SARA_TRANSFORM_MODEL                = 29182,
DEBUG:refactor.py:056:find_register_start_end_index():228;};
DEBUG:refactor.py:056:find_register_start_end_index():229;
DEBUG:refactor.py:056:find_register_start_end_index():230;enum Misc
DEBUG:refactor.py:056:find_register_start_end_index():231;{
DEBUG:refactor.py:056:find_register_start_end_index():232;    ACTION_UNSUMMON_CLOUDS              = -16,
DEBUG:refactor.py:056:find_register_start_end_index():233;    ACTION_DESPAWN_ADDS                 = -15,
DEBUG:refactor.py:056:find_register_start_end_index():234;    ACTION_START_SUMMONING              = -14,
DEBUG:refactor.py:056:find_register_start_end_index():235;    ACTION_YOGG_SARON_APPEAR            = -13,
DEBUG:refactor.py:056:find_register_start_end_index():236;    ACTION_YOGG_SARON_DEATH             = -12,
DEBUG:refactor.py:056:find_register_start_end_index():237;    ACTION_YOGG_SARON_START_YELL        = -11,
DEBUG:refactor.py:056:find_register_start_end_index():238;    ACTION_YOGG_SARON_OPEN_PORTAL_YELL  = -10,
DEBUG:refactor.py:056:find_register_start_end_index():239;    ACTION_INFLUENCE_TENTACLE_DIED      = -9,
DEBUG:refactor.py:056:find_register_start_end_index():240;    ACTION_BRAIN_DAMAGED                = -8,
DEBUG:refactor.py:056:find_register_start_end_index():241;    ACTION_REMOVE_STUN                  = -7,
DEBUG:refactor.py:056:find_register_start_end_index():242;    ACTION_YOGG_SARON_START_P3          = -6,
DEBUG:refactor.py:056:find_register_start_end_index():243;    ACTION_YOGG_SARON_HARD_MODE         = -5,
DEBUG:refactor.py:056:find_register_start_end_index():244;    ACTION_YOGG_SARON_SHADOW_BEACON     = -4,
DEBUG:refactor.py:056:find_register_start_end_index():245;    ACTION_THORIM_START_STORM           = -3,
DEBUG:refactor.py:056:find_register_start_end_index():246;    ACTION_FAILED_DRIVE_ME_CRAZY        = -2,
DEBUG:refactor.py:056:find_register_start_end_index():247;
DEBUG:refactor.py:056:find_register_start_end_index():248;    ACTION_ILLUSION_DRAGONS             = 1,
DEBUG:refactor.py:056:find_register_start_end_index():249;    ACTION_ILLUSION_ICECROWN            = 2,
DEBUG:refactor.py:056:find_register_start_end_index():250;    ACTION_ILLUSION_STORMWIND           = 3,
DEBUG:refactor.py:056:find_register_start_end_index():251;
DEBUG:refactor.py:056:find_register_start_end_index():252;    EVENT_PHASE_ONE                     = 1,
DEBUG:refactor.py:056:find_register_start_end_index():253;    EVENT_PHASE_TWO                     = 2,
DEBUG:refactor.py:056:find_register_start_end_index():254;    EVENT_PHASE_THREE                   = 3,
DEBUG:refactor.py:056:find_register_start_end_index():255;
DEBUG:refactor.py:056:find_register_start_end_index():256;    CRITERIA_NOT_GETTING_OLDER          = 21001,
DEBUG:refactor.py:056:find_register_start_end_index():257;
DEBUG:refactor.py:056:find_register_start_end_index():258;    // YOGG-SARON (laugh)
DEBUG:refactor.py:056:find_register_start_end_index():259;    YS_P3_LUNATIC_GAZE                  = 15757,
DEBUG:refactor.py:056:find_register_start_end_index():260;
DEBUG:refactor.py:056:find_register_start_end_index():261;    DATA_GET_KEEPERS_COUNT              = 1,
DEBUG:refactor.py:056:find_register_start_end_index():262;    DATA_GET_CURRENT_ILLUSION           = 2,
DEBUG:refactor.py:056:find_register_start_end_index():263;    DATA_GET_SARA_PHASE                 = 3,
DEBUG:refactor.py:056:find_register_start_end_index():264;    DATA_GET_DRIVE_ME_CRAZY             = 4,
DEBUG:refactor.py:056:find_register_start_end_index():265;};
DEBUG:refactor.py:056:find_register_start_end_index():266;
DEBUG:refactor.py:056:find_register_start_end_index():267;struct LocationsXY
DEBUG:refactor.py:056:find_register_start_end_index():268;{
DEBUG:refactor.py:056:find_register_start_end_index():269;    float x, y, z;
DEBUG:refactor.py:056:find_register_start_end_index():270;};
DEBUG:refactor.py:056:find_register_start_end_index():271;
DEBUG:refactor.py:056:find_register_start_end_index():272;static LocationsXY yoggPortalLoc[] =
DEBUG:refactor.py:056:find_register_start_end_index():273;{
DEBUG:refactor.py:056:find_register_start_end_index():274;    {1970.48f, -9.75f, 325.5f},
DEBUG:refactor.py:056:find_register_start_end_index():275;    {1992.76f, -10.21f, 325.5f},
DEBUG:refactor.py:056:find_register_start_end_index():276;    {1995.53f, -39.78f, 325.5f},
DEBUG:refactor.py:056:find_register_start_end_index():277;    {1969.25f, -42.00f, 325.5f},
DEBUG:refactor.py:056:find_register_start_end_index():278;    {1960.62f, -32.00f, 325.5f},
DEBUG:refactor.py:056:find_register_start_end_index():279;    {1981.98f, -5.69f, 325.5f},
DEBUG:refactor.py:056:find_register_start_end_index():280;    {1982.78f, -45.73f, 325.5f},
DEBUG:refactor.py:056:find_register_start_end_index():281;    {2000.66f, -29.68f, 325.5f},
DEBUG:refactor.py:056:find_register_start_end_index():282;    {1999.88f, -19.61f, 325.5f},
DEBUG:refactor.py:056:find_register_start_end_index():283;    {1961.37f, -19.54f, 325.5f}
DEBUG:refactor.py:056:find_register_start_end_index():284;};
DEBUG:refactor.py:056:find_register_start_end_index():285;
DEBUG:refactor.py:056:find_register_start_end_index():286;enum Texts
DEBUG:refactor.py:056:find_register_start_end_index():287;{
DEBUG:refactor.py:056:find_register_start_end_index():288;    // Sara
DEBUG:refactor.py:056:find_register_start_end_index():289;    SAY_SARA_ULDUAR_SCREAM_0            = 0, // Unused
DEBUG:refactor.py:056:find_register_start_end_index():290;    SAY_SARA_ULDUAR_SCREAM_1            = 1, // Unused
DEBUG:refactor.py:056:find_register_start_end_index():291;    SAY_SARA_AGGRO                      = 2,
DEBUG:refactor.py:056:find_register_start_end_index():292;    SAY_SARA_FERVOR_HIT                 = 3,
DEBUG:refactor.py:056:find_register_start_end_index():293;    SAY_SARA_ANGER                      = 4, // Comment in DB is for BLESSING_HIT, but it's wrong.
DEBUG:refactor.py:056:find_register_start_end_index():294;    SAY_SARA_KILL                       = 5,
DEBUG:refactor.py:056:find_register_start_end_index():295;    SAY_SARA_TRANSFORM_1                = 6, // "I am the lucid dream."
DEBUG:refactor.py:056:find_register_start_end_index():296;    SAY_SARA_TRANSFORM_2                = 7, // "The monster in your nightmares."
DEBUG:refactor.py:056:find_register_start_end_index():297;    SAY_SARA_TRANSFORM_3                = 8, // "The fiend of a thousand faces."
DEBUG:refactor.py:056:find_register_start_end_index():298;    SAY_SARA_TRANSFORM_4                = 9, // "Cower before my true form."
DEBUG:refactor.py:056:find_register_start_end_index():299;    SAY_SARA_DEATH_RAY                  = 10,
DEBUG:refactor.py:056:find_register_start_end_index():300;    SAY_SARA_PSYCHOSIS_HIT              = 11,
DEBUG:refactor.py:056:find_register_start_end_index():301;
DEBUG:refactor.py:056:find_register_start_end_index():302;    // Voice of Yogg-Saron
DEBUG:refactor.py:056:find_register_start_end_index():303;    WHISPER_VOICE_PHASE_1_WIPE          = 0,
DEBUG:refactor.py:056:find_register_start_end_index():304;    WHISPER_VOICE_INSANE                = 1,
DEBUG:refactor.py:056:find_register_start_end_index():305;
DEBUG:refactor.py:056:find_register_start_end_index():306;    // Brain of Yogg-Saron
DEBUG:refactor.py:056:find_register_start_end_index():307;    EMOTE_YOGG_SARON_BRAIN_SHATTERED    = 0,
DEBUG:refactor.py:056:find_register_start_end_index():308;
DEBUG:refactor.py:056:find_register_start_end_index():309;    // Yogg-Saron
DEBUG:refactor.py:056:find_register_start_end_index():310;    SAY_YOGG_SARON_SPAWN                = 0,
DEBUG:refactor.py:056:find_register_start_end_index():311;    SAY_YOGG_SARON_MADNESS              = 1, // Open Portals
DEBUG:refactor.py:056:find_register_start_end_index():312;    EMOTE_YOGG_SARON_MADNESS            = 2,
DEBUG:refactor.py:056:find_register_start_end_index():313;    SAY_YOGG_SARON_PHASE_3              = 3,
DEBUG:refactor.py:056:find_register_start_end_index():314;    SAY_YOGG_SARON_DEAFENING_ROAR       = 4,
DEBUG:refactor.py:056:find_register_start_end_index():315;    EMOTE_YOGG_SARON_DEAFENING_ROAR     = 5,
DEBUG:refactor.py:056:find_register_start_end_index():316;    SAY_YOGG_SARON_DEATH                = 6,
DEBUG:refactor.py:056:find_register_start_end_index():317;    EMOTE_YOGG_SARON_EMPOWERING_SHADOWS = 7, // Shadow Beacon
DEBUG:refactor.py:056:find_register_start_end_index():318;    EMOTE_YOGG_SARON_BERSERK            = 8,
DEBUG:refactor.py:056:find_register_start_end_index():319;
DEBUG:refactor.py:056:find_register_start_end_index():320;    // Visions - Text is in order of Roleplay
DEBUG:refactor.py:056:find_register_start_end_index():321;    // The Assassination of King Llane vision
DEBUG:refactor.py:056:find_register_start_end_index():322;    SAY_GARONA_1                        = 0,
DEBUG:refactor.py:056:find_register_start_end_index():323;    SAY_GARONA_2                        = 1,
DEBUG:refactor.py:056:find_register_start_end_index():324;    SAY_GARONA_3                        = 2,
DEBUG:refactor.py:056:find_register_start_end_index():325;    SAY_YOGG_1                          = 0,
DEBUG:refactor.py:056:find_register_start_end_index():326;    SAY_YOGG_2                          = 1,
DEBUG:refactor.py:056:find_register_start_end_index():327;    SAY_LLANE_1                         = 0,
DEBUG:refactor.py:056:find_register_start_end_index():328;    SAY_GARONA_4                        = 3,
DEBUG:refactor.py:056:find_register_start_end_index():329;    SAY_YOGG_3                          = 2,
DEBUG:refactor.py:056:find_register_start_end_index():330;
DEBUG:refactor.py:056:find_register_start_end_index():331;    // The Forging of the Demon Soul vision
DEBUG:refactor.py:056:find_register_start_end_index():332;    SAY_NEL_1                           = 0,
DEBUG:refactor.py:056:find_register_start_end_index():333;    SAY_YAS_1                           = 0,
DEBUG:refactor.py:056:find_register_start_end_index():334;    SAY_NEL_2                           = 1,
DEBUG:refactor.py:056:find_register_start_end_index():335;    SAY_MAL_1                           = 0,
DEBUG:refactor.py:056:find_register_start_end_index():336;    SAY_YOGG_4                          = 5,
DEBUG:refactor.py:056:find_register_start_end_index():337;
DEBUG:refactor.py:056:find_register_start_end_index():338;    // The Tortured Champion vision
DEBUG:refactor.py:056:find_register_start_end_index():339;    SAY_LK_1                            = 0,
DEBUG:refactor.py:056:find_register_start_end_index():340;    SAY_IC_1                            = 0,
DEBUG:refactor.py:056:find_register_start_end_index():341;    SAY_IC_2                            = 1,
DEBUG:refactor.py:056:find_register_start_end_index():342;    SAY_LK_2                            = 1,
DEBUG:refactor.py:056:find_register_start_end_index():343;    SAY_YOGG_5                          = 3,
DEBUG:refactor.py:056:find_register_start_end_index():344;    SAY_YOGG_6                          = 4,
DEBUG:refactor.py:056:find_register_start_end_index():345;
DEBUG:refactor.py:056:find_register_start_end_index():346;};
DEBUG:refactor.py:056:find_register_start_end_index():347;
DEBUG:refactor.py:056:find_register_start_end_index():348;const Position Middle = {1980.28f, -25.5868f, 329.397f, M_PI * 1.5f};
DEBUG:refactor.py:056:find_register_start_end_index():349;
DEBUG:refactor.py:056:find_register_start_end_index():350;class boss_yoggsaron_sara : public CreatureScript
DEBUG:refactor.py:056:find_register_start_end_index():351;{
DEBUG:refactor.py:056:find_register_start_end_index():352;public:
DEBUG:refactor.py:056:find_register_start_end_index():353;    boss_yoggsaron_sara() : CreatureScript("boss_yoggsaron_sara") { }
DEBUG:refactor.py:056:find_register_start_end_index():354;
DEBUG:refactor.py:056:find_register_start_end_index():355;    CreatureAI* GetAI(Creature* pCreature) const override
DEBUG:refactor.py:056:find_register_start_end_index():356;    {
DEBUG:refactor.py:056:find_register_start_end_index():357;        return GetUlduarAI<boss_yoggsaron_saraAI>(pCreature);
DEBUG:refactor.py:056:find_register_start_end_index():358;    }
DEBUG:refactor.py:056:find_register_start_end_index():359;
DEBUG:refactor.py:056:find_register_start_end_index():360;    struct boss_yoggsaron_saraAI : public ScriptedAI
DEBUG:refactor.py:056:find_register_start_end_index():361;    {
DEBUG:refactor.py:056:find_register_start_end_index():362;        boss_yoggsaron_saraAI(Creature* pCreature) : ScriptedAI(pCreature), summons(pCreature)
DEBUG:refactor.py:056:find_register_start_end_index():363;        {
DEBUG:refactor.py:056:find_register_start_end_index():364;            m_pInstance = pCreature->GetInstanceScript();
DEBUG:refactor.py:056:find_register_start_end_index():365;        }
DEBUG:refactor.py:056:find_register_start_end_index():366;
DEBUG:refactor.py:056:find_register_start_end_index():367;        InstanceScript* m_pInstance;
DEBUG:refactor.py:056:find_register_start_end_index():368;        EventMap events;
DEBUG:refactor.py:056:find_register_start_end_index():369;        SummonList summons;
DEBUG:refactor.py:056:find_register_start_end_index():370;
DEBUG:refactor.py:056:find_register_start_end_index():371;        uint32 _initFight;
DEBUG:refactor.py:056:find_register_start_end_index():372;        uint8 _summonedGuardiansCount;
DEBUG:refactor.py:056:find_register_start_end_index():373;        uint32 _p2TalkTimer;
DEBUG:refactor.py:056:find_register_start_end_index():374;        bool _secondPhase;
DEBUG:refactor.py:056:find_register_start_end_index():375;        float _summonSpeed;
DEBUG:refactor.py:056:find_register_start_end_index():376;        uint8 _currentIllusion;
DEBUG:refactor.py:056:find_register_start_end_index():377;        bool _isIllusionReversed;
DEBUG:refactor.py:056:find_register_start_end_index():378;
DEBUG:refactor.py:056:find_register_start_end_index():379;        void AttackStart(Unit*) override { }
DEBUG:refactor.py:056:find_register_start_end_index():380;        void MoveInLineOfSight(Unit*) override { }
DEBUG:refactor.py:056:find_register_start_end_index():381;
DEBUG:refactor.py:056:find_register_start_end_index():382;        void JustSummoned(Creature* cr) override
DEBUG:refactor.py:056:find_register_start_end_index():383;        {
DEBUG:refactor.py:056:find_register_start_end_index():384;            summons.Summon(cr);
DEBUG:refactor.py:056:find_register_start_end_index():385;            if (cr->GetEntry() == NPC_SANITY_WELL)
DEBUG:refactor.py:056:find_register_start_end_index():386;                cr->ApplySpellImmune(0, IMMUNITY_STATE, SPELL_AURA_MOD_SCALE, true);
DEBUG:refactor.py:056:find_register_start_end_index():387;        }
DEBUG:refactor.py:056:find_register_start_end_index():388;
DEBUG:refactor.py:056:find_register_start_end_index():389;        void SpawnClouds()
DEBUG:refactor.py:056:find_register_start_end_index():390;        {
DEBUG:refactor.py:056:find_register_start_end_index():391;            for (uint8 i = 0; i < 6; ++i)
DEBUG:refactor.py:056:find_register_start_end_index():392;            {
DEBUG:refactor.py:056:find_register_start_end_index():393;                float Zplus = i > 2 ? (i - 2) * 1.6f : 0;
DEBUG:refactor.py:056:find_register_start_end_index():394;                if (i % 2)
DEBUG:refactor.py:056:find_register_start_end_index():395;                    me->SummonCreature(NPC_OMINOUS_CLOUD, me->GetPositionX() + 8 + i * 7, me->GetPositionY() + 8 + i * 7, 326 + Zplus, 0);
DEBUG:refactor.py:056:find_register_start_end_index():396;                else
DEBUG:refactor.py:056:find_register_start_end_index():397;                    me->SummonCreature(NPC_OMINOUS_CLOUD, me->GetPositionX() - 8 - i * 7, me->GetPositionY() - 8 - i * 7, 326 + Zplus, 0);
DEBUG:refactor.py:056:find_register_start_end_index():398;            }
DEBUG:refactor.py:056:find_register_start_end_index():399;        }
DEBUG:refactor.py:056:find_register_start_end_index():400;
DEBUG:refactor.py:056:find_register_start_end_index():401;        void EnterEvadeMode(EvadeReason why) override
DEBUG:refactor.py:056:find_register_start_end_index():402;        {
DEBUG:refactor.py:056:find_register_start_end_index():403;            if (!_EnterEvadeMode(why))
DEBUG:refactor.py:056:find_register_start_end_index():404;                return;
DEBUG:refactor.py:056:find_register_start_end_index():405;
DEBUG:refactor.py:056:find_register_start_end_index():406;            Position pos;
DEBUG:refactor.py:056:find_register_start_end_index():407;            pos = me->GetHomePosition();
DEBUG:refactor.py:056:find_register_start_end_index():408;            me->NearTeleportTo(pos.GetPositionX(), pos.GetPositionY(), pos.GetPositionZ(), pos.GetOrientation());
DEBUG:refactor.py:056:find_register_start_end_index():409;            Reset();
DEBUG:refactor.py:056:find_register_start_end_index():410;            me->setActive(false);
DEBUG:refactor.py:056:find_register_start_end_index():411;        }
DEBUG:refactor.py:056:find_register_start_end_index():412;
DEBUG:refactor.py:056:find_register_start_end_index():413;        void EnableSara(bool apply)
DEBUG:refactor.py:056:find_register_start_end_index():414;        {
DEBUG:refactor.py:056:find_register_start_end_index():415;            if (apply)
DEBUG:refactor.py:056:find_register_start_end_index():416;            {
DEBUG:refactor.py:056:find_register_start_end_index():417;                me->RemoveUnitFlag(UNIT_FLAG_DISABLE_MOVE);
DEBUG:refactor.py:056:find_register_start_end_index():418;                me->DisableRotate(false);
DEBUG:refactor.py:056:find_register_start_end_index():419;                me->ClearUnitState(UNIT_STATE_ROOT);
DEBUG:refactor.py:056:find_register_start_end_index():420;            }
DEBUG:refactor.py:056:find_register_start_end_index():421;            else
DEBUG:refactor.py:056:find_register_start_end_index():422;            {
DEBUG:refactor.py:056:find_register_start_end_index():423;                me->SetUnitFlag(UNIT_FLAG_DISABLE_MOVE);
DEBUG:refactor.py:056:find_register_start_end_index():424;                me->DisableRotate(true);
DEBUG:refactor.py:056:find_register_start_end_index():425;                me->AddUnitState(UNIT_STATE_ROOT);
DEBUG:refactor.py:056:find_register_start_end_index():426;            }
DEBUG:refactor.py:056:find_register_start_end_index():427;        }
DEBUG:refactor.py:056:find_register_start_end_index():428;
DEBUG:refactor.py:056:find_register_start_end_index():429;        void Reset() override
DEBUG:refactor.py:056:find_register_start_end_index():430;        {
DEBUG:refactor.py:056:find_register_start_end_index():431;            if (!_secondPhase) // Phase 1 wipe
DEBUG:refactor.py:056:find_register_start_end_index():432;            {
DEBUG:refactor.py:056:find_register_start_end_index():433;                me->GetMap()->DoForAllPlayers([&](Player* player)
DEBUG:refactor.py:056:find_register_start_end_index():434;                {
DEBUG:refactor.py:056:find_register_start_end_index():435;                    if (Creature* voice = me->FindNearestCreature(NPC_VOICE_OF_YOGG_SARON, 10.0f))
DEBUG:refactor.py:056:find_register_start_end_index():436;                    {
DEBUG:refactor.py:056:find_register_start_end_index():437;                        voice->AI()->Talk(WHISPER_VOICE_PHASE_1_WIPE, player);
DEBUG:refactor.py:056:find_register_start_end_index():438;                    }
DEBUG:refactor.py:056:find_register_start_end_index():439;                });
DEBUG:refactor.py:056:find_register_start_end_index():440;            }
DEBUG:refactor.py:056:find_register_start_end_index():441;
DEBUG:refactor.py:056:find_register_start_end_index():442;            summons.DoAction(ACTION_DESPAWN_ADDS);
DEBUG:refactor.py:056:find_register_start_end_index():443;            events.Reset();
DEBUG:refactor.py:056:find_register_start_end_index():444;            summons.DespawnAll();
DEBUG:refactor.py:056:find_register_start_end_index():445;
DEBUG:refactor.py:056:find_register_start_end_index():446;            me->SetVisible(true);
DEBUG:refactor.py:056:find_register_start_end_index():447;            me->SetDisplayId(me->GetNativeDisplayId());
DEBUG:refactor.py:056:find_register_start_end_index():448;            me->SetDisableGravity(true);
DEBUG:refactor.py:056:find_register_start_end_index():449;            EnableSara(false);
DEBUG:refactor.py:056:find_register_start_end_index():450;            SpawnClouds();
DEBUG:refactor.py:056:find_register_start_end_index():451;
DEBUG:refactor.py:056:find_register_start_end_index():452;            _initFight = 1;
DEBUG:refactor.py:056:find_register_start_end_index():453;
DEBUG:refactor.py:056:find_register_start_end_index():454;            _summonedGuardiansCount = 0;
DEBUG:refactor.py:056:find_register_start_end_index():455;            _p2TalkTimer = 0;
DEBUG:refactor.py:056:find_register_start_end_index():456;            _secondPhase = false;
DEBUG:refactor.py:056:find_register_start_end_index():457;            _summonSpeed = 1.0f;
DEBUG:refactor.py:056:find_register_start_end_index():458;            _currentIllusion = urand(1, 3);
DEBUG:refactor.py:056:find_register_start_end_index():459;            _isIllusionReversed = urand(0, 1);
DEBUG:refactor.py:056:find_register_start_end_index():460;
DEBUG:refactor.py:056:find_register_start_end_index():461;            if (m_pInstance)
DEBUG:refactor.py:056:find_register_start_end_index():462;            {
DEBUG:refactor.py:056:find_register_start_end_index():463;                m_pInstance->DoStopTimedAchievement(ACHIEVEMENT_TIMED_TYPE_EVENT, CRITERIA_NOT_GETTING_OLDER);
DEBUG:refactor.py:056:find_register_start_end_index():464;                m_pInstance->DoRemoveAurasDueToSpellOnPlayers(SPELL_SANITY);
DEBUG:refactor.py:056:find_register_start_end_index():465;                m_pInstance->SetData(TYPE_YOGGSARON, NOT_STARTED);
DEBUG:refactor.py:056:find_register_start_end_index():466;                if (GameObject* go = ObjectAccessor::GetGameObject(*me, m_pInstance->GetGuidData(GO_YOGG_SARON_DOORS)))
DEBUG:refactor.py:056:find_register_start_end_index():467;                    go->SetGoState(GO_STATE_ACTIVE);
DEBUG:refactor.py:056:find_register_start_end_index():468;            }
DEBUG:refactor.py:056:find_register_start_end_index():469;        }
DEBUG:refactor.py:056:find_register_start_end_index():470;
DEBUG:refactor.py:056:find_register_start_end_index():471;        void InitFight(Unit* target)
DEBUG:refactor.py:056:find_register_start_end_index():472;        {
DEBUG:refactor.py:056:find_register_start_end_index():473;            if (!m_pInstance)
DEBUG:refactor.py:056:find_register_start_end_index():474;                return;
DEBUG:refactor.py:056:find_register_start_end_index():475;
DEBUG:refactor.py:056:find_register_start_end_index():476;            // some simple hack checks
DEBUG:refactor.py:056:find_register_start_end_index():477;            if (m_pInstance->GetData(TYPE_VEZAX) != DONE || m_pInstance->GetData(TYPE_XT002) != DONE)
DEBUG:refactor.py:056:find_register_start_end_index():478;                return;
DEBUG:refactor.py:056:find_register_start_end_index():479;
DEBUG:refactor.py:056:find_register_start_end_index():480;            m_pInstance->DoStartTimedAchievement(ACHIEVEMENT_TIMED_TYPE_EVENT, CRITERIA_NOT_GETTING_OLDER);
DEBUG:refactor.py:056:find_register_start_end_index():481;            m_pInstance->SetData(TYPE_YOGGSARON, IN_PROGRESS);
DEBUG:refactor.py:056:find_register_start_end_index():482;            me->SetInCombatWithZone();
DEBUG:refactor.py:056:find_register_start_end_index():483;            AttackStart(target);
DEBUG:refactor.py:056:find_register_start_end_index():484;
DEBUG:refactor.py:056:find_register_start_end_index():485;            me->CastSpell(me, SPELL_SANITY_BASE, true);
DEBUG:refactor.py:056:find_register_start_end_index():486;
DEBUG:refactor.py:056:find_register_start_end_index():487;            events.ScheduleEvent(EVENT_SARA_P1_DOORS_CLOSE, 15s, 0, EVENT_PHASE_ONE);
DEBUG:refactor.py:056:find_register_start_end_index():488;            events.ScheduleEvent(EVENT_SARA_P1_BERSERK, 15min, 0, 0);
DEBUG:refactor.py:056:find_register_start_end_index():489;            events.ScheduleEvent(EVENT_SARA_P1_SUMMON, 0ms, 0, EVENT_PHASE_ONE);
DEBUG:refactor.py:056:find_register_start_end_index():490;            events.SetPhase(EVENT_PHASE_ONE);
DEBUG:refactor.py:056:find_register_start_end_index():491;
DEBUG:refactor.py:056:find_register_start_end_index():492;            Talk(SAY_SARA_AGGRO);
DEBUG:refactor.py:056:find_register_start_end_index():493;            me->setActive(true);
DEBUG:refactor.py:056:find_register_start_end_index():494;        }
DEBUG:refactor.py:056:find_register_start_end_index():495;
DEBUG:refactor.py:056:find_register_start_end_index():496;        void InformCloud()
DEBUG:refactor.py:056:find_register_start_end_index():497;        {
DEBUG:refactor.py:056:find_register_start_end_index():498;            Creature* cloud = nullptr;
DEBUG:refactor.py:056:find_register_start_end_index():499;            for (SummonList::const_iterator itr = summons.begin(); itr != summons.end();)
DEBUG:refactor.py:056:find_register_start_end_index():500;            {
DEBUG:refactor.py:056:find_register_start_end_index():501;                Creature* summon = ObjectAccessor::GetCreature(*me, *itr);
DEBUG:refactor.py:056:find_register_start_end_index():502;                ++itr;
DEBUG:refactor.py:056:find_register_start_end_index():503;                if (!summon || summon->GetEntry() != NPC_OMINOUS_CLOUD || me->GetDistance(summon) < 20)
DEBUG:refactor.py:056:find_register_start_end_index():504;                    continue;
DEBUG:refactor.py:056:find_register_start_end_index():505;
DEBUG:refactor.py:056:find_register_start_end_index():506;                if ((!cloud || (urand(0, 1) && !summon->HasAura(SPELL_SUMMON_GUARDIAN_OF_YS))))
DEBUG:refactor.py:056:find_register_start_end_index():507;                    cloud = summon;
DEBUG:refactor.py:056:find_register_start_end_index():508;            }
DEBUG:refactor.py:056:find_register_start_end_index():509;
DEBUG:refactor.py:056:find_register_start_end_index():510;            if (cloud)
DEBUG:refactor.py:056:find_register_start_end_index():511;                cloud->AI()->DoAction(ACTION_START_SUMMONING);
DEBUG:refactor.py:056:find_register_start_end_index():512;        }
DEBUG:refactor.py:056:find_register_start_end_index():513;
DEBUG:refactor.py:056:find_register_start_end_index():514;        void SpawnTentacle(uint32 entry)
DEBUG:refactor.py:056:find_register_start_end_index():515;        {
DEBUG:refactor.py:056:find_register_start_end_index():516;            uint32 dist = urand(38, 48);
DEBUG:refactor.py:056:find_register_start_end_index():517;            float o = rand_norm() * M_PI * 2;
DEBUG:refactor.py:056:find_register_start_end_index():518;            float Zplus = (dist - 38) / 6.5f;
DEBUG:refactor.py:056:find_register_start_end_index():519;            if (Creature* cr = me->SummonCreature(entry, me->GetPositionX() + dist * cos(o), me->GetPositionY() + dist * std::sin(o), 327.2 + Zplus, 0, TEMPSUMMON_CORPSE_TIMED_DESPAWN, 5000))
DEBUG:refactor.py:056:find_register_start_end_index():520;            {
DEBUG:refactor.py:056:find_register_start_end_index():521;                cr->CastSpell(cr, SPELL_TENTACLE_ERUPT, true);
DEBUG:refactor.py:056:find_register_start_end_index():522;                cr->CastSpell(cr, SPELL_VOID_ZONE_SMALL, true);
DEBUG:refactor.py:056:find_register_start_end_index():523;                cr->HandleEmoteCommand(EMOTE_ONESHOT_EMERGE);
DEBUG:refactor.py:056:find_register_start_end_index():524;            }
DEBUG:refactor.py:056:find_register_start_end_index():525;        }
DEBUG:refactor.py:056:find_register_start_end_index():526;
DEBUG:refactor.py:056:find_register_start_end_index():527;        void SummonDeathOrbs()
DEBUG:refactor.py:056:find_register_start_end_index():528;        {
DEBUG:refactor.py:056:find_register_start_end_index():529;            for (uint8 i = 0; i < 4; ++i)
DEBUG:refactor.py:056:find_register_start_end_index():530;            {
DEBUG:refactor.py:056:find_register_start_end_index():531;                uint32 dist = urand(38, 48);
DEBUG:refactor.py:056:find_register_start_end_index():532;                float o = rand_norm() * M_PI * 2;
DEBUG:refactor.py:056:find_register_start_end_index():533;                float Zplus = (dist - 38) / 6.5f;
DEBUG:refactor.py:056:find_register_start_end_index():534;                me->SummonCreature(NPC_DEATH_ORB, me->GetPositionX() + dist * cos(o), me->GetPositionY() + dist * std::sin(o), 327.2 + Zplus, 0, TEMPSUMMON_TIMED_DESPAWN, 20000);
DEBUG:refactor.py:056:find_register_start_end_index():535;            }
DEBUG:refactor.py:056:find_register_start_end_index():536;        }
DEBUG:refactor.py:056:find_register_start_end_index():537;
DEBUG:refactor.py:056:find_register_start_end_index():538;        void AddPortals()
DEBUG:refactor.py:056:find_register_start_end_index():539;        {
DEBUG:refactor.py:056:find_register_start_end_index():540;            _summonSpeed -= 0.1f;
DEBUG:refactor.py:056:find_register_start_end_index():541;            Creature* cr = nullptr;
DEBUG:refactor.py:056:find_register_start_end_index():542;
DEBUG:refactor.py:056:find_register_start_end_index():543;            // Spawn Portals
DEBUG:refactor.py:056:find_register_start_end_index():544;            for (uint8 i = 0; i < RAID_MODE(4, 10); ++i)
DEBUG:refactor.py:056:find_register_start_end_index():545;            {
DEBUG:refactor.py:056:find_register_start_end_index():546;                if ((cr = me->SummonCreature(NPC_DESCEND_INTO_MADNESS, yoggPortalLoc[i].x, yoggPortalLoc[i].y, yoggPortalLoc[i].z, 0, TEMPSUMMON_TIMED_DESPAWN, 25000)))
DEBUG:refactor.py:056:find_register_start_end_index():547;                {
DEBUG:refactor.py:056:find_register_start_end_index():548;                    cr->SetUnitFlag(UNIT_FLAG_DISABLE_MOVE | UNIT_FLAG_NON_ATTACKABLE);
DEBUG:refactor.py:056:find_register_start_end_index():549;                    cr->SetArmor(_currentIllusion);
DEBUG:refactor.py:056:find_register_start_end_index():550;                }
DEBUG:refactor.py:056:find_register_start_end_index():551;            }
DEBUG:refactor.py:056:find_register_start_end_index():552;
DEBUG:refactor.py:056:find_register_start_end_index():553;            EntryCheckPredicate pred(NPC_BRAIN_OF_YOGG_SARON);
DEBUG:refactor.py:056:find_register_start_end_index():554;            summons.DoAction(_currentIllusion, pred);
DEBUG:refactor.py:056:find_register_start_end_index():555;
DEBUG:refactor.py:056:find_register_start_end_index():556;            if (_isIllusionReversed)
DEBUG:refactor.py:056:find_register_start_end_index():557;                _currentIllusion = _currentIllusion == 3 ? 1 : (_currentIllusion + 1);
DEBUG:refactor.py:056:find_register_start_end_index():558;            else
DEBUG:refactor.py:056:find_register_start_end_index():559;                _currentIllusion = _currentIllusion == 1 ? 3 : (_currentIllusion - 1);
DEBUG:refactor.py:056:find_register_start_end_index():560;        }
DEBUG:refactor.py:056:find_register_start_end_index():561;
DEBUG:refactor.py:056:find_register_start_end_index():562;        void KilledUnit(Unit* who) override
DEBUG:refactor.py:056:find_register_start_end_index():563;        {
DEBUG:refactor.py:056:find_register_start_end_index():564;            if (who->IsPlayer())
DEBUG:refactor.py:056:find_register_start_end_index():565;            {
DEBUG:refactor.py:056:find_register_start_end_index():566;                Talk(SAY_SARA_KILL);
DEBUG:refactor.py:056:find_register_start_end_index():567;            }
DEBUG:refactor.py:056:find_register_start_end_index():568;        }
DEBUG:refactor.py:056:find_register_start_end_index():569;
DEBUG:refactor.py:056:find_register_start_end_index():570;        void SpellHitTarget(Unit* target, SpellInfo const* spellInfo) override
DEBUG:refactor.py:056:find_register_start_end_index():571;        {
DEBUG:refactor.py:056:find_register_start_end_index():572;            if (spellInfo->Id == SPELL_SANITY)
DEBUG:refactor.py:056:find_register_start_end_index():573;                if (Aura* aur = target->GetAura(SPELL_SANITY))
DEBUG:refactor.py:056:find_register_start_end_index():574;                    aur->SetStackAmount(100);
DEBUG:refactor.py:056:find_register_start_end_index():575;        }
DEBUG:refactor.py:056:find_register_start_end_index():576;
DEBUG:refactor.py:056:find_register_start_end_index():577;        uint32 GetData(uint32 param) const override
DEBUG:refactor.py:056:find_register_start_end_index():578;        {
DEBUG:refactor.py:056:find_register_start_end_index():579;            if (param == DATA_GET_KEEPERS_COUNT)
DEBUG:refactor.py:056:find_register_start_end_index():580;            {
DEBUG:refactor.py:056:find_register_start_end_index():581;                uint8 _count = 0;
DEBUG:refactor.py:056:find_register_start_end_index():582;                for (uint8 i = 0; i < 4; ++i)
DEBUG:refactor.py:056:find_register_start_end_index():583;                    if (m_pInstance->GetData(TYPE_WATCHERS) & (1 << i))
DEBUG:refactor.py:056:find_register_start_end_index():584;                        ++_count;
DEBUG:refactor.py:056:find_register_start_end_index():585;                return _count;
DEBUG:refactor.py:056:find_register_start_end_index():586;            }
DEBUG:refactor.py:056:find_register_start_end_index():587;            else if (param == DATA_GET_SARA_PHASE)
DEBUG:refactor.py:056:find_register_start_end_index():588;                return _secondPhase;
DEBUG:refactor.py:056:find_register_start_end_index():589;
DEBUG:refactor.py:056:find_register_start_end_index():590;            return 4; // just to be sure, return max numer of keepers
DEBUG:refactor.py:056:find_register_start_end_index():591;        }
DEBUG:refactor.py:056:find_register_start_end_index():592;
DEBUG:refactor.py:056:find_register_start_end_index():593;        void DoAction(int32 param) override
DEBUG:refactor.py:056:find_register_start_end_index():594;        {
DEBUG:refactor.py:056:find_register_start_end_index():595;            if (param == ACTION_BRAIN_DAMAGED)
DEBUG:refactor.py:056:find_register_start_end_index():596;            {
DEBUG:refactor.py:056:find_register_start_end_index():597;                summons.DoAction(ACTION_REMOVE_STUN);
DEBUG:refactor.py:056:find_register_start_end_index():598;
DEBUG:refactor.py:056:find_register_start_end_index():599;                EntryCheckPredicate pred2(NPC_YOGG_SARON);
DEBUG:refactor.py:056:find_register_start_end_index():600;                summons.DoAction(ACTION_YOGG_SARON_START_P3, pred2);
DEBUG:refactor.py:056:find_register_start_end_index():601;
DEBUG:refactor.py:056:find_register_start_end_index():602;                if (Creature* cr = ObjectAccessor::GetCreature(*me, m_pInstance->GetGuidData(NPC_THORIM_KEEPER)))
DEBUG:refactor.py:056:find_register_start_end_index():603;                    cr->CastSpell(cr, SPELL_TITANIC_STORM_PASSIVE, false);
DEBUG:refactor.py:056:find_register_start_end_index():604;
DEBUG:refactor.py:056:find_register_start_end_index():605;                if (me->GetMap()->Is25ManRaid() && (GetData(DATA_GET_KEEPERS_COUNT) > 0))
DEBUG:refactor.py:056:find_register_start_end_index():606;                    summons.DoAction(ACTION_YOGG_SARON_HARD_MODE, pred2);
DEBUG:refactor.py:056:find_register_start_end_index():607;
DEBUG:refactor.py:056:find_register_start_end_index():608;                summons.DespawnEntry(NPC_DEATH_ORB);
DEBUG:refactor.py:056:find_register_start_end_index():609;                events.SetPhase(EVENT_PHASE_THREE);
DEBUG:refactor.py:056:find_register_start_end_index():610;
DEBUG:refactor.py:056:find_register_start_end_index():611;                me->RemoveAllAuras();
DEBUG:refactor.py:056:find_register_start_end_index():612;                me->SetVisible(false);
DEBUG:refactor.py:056:find_register_start_end_index():613;                return;
DEBUG:refactor.py:056:find_register_start_end_index():614;            }
DEBUG:refactor.py:056:find_register_start_end_index():615;            else if (param == ACTION_YOGG_SARON_DEATH)
DEBUG:refactor.py:056:find_register_start_end_index():616;            {
DEBUG:refactor.py:056:find_register_start_end_index():617;                summons.DespawnEntry(NPC_VOICE_OF_YOGG_SARON);
DEBUG:refactor.py:056:find_register_start_end_index():618;                summons.DespawnEntry(NPC_BRAIN_OF_YOGG_SARON);
DEBUG:refactor.py:056:find_register_start_end_index():619;                summons.DespawnEntry(NPC_SANITY_WELL);
DEBUG:refactor.py:056:find_register_start_end_index():620;                me->KillSelf();
DEBUG:refactor.py:056:find_register_start_end_index():621;                return;
DEBUG:refactor.py:056:find_register_start_end_index():622;            }
DEBUG:refactor.py:056:find_register_start_end_index():623;
DEBUG:refactor.py:056:find_register_start_end_index():624;            // Determine shatter duration
DEBUG:refactor.py:056:find_register_start_end_index():625;            if (param <= 0)
DEBUG:refactor.py:056:find_register_start_end_index():626;                return;
DEBUG:refactor.py:056:find_register_start_end_index():627;
DEBUG:refactor.py:056:find_register_start_end_index():628;            // Illusion shatters (param - stun time)
DEBUG:refactor.py:056:find_register_start_end_index():629;            if (Creature* yoggb = ObjectAccessor::GetCreature(*me, me->GetInstanceScript()->GetGuidData(NPC_BRAIN_OF_YOGG_SARON)))
DEBUG:refactor.py:056:find_register_start_end_index():630;            {
DEBUG:refactor.py:056:find_register_start_end_index():631;                yoggb->AI()->Talk(EMOTE_YOGG_SARON_BRAIN_SHATTERED);
DEBUG:refactor.py:056:find_register_start_end_index():632;            }
DEBUG:refactor.py:056:find_register_start_end_index():633;
DEBUG:refactor.py:056:find_register_start_end_index():634;            uint32 timer = events.GetNextEventTime(EVENT_SARA_P2_OPEN_PORTALS);
DEBUG:refactor.py:056:find_register_start_end_index():635;            uint32 portalTime = (timer > events.GetTimer() ? timer - events.GetTimer() : 0);
DEBUG:refactor.py:056:find_register_start_end_index():636;            events.DelayEvents(param + 100);
DEBUG:refactor.py:056:find_register_start_end_index():637;            events.RescheduleEvent(EVENT_SARA_P2_OPEN_PORTALS, portalTime, 0, EVENT_PHASE_TWO);
DEBUG:refactor.py:056:find_register_start_end_index():638;            events.ScheduleEvent(EVENT_SARA_P2_REMOVE_STUN, param, 0, EVENT_PHASE_TWO);
DEBUG:refactor.py:056:find_register_start_end_index():639;            me->CastSpell(me, SPELL_SHATTERED_ILLUSION, true);
DEBUG:refactor.py:056:find_register_start_end_index():640;        }
DEBUG:refactor.py:056:find_register_start_end_index():641;
DEBUG:refactor.py:056:find_register_start_end_index():642;        void DamageTaken(Unit* who, uint32& damage, DamageEffectType, SpellSchoolMask) override
DEBUG:refactor.py:056:find_register_start_end_index():643;        {
DEBUG:refactor.py:056:find_register_start_end_index():644;            if (who && who->GetEntry() == NPC_GUARDIAN_OF_YS && !_secondPhase)
DEBUG:refactor.py:056:find_register_start_end_index():645;            {
DEBUG:refactor.py:056:find_register_start_end_index():646;                damage = 25000;
DEBUG:refactor.py:056:find_register_start_end_index():647;
DEBUG:refactor.py:056:find_register_start_end_index():648;                // START PHASE 2
DEBUG:refactor.py:056:find_register_start_end_index():649;                if (me->GetHealth() <= damage)
DEBUG:refactor.py:056:find_register_start_end_index():650;                {
DEBUG:refactor.py:056:find_register_start_end_index():651;                    _secondPhase = true;
DEBUG:refactor.py:056:find_register_start_end_index():652;                    damage = 0;
DEBUG:refactor.py:056:find_register_start_end_index():653;
DEBUG:refactor.py:056:find_register_start_end_index():654;                    events.SetPhase(EVENT_PHASE_TWO);
DEBUG:refactor.py:056:find_register_start_end_index():655;                    me->SetHealth(me->GetMaxHealth());
DEBUG:refactor.py:056:find_register_start_end_index():656;
DEBUG:refactor.py:056:find_register_start_end_index():657;                    if (Creature* cr = me->SummonCreature(NPC_YOGG_SARON, me->GetPositionX(), me->GetPositionY(), me->GetPositionZ(), M_PI))
DEBUG:refactor.py:056:find_register_start_end_index():658;                        cr->SetVisible(false);
DEBUG:refactor.py:056:find_register_start_end_index():659;
DEBUG:refactor.py:056:find_register_start_end_index():660;                    _p2TalkTimer++;
DEBUG:refactor.py:056:find_register_start_end_index():661;                    Talk(SAY_SARA_TRANSFORM_1);
DEBUG:refactor.py:056:find_register_start_end_index():662;                }
DEBUG:refactor.py:056:find_register_start_end_index():663;                return;
DEBUG:refactor.py:056:find_register_start_end_index():664;            }
DEBUG:refactor.py:056:find_register_start_end_index():665;
DEBUG:refactor.py:056:find_register_start_end_index():666;            damage = 0;
DEBUG:refactor.py:056:find_register_start_end_index():667;        }
DEBUG:refactor.py:056:find_register_start_end_index():668;
DEBUG:refactor.py:056:find_register_start_end_index():669;        void UpdateAI(uint32 diff) override
DEBUG:refactor.py:056:find_register_start_end_index():670;        {
DEBUG:refactor.py:056:find_register_start_end_index():671;            if (_initFight)
DEBUG:refactor.py:056:find_register_start_end_index():672;            {
DEBUG:refactor.py:056:find_register_start_end_index():673;                _initFight += diff;
DEBUG:refactor.py:056:find_register_start_end_index():674;                if (_initFight > 5000)
DEBUG:refactor.py:056:find_register_start_end_index():675;                {
DEBUG:refactor.py:056:find_register_start_end_index():676;                    if (Unit* target = SelectTargetFromPlayerList(90))
DEBUG:refactor.py:056:find_register_start_end_index():677;                    {
DEBUG:refactor.py:056:find_register_start_end_index():678;                        _initFight = 0;
DEBUG:refactor.py:056:find_register_start_end_index():679;                        InitFight(target);
DEBUG:refactor.py:056:find_register_start_end_index():680;                    }
DEBUG:refactor.py:056:find_register_start_end_index():681;                    else
DEBUG:refactor.py:056:find_register_start_end_index():682;                        _initFight = 1;
DEBUG:refactor.py:056:find_register_start_end_index():683;                }
DEBUG:refactor.py:056:find_register_start_end_index():684;                return;
DEBUG:refactor.py:056:find_register_start_end_index():685;            }
DEBUG:refactor.py:056:find_register_start_end_index():686;
DEBUG:refactor.py:056:find_register_start_end_index():687;            if (!SelectTargetFromPlayerList(90, SPELL_INSANE1))
DEBUG:refactor.py:056:find_register_start_end_index():688;            {
DEBUG:refactor.py:056:find_register_start_end_index():689;                m_pInstance->DoRemoveAurasDueToSpellOnPlayers(SPELL_INSANE1);
DEBUG:refactor.py:056:find_register_start_end_index():690;                EnterEvadeMode(EVADE_REASON_OTHER);
DEBUG:refactor.py:056:find_register_start_end_index():691;                return;
DEBUG:refactor.py:056:find_register_start_end_index():692;            }
DEBUG:refactor.py:056:find_register_start_end_index():693;
DEBUG:refactor.py:056:find_register_start_end_index():694;            if (_p2TalkTimer)
DEBUG:refactor.py:056:find_register_start_end_index():695;            {
DEBUG:refactor.py:056:find_register_start_end_index():696;                _p2TalkTimer += diff;
DEBUG:refactor.py:056:find_register_start_end_index():697;                if (_p2TalkTimer >= 4000 && _p2TalkTimer < 20000)
DEBUG:refactor.py:056:find_register_start_end_index():698;                {
DEBUG:refactor.py:056:find_register_start_end_index():699;                    EntryCheckPredicate pred(NPC_OMINOUS_CLOUD);
DEBUG:refactor.py:056:find_register_start_end_index():700;                    summons.DoAction(ACTION_UNSUMMON_CLOUDS, pred);
DEBUG:refactor.py:056:find_register_start_end_index():701;                    Talk(SAY_SARA_TRANSFORM_2);
DEBUG:refactor.py:056:find_register_start_end_index():702;                    _p2TalkTimer = 20000;
DEBUG:refactor.py:056:find_register_start_end_index():703;                }
DEBUG:refactor.py:056:find_register_start_end_index():704;                else if (_p2TalkTimer >= 25000 && _p2TalkTimer < 40000)
DEBUG:refactor.py:056:find_register_start_end_index():705;                {
DEBUG:refactor.py:056:find_register_start_end_index():706;                    summons.DespawnEntry(NPC_OMINOUS_CLOUD);
DEBUG:refactor.py:056:find_register_start_end_index():707;                    Talk(SAY_SARA_TRANSFORM_3);
DEBUG:refactor.py:056:find_register_start_end_index():708;                    _p2TalkTimer = 40000;
DEBUG:refactor.py:056:find_register_start_end_index():709;                }
DEBUG:refactor.py:056:find_register_start_end_index():710;                else if (_p2TalkTimer >= 44500 && _p2TalkTimer < 60000)
DEBUG:refactor.py:056:find_register_start_end_index():711;                {
DEBUG:refactor.py:056:find_register_start_end_index():712;                    Talk(SAY_SARA_TRANSFORM_4);
DEBUG:refactor.py:056:find_register_start_end_index():713;                    _p2TalkTimer = 60000;
DEBUG:refactor.py:056:find_register_start_end_index():714;                }
DEBUG:refactor.py:056:find_register_start_end_index():715;                else if (_p2TalkTimer >= 64000)
DEBUG:refactor.py:056:find_register_start_end_index():716;                {
DEBUG:refactor.py:056:find_register_start_end_index():717;                    EntryCheckPredicate pred(NPC_YOGG_SARON);
DEBUG:refactor.py:056:find_register_start_end_index():718;                    summons.DoAction(ACTION_YOGG_SARON_START_YELL, pred);
DEBUG:refactor.py:056:find_register_start_end_index():719;                    _p2TalkTimer = 0;
DEBUG:refactor.py:056:find_register_start_end_index():720;                    events.ScheduleEvent(EVENT_SARA_P2_START, 500ms, 0, EVENT_PHASE_TWO);
DEBUG:refactor.py:056:find_register_start_end_index():721;                }
DEBUG:refactor.py:056:find_register_start_end_index():722;                return;
DEBUG:refactor.py:056:find_register_start_end_index():723;            }
DEBUG:refactor.py:056:find_register_start_end_index():724;
DEBUG:refactor.py:056:find_register_start_end_index():725;            events.Update(diff);
DEBUG:refactor.py:056:find_register_start_end_index():726;            if (me->HasUnitState(UNIT_STATE_CASTING))
DEBUG:refactor.py:056:find_register_start_end_index():727;                return;
DEBUG:refactor.py:056:find_register_start_end_index():728;
DEBUG:refactor.py:056:find_register_start_end_index():729;            switch(events.ExecuteEvent())
DEBUG:refactor.py:056:find_register_start_end_index():730;            {
DEBUG:refactor.py:056:find_register_start_end_index():731;                case EVENT_SARA_P1_DOORS_CLOSE:
DEBUG:refactor.py:056:find_register_start_end_index():732;                    // Whispers of YS
DEBUG:refactor.py:056:find_register_start_end_index():733;                    me->SummonCreature(NPC_VOICE_OF_YOGG_SARON, me->GetPositionX(), me->GetPositionY(), me->GetPositionZ());
DEBUG:refactor.py:056:find_register_start_end_index():734;
DEBUG:refactor.py:056:find_register_start_end_index():735;                    if (m_pInstance)
DEBUG:refactor.py:056:find_register_start_end_index():736;                        if (GameObject* go = ObjectAccessor::GetGameObject(*me, m_pInstance->GetGuidData(GO_YOGG_SARON_DOORS)))
DEBUG:refactor.py:056:find_register_start_end_index():737;                            go->SetGoState(GO_STATE_READY);
DEBUG:refactor.py:056:find_register_start_end_index():738;
DEBUG:refactor.py:056:find_register_start_end_index():739;                    events.ScheduleEvent(EVENT_SARA_P1_SPELLS, 0ms, 1, EVENT_PHASE_ONE);
DEBUG:refactor.py:056:find_register_start_end_index():740;                    break;
DEBUG:refactor.py:056:find_register_start_end_index():741;                case EVENT_SARA_P1_SUMMON:
DEBUG:refactor.py:056:find_register_start_end_index():742;                    events.RepeatEvent(20000 - (std::min(_summonedGuardiansCount, (uint8)5) * 2000));
DEBUG:refactor.py:056:find_register_start_end_index():743;                    ++_summonedGuardiansCount;
DEBUG:refactor.py:056:find_register_start_end_index():744;                    InformCloud();
DEBUG:refactor.py:056:find_register_start_end_index():745;                    break;
DEBUG:refactor.py:056:find_register_start_end_index():746;                case EVENT_SARA_P1_SPELLS:
DEBUG:refactor.py:056:find_register_start_end_index():747;                    {
DEBUG:refactor.py:056:find_register_start_end_index():748;                        uint32 spell = RAND(SPELL_SARAS_ANGER_TARGET_SELECTOR, SPELL_SARAS_BLESSING_TARGET_SELECTOR, SPELL_SARAS_FAVOR_TARGET_SELECTOR);
DEBUG:refactor.py:056:find_register_start_end_index():749;                        if (urand(0, 2))
DEBUG:refactor.py:056:find_register_start_end_index():750;                        {
DEBUG:refactor.py:056:find_register_start_end_index():751;                            if (spell == SPELL_SARAS_ANGER_TARGET_SELECTOR)
DEBUG:refactor.py:056:find_register_start_end_index():752;                            {
DEBUG:refactor.py:056:find_register_start_end_index():753;                                Talk(SAY_SARA_ANGER);
DEBUG:refactor.py:056:find_register_start_end_index():754;                            }
DEBUG:refactor.py:056:find_register_start_end_index():755;                            else if (spell == SPELL_SARAS_FAVOR_TARGET_SELECTOR)
DEBUG:refactor.py:056:find_register_start_end_index():756;                            {
DEBUG:refactor.py:056:find_register_start_end_index():757;                                Talk(SAY_SARA_FERVOR_HIT);
DEBUG:refactor.py:056:find_register_start_end_index():758;                            }
DEBUG:refactor.py:056:find_register_start_end_index():759;                        }
DEBUG:refactor.py:056:find_register_start_end_index():760;
DEBUG:refactor.py:056:find_register_start_end_index():761;                        me->CastCustomSpell(spell, SPELLVALUE_MAX_TARGETS, 1, nullptr, false);
DEBUG:refactor.py:056:find_register_start_end_index():762;                        events.RepeatEvent(me->GetMap()->Is25ManRaid() ? urand(0, 3000) : 4000 + urand(0, 2000));
DEBUG:refactor.py:056:find_register_start_end_index():763;                        break;
DEBUG:refactor.py:056:find_register_start_end_index():764;                    }
DEBUG:refactor.py:056:find_register_start_end_index():765;                case EVENT_SARA_P2_START:
DEBUG:refactor.py:056:find_register_start_end_index():766;                    {
DEBUG:refactor.py:056:find_register_start_end_index():767;                        EntryCheckPredicate pred(NPC_YOGG_SARON);
DEBUG:refactor.py:056:find_register_start_end_index():768;                        summons.DoAction(ACTION_YOGG_SARON_APPEAR, pred);
DEBUG:refactor.py:056:find_register_start_end_index():769;                        events.RescheduleEvent(EVENT_SARA_P2_SPAWN_START_TENTACLES, 500, 0, EVENT_PHASE_TWO);
DEBUG:refactor.py:056:find_register_start_end_index():770;
DEBUG:refactor.py:056:find_register_start_end_index():771;                        // Spawn Brain!
DEBUG:refactor.py:056:find_register_start_end_index():772;                        me->SummonCreature(NPC_BRAIN_OF_YOGG_SARON, 1981.3f, -25.43f, 265);
DEBUG:refactor.py:056:find_register_start_end_index():773;                        break;
DEBUG:refactor.py:056:find_register_start_end_index():774;                    }
DEBUG:refactor.py:056:find_register_start_end_index():775;                case EVENT_SARA_P2_MALADY:
DEBUG:refactor.py:056:find_register_start_end_index():776;                    me->CastCustomSpell(SPELL_MALADY_OF_THE_MIND, SPELLVALUE_MAX_TARGETS, 1, me, false);
DEBUG:refactor.py:056:find_register_start_end_index():777;                    events.Repeat(20s);
DEBUG:refactor.py:056:find_register_start_end_index():778;                    break;
DEBUG:refactor.py:056:find_register_start_end_index():779;                case EVENT_SARA_P2_PSYCHOSIS:
DEBUG:refactor.py:056:find_register_start_end_index():780;                    if ((urand(0, 9)) == 0)  // Rarely said (as it's casted every 3.5s)
DEBUG:refactor.py:056:find_register_start_end_index():781;                    {
DEBUG:refactor.py:056:find_register_start_end_index():782;                        Talk(SAY_SARA_PSYCHOSIS_HIT);
DEBUG:refactor.py:056:find_register_start_end_index():783;                    }
DEBUG:refactor.py:056:find_register_start_end_index():784;                    me->CastCustomSpell(SPELL_PSYCHOSIS, SPELLVALUE_MAX_TARGETS, 1, me, false);
DEBUG:refactor.py:056:find_register_start_end_index():785;                    events.Repeat(3500ms);
DEBUG:refactor.py:056:find_register_start_end_index():786;                    break;
DEBUG:refactor.py:056:find_register_start_end_index():787;                case EVENT_SARA_P2_DEATH_RAY:
DEBUG:refactor.py:056:find_register_start_end_index():788;                    Talk(SAY_SARA_DEATH_RAY);
DEBUG:refactor.py:056:find_register_start_end_index():789;                    SummonDeathOrbs();
DEBUG:refactor.py:056:find_register_start_end_index():790;                    events.Repeat(20s);
DEBUG:refactor.py:056:find_register_start_end_index():791;                    break;
DEBUG:refactor.py:056:find_register_start_end_index():792;                case EVENT_SARA_P2_SUMMON_T1: // CRUSHER
DEBUG:refactor.py:056:find_register_start_end_index():793;                    SpawnTentacle(NPC_CRUSHER_TENTACLE);
DEBUG:refactor.py:056:find_register_start_end_index():794;                    events.RepeatEvent((50000 + urand(0, 10000)) * _summonSpeed);
DEBUG:refactor.py:056:find_register_start_end_index():795;                    break;
DEBUG:refactor.py:056:find_register_start_end_index():796;                case EVENT_SARA_P2_SUMMON_T2: // CONSTRICTOR
DEBUG:refactor.py:056:find_register_start_end_index():797;                    SpawnTentacle(NPC_CONSTRICTOR_TENTACLE);
DEBUG:refactor.py:056:find_register_start_end_index():798;                    events.RepeatEvent((15000 + urand(0, 5000)) * _summonSpeed);
DEBUG:refactor.py:056:find_register_start_end_index():799;                    break;
DEBUG:refactor.py:056:find_register_start_end_index():800;                case EVENT_SARA_P2_SUMMON_T3: // CORRUPTOR
DEBUG:refactor.py:056:find_register_start_end_index():801;                    SpawnTentacle(NPC_CORRUPTOR_TENTACLE);
DEBUG:refactor.py:056:find_register_start_end_index():802;                    events.RepeatEvent((30000 + urand(0, 10000)) * _summonSpeed);
DEBUG:refactor.py:056:find_register_start_end_index():803;                    break;
DEBUG:refactor.py:056:find_register_start_end_index():804;                case EVENT_SARA_P2_BRAIN_LINK:
DEBUG:refactor.py:056:find_register_start_end_index():805;                    me->CastCustomSpell(SPELL_BRAIN_LINK, SPELLVALUE_MAX_TARGETS, 1, me, false);
DEBUG:refactor.py:056:find_register_start_end_index():806;                    events.Repeat(30s);
DEBUG:refactor.py:056:find_register_start_end_index():807;                    break;
DEBUG:refactor.py:056:find_register_start_end_index():808;                case EVENT_SARA_P2_OPEN_PORTALS:
DEBUG:refactor.py:056:find_register_start_end_index():809;                    {
DEBUG:refactor.py:056:find_register_start_end_index():810;                        AddPortals();
DEBUG:refactor.py:056:find_register_start_end_index():811;                        EntryCheckPredicate pred(NPC_YOGG_SARON);
DEBUG:refactor.py:056:find_register_start_end_index():812;                        summons.DoAction(ACTION_YOGG_SARON_OPEN_PORTAL_YELL, pred);
DEBUG:refactor.py:056:find_register_start_end_index():813;                        events.Repeat(80s);
DEBUG:refactor.py:056:find_register_start_end_index():814;                        break;
DEBUG:refactor.py:056:find_register_start_end_index():815;                    }
DEBUG:refactor.py:056:find_register_start_end_index():816;                case EVENT_SARA_P2_REMOVE_STUN:
DEBUG:refactor.py:056:find_register_start_end_index():817;                    {
DEBUG:refactor.py:056:find_register_start_end_index():818;                        me->RemoveAura(SPELL_SHATTERED_ILLUSION);
DEBUG:refactor.py:056:find_register_start_end_index():819;                        summons.DoAction(ACTION_REMOVE_STUN);
DEBUG:refactor.py:056:find_register_start_end_index():820;                        break;
DEBUG:refactor.py:056:find_register_start_end_index():821;                    }
DEBUG:refactor.py:056:find_register_start_end_index():822;                case EVENT_SARA_P2_SPAWN_START_TENTACLES:
DEBUG:refactor.py:056:find_register_start_end_index():823;                    me->SetOrientation(M_PI);
DEBUG:refactor.py:056:find_register_start_end_index():824;                    me->SetDisplayId(SARA_TRANSFORM_MODEL);
DEBUG:refactor.py:056:find_register_start_end_index():825;
DEBUG:refactor.py:056:find_register_start_end_index():826;                    me->NearTeleportTo(me->GetPositionX(), me->GetPositionY(), 355, me->GetOrientation());
DEBUG:refactor.py:056:find_register_start_end_index():827;                    me->SetPosition(me->GetPositionX(), me->GetPositionY(), 355, me->GetOrientation());
DEBUG:refactor.py:056:find_register_start_end_index():828;
DEBUG:refactor.py:056:find_register_start_end_index():829;                    SpawnTentacle(NPC_CRUSHER_TENTACLE);
DEBUG:refactor.py:056:find_register_start_end_index():830;                    SpawnTentacle(NPC_CONSTRICTOR_TENTACLE);
DEBUG:refactor.py:056:find_register_start_end_index():831;                    SpawnTentacle(NPC_CORRUPTOR_TENTACLE);
DEBUG:refactor.py:056:find_register_start_end_index():832;                    SpawnTentacle(NPC_CORRUPTOR_TENTACLE);
DEBUG:refactor.py:056:find_register_start_end_index():833;
DEBUG:refactor.py:056:find_register_start_end_index():834;                    events.ScheduleEvent(EVENT_SARA_P2_MALADY, 7s, 0, EVENT_PHASE_TWO);
DEBUG:refactor.py:056:find_register_start_end_index():835;                    events.ScheduleEvent(EVENT_SARA_P2_PSYCHOSIS, 3s, 0, EVENT_PHASE_TWO);
DEBUG:refactor.py:056:find_register_start_end_index():836;                    events.ScheduleEvent(EVENT_SARA_P2_DEATH_RAY, 15s, 0, EVENT_PHASE_TWO);
DEBUG:refactor.py:056:find_register_start_end_index():837;                    events.ScheduleEvent(EVENT_SARA_P2_SUMMON_T1, 50s, 60s, 0, EVENT_PHASE_TWO);
DEBUG:refactor.py:056:find_register_start_end_index():838;                    events.ScheduleEvent(EVENT_SARA_P2_SUMMON_T2, 15s, 20s, 0, EVENT_PHASE_TWO);
DEBUG:refactor.py:056:find_register_start_end_index():839;                    events.ScheduleEvent(EVENT_SARA_P2_SUMMON_T3, 30000 + urand(0, 10000), 0, EVENT_PHASE_TWO);
DEBUG:refactor.py:056:find_register_start_end_index():840;                    events.ScheduleEvent(EVENT_SARA_P2_BRAIN_LINK, 0, 0, EVENT_PHASE_TWO);
DEBUG:refactor.py:056:find_register_start_end_index():841;                    events.ScheduleEvent(EVENT_SARA_P2_OPEN_PORTALS, 60000, 0, EVENT_PHASE_TWO);
DEBUG:refactor.py:056:find_register_start_end_index():842;                    break;
DEBUG:refactor.py:056:find_register_start_end_index():843;                case EVENT_SARA_P1_BERSERK:
DEBUG:refactor.py:056:find_register_start_end_index():844;                    if (me->GetInstanceScript())
DEBUG:refactor.py:056:find_register_start_end_index():845;                    {
DEBUG:refactor.py:056:find_register_start_end_index():846;                        if (Creature* yogg = ObjectAccessor::GetCreature(*me, me->GetInstanceScript()->GetGuidData(TYPE_YOGGSARON)))
DEBUG:refactor.py:056:find_register_start_end_index():847;                        {
DEBUG:refactor.py:056:find_register_start_end_index():848;                            yogg->AI()->Talk(EMOTE_YOGG_SARON_BERSERK);
DEBUG:refactor.py:056:find_register_start_end_index():849;                        }
DEBUG:refactor.py:056:find_register_start_end_index():850;                    }
DEBUG:refactor.py:056:find_register_start_end_index():851;                    me->CastSpell(me, SPELL_EXTINGUISH_ALL_LIFE, true);
DEBUG:refactor.py:056:find_register_start_end_index():852;                    events.Repeat(5s);
DEBUG:refactor.py:056:find_register_start_end_index():853;                    break;
DEBUG:refactor.py:056:find_register_start_end_index():854;            }
DEBUG:refactor.py:056:find_register_start_end_index():855;        }
DEBUG:refactor.py:056:find_register_start_end_index():856;    };
DEBUG:refactor.py:056:find_register_start_end_index():857;};
DEBUG:refactor.py:056:find_register_start_end_index():858;
DEBUG:refactor.py:056:find_register_start_end_index():859;class boss_yoggsaron_cloud : public CreatureScript
DEBUG:refactor.py:056:find_register_start_end_index():860;{
DEBUG:refactor.py:056:find_register_start_end_index():861;public:
DEBUG:refactor.py:056:find_register_start_end_index():862;    boss_yoggsaron_cloud() : CreatureScript("boss_yoggsaron_cloud") { }
DEBUG:refactor.py:056:find_register_start_end_index():863;
DEBUG:refactor.py:056:find_register_start_end_index():864;    CreatureAI* GetAI(Creature* pCreature) const override
DEBUG:refactor.py:056:find_register_start_end_index():865;    {
DEBUG:refactor.py:056:find_register_start_end_index():866;        return GetUlduarAI<boss_yoggsaron_cloudAI>(pCreature);
DEBUG:refactor.py:056:find_register_start_end_index():867;    }
DEBUG:refactor.py:056:find_register_start_end_index():868;
DEBUG:refactor.py:056:find_register_start_end_index():869;    struct boss_yoggsaron_cloudAI : public npc_escortAI
DEBUG:refactor.py:056:find_register_start_end_index():870;    {
DEBUG:refactor.py:056:find_register_start_end_index():871;        boss_yoggsaron_cloudAI(Creature* pCreature) : npc_escortAI(pCreature)
DEBUG:refactor.py:056:find_register_start_end_index():872;        {
DEBUG:refactor.py:056:find_register_start_end_index():873;            InitWaypoint();
DEBUG:refactor.py:056:find_register_start_end_index():874;            Reset();
DEBUG:refactor.py:056:find_register_start_end_index():875;            Start(false, true, ObjectGuid::Empty, nullptr, false, true);
DEBUG:refactor.py:056:find_register_start_end_index():876;        }
DEBUG:refactor.py:056:find_register_start_end_index():877;
DEBUG:refactor.py:056:find_register_start_end_index():878;        uint32 _checkTimer;
DEBUG:refactor.py:056:find_register_start_end_index():879;        bool _isSummoning;
DEBUG:refactor.py:056:find_register_start_end_index():880;
DEBUG:refactor.py:056:find_register_start_end_index():881;        void JustSummoned(Creature* cr) override
DEBUG:refactor.py:056:find_register_start_end_index():882;        {
DEBUG:refactor.py:056:find_register_start_end_index():883;            cr->ToTempSummon()->SetTempSummonType(TEMPSUMMON_CORPSE_DESPAWN);
DEBUG:refactor.py:056:find_register_start_end_index():884;
DEBUG:refactor.py:056:find_register_start_end_index():885;            _isSummoning = false;
DEBUG:refactor.py:056:find_register_start_end_index():886;            if (me->GetInstanceScript())
DEBUG:refactor.py:056:find_register_start_end_index():887;                if (Creature* sara = ObjectAccessor::GetCreature(*me, me->GetInstanceScript()->GetGuidData(NPC_SARA)))
DEBUG:refactor.py:056:find_register_start_end_index():888;                    sara->AI()->JustSummoned(cr);
DEBUG:refactor.py:056:find_register_start_end_index():889;        }
DEBUG:refactor.py:056:find_register_start_end_index():890;
DEBUG:refactor.py:056:find_register_start_end_index():891;        void MoveInLineOfSight(Unit*  /*who*/) override {}
DEBUG:refactor.py:056:find_register_start_end_index():892;        void AttackStart(Unit*  /*who*/) override {}
DEBUG:refactor.py:056:find_register_start_end_index():893;        void WaypointReached(uint32  /*point*/) override {}
DEBUG:refactor.py:056:find_register_start_end_index():894;
DEBUG:refactor.py:056:find_register_start_end_index():895;        void Reset() override
DEBUG:refactor.py:056:find_register_start_end_index():896;        {
DEBUG:refactor.py:056:find_register_start_end_index():897;            me->CastSpell(me, SPELL_CLOUD_VISUAL, true);
DEBUG:refactor.py:056:find_register_start_end_index():898;            _checkTimer = 0;
DEBUG:refactor.py:056:find_register_start_end_index():899;            _isSummoning = false;
DEBUG:refactor.py:056:find_register_start_end_index():900;        }
DEBUG:refactor.py:056:find_register_start_end_index():901;
DEBUG:refactor.py:056:find_register_start_end_index():902;        void DoAction(int32 param) override
DEBUG:refactor.py:056:find_register_start_end_index():903;        {
DEBUG:refactor.py:056:find_register_start_end_index():904;            if (param == ACTION_UNSUMMON_CLOUDS)
DEBUG:refactor.py:056:find_register_start_end_index():905;            {
DEBUG:refactor.py:056:find_register_start_end_index():906;                me->RemoveAllAuras();
DEBUG:refactor.py:056:find_register_start_end_index():907;            }
DEBUG:refactor.py:056:find_register_start_end_index():908;            else if (param == ACTION_START_SUMMONING)
DEBUG:refactor.py:056:find_register_start_end_index():909;            {
DEBUG:refactor.py:056:find_register_start_end_index():910;                _isSummoning = true;
DEBUG:refactor.py:056:find_register_start_end_index():911;                me->CastSpell(me, SPELL_SUMMON_GUARDIAN_OF_YS, true);
DEBUG:refactor.py:056:find_register_start_end_index():912;            }
DEBUG:refactor.py:056:find_register_start_end_index():913;        }
DEBUG:refactor.py:056:find_register_start_end_index():914;
DEBUG:refactor.py:056:find_register_start_end_index():915;        void InitWaypoint()
DEBUG:refactor.py:056:find_register_start_end_index():916;        {
DEBUG:refactor.py:056:find_register_start_end_index():917;            float dist = Middle.GetExactDist(me);
DEBUG:refactor.py:056:find_register_start_end_index():918;            if (me->GetPositionX() > Middle.GetPositionX())
DEBUG:refactor.py:056:find_register_start_end_index():919;            {
DEBUG:refactor.py:056:find_register_start_end_index():920;                for (uint8 i = 0; i <= dist; ++i)
DEBUG:refactor.py:056:find_register_start_end_index():921;                {
DEBUG:refactor.py:056:find_register_start_end_index():922;                    float angle = M_PI * 2 / dist * i;
DEBUG:refactor.py:056:find_register_start_end_index():923;                    AddWaypoint(i, Middle.GetPositionX() + dist * cos(angle), Middle.GetPositionY() + dist * std::sin(angle), me->GetPositionZ(), 0);
DEBUG:refactor.py:056:find_register_start_end_index():924;                }
DEBUG:refactor.py:056:find_register_start_end_index():925;            }
DEBUG:refactor.py:056:find_register_start_end_index():926;            else
DEBUG:refactor.py:056:find_register_start_end_index():927;            {
DEBUG:refactor.py:056:find_register_start_end_index():928;                for (uint8 i = 0; i <= dist; ++i)
DEBUG:refactor.py:056:find_register_start_end_index():929;                {
DEBUG:refactor.py:056:find_register_start_end_index():930;                    float angle = M_PI * 2 - (M_PI * 2 / dist * i);
DEBUG:refactor.py:056:find_register_start_end_index():931;                    AddWaypoint(i, Middle.GetPositionX() + dist * cos(angle), Middle.GetPositionY() + dist * std::sin(angle), me->GetPositionZ(), 0);
DEBUG:refactor.py:056:find_register_start_end_index():932;                }
DEBUG:refactor.py:056:find_register_start_end_index():933;            }
DEBUG:refactor.py:056:find_register_start_end_index():934;        }
DEBUG:refactor.py:056:find_register_start_end_index():935;
DEBUG:refactor.py:056:find_register_start_end_index():936;        void UpdateEscortAI(uint32 diff) override
DEBUG:refactor.py:056:find_register_start_end_index():937;        {
DEBUG:refactor.py:056:find_register_start_end_index():938;            _checkTimer += diff;
DEBUG:refactor.py:056:find_register_start_end_index():939;            if (_checkTimer >= 500 && !_isSummoning)
DEBUG:refactor.py:056:find_register_start_end_index():940;            {
DEBUG:refactor.py:056:find_register_start_end_index():941;                Unit* who = me->SelectNearbyTarget(nullptr, 6.0f);
DEBUG:refactor.py:056:find_register_start_end_index():942;                if (who && who->IsPlayer() && !me->HasAura(SPELL_SUMMON_GUARDIAN_OF_YS) && !who->HasAura(SPELL_HODIR_FLASH_FREEZE))
DEBUG:refactor.py:056:find_register_start_end_index():943;                {
DEBUG:refactor.py:056:find_register_start_end_index():944;                    _isSummoning = true;
DEBUG:refactor.py:056:find_register_start_end_index():945;                    Talk(0, who);
DEBUG:refactor.py:056:find_register_start_end_index():946;                    me->CastSpell(me, SPELL_SUMMON_GUARDIAN_OF_YS, true);
DEBUG:refactor.py:056:find_register_start_end_index():947;                }
DEBUG:refactor.py:056:find_register_start_end_index():948;
DEBUG:refactor.py:056:find_register_start_end_index():949;                _checkTimer = 0;
DEBUG:refactor.py:056:find_register_start_end_index():950;            }
DEBUG:refactor.py:056:find_register_start_end_index():951;        }
DEBUG:refactor.py:056:find_register_start_end_index():952;    };
DEBUG:refactor.py:056:find_register_start_end_index():953;};
DEBUG:refactor.py:056:find_register_start_end_index():954;
DEBUG:refactor.py:056:find_register_start_end_index():955;class boss_yoggsaron_guardian_of_ys : public CreatureScript
DEBUG:refactor.py:056:find_register_start_end_index():956;{
DEBUG:refactor.py:056:find_register_start_end_index():957;public:
DEBUG:refactor.py:056:find_register_start_end_index():958;    boss_yoggsaron_guardian_of_ys() : CreatureScript("boss_yoggsaron_guardian_of_ys") { }
DEBUG:refactor.py:056:find_register_start_end_index():959;
DEBUG:refactor.py:056:find_register_start_end_index():960;    CreatureAI* GetAI(Creature* pCreature) const override
DEBUG:refactor.py:056:find_register_start_end_index():961;    {
DEBUG:refactor.py:056:find_register_start_end_index():962;        return GetUlduarAI<boss_yoggsaron_guardian_of_ysAI>(pCreature);
DEBUG:refactor.py:056:find_register_start_end_index():963;    }
DEBUG:refactor.py:056:find_register_start_end_index():964;
DEBUG:refactor.py:056:find_register_start_end_index():965;    struct boss_yoggsaron_guardian_of_ysAI : public ScriptedAI
DEBUG:refactor.py:056:find_register_start_end_index():966;    {
DEBUG:refactor.py:056:find_register_start_end_index():967;        boss_yoggsaron_guardian_of_ysAI(Creature* pCreature) : ScriptedAI(pCreature) { }
DEBUG:refactor.py:056:find_register_start_end_index():968;
DEBUG:refactor.py:056:find_register_start_end_index():969;        uint32 _spellTimer;
DEBUG:refactor.py:056:find_register_start_end_index():970;
DEBUG:refactor.py:056:find_register_start_end_index():971;        void Reset() override
DEBUG:refactor.py:056:find_register_start_end_index():972;        {
DEBUG:refactor.py:056:find_register_start_end_index():973;            _spellTimer = 0;
DEBUG:refactor.py:056:find_register_start_end_index():974;            me->SetInCombatWithZone();
DEBUG:refactor.py:056:find_register_start_end_index():975;        }
DEBUG:refactor.py:056:find_register_start_end_index():976;
DEBUG:refactor.py:056:find_register_start_end_index():977;        void JustDied(Unit*) override
DEBUG:refactor.py:056:find_register_start_end_index():978;        {
DEBUG:refactor.py:056:find_register_start_end_index():979;            me->CastSpell((Unit*)nullptr, SPELL_SHADOW_NOVA, true);
DEBUG:refactor.py:056:find_register_start_end_index():980;        }
DEBUG:refactor.py:056:find_register_start_end_index():981;
DEBUG:refactor.py:056:find_register_start_end_index():982;        void UpdateAI(uint32 diff) override
DEBUG:refactor.py:056:find_register_start_end_index():983;        {
DEBUG:refactor.py:056:find_register_start_end_index():984;            if (!UpdateVictim())
DEBUG:refactor.py:056:find_register_start_end_index():985;                return;
DEBUG:refactor.py:056:find_register_start_end_index():986;
DEBUG:refactor.py:056:find_register_start_end_index():987;            _spellTimer += diff;
DEBUG:refactor.py:056:find_register_start_end_index():988;            if (_spellTimer > 8000)
DEBUG:refactor.py:056:find_register_start_end_index():989;            {
DEBUG:refactor.py:056:find_register_start_end_index():990;                me->CastSpell(me, SPELL_DARK_VOLLEY, false);
DEBUG:refactor.py:056:find_register_start_end_index():991;                _spellTimer = 0;
DEBUG:refactor.py:056:find_register_start_end_index():992;            }
DEBUG:refactor.py:056:find_register_start_end_index():993;
DEBUG:refactor.py:056:find_register_start_end_index():994;            DoMeleeAttackIfReady();
DEBUG:refactor.py:056:find_register_start_end_index():995;        }
DEBUG:refactor.py:056:find_register_start_end_index():996;    };
DEBUG:refactor.py:056:find_register_start_end_index():997;};
DEBUG:refactor.py:056:find_register_start_end_index():998;
DEBUG:refactor.py:056:find_register_start_end_index():999;class boss_yoggsaron : public CreatureScript
DEBUG:refactor.py:056:find_register_start_end_index():1000;{
DEBUG:refactor.py:056:find_register_start_end_index():1001;public:
DEBUG:refactor.py:056:find_register_start_end_index():1002;    boss_yoggsaron() : CreatureScript("boss_yoggsaron") { }
DEBUG:refactor.py:056:find_register_start_end_index():1003;
DEBUG:refactor.py:056:find_register_start_end_index():1004;    CreatureAI* GetAI(Creature* pCreature) const override
DEBUG:refactor.py:056:find_register_start_end_index():1005;    {
DEBUG:refactor.py:056:find_register_start_end_index():1006;        return GetUlduarAI<boss_yoggsaronAI>(pCreature);
DEBUG:refactor.py:056:find_register_start_end_index():1007;    }
DEBUG:refactor.py:056:find_register_start_end_index():1008;
DEBUG:refactor.py:056:find_register_start_end_index():1009;    struct boss_yoggsaronAI : public ScriptedAI
DEBUG:refactor.py:056:find_register_start_end_index():1010;    {
DEBUG:refactor.py:056:find_register_start_end_index():1011;        boss_yoggsaronAI(Creature* pCreature) : ScriptedAI(pCreature), summons(pCreature)
DEBUG:refactor.py:056:find_register_start_end_index():1012;        {
DEBUG:refactor.py:056:find_register_start_end_index():1013;            m_pInstance = me->GetInstanceScript();
DEBUG:refactor.py:056:find_register_start_end_index():1014;            _thirdPhase = false;
DEBUG:refactor.py:056:find_register_start_end_index():1015;            _usedInsane = false;
DEBUG:refactor.py:056:find_register_start_end_index():1016;            summons.DespawnAll();
DEBUG:refactor.py:056:find_register_start_end_index():1017;            events.Reset();
DEBUG:refactor.py:056:find_register_start_end_index():1018;
DEBUG:refactor.py:056:find_register_start_end_index():1019;            uint8 _count = 4;
DEBUG:refactor.py:056:find_register_start_end_index():1020;            me->SetLootMode(31); // 1 + 2 + 4 + 8 + 16, remove with watchers addition
DEBUG:refactor.py:056:find_register_start_end_index():1021;            if (m_pInstance)
DEBUG:refactor.py:056:find_register_start_end_index():1022;            {
DEBUG:refactor.py:056:find_register_start_end_index():1023;                for (uint8 i = 0; i < 4; ++i)
DEBUG:refactor.py:056:find_register_start_end_index():1024;                    if (m_pInstance->GetData(TYPE_WATCHERS) & (1 << i))
DEBUG:refactor.py:056:find_register_start_end_index():1025;                    {
DEBUG:refactor.py:056:find_register_start_end_index():1026;                        me->RemoveLootMode(1 << _count);
DEBUG:refactor.py:056:find_register_start_end_index():1027;                        --_count;
DEBUG:refactor.py:056:find_register_start_end_index():1028;                    }
DEBUG:refactor.py:056:find_register_start_end_index():1029;            }
DEBUG:refactor.py:056:find_register_start_end_index():1030;        }
DEBUG:refactor.py:056:find_register_start_end_index():1031;
DEBUG:refactor.py:056:find_register_start_end_index():1032;        InstanceScript* m_pInstance;
DEBUG:refactor.py:056:find_register_start_end_index():1033;        EventMap events;
DEBUG:refactor.py:056:find_register_start_end_index():1034;        SummonList summons;
DEBUG:refactor.py:056:find_register_start_end_index():1035;        bool _thirdPhase;
DEBUG:refactor.py:056:find_register_start_end_index():1036;        bool _usedInsane;
DEBUG:refactor.py:056:find_register_start_end_index():1037;
DEBUG:refactor.py:056:find_register_start_end_index():1038;        void AttackStart(Unit*) override { }
DEBUG:refactor.py:056:find_register_start_end_index():1039;
DEBUG:refactor.py:056:find_register_start_end_index():1040;        void JustSummoned(Creature* cr) override { summons.Summon(cr); }
DEBUG:refactor.py:056:find_register_start_end_index():1041;
DEBUG:refactor.py:056:find_register_start_end_index():1042;        void SummonImmortalGuardian()
DEBUG:refactor.py:056:find_register_start_end_index():1043;        {
DEBUG:refactor.py:056:find_register_start_end_index():1044;            uint32 dist = urand(38, 48);
DEBUG:refactor.py:056:find_register_start_end_index():1045;            float o = rand_norm() * M_PI * 2;
DEBUG:refactor.py:056:find_register_start_end_index():1046;            float Zplus = (dist - 38) / 6.5f;
DEBUG:refactor.py:056:find_register_start_end_index():1047;            me->SummonCreature(NPC_IMMORTAL_GUARDIAN, me->GetPositionX() + dist * cos(o), me->GetPositionY() + dist * std::sin(o), 327.2 + Zplus, 0, TEMPSUMMON_CORPSE_TIMED_DESPAWN, 5000);
DEBUG:refactor.py:056:find_register_start_end_index():1048;        }
DEBUG:refactor.py:056:find_register_start_end_index():1049;
DEBUG:refactor.py:056:find_register_start_end_index():1050;        void JustDied(Unit*  /*who*/) override
DEBUG:refactor.py:056:find_register_start_end_index():1051;        {
DEBUG:refactor.py:056:find_register_start_end_index():1052;            summons.DespawnAll();
DEBUG:refactor.py:056:find_register_start_end_index():1053;            events.Reset();
DEBUG:refactor.py:056:find_register_start_end_index():1054;
DEBUG:refactor.py:056:find_register_start_end_index():1055;            Talk(SAY_YOGG_SARON_DEATH);
DEBUG:refactor.py:056:find_register_start_end_index():1056;
DEBUG:refactor.py:056:find_register_start_end_index():1057;            if (m_pInstance)
DEBUG:refactor.py:056:find_register_start_end_index():1058;            {
DEBUG:refactor.py:056:find_register_start_end_index():1059;                m_pInstance->SetData(TYPE_YOGGSARON, DONE);
DEBUG:refactor.py:056:find_register_start_end_index():1060;                if (Creature* sara = ObjectAccessor::GetCreature(*me, m_pInstance->GetGuidData(NPC_SARA)))
DEBUG:refactor.py:056:find_register_start_end_index():1061;                    sara->AI()->DoAction(ACTION_YOGG_SARON_DEATH);
DEBUG:refactor.py:056:find_register_start_end_index():1062;                if (GameObject* go = ObjectAccessor::GetGameObject(*me, m_pInstance->GetGuidData(GO_YOGG_SARON_DOORS)))
DEBUG:refactor.py:056:find_register_start_end_index():1063;                    go->SetGoState(GO_STATE_ACTIVE);
DEBUG:refactor.py:056:find_register_start_end_index():1064;            }
DEBUG:refactor.py:056:find_register_start_end_index():1065;
DEBUG:refactor.py:056:find_register_start_end_index():1066;            Map::PlayerList const& pList = me->GetMap()->GetPlayers();
DEBUG:refactor.py:056:find_register_start_end_index():1067;            for(Map::PlayerList::const_iterator itr = pList.begin(); itr != pList.end(); ++itr)
DEBUG:refactor.py:056:find_register_start_end_index():1068;            {
DEBUG:refactor.py:056:find_register_start_end_index():1069;                itr->GetSource()->RemoveAura(SPELL_SANITY);
DEBUG:refactor.py:056:find_register_start_end_index():1070;                itr->GetSource()->RemoveAura(SPELL_INSANE1);
DEBUG:refactor.py:056:find_register_start_end_index():1071;                itr->GetSource()->RemoveAura(SPELL_INSANE2);
DEBUG:refactor.py:056:find_register_start_end_index():1072;            }
DEBUG:refactor.py:056:find_register_start_end_index():1073;        }
DEBUG:refactor.py:056:find_register_start_end_index():1074;
DEBUG:refactor.py:056:find_register_start_end_index():1075;        void DoAction(int32 param) override
DEBUG:refactor.py:056:find_register_start_end_index():1076;        {
DEBUG:refactor.py:056:find_register_start_end_index():1077;            if (param == ACTION_DESPAWN_ADDS)
DEBUG:refactor.py:056:find_register_start_end_index():1078;                summons.DespawnAll();
DEBUG:refactor.py:056:find_register_start_end_index():1079;            else if (param == ACTION_YOGG_SARON_APPEAR)
DEBUG:refactor.py:056:find_register_start_end_index():1080;            {
DEBUG:refactor.py:056:find_register_start_end_index():1081;                me->SetVisible(true);
DEBUG:refactor.py:056:find_register_start_end_index():1082;                me->CastSpell(me, SPELL_SHADOW_BARRIER, true);
DEBUG:refactor.py:056:find_register_start_end_index():1083;                me->CastSpell(me, SPELL_KNOCK_AWAY, true);
DEBUG:refactor.py:056:find_register_start_end_index():1084;                me->HandleEmoteCommand(EMOTE_ONESHOT_EMERGE);
DEBUG:refactor.py:056:find_register_start_end_index():1085;                me->SetInCombatWithZone();
DEBUG:refactor.py:056:find_register_start_end_index():1086;
DEBUG:refactor.py:056:find_register_start_end_index():1087;                me->SetUnitFlag(UNIT_FLAG_DISABLE_MOVE | UNIT_FLAG_PACIFIED);
DEBUG:refactor.py:056:find_register_start_end_index():1088;            }
DEBUG:refactor.py:056:find_register_start_end_index():1089;            else if (param == ACTION_YOGG_SARON_START_YELL)
DEBUG:refactor.py:056:find_register_start_end_index():1090;            {
DEBUG:refactor.py:056:find_register_start_end_index():1091;                Talk(SAY_YOGG_SARON_SPAWN);
DEBUG:refactor.py:056:find_register_start_end_index():1092;            }
DEBUG:refactor.py:056:find_register_start_end_index():1093;            else if (param == ACTION_YOGG_SARON_OPEN_PORTAL_YELL)
DEBUG:refactor.py:056:find_register_start_end_index():1094;            {
DEBUG:refactor.py:056:find_register_start_end_index():1095;                Talk(SAY_YOGG_SARON_MADNESS);
DEBUG:refactor.py:056:find_register_start_end_index():1096;                Talk(EMOTE_YOGG_SARON_MADNESS);
DEBUG:refactor.py:056:find_register_start_end_index():1097;            }
DEBUG:refactor.py:056:find_register_start_end_index():1098;            else if (param == ACTION_YOGG_SARON_START_P3)
DEBUG:refactor.py:056:find_register_start_end_index():1099;            {
DEBUG:refactor.py:056:find_register_start_end_index():1100;                me->SetHealth(me->GetMaxHealth() * 0.3f);
DEBUG:refactor.py:056:find_register_start_end_index():1101;                me->LowerPlayerDamageReq(me->GetMaxHealth() * 0.7f);
DEBUG:refactor.py:056:find_register_start_end_index():1102;
DEBUG:refactor.py:056:find_register_start_end_index():1103;                me->RemoveAura(SPELL_SHADOW_BARRIER);
DEBUG:refactor.py:056:find_register_start_end_index():1104;
DEBUG:refactor.py:056:find_register_start_end_index():1105;                events.ScheduleEvent(EVENT_YS_LUNATIC_GAZE, 7000);
DEBUG:refactor.py:056:find_register_start_end_index():1106;                events.ScheduleEvent(EVENT_YS_SHADOW_BEACON, 20000);
DEBUG:refactor.py:056:find_register_start_end_index():1107;                events.ScheduleEvent(EVENT_YS_SUMMON_GUARDIAN, 0);
DEBUG:refactor.py:056:find_register_start_end_index():1108;                _thirdPhase = true;
DEBUG:refactor.py:056:find_register_start_end_index():1109;
DEBUG:refactor.py:056:find_register_start_end_index():1110;                Talk(SAY_YOGG_SARON_PHASE_3);
DEBUG:refactor.py:056:find_register_start_end_index():1111;            }
DEBUG:refactor.py:056:find_register_start_end_index():1112;            else if (param == ACTION_YOGG_SARON_HARD_MODE)
DEBUG:refactor.py:056:find_register_start_end_index():1113;            {
DEBUG:refactor.py:056:find_register_start_end_index():1114;                events.ScheduleEvent(EVENT_YS_DEAFENING_ROAR, 50000);
DEBUG:refactor.py:056:find_register_start_end_index():1115;            }
DEBUG:refactor.py:056:find_register_start_end_index():1116;            else if (param == ACTION_YOGG_SARON_SHADOW_BEACON)
DEBUG:refactor.py:056:find_register_start_end_index():1117;            {
DEBUG:refactor.py:056:find_register_start_end_index():1118;                events.RescheduleEvent(EVENT_YS_SHADOW_BEACON, 40000);
DEBUG:refactor.py:056:find_register_start_end_index():1119;            }
DEBUG:refactor.py:056:find_register_start_end_index():1120;            else if (param == ACTION_REMOVE_STUN)
DEBUG:refactor.py:056:find_register_start_end_index():1121;            {
DEBUG:refactor.py:056:find_register_start_end_index():1122;                me->RemoveAura(SPELL_SHATTERED_ILLUSION);
DEBUG:refactor.py:056:find_register_start_end_index():1123;                me->SetControlled(true, UNIT_STATE_ROOT);
DEBUG:refactor.py:056:find_register_start_end_index():1124;            }
DEBUG:refactor.py:056:find_register_start_end_index():1125;            else if (param == ACTION_FAILED_DRIVE_ME_CRAZY)
DEBUG:refactor.py:056:find_register_start_end_index():1126;                _usedInsane = true;
DEBUG:refactor.py:056:find_register_start_end_index():1127;        }
DEBUG:refactor.py:056:find_register_start_end_index():1128;
DEBUG:refactor.py:056:find_register_start_end_index():1129;        uint32 GetData(uint32 param) const override
DEBUG:refactor.py:056:find_register_start_end_index():1130;        {
DEBUG:refactor.py:056:find_register_start_end_index():1131;            if (param == DATA_GET_DRIVE_ME_CRAZY)
DEBUG:refactor.py:056:find_register_start_end_index():1132;                return !_usedInsane;
DEBUG:refactor.py:056:find_register_start_end_index():1133;
DEBUG:refactor.py:056:find_register_start_end_index():1134;            return 0;
DEBUG:refactor.py:056:find_register_start_end_index():1135;        }
DEBUG:refactor.py:056:find_register_start_end_index():1136;
DEBUG:refactor.py:056:find_register_start_end_index():1137;        void SpellHit(Unit*  /*caster*/, SpellInfo const* spellInfo) override
DEBUG:refactor.py:056:find_register_start_end_index():1138;        {
DEBUG:refactor.py:056:find_register_start_end_index():1139;            if (spellInfo->Id == SPELL_IN_THE_MAWS_OF_THE_OLD_GOD)
DEBUG:refactor.py:056:find_register_start_end_index():1140;                me->AddLootMode(32);
DEBUG:refactor.py:056:find_register_start_end_index():1141;        }
DEBUG:refactor.py:056:find_register_start_end_index():1142;
DEBUG:refactor.py:056:find_register_start_end_index():1143;        void UpdateAI(uint32 diff) override
DEBUG:refactor.py:056:find_register_start_end_index():1144;        {
DEBUG:refactor.py:056:find_register_start_end_index():1145;            if (!_thirdPhase)
DEBUG:refactor.py:056:find_register_start_end_index():1146;                return;
DEBUG:refactor.py:056:find_register_start_end_index():1147;
DEBUG:refactor.py:056:find_register_start_end_index():1148;            events.Update(diff);
DEBUG:refactor.py:056:find_register_start_end_index():1149;            if (me->HasUnitState(UNIT_STATE_CASTING))
DEBUG:refactor.py:056:find_register_start_end_index():1150;                return;
DEBUG:refactor.py:056:find_register_start_end_index():1151;
DEBUG:refactor.py:056:find_register_start_end_index():1152;            switch (events.ExecuteEvent())
DEBUG:refactor.py:056:find_register_start_end_index():1153;            {
DEBUG:refactor.py:056:find_register_start_end_index():1154;                case EVENT_YS_LUNATIC_GAZE:
DEBUG:refactor.py:056:find_register_start_end_index():1155;                    me->PlayDirectSound(YS_P3_LUNATIC_GAZE);
DEBUG:refactor.py:056:find_register_start_end_index():1156;                    me->CastSpell(me, SPELL_LUNATIC_GAZE_YS, true);
DEBUG:refactor.py:056:find_register_start_end_index():1157;                    events.Repeat(12s);
DEBUG:refactor.py:056:find_register_start_end_index():1158;                    break;
DEBUG:refactor.py:056:find_register_start_end_index():1159;                case EVENT_YS_DEAFENING_ROAR:
DEBUG:refactor.py:056:find_register_start_end_index():1160;                    Talk(SAY_YOGG_SARON_DEAFENING_ROAR);
DEBUG:refactor.py:056:find_register_start_end_index():1161;                    Talk(EMOTE_YOGG_SARON_DEAFENING_ROAR);
DEBUG:refactor.py:056:find_register_start_end_index():1162;                    me->CastSpell(me, SPELL_DEAFENING_ROAR, false);
DEBUG:refactor.py:056:find_register_start_end_index():1163;                    events.Repeat(50s);
DEBUG:refactor.py:056:find_register_start_end_index():1164;                    break;
DEBUG:refactor.py:056:find_register_start_end_index():1165;                case EVENT_YS_SHADOW_BEACON:
DEBUG:refactor.py:056:find_register_start_end_index():1166;                    events.Repeat(5s);
DEBUG:refactor.py:056:find_register_start_end_index():1167;                    Talk(EMOTE_YOGG_SARON_EMPOWERING_SHADOWS);
DEBUG:refactor.py:056:find_register_start_end_index():1168;                    me->CastCustomSpell(SPELL_SHADOW_BEACON, SPELLVALUE_MAX_TARGETS, RAID_MODE(1, 3), me, false);
DEBUG:refactor.py:056:find_register_start_end_index():1169;                    break;
DEBUG:refactor.py:056:find_register_start_end_index():1170;                case EVENT_YS_SUMMON_GUARDIAN:
DEBUG:refactor.py:056:find_register_start_end_index():1171;                    SummonImmortalGuardian();
DEBUG:refactor.py:056:find_register_start_end_index():1172;                    events.Repeat(10s);
DEBUG:refactor.py:056:find_register_start_end_index():1173;                    break;
DEBUG:refactor.py:056:find_register_start_end_index():1174;            }
DEBUG:refactor.py:056:find_register_start_end_index():1175;        }
DEBUG:refactor.py:056:find_register_start_end_index():1176;    };
DEBUG:refactor.py:056:find_register_start_end_index():1177;};
DEBUG:refactor.py:056:find_register_start_end_index():1178;
DEBUG:refactor.py:056:find_register_start_end_index():1179;class boss_yoggsaron_brain : public CreatureScript
DEBUG:refactor.py:056:find_register_start_end_index():1180;{
DEBUG:refactor.py:056:find_register_start_end_index():1181;public:
DEBUG:refactor.py:056:find_register_start_end_index():1182;    boss_yoggsaron_brain() : CreatureScript("boss_yoggsaron_brain") { }
DEBUG:refactor.py:056:find_register_start_end_index():1183;
DEBUG:refactor.py:056:find_register_start_end_index():1184;    CreatureAI* GetAI(Creature* pCreature) const override
DEBUG:refactor.py:056:find_register_start_end_index():1185;    {
DEBUG:refactor.py:056:find_register_start_end_index():1186;        return GetUlduarAI<boss_yoggsaron_brainAI>(pCreature);
DEBUG:refactor.py:056:find_register_start_end_index():1187;    }
DEBUG:refactor.py:056:find_register_start_end_index():1188;
DEBUG:refactor.py:056:find_register_start_end_index():1189;    struct boss_yoggsaron_brainAI : public NullCreatureAI
DEBUG:refactor.py:056:find_register_start_end_index():1190;    {
DEBUG:refactor.py:056:find_register_start_end_index():1191;        boss_yoggsaron_brainAI(Creature* pCreature) : NullCreatureAI(pCreature), summons(pCreature)
DEBUG:refactor.py:056:find_register_start_end_index():1192;        {
DEBUG:refactor.py:056:find_register_start_end_index():1193;            me->SetDisableGravity(true);
DEBUG:refactor.py:056:find_register_start_end_index():1194;            _tentacleCount = 0;
DEBUG:refactor.py:056:find_register_start_end_index():1195;            _activeIllusion = 0;
DEBUG:refactor.py:056:find_register_start_end_index():1196;            _induceTimer = 0;
DEBUG:refactor.py:056:find_register_start_end_index():1197;            _brainDamaged = false;
DEBUG:refactor.py:056:find_register_start_end_index():1198;            me->SetRegeneratingHealth(false);
DEBUG:refactor.py:056:find_register_start_end_index():1199;        }
DEBUG:refactor.py:056:find_register_start_end_index():1200;
DEBUG:refactor.py:056:find_register_start_end_index():1201;        bool _brainDamaged;
DEBUG:refactor.py:056:find_register_start_end_index():1202;        uint8 _tentacleCount;
DEBUG:refactor.py:056:find_register_start_end_index():1203;        uint8 _activeIllusion;
DEBUG:refactor.py:056:find_register_start_end_index():1204;        uint32 _induceTimer;
DEBUG:refactor.py:056:find_register_start_end_index():1205;        SummonList summons;
DEBUG:refactor.py:056:find_register_start_end_index():1206;
DEBUG:refactor.py:056:find_register_start_end_index():1207;        void Reset() override { }
DEBUG:refactor.py:056:find_register_start_end_index():1208;        void JustSummoned(Creature* cr) override
DEBUG:refactor.py:056:find_register_start_end_index():1209;        {
DEBUG:refactor.py:056:find_register_start_end_index():1210;            if (cr->GetEntry() == NPC_INFLUENCE_TENTACLE)
DEBUG:refactor.py:056:find_register_start_end_index():1211;            {
DEBUG:refactor.py:056:find_register_start_end_index():1212;                // Dragons Illusion
DEBUG:refactor.py:056:find_register_start_end_index():1213;                if (cr->GetPositionX() > 2000.0f && cr->GetPositionX() < 2150.0f)
DEBUG:refactor.py:056:find_register_start_end_index():1214;                    cr->UpdateEntry(urand(NPC_CONSORT_FIRST, NPC_CONSORT_LAST));
DEBUG:refactor.py:056:find_register_start_end_index():1215;                // Icecrown Illusion
DEBUG:refactor.py:056:find_register_start_end_index():1216;                else if (cr->GetPositionY() > -150.0f && cr->GetPositionY() < -90.0f)
DEBUG:refactor.py:056:find_register_start_end_index():1217;                {
DEBUG:refactor.py:056:find_register_start_end_index():1218;                    cr->SetStandState(UNIT_STAND_STATE_KNEEL);
DEBUG:refactor.py:056:find_register_start_end_index():1219;                    cr->UpdateEntry(NPC_DEATHSWORN_ZEALOT);
DEBUG:refactor.py:056:find_register_start_end_index():1220;                }
DEBUG:refactor.py:056:find_register_start_end_index():1221;                // Stormwind Illusion
DEBUG:refactor.py:056:find_register_start_end_index():1222;                else
DEBUG:refactor.py:056:find_register_start_end_index():1223;                    cr->UpdateEntry(NPC_SUIT_OF_ARMOR);
DEBUG:refactor.py:056:find_register_start_end_index():1224;            }
DEBUG:refactor.py:056:find_register_start_end_index():1225;            else if (cr->GetEntry() == NPC_LICH_KING)
DEBUG:refactor.py:056:find_register_start_end_index():1226;                cr->CastSpell(cr, SPELL_DEATHGRASP, false);
DEBUG:refactor.py:056:find_register_start_end_index():1227;
DEBUG:refactor.py:056:find_register_start_end_index():1228;            summons.Summon(cr);
DEBUG:refactor.py:056:find_register_start_end_index():1229;        }
DEBUG:refactor.py:056:find_register_start_end_index():1230;
DEBUG:refactor.py:056:find_register_start_end_index():1231;        void PrepareChamberIllusion()
DEBUG:refactor.py:056:find_register_start_end_index():1232;        {
DEBUG:refactor.py:056:find_register_start_end_index():1233;            me->SummonCreature(NPC_INFLUENCE_TENTACLE, 2126.13f, -65.488f, 239.721f, 1.99171f);
DEBUG:refactor.py:056:find_register_start_end_index():1234;            me->SummonCreature(NPC_INFLUENCE_TENTACLE, 2141.05f, -50.5146f, 239.751f, 2.72998f);
DEBUG:refactor.py:056:find_register_start_end_index():1235;            me->SummonCreature(NPC_INFLUENCE_TENTACLE, 2148.83f, -23.9568f, 239.721f, 3.04807f);
DEBUG:refactor.py:056:find_register_start_end_index():1236;            me->SummonCreature(NPC_INFLUENCE_TENTACLE, 2064.39f, -42.0691f, 239.719f, 0.0949586f);
DEBUG:refactor.py:056:find_register_start_end_index():1237;            me->SummonCreature(NPC_INFLUENCE_TENTACLE, 2064.29f, -7.13128f, 239.756f, 5.96974f);
DEBUG:refactor.py:056:find_register_start_end_index():1238;            me->SummonCreature(NPC_INFLUENCE_TENTACLE, 2117.31f, 14.897f, 239.731f, 4.32041f);
DEBUG:refactor.py:056:find_register_start_end_index():1239;            me->SummonCreature(NPC_INFLUENCE_TENTACLE, 2136.7f, 2.43262f, 239.72f, 3.90023f);
DEBUG:refactor.py:056:find_register_start_end_index():1240;
DEBUG:refactor.py:056:find_register_start_end_index():1241;            // Laughing Skulls
DEBUG:refactor.py:056:find_register_start_end_index():1242;            if (urand(0, 1))
DEBUG:refactor.py:056:find_register_start_end_index():1243;                me->SummonCreature(NPC_LAUGHING_SKULL, 2139.13f, -59.0848f, 239.728f, 2.2974f);
DEBUG:refactor.py:056:find_register_start_end_index():1244;            else
DEBUG:refactor.py:056:find_register_start_end_index():1245;                me->SummonCreature(NPC_LAUGHING_SKULL, 2083, -25.66f, 244, 0);
DEBUG:refactor.py:056:find_register_start_end_index():1246;            if (urand(0, 1))
DEBUG:refactor.py:056:find_register_start_end_index():1247;                me->SummonCreature(NPC_LAUGHING_SKULL, 2066.67f, -59.8984f, 239.72f, 0.718747f);
DEBUG:refactor.py:056:find_register_start_end_index():1248;            else
DEBUG:refactor.py:056:find_register_start_end_index():1249;                me->SummonCreature(NPC_LAUGHING_SKULL, 2126.22f, -25.86f, 244, 0);
DEBUG:refactor.py:056:find_register_start_end_index():1250;
DEBUG:refactor.py:056:find_register_start_end_index():1251;            me->SummonCreature(NPC_LAUGHING_SKULL, 2133.09f, 15.341f, 239.72f, 4.0724f);
DEBUG:refactor.py:056:find_register_start_end_index():1252;            me->SummonCreature(NPC_LAUGHING_SKULL, 2065.83f, 12.3772f, 239.792f, 5.49789f);
DEBUG:refactor.py:056:find_register_start_end_index():1253;
DEBUG:refactor.py:056:find_register_start_end_index():1254;            // Aspects
DEBUG:refactor.py:056:find_register_start_end_index():1255;            me->SummonCreature(NPC_ALEXTRASZA, 2091.92f, -25.8f, 242.647f, 0);
DEBUG:refactor.py:056:find_register_start_end_index():1256;            me->SummonCreature(NPC_YSERA, 2116, -25.8f, 242.647f, 3.14f);
DEBUG:refactor.py:056:find_register_start_end_index():1257;            me->SummonCreature(NPC_NELTHARION, 2103.6f, -35.8f, 242.64f, 1.5f);
DEBUG:refactor.py:056:find_register_start_end_index():1258;            me->SummonCreature(NPC_MALYGOS, 2103.6f, -15.8f, 242.64f, 4.7f);
DEBUG:refactor.py:056:find_register_start_end_index():1259;
DEBUG:refactor.py:056:find_register_start_end_index():1260;            // Yogg Vision
DEBUG:refactor.py:056:find_register_start_end_index():1261;            me->SummonCreature(NPC_YOGG_SARON_VISION, 2109.695f, -25.09549f, 222.3250f, 0);
DEBUG:refactor.py:056:find_register_start_end_index():1262;        }
DEBUG:refactor.py:056:find_register_start_end_index():1263;
DEBUG:refactor.py:056:find_register_start_end_index():1264;        void PrepareIceCrownIllusion()
DEBUG:refactor.py:056:find_register_start_end_index():1265;        {
DEBUG:refactor.py:056:find_register_start_end_index():1266;            // Laughing Skulls
DEBUG:refactor.py:056:find_register_start_end_index():1267;            me->SummonCreature(NPC_LAUGHING_SKULL, 1931.12f, -92.702f, 239.991f, 5.2819f);
DEBUG:refactor.py:056:find_register_start_end_index():1268;            if (urand(0, 1))
DEBUG:refactor.py:056:find_register_start_end_index():1269;                me->SummonCreature(NPC_LAUGHING_SKULL, 1969.88f, -147.729f, 239.991f, 2.37593f);
DEBUG:refactor.py:056:find_register_start_end_index():1270;            else
DEBUG:refactor.py:056:find_register_start_end_index():1271;                me->SummonCreature(NPC_LAUGHING_SKULL, 1878, -93.3f, 240, 0);
DEBUG:refactor.py:056:find_register_start_end_index():1272;            if (urand(0, 1))
DEBUG:refactor.py:056:find_register_start_end_index():1273;                me->SummonCreature(NPC_LAUGHING_SKULL, 1950.78f, -167.902f, 239.991f, 2.34844f);
DEBUG:refactor.py:056:find_register_start_end_index():1274;            else
DEBUG:refactor.py:056:find_register_start_end_index():1275;                me->SummonCreature(NPC_LAUGHING_SKULL, 1938.45f, -116.5f, 240, 0);
DEBUG:refactor.py:056:find_register_start_end_index():1276;            if (urand(0, 1))
DEBUG:refactor.py:056:find_register_start_end_index():1277;                me->SummonCreature(NPC_LAUGHING_SKULL, 1896.45f, -141.469f, 239.991f, 6.12227f);
DEBUG:refactor.py:056:find_register_start_end_index():1278;            else
DEBUG:refactor.py:056:find_register_start_end_index():1279;                me->SummonCreature(NPC_LAUGHING_SKULL, 1921, -158, 240, 0);
DEBUG:refactor.py:056:find_register_start_end_index():1280;
DEBUG:refactor.py:056:find_register_start_end_index():1281;            // Influence
DEBUG:refactor.py:056:find_register_start_end_index():1282;            me->SummonCreature(NPC_INFLUENCE_TENTACLE, 1958.29f, -128.65f, 239.99f, 3.61293f);
DEBUG:refactor.py:056:find_register_start_end_index():1283;            me->SummonCreature(NPC_INFLUENCE_TENTACLE, 1957.78f, -134.368f, 239.99f, 3.35375f);
DEBUG:refactor.py:056:find_register_start_end_index():1284;            me->SummonCreature(NPC_INFLUENCE_TENTACLE, 1953.04f, -137.843f, 239.99f, 3.55796f);
DEBUG:refactor.py:056:find_register_start_end_index():1285;            me->SummonCreature(NPC_INFLUENCE_TENTACLE, 1900.31f, -93.5241f, 239.99f, 4.50043f);
DEBUG:refactor.py:056:find_register_start_end_index():1286;            me->SummonCreature(NPC_INFLUENCE_TENTACLE, 1895.03f, -98.0773f, 239.99f, 4.88135f);
DEBUG:refactor.py:056:find_register_start_end_index():1287;            me->SummonCreature(NPC_INFLUENCE_TENTACLE, 1895.19f, -104.587f, 239.99f, 5.02271f);
DEBUG:refactor.py:056:find_register_start_end_index():1288;            me->SummonCreature(NPC_INFLUENCE_TENTACLE, 1923.31f, -125.98f, 240, 4.2f);
DEBUG:refactor.py:056:find_register_start_end_index():1289;
DEBUG:refactor.py:056:find_register_start_end_index():1290;            // Others
DEBUG:refactor.py:056:find_register_start_end_index():1291;            me->SummonCreature(NPC_LICH_KING, 1906.98f, -153, 240, 4.2f);
DEBUG:refactor.py:056:find_register_start_end_index():1292;            me->SummonCreature(NPC_IMMOLATED_CHAMPION, 1902.03f, -161.7f, 240, 1.07f);
DEBUG:refactor.py:056:find_register_start_end_index():1293;
DEBUG:refactor.py:056:find_register_start_end_index():1294;            // Yogg Vision
DEBUG:refactor.py:056:find_register_start_end_index():1295;            me->SummonCreature(NPC_YOGG_SARON_VISION, 1906.226f, -155.8941f, 223.4727, 0);
DEBUG:refactor.py:056:find_register_start_end_index():1296;        }
DEBUG:refactor.py:056:find_register_start_end_index():1297;
DEBUG:refactor.py:056:find_register_start_end_index():1298;        void PrepareStormwindIllusion()
DEBUG:refactor.py:056:find_register_start_end_index():1299;        {
DEBUG:refactor.py:056:find_register_start_end_index():1300;            // Laughing Skulls
DEBUG:refactor.py:056:find_register_start_end_index():1301;            if (urand(0, 1))
DEBUG:refactor.py:056:find_register_start_end_index():1302;                me->SummonCreature(NPC_LAUGHING_SKULL, 1916.36f, 28.05f, 239.666f, 1.30238f);
DEBUG:refactor.py:056:find_register_start_end_index():1303;            else
DEBUG:refactor.py:056:find_register_start_end_index():1304;                me->SummonCreature(NPC_LAUGHING_SKULL, 1966.7f, 57.8f, 239.66f, 0);
DEBUG:refactor.py:056:find_register_start_end_index():1305;            if (urand(0, 1))
DEBUG:refactor.py:056:find_register_start_end_index():1306;                me->SummonCreature(NPC_LAUGHING_SKULL, 1902, 75.1362f, 239.666f, 6.06189f);
DEBUG:refactor.py:056:find_register_start_end_index():1307;            else
DEBUG:refactor.py:056:find_register_start_end_index():1308;                me->SummonCreature(NPC_LAUGHING_SKULL, 1933, 91, 240, 0);
DEBUG:refactor.py:056:find_register_start_end_index():1309;            me->SummonCreature(NPC_LAUGHING_SKULL, 1914.42f, 90.8465f, 239.666f, 5.25294f);
DEBUG:refactor.py:056:find_register_start_end_index():1310;            me->SummonCreature(NPC_LAUGHING_SKULL, 1963.68f, 89.7549f, 239.667f, 3.70571f);
DEBUG:refactor.py:056:find_register_start_end_index():1311;
DEBUG:refactor.py:056:find_register_start_end_index():1312;            // Influence
DEBUG:refactor.py:056:find_register_start_end_index():1313;            me->SummonCreature(NPC_INFLUENCE_TENTACLE, 1931.41f, 39.0711f, 239.66f, 1.82467f);
DEBUG:refactor.py:056:find_register_start_end_index():1314;            me->SummonCreature(NPC_INFLUENCE_TENTACLE, 1908.67f, 45.5867f, 239.666f, 0.72119f);
DEBUG:refactor.py:056:find_register_start_end_index():1315;            me->SummonCreature(NPC_INFLUENCE_TENTACLE, 1897.68f, 66.1274f, 239.666f, 6.27395f);
DEBUG:refactor.py:056:find_register_start_end_index():1316;            me->SummonCreature(NPC_INFLUENCE_TENTACLE, 1950.73f, 49.3446f, 239.666f, 2.63756f);
DEBUG:refactor.py:056:find_register_start_end_index():1317;            me->SummonCreature(NPC_INFLUENCE_TENTACLE, 1923.16f, 97.5586f, 239.666f, 4.74635f);
DEBUG:refactor.py:056:find_register_start_end_index():1318;            me->SummonCreature(NPC_INFLUENCE_TENTACLE, 1956.16f, 72.1403f, 239.666f, 3.19518f);
DEBUG:refactor.py:056:find_register_start_end_index():1319;            me->SummonCreature(NPC_INFLUENCE_TENTACLE, 1944.81f, 92.3154f, 239.666f, 4.03556f);
DEBUG:refactor.py:056:find_register_start_end_index():1320;
DEBUG:refactor.py:056:find_register_start_end_index():1321;            // Others
DEBUG:refactor.py:056:find_register_start_end_index():1322;            me->SummonCreature(NPC_GARONA, 1928.58f, 65.64f, 242.37f, 2.1f);
DEBUG:refactor.py:056:find_register_start_end_index():1323;            me->SummonCreature(NPC_KING_LLANE, 1925.14f, 71.74f, 242.37f, 5.17f);
DEBUG:refactor.py:056:find_register_start_end_index():1324;
DEBUG:refactor.py:056:find_register_start_end_index():1325;            // Yogg Vision
DEBUG:refactor.py:056:find_register_start_end_index():1326;            me->SummonCreature(NPC_YOGG_SARON_VISION, 1929.160f, 67.75694f, 221.7322f, 0);
DEBUG:refactor.py:056:find_register_start_end_index():1327;        }
DEBUG:refactor.py:056:find_register_start_end_index():1328;
DEBUG:refactor.py:056:find_register_start_end_index():1329;        void DoAction(int32 param) override
DEBUG:refactor.py:056:find_register_start_end_index():1330;        {
DEBUG:refactor.py:056:find_register_start_end_index():1331;            if (param == ACTION_DESPAWN_ADDS)
DEBUG:refactor.py:056:find_register_start_end_index():1332;            {
DEBUG:refactor.py:056:find_register_start_end_index():1333;                summons.DespawnAll();
DEBUG:refactor.py:056:find_register_start_end_index():1334;                return;
DEBUG:refactor.py:056:find_register_start_end_index():1335;            }
DEBUG:refactor.py:056:find_register_start_end_index():1336;            else if (param == ACTION_INFLUENCE_TENTACLE_DIED)
DEBUG:refactor.py:056:find_register_start_end_index():1337;            {
DEBUG:refactor.py:056:find_register_start_end_index():1338;                _tentacleCount++;
DEBUG:refactor.py:056:find_register_start_end_index():1339;                if (_tentacleCount >= 7 /*TENTACLES COUNT*/)
DEBUG:refactor.py:056:find_register_start_end_index():1340;                {
DEBUG:refactor.py:056:find_register_start_end_index():1341;                    // Stun
DEBUG:refactor.py:056:find_register_start_end_index():1342;                    if (me->GetInstanceScript())
DEBUG:refactor.py:056:find_register_start_end_index():1343;                        if(Creature* sara = ObjectAccessor::GetCreature(*me, me->GetInstanceScript()->GetGuidData(NPC_SARA)))
DEBUG:refactor.py:056:find_register_start_end_index():1344;                            sara->AI()->DoAction(MINUTE * IN_MILLISECONDS - std::min((uint32)MINUTE * IN_MILLISECONDS, _induceTimer));
DEBUG:refactor.py:056:find_register_start_end_index():1345;
DEBUG:refactor.py:056:find_register_start_end_index():1346;                    _induceTimer = 0;
DEBUG:refactor.py:056:find_register_start_end_index():1347;                    summons.DespawnEntry(NPC_LAUGHING_SKULL);
DEBUG:refactor.py:056:find_register_start_end_index():1348;                    if (GameObject* go = me->FindNearestGameObject(GO_CHAMBER_ILLUSION_DOORS + _activeIllusion, 150.0f))
DEBUG:refactor.py:056:find_register_start_end_index():1349;                        go->SetGoState(GO_STATE_ACTIVE);
DEBUG:refactor.py:056:find_register_start_end_index():1350;                }
DEBUG:refactor.py:056:find_register_start_end_index():1351;                return;
DEBUG:refactor.py:056:find_register_start_end_index():1352;            }
DEBUG:refactor.py:056:find_register_start_end_index():1353;            else if (param == ACTION_REMOVE_STUN)
DEBUG:refactor.py:056:find_register_start_end_index():1354;                return;
DEBUG:refactor.py:056:find_register_start_end_index():1355;
DEBUG:refactor.py:056:find_register_start_end_index():1356;            summons.DespawnAll();
DEBUG:refactor.py:056:find_register_start_end_index():1357;            switch(param)
DEBUG:refactor.py:056:find_register_start_end_index():1358;            {
DEBUG:refactor.py:056:find_register_start_end_index():1359;                case ACTION_ILLUSION_STORMWIND:
DEBUG:refactor.py:056:find_register_start_end_index():1360;                    PrepareStormwindIllusion();
DEBUG:refactor.py:056:find_register_start_end_index():1361;                    break;
DEBUG:refactor.py:056:find_register_start_end_index():1362;                case ACTION_ILLUSION_DRAGONS:
DEBUG:refactor.py:056:find_register_start_end_index():1363;                    PrepareChamberIllusion();
DEBUG:refactor.py:056:find_register_start_end_index():1364;                    break;
DEBUG:refactor.py:056:find_register_start_end_index():1365;                case ACTION_ILLUSION_ICECROWN:
DEBUG:refactor.py:056:find_register_start_end_index():1366;                    PrepareIceCrownIllusion();
DEBUG:refactor.py:056:find_register_start_end_index():1367;                    break;
DEBUG:refactor.py:056:find_register_start_end_index():1368;            }
DEBUG:refactor.py:056:find_register_start_end_index():1369;
DEBUG:refactor.py:056:find_register_start_end_index():1370;            for (uint32 i = GO_CHAMBER_ILLUSION_DOORS; i <= GO_STORMWIND_ILLUSION_DOORS; ++i)
DEBUG:refactor.py:056:find_register_start_end_index():1371;                if (GameObject* go = me->FindNearestGameObject(i, 150.0f))
DEBUG:refactor.py:056:find_register_start_end_index():1372;                    go->SetGoState(GO_STATE_READY);
DEBUG:refactor.py:056:find_register_start_end_index():1373;
DEBUG:refactor.py:056:find_register_start_end_index():1374;            _activeIllusion = param - 1;
DEBUG:refactor.py:056:find_register_start_end_index():1375;            _tentacleCount = 0;
DEBUG:refactor.py:056:find_register_start_end_index():1376;            _induceTimer = 1;
DEBUG:refactor.py:056:find_register_start_end_index():1377;
DEBUG:refactor.py:056:find_register_start_end_index():1378;            me->CastSpell(me, SPELL_INDUCE_MADNESS, false);
DEBUG:refactor.py:056:find_register_start_end_index():1379;        }
DEBUG:refactor.py:056:find_register_start_end_index():1380;
DEBUG:refactor.py:056:find_register_start_end_index():1381;        uint32 GetData(uint32 param) const override
DEBUG:refactor.py:056:find_register_start_end_index():1382;        {
DEBUG:refactor.py:056:find_register_start_end_index():1383;            if (param == DATA_GET_CURRENT_ILLUSION)
DEBUG:refactor.py:056:find_register_start_end_index():1384;                return _activeIllusion + 1;
DEBUG:refactor.py:056:find_register_start_end_index():1385;
DEBUG:refactor.py:056:find_register_start_end_index():1386;            return 0;
DEBUG:refactor.py:056:find_register_start_end_index():1387;        }
DEBUG:refactor.py:056:find_register_start_end_index():1388;
DEBUG:refactor.py:056:find_register_start_end_index():1389;        void DamageTaken(Unit* who, uint32& damage, DamageEffectType, SpellSchoolMask) override
DEBUG:refactor.py:056:find_register_start_end_index():1390;        {
DEBUG:refactor.py:056:find_register_start_end_index():1391;            if (_tentacleCount < 7) // if all tentacles aren't killed
DEBUG:refactor.py:056:find_register_start_end_index():1392;            {
DEBUG:refactor.py:056:find_register_start_end_index():1393;                damage = 0;
DEBUG:refactor.py:056:find_register_start_end_index():1394;                if (who)
DEBUG:refactor.py:056:find_register_start_end_index():1395;                    Unit::Kill(who, who);
DEBUG:refactor.py:056:find_register_start_end_index():1396;                return;
DEBUG:refactor.py:056:find_register_start_end_index():1397;            }
DEBUG:refactor.py:056:find_register_start_end_index():1398;
DEBUG:refactor.py:056:find_register_start_end_index():1399;            if (!_brainDamaged)
DEBUG:refactor.py:056:find_register_start_end_index():1400;            {
DEBUG:refactor.py:056:find_register_start_end_index():1401;                // START PHASE 3
DEBUG:refactor.py:056:find_register_start_end_index():1402;                if (me->HealthBelowPctDamaged(30, damage))
DEBUG:refactor.py:056:find_register_start_end_index():1403;                {
DEBUG:refactor.py:056:find_register_start_end_index():1404;                    me->SetRegeneratingHealth(false);
DEBUG:refactor.py:056:find_register_start_end_index():1405;                    _EnterEvadeMode();
DEBUG:refactor.py:056:find_register_start_end_index():1406;                    _brainDamaged = true;
DEBUG:refactor.py:056:find_register_start_end_index():1407;
DEBUG:refactor.py:056:find_register_start_end_index():1408;                    me->CastSpell(me, SPELL_BRAIN_HURT_VISUAL, true);
DEBUG:refactor.py:056:find_register_start_end_index():1409;                    if (me->GetInstanceScript())
DEBUG:refactor.py:056:find_register_start_end_index():1410;                        if(Creature* sara = ObjectAccessor::GetCreature(*me, me->GetInstanceScript()->GetGuidData(NPC_SARA)))
DEBUG:refactor.py:056:find_register_start_end_index():1411;                            sara->AI()->DoAction(ACTION_BRAIN_DAMAGED);
DEBUG:refactor.py:056:find_register_start_end_index():1412;                }
DEBUG:refactor.py:056:find_register_start_end_index():1413;            }
DEBUG:refactor.py:056:find_register_start_end_index():1414;        }
DEBUG:refactor.py:056:find_register_start_end_index():1415;
DEBUG:refactor.py:056:find_register_start_end_index():1416;        void UpdateAI(uint32 diff) override
DEBUG:refactor.py:056:find_register_start_end_index():1417;        {
DEBUG:refactor.py:056:find_register_start_end_index():1418;            if (_induceTimer)
DEBUG:refactor.py:056:find_register_start_end_index():1419;                _induceTimer += diff;
DEBUG:refactor.py:056:find_register_start_end_index():1420;        }
DEBUG:refactor.py:056:find_register_start_end_index():1421;    };
DEBUG:refactor.py:056:find_register_start_end_index():1422;};
DEBUG:refactor.py:056:find_register_start_end_index():1423;
DEBUG:refactor.py:056:find_register_start_end_index():1424;class boss_yoggsaron_death_orb : public CreatureScript
DEBUG:refactor.py:056:find_register_start_end_index():1425;{
DEBUG:refactor.py:056:find_register_start_end_index():1426;public:
DEBUG:refactor.py:056:find_register_start_end_index():1427;    boss_yoggsaron_death_orb() : CreatureScript("boss_yoggsaron_death_orb") { }
DEBUG:refactor.py:056:find_register_start_end_index():1428;
DEBUG:refactor.py:056:find_register_start_end_index():1429;    CreatureAI* GetAI(Creature* pCreature) const override
DEBUG:refactor.py:056:find_register_start_end_index():1430;    {
DEBUG:refactor.py:056:find_register_start_end_index():1431;        return GetUlduarAI<boss_yoggsaron_death_orbAI>(pCreature);
DEBUG:refactor.py:056:find_register_start_end_index():1432;    }
DEBUG:refactor.py:056:find_register_start_end_index():1433;
DEBUG:refactor.py:056:find_register_start_end_index():1434;    struct boss_yoggsaron_death_orbAI : public NullCreatureAI
DEBUG:refactor.py:056:find_register_start_end_index():1435;    {
DEBUG:refactor.py:056:find_register_start_end_index():1436;        boss_yoggsaron_death_orbAI(Creature* pCreature) : NullCreatureAI(pCreature)
DEBUG:refactor.py:056:find_register_start_end_index():1437;        {
DEBUG:refactor.py:056:find_register_start_end_index():1438;            me->CastSpell(me, SPELL_DEATH_RAY_WARNING, true);
DEBUG:refactor.py:056:find_register_start_end_index():1439;            _startTimer = 1;
DEBUG:refactor.py:056:find_register_start_end_index():1440;        }
DEBUG:refactor.py:056:find_register_start_end_index():1441;
DEBUG:refactor.py:056:find_register_start_end_index():1442;        uint32 _startTimer;
DEBUG:refactor.py:056:find_register_start_end_index():1443;
DEBUG:refactor.py:056:find_register_start_end_index():1444;        void UpdateAI(uint32 diff) override
DEBUG:refactor.py:056:find_register_start_end_index():1445;        {
DEBUG:refactor.py:056:find_register_start_end_index():1446;            if (_startTimer)
DEBUG:refactor.py:056:find_register_start_end_index():1447;            {
DEBUG:refactor.py:056:find_register_start_end_index():1448;                _startTimer += diff;
DEBUG:refactor.py:056:find_register_start_end_index():1449;                if (_startTimer > 4000)
DEBUG:refactor.py:056:find_register_start_end_index():1450;                {
DEBUG:refactor.py:056:find_register_start_end_index():1451;                    me->CastSpell(me, SPELL_DEATH_RAY_DAMAGE_VISUAL, true);
DEBUG:refactor.py:056:find_register_start_end_index():1452;                    me->CastSpell(me, SPELL_DEATH_RAY_DAMAGE, true);
DEBUG:refactor.py:056:find_register_start_end_index():1453;
DEBUG:refactor.py:056:find_register_start_end_index():1454;                    _startTimer = 0;
DEBUG:refactor.py:056:find_register_start_end_index():1455;                    me->SetSpeed(MOVE_WALK, 2);
DEBUG:refactor.py:056:find_register_start_end_index():1456;                    me->SetSpeed(MOVE_RUN, 2);
DEBUG:refactor.py:056:find_register_start_end_index():1457;                    me->GetMotionMaster()->MoveRandom(20.0f);
DEBUG:refactor.py:056:find_register_start_end_index():1458;                }
DEBUG:refactor.py:056:find_register_start_end_index():1459;            }
DEBUG:refactor.py:056:find_register_start_end_index():1460;        }
DEBUG:refactor.py:056:find_register_start_end_index():1461;    };
DEBUG:refactor.py:056:find_register_start_end_index():1462;};
DEBUG:refactor.py:056:find_register_start_end_index():1463;
DEBUG:refactor.py:056:find_register_start_end_index():1464;class boss_yoggsaron_crusher_tentacle : public CreatureScript
DEBUG:refactor.py:056:find_register_start_end_index():1465;{
DEBUG:refactor.py:056:find_register_start_end_index():1466;public:
DEBUG:refactor.py:056:find_register_start_end_index():1467;    boss_yoggsaron_crusher_tentacle() : CreatureScript("boss_yoggsaron_crusher_tentacle") { }
DEBUG:refactor.py:056:find_register_start_end_index():1468;
DEBUG:refactor.py:056:find_register_start_end_index():1469;    CreatureAI* GetAI(Creature* pCreature) const override
DEBUG:refactor.py:056:find_register_start_end_index():1470;    {
DEBUG:refactor.py:056:find_register_start_end_index():1471;        return GetUlduarAI<boss_yoggsaron_crusher_tentacleAI>(pCreature);
DEBUG:refactor.py:056:find_register_start_end_index():1472;    }
DEBUG:refactor.py:056:find_register_start_end_index():1473;
DEBUG:refactor.py:056:find_register_start_end_index():1474;    struct boss_yoggsaron_crusher_tentacleAI : public ScriptedAI
DEBUG:refactor.py:056:find_register_start_end_index():1475;    {
DEBUG:refactor.py:056:find_register_start_end_index():1476;        boss_yoggsaron_crusher_tentacleAI(Creature* pCreature) : ScriptedAI(pCreature)
DEBUG:refactor.py:056:find_register_start_end_index():1477;        {
DEBUG:refactor.py:056:find_register_start_end_index():1478;            me->SetCombatMovement(false);
DEBUG:refactor.py:056:find_register_start_end_index():1479;            me->CastSpell(me, SPELL_CRUSH, true);
DEBUG:refactor.py:056:find_register_start_end_index():1480;            me->CastSpell(me, SPELL_FOCUSED_ANGER, true);
DEBUG:refactor.py:056:find_register_start_end_index():1481;            me->CastSpell(me, SPELL_DIMINISH_POWER, false);
DEBUG:refactor.py:056:find_register_start_end_index():1482;        }
DEBUG:refactor.py:056:find_register_start_end_index():1483;
DEBUG:refactor.py:056:find_register_start_end_index():1484;        void Reset() override
DEBUG:refactor.py:056:find_register_start_end_index():1485;        {
DEBUG:refactor.py:056:find_register_start_end_index():1486;            me->SetInCombatWithZone();
DEBUG:refactor.py:056:find_register_start_end_index():1487;        }
DEBUG:refactor.py:056:find_register_start_end_index():1488;
DEBUG:refactor.py:056:find_register_start_end_index():1489;        void DamageTaken(Unit* who, uint32&, DamageEffectType damagetype, SpellSchoolMask) override
DEBUG:refactor.py:056:find_register_start_end_index():1490;        {
DEBUG:refactor.py:056:find_register_start_end_index():1491;            if (who && damagetype == DIRECT_DAMAGE)
DEBUG:refactor.py:056:find_register_start_end_index():1492;            {
DEBUG:refactor.py:056:find_register_start_end_index():1493;                DoResetThreatList();
DEBUG:refactor.py:056:find_register_start_end_index():1494;                me->AddThreat(who, 100000);
DEBUG:refactor.py:056:find_register_start_end_index():1495;                AttackStart(who);
DEBUG:refactor.py:056:find_register_start_end_index():1496;                me->InterruptNonMeleeSpells(false);
DEBUG:refactor.py:056:find_register_start_end_index():1497;            }
DEBUG:refactor.py:056:find_register_start_end_index():1498;        }
DEBUG:refactor.py:056:find_register_start_end_index():1499;
DEBUG:refactor.py:056:find_register_start_end_index():1500;        void DoAction(int32 param) override
DEBUG:refactor.py:056:find_register_start_end_index():1501;        {
DEBUG:refactor.py:056:find_register_start_end_index():1502;            if (param == ACTION_REMOVE_STUN)
DEBUG:refactor.py:056:find_register_start_end_index():1503;                me->RemoveAura(SPELL_SHATTERED_ILLUSION);
DEBUG:refactor.py:056:find_register_start_end_index():1504;        }
DEBUG:refactor.py:056:find_register_start_end_index():1505;
DEBUG:refactor.py:056:find_register_start_end_index():1506;        void UpdateAI(uint32  /*diff*/) override
DEBUG:refactor.py:056:find_register_start_end_index():1507;        {
DEBUG:refactor.py:056:find_register_start_end_index():1508;            if (!UpdateVictim())
DEBUG:refactor.py:056:find_register_start_end_index():1509;                return;
DEBUG:refactor.py:056:find_register_start_end_index():1510;
DEBUG:refactor.py:056:find_register_start_end_index():1511;            if (me->IsWithinMeleeRange(me->GetVictim()))
DEBUG:refactor.py:056:find_register_start_end_index():1512;            {
DEBUG:refactor.py:056:find_register_start_end_index():1513;                DoMeleeAttackIfReady();
DEBUG:refactor.py:056:find_register_start_end_index():1514;                return;
DEBUG:refactor.py:056:find_register_start_end_index():1515;            }
DEBUG:refactor.py:056:find_register_start_end_index():1516;
DEBUG:refactor.py:056:find_register_start_end_index():1517;            if (me->HasUnitState(UNIT_STATE_CASTING))
DEBUG:refactor.py:056:find_register_start_end_index():1518;                return;
DEBUG:refactor.py:056:find_register_start_end_index():1519;
DEBUG:refactor.py:056:find_register_start_end_index():1520;            me->CastSpell(me, SPELL_DIMINISH_POWER, false);
DEBUG:refactor.py:056:find_register_start_end_index():1521;            DoResetThreatList();
DEBUG:refactor.py:056:find_register_start_end_index():1522;        }
DEBUG:refactor.py:056:find_register_start_end_index():1523;    };
DEBUG:refactor.py:056:find_register_start_end_index():1524;};
DEBUG:refactor.py:056:find_register_start_end_index():1525;
DEBUG:refactor.py:056:find_register_start_end_index():1526;class boss_yoggsaron_corruptor_tentacle : public CreatureScript
DEBUG:refactor.py:056:find_register_start_end_index():1527;{
DEBUG:refactor.py:056:find_register_start_end_index():1528;public:
DEBUG:refactor.py:056:find_register_start_end_index():1529;    boss_yoggsaron_corruptor_tentacle() : CreatureScript("boss_yoggsaron_corruptor_tentacle") { }
DEBUG:refactor.py:056:find_register_start_end_index():1530;
DEBUG:refactor.py:056:find_register_start_end_index():1531;    CreatureAI* GetAI(Creature* pCreature) const override
DEBUG:refactor.py:056:find_register_start_end_index():1532;    {
DEBUG:refactor.py:056:find_register_start_end_index():1533;        return GetUlduarAI<boss_yoggsaron_corruptor_tentacleAI>(pCreature);
DEBUG:refactor.py:056:find_register_start_end_index():1534;    }
DEBUG:refactor.py:056:find_register_start_end_index():1535;
DEBUG:refactor.py:056:find_register_start_end_index():1536;    struct boss_yoggsaron_corruptor_tentacleAI : public ScriptedAI
DEBUG:refactor.py:056:find_register_start_end_index():1537;    {
DEBUG:refactor.py:056:find_register_start_end_index():1538;        boss_yoggsaron_corruptor_tentacleAI(Creature* pCreature) : ScriptedAI(pCreature)
DEBUG:refactor.py:056:find_register_start_end_index():1539;        {
DEBUG:refactor.py:056:find_register_start_end_index():1540;            me->SetCombatMovement(false);
DEBUG:refactor.py:056:find_register_start_end_index():1541;        }
DEBUG:refactor.py:056:find_register_start_end_index():1542;
DEBUG:refactor.py:056:find_register_start_end_index():1543;        void DoAction(int32 param) override
DEBUG:refactor.py:056:find_register_start_end_index():1544;        {
DEBUG:refactor.py:056:find_register_start_end_index():1545;            if (param == ACTION_REMOVE_STUN)
DEBUG:refactor.py:056:find_register_start_end_index():1546;                me->RemoveAura(SPELL_SHATTERED_ILLUSION);
DEBUG:refactor.py:056:find_register_start_end_index():1547;        }
DEBUG:refactor.py:056:find_register_start_end_index():1548;
DEBUG:refactor.py:056:find_register_start_end_index():1549;        Unit* SelectCorruptionTarget()
DEBUG:refactor.py:056:find_register_start_end_index():1550;        {
DEBUG:refactor.py:056:find_register_start_end_index():1551;            Player* target = nullptr;
DEBUG:refactor.py:056:find_register_start_end_index():1552;            Map::PlayerList const& pList = me->GetMap()->GetPlayers();
DEBUG:refactor.py:056:find_register_start_end_index():1553;            uint8 num = urand(0, pList.getSize() - 1);
DEBUG:refactor.py:056:find_register_start_end_index():1554;            uint8 count = 0;
DEBUG:refactor.py:056:find_register_start_end_index():1555;            for (Map::PlayerList::const_iterator itr = pList.begin(); itr != pList.end(); ++itr, ++count)
DEBUG:refactor.py:056:find_register_start_end_index():1556;            {
DEBUG:refactor.py:056:find_register_start_end_index():1557;                if (me->GetDistance(itr->GetSource()) > 200 || itr->GetSource()->GetPositionZ() < 300 || !itr->GetSource()->IsAlive() || itr->GetSource()->IsGameMaster())
DEBUG:refactor.py:056:find_register_start_end_index():1558;                    continue;
DEBUG:refactor.py:056:find_register_start_end_index():1559;
DEBUG:refactor.py:056:find_register_start_end_index():1560;                if (count <= num || !target)
DEBUG:refactor.py:056:find_register_start_end_index():1561;                    target = itr->GetSource();
DEBUG:refactor.py:056:find_register_start_end_index():1562;                else
DEBUG:refactor.py:056:find_register_start_end_index():1563;                    break;
DEBUG:refactor.py:056:find_register_start_end_index():1564;            }
DEBUG:refactor.py:056:find_register_start_end_index():1565;
DEBUG:refactor.py:056:find_register_start_end_index():1566;            return target;
DEBUG:refactor.py:056:find_register_start_end_index():1567;        }
DEBUG:refactor.py:056:find_register_start_end_index():1568;
DEBUG:refactor.py:056:find_register_start_end_index():1569;        void UpdateAI(uint32  /*diff*/) override
DEBUG:refactor.py:056:find_register_start_end_index():1570;        {
DEBUG:refactor.py:056:find_register_start_end_index():1571;            if (me->HasUnitState(UNIT_STATE_CASTING))
DEBUG:refactor.py:056:find_register_start_end_index():1572;                return;
DEBUG:refactor.py:056:find_register_start_end_index():1573;
DEBUG:refactor.py:056:find_register_start_end_index():1574;            if (Unit* target = SelectCorruptionTarget())
DEBUG:refactor.py:056:find_register_start_end_index():1575;            {
DEBUG:refactor.py:056:find_register_start_end_index():1576;                uint32 spellid = RAND(SPELL_APATHY, SPELL_BLACK_PLAGUE, SPELL_DRAINING_POISON, SPELL_CURSE_OF_DOOM);
DEBUG:refactor.py:056:find_register_start_end_index():1577;                me->CastSpell(target, spellid, false);
DEBUG:refactor.py:056:find_register_start_end_index():1578;            }
DEBUG:refactor.py:056:find_register_start_end_index():1579;        }
DEBUG:refactor.py:056:find_register_start_end_index():1580;    };
DEBUG:refactor.py:056:find_register_start_end_index():1581;};
DEBUG:refactor.py:056:find_register_start_end_index():1582;
DEBUG:refactor.py:056:find_register_start_end_index():1583;class boss_yoggsaron_constrictor_tentacle : public CreatureScript
DEBUG:refactor.py:056:find_register_start_end_index():1584;{
DEBUG:refactor.py:056:find_register_start_end_index():1585;public:
DEBUG:refactor.py:056:find_register_start_end_index():1586;    boss_yoggsaron_constrictor_tentacle() : CreatureScript("boss_yoggsaron_constrictor_tentacle") { }
DEBUG:refactor.py:056:find_register_start_end_index():1587;
DEBUG:refactor.py:056:find_register_start_end_index():1588;    CreatureAI* GetAI(Creature* pCreature) const override
DEBUG:refactor.py:056:find_register_start_end_index():1589;    {
DEBUG:refactor.py:056:find_register_start_end_index():1590;        return GetUlduarAI<boss_yoggsaron_constrictor_tentacleAI>(pCreature);
DEBUG:refactor.py:056:find_register_start_end_index():1591;    }
DEBUG:refactor.py:056:find_register_start_end_index():1592;
DEBUG:refactor.py:056:find_register_start_end_index():1593;    struct boss_yoggsaron_constrictor_tentacleAI : public ScriptedAI
DEBUG:refactor.py:056:find_register_start_end_index():1594;    {
DEBUG:refactor.py:056:find_register_start_end_index():1595;        boss_yoggsaron_constrictor_tentacleAI(Creature* pCreature) : ScriptedAI(pCreature)
DEBUG:refactor.py:056:find_register_start_end_index():1596;        {
DEBUG:refactor.py:056:find_register_start_end_index():1597;            me->SetCombatMovement(false);
DEBUG:refactor.py:056:find_register_start_end_index():1598;            _checkTimer = 1;
DEBUG:refactor.py:056:find_register_start_end_index():1599;            _playerGUID.Clear();
DEBUG:refactor.py:056:find_register_start_end_index():1600;        }
DEBUG:refactor.py:056:find_register_start_end_index():1601;
DEBUG:refactor.py:056:find_register_start_end_index():1602;        uint32 _checkTimer;
DEBUG:refactor.py:056:find_register_start_end_index():1603;        ObjectGuid _playerGUID;
DEBUG:refactor.py:056:find_register_start_end_index():1604;
DEBUG:refactor.py:056:find_register_start_end_index():1605;        Unit* SelectConstrictTarget()
DEBUG:refactor.py:056:find_register_start_end_index():1606;        {
DEBUG:refactor.py:056:find_register_start_end_index():1607;            Player* target = nullptr;
DEBUG:refactor.py:056:find_register_start_end_index():1608;            Map::PlayerList const& pList = me->GetMap()->GetPlayers();
DEBUG:refactor.py:056:find_register_start_end_index():1609;            uint8 num = urand(0, pList.getSize() - 1);
DEBUG:refactor.py:056:find_register_start_end_index():1610;            uint8 count = 0;
DEBUG:refactor.py:056:find_register_start_end_index():1611;            for(Map::PlayerList::const_iterator itr = pList.begin(); itr != pList.end(); ++itr, ++count)
DEBUG:refactor.py:056:find_register_start_end_index():1612;            {
DEBUG:refactor.py:056:find_register_start_end_index():1613;                if (me->GetDistance(itr->GetSource()) > 10 || !itr->GetSource()->IsAlive() || itr->GetSource()->IsGameMaster())
DEBUG:refactor.py:056:find_register_start_end_index():1614;                    continue;
DEBUG:refactor.py:056:find_register_start_end_index():1615;                if (itr->GetSource()->HasAura(SPELL_SQUEEZE) || itr->GetSource()->HasAura(SPELL_INSANE1))
DEBUG:refactor.py:056:find_register_start_end_index():1616;                    continue;
DEBUG:refactor.py:056:find_register_start_end_index():1617;
DEBUG:refactor.py:056:find_register_start_end_index():1618;                if (count <= num || !target)
DEBUG:refactor.py:056:find_register_start_end_index():1619;                    target = itr->GetSource();
DEBUG:refactor.py:056:find_register_start_end_index():1620;                else
DEBUG:refactor.py:056:find_register_start_end_index():1621;                    break;
DEBUG:refactor.py:056:find_register_start_end_index():1622;            }
DEBUG:refactor.py:056:find_register_start_end_index():1623;
DEBUG:refactor.py:056:find_register_start_end_index():1624;            return target;
DEBUG:refactor.py:056:find_register_start_end_index():1625;        }
DEBUG:refactor.py:056:find_register_start_end_index():1626;
DEBUG:refactor.py:056:find_register_start_end_index():1627;        void UpdateAI(uint32 diff) override
DEBUG:refactor.py:056:find_register_start_end_index():1628;        {
DEBUG:refactor.py:056:find_register_start_end_index():1629;            if (_checkTimer)
DEBUG:refactor.py:056:find_register_start_end_index():1630;            {
DEBUG:refactor.py:056:find_register_start_end_index():1631;                _checkTimer += diff;
DEBUG:refactor.py:056:find_register_start_end_index():1632;                if (_checkTimer >= 1000 && !me->HasUnitState(UNIT_STATE_STUNNED))
DEBUG:refactor.py:056:find_register_start_end_index():1633;                {
DEBUG:refactor.py:056:find_register_start_end_index():1634;                    if (Unit* target = SelectConstrictTarget())
DEBUG:refactor.py:056:find_register_start_end_index():1635;                    {
DEBUG:refactor.py:056:find_register_start_end_index():1636;                        target->CastSpell(me, SPELL_LUNGE, true);
DEBUG:refactor.py:056:find_register_start_end_index():1637;                        target->CastSpell(target, SPELL_SQUEEZE, true);
DEBUG:refactor.py:056:find_register_start_end_index():1638;                        _playerGUID = target->GetGUID();
DEBUG:refactor.py:056:find_register_start_end_index():1639;                        _checkTimer = 0;
DEBUG:refactor.py:056:find_register_start_end_index():1640;                        return;
DEBUG:refactor.py:056:find_register_start_end_index():1641;                    }
DEBUG:refactor.py:056:find_register_start_end_index():1642;
DEBUG:refactor.py:056:find_register_start_end_index():1643;                    _checkTimer = 1;
DEBUG:refactor.py:056:find_register_start_end_index():1644;                }
DEBUG:refactor.py:056:find_register_start_end_index():1645;            }
DEBUG:refactor.py:056:find_register_start_end_index():1646;        }
DEBUG:refactor.py:056:find_register_start_end_index():1647;
DEBUG:refactor.py:056:find_register_start_end_index():1648;        void DoAction(int32 param) override
DEBUG:refactor.py:056:find_register_start_end_index():1649;        {
DEBUG:refactor.py:056:find_register_start_end_index():1650;            if (param == ACTION_REMOVE_STUN)
DEBUG:refactor.py:056:find_register_start_end_index():1651;                me->RemoveAura(SPELL_SHATTERED_ILLUSION);
DEBUG:refactor.py:056:find_register_start_end_index():1652;        }
DEBUG:refactor.py:056:find_register_start_end_index():1653;
DEBUG:refactor.py:056:find_register_start_end_index():1654;        void JustDied(Unit*) override
DEBUG:refactor.py:056:find_register_start_end_index():1655;        {
DEBUG:refactor.py:056:find_register_start_end_index():1656;            if (Unit* player = ObjectAccessor::GetUnit(*me, _playerGUID))
DEBUG:refactor.py:056:find_register_start_end_index():1657;                player->RemoveAura(SPELL_SQUEEZE);
DEBUG:refactor.py:056:find_register_start_end_index():1658;        }
DEBUG:refactor.py:056:find_register_start_end_index():1659;    };
DEBUG:refactor.py:056:find_register_start_end_index():1660;};
DEBUG:refactor.py:056:find_register_start_end_index():1661;
DEBUG:refactor.py:056:find_register_start_end_index():1662;const uint32 TABLE_KEEPER_PASSIVE[4] = {SPELL_FREYA_PASSIVE, SPELL_HODIR_PASSIVE, SPELL_MIMIRON_PASSIVE, SPELL_THORIM_PASSIVE};
DEBUG:refactor.py:056:find_register_start_end_index():1663;
DEBUG:refactor.py:056:find_register_start_end_index():1664;class boss_yoggsaron_keeper : public CreatureScript
DEBUG:refactor.py:056:find_register_start_end_index():1665;{
DEBUG:refactor.py:056:find_register_start_end_index():1666;public:
DEBUG:refactor.py:056:find_register_start_end_index():1667;    boss_yoggsaron_keeper() : CreatureScript("boss_yoggsaron_keeper") { }
DEBUG:refactor.py:056:find_register_start_end_index():1668;
DEBUG:refactor.py:056:find_register_start_end_index():1669;    CreatureAI* GetAI(Creature* pCreature) const override
DEBUG:refactor.py:056:find_register_start_end_index():1670;    {
DEBUG:refactor.py:056:find_register_start_end_index():1671;        return GetUlduarAI<boss_yoggsaron_keeperAI>(pCreature);
DEBUG:refactor.py:056:find_register_start_end_index():1672;    }
DEBUG:refactor.py:056:find_register_start_end_index():1673;
DEBUG:refactor.py:056:find_register_start_end_index():1674;    struct boss_yoggsaron_keeperAI : public NullCreatureAI
DEBUG:refactor.py:056:find_register_start_end_index():1675;    {
DEBUG:refactor.py:056:find_register_start_end_index():1676;        boss_yoggsaron_keeperAI(Creature* pCreature) : NullCreatureAI(pCreature)
DEBUG:refactor.py:056:find_register_start_end_index():1677;        {
DEBUG:refactor.py:056:find_register_start_end_index():1678;            me->ApplySpellImmune(0, IMMUNITY_STATE, SPELL_AURA_MOD_SCALE, true);
DEBUG:refactor.py:056:find_register_start_end_index():1679;            switch (me->GetEntry())
DEBUG:refactor.py:056:find_register_start_end_index():1680;            {
DEBUG:refactor.py:056:find_register_start_end_index():1681;                case NPC_FREYA_KEEPER:
DEBUG:refactor.py:056:find_register_start_end_index():1682;                    _keeperId = KEEPER_FREYA;
DEBUG:refactor.py:056:find_register_start_end_index():1683;                    break;
DEBUG:refactor.py:056:find_register_start_end_index():1684;                case NPC_HODIR_KEEPER:
DEBUG:refactor.py:056:find_register_start_end_index():1685;                    _keeperId = KEEPER_HODIR;
DEBUG:refactor.py:056:find_register_start_end_index():1686;                    break;
DEBUG:refactor.py:056:find_register_start_end_index():1687;                case NPC_MIMIRON_KEEPER:
DEBUG:refactor.py:056:find_register_start_end_index():1688;                    _keeperId = KEEPER_MIMIRON;
DEBUG:refactor.py:056:find_register_start_end_index():1689;                    break;
DEBUG:refactor.py:056:find_register_start_end_index():1690;                case NPC_THORIM_KEEPER:
DEBUG:refactor.py:056:find_register_start_end_index():1691;                    _keeperId = KEEPER_THORIM;
DEBUG:refactor.py:056:find_register_start_end_index():1692;                    break;
DEBUG:refactor.py:056:find_register_start_end_index():1693;                default:
DEBUG:refactor.py:056:find_register_start_end_index():1694;                    return;
DEBUG:refactor.py:056:find_register_start_end_index():1695;            }
DEBUG:refactor.py:056:find_register_start_end_index():1696;            me->RemoveAura(TABLE_KEEPER_PASSIVE[_keeperId]);
DEBUG:refactor.py:056:find_register_start_end_index():1697;
DEBUG:refactor.py:056:find_register_start_end_index():1698;            scheduler.Schedule(1s, [this](TaskContext context)
DEBUG:refactor.py:056:find_register_start_end_index():1699;            {
DEBUG:refactor.py:056:find_register_start_end_index():1700;                if (me->GetInstanceScript())
DEBUG:refactor.py:056:find_register_start_end_index():1701;                {
DEBUG:refactor.py:056:find_register_start_end_index():1702;                    if (me->GetInstanceScript()->GetData(TYPE_YOGGSARON) == IN_PROGRESS && !_isEncounterInProgress)
DEBUG:refactor.py:056:find_register_start_end_index():1703;                    {
DEBUG:refactor.py:056:find_register_start_end_index():1704;                        _isEncounterInProgress = true;
DEBUG:refactor.py:056:find_register_start_end_index():1705;                        if (_keeperId == KEEPER_FREYA)
DEBUG:refactor.py:056:find_register_start_end_index():1706;                            me->CastSpell(me, SPELL_CONJURE_SANITY_WELL, false);
DEBUG:refactor.py:056:find_register_start_end_index():1707;                        if (_keeperId == KEEPER_MIMIRON)
DEBUG:refactor.py:056:find_register_start_end_index():1708;                        {
DEBUG:refactor.py:056:find_register_start_end_index():1709;                            scheduler.Schedule(2s, [this](TaskContext context)
DEBUG:refactor.py:056:find_register_start_end_index():1710;                            {
DEBUG:refactor.py:056:find_register_start_end_index():1711;                                if (!me->HasUnitState(UNIT_STATE_CASTING))
DEBUG:refactor.py:056:find_register_start_end_index():1712;                                    me->CastSpell(me, SPELL_DESTABILIZATION_MATRIX, false);
DEBUG:refactor.py:056:find_register_start_end_index():1713;                                context.Repeat(2s);
DEBUG:refactor.py:056:find_register_start_end_index():1714;                            });
DEBUG:refactor.py:056:find_register_start_end_index():1715;                        }
DEBUG:refactor.py:056:find_register_start_end_index():1716;                        if (!me->HasAura(TABLE_KEEPER_PASSIVE[_keeperId]))
DEBUG:refactor.py:056:find_register_start_end_index():1717;                            me->AddAura(TABLE_KEEPER_PASSIVE[_keeperId], me);
DEBUG:refactor.py:056:find_register_start_end_index():1718;                    }
DEBUG:refactor.py:056:find_register_start_end_index():1719;                    else if (me->GetInstanceScript()->GetData(TYPE_YOGGSARON) != IN_PROGRESS && _isEncounterInProgress)
DEBUG:refactor.py:056:find_register_start_end_index():1720;                    {
DEBUG:refactor.py:056:find_register_start_end_index():1721;                        _isEncounterInProgress = false;
DEBUG:refactor.py:056:find_register_start_end_index():1722;                        scheduler.CancelAll();
DEBUG:refactor.py:056:find_register_start_end_index():1723;                        me->RemoveAura(TABLE_KEEPER_PASSIVE[_keeperId]);
DEBUG:refactor.py:056:find_register_start_end_index():1724;                    }
DEBUG:refactor.py:056:find_register_start_end_index():1725;                }
DEBUG:refactor.py:056:find_register_start_end_index():1726;                context.Repeat(1s);
DEBUG:refactor.py:056:find_register_start_end_index():1727;            });
DEBUG:refactor.py:056:find_register_start_end_index():1728;        }
DEBUG:refactor.py:056:find_register_start_end_index():1729;
DEBUG:refactor.py:056:find_register_start_end_index():1730;        void UpdateAI(uint32 diff) override
DEBUG:refactor.py:056:find_register_start_end_index():1731;        {
DEBUG:refactor.py:056:find_register_start_end_index():1732;            scheduler.Update(diff);
DEBUG:refactor.py:056:find_register_start_end_index():1733;        }
DEBUG:refactor.py:056:find_register_start_end_index():1734;
DEBUG:refactor.py:056:find_register_start_end_index():1735;    private:
DEBUG:refactor.py:056:find_register_start_end_index():1736;        bool _isEncounterInProgress;
DEBUG:refactor.py:056:find_register_start_end_index():1737;        uint8 _keeperId;
DEBUG:refactor.py:056:find_register_start_end_index():1738;    };
DEBUG:refactor.py:056:find_register_start_end_index():1739;};
DEBUG:refactor.py:056:find_register_start_end_index():1740;
DEBUG:refactor.py:056:find_register_start_end_index():1741;class boss_yoggsaron_descend_portal : public CreatureScript
DEBUG:refactor.py:056:find_register_start_end_index():1742;{
DEBUG:refactor.py:056:find_register_start_end_index():1743;public:
DEBUG:refactor.py:056:find_register_start_end_index():1744;    boss_yoggsaron_descend_portal() : CreatureScript("boss_yoggsaron_descend_portal") { }
DEBUG:refactor.py:056:find_register_start_end_index():1745;
DEBUG:refactor.py:056:find_register_start_end_index():1746;    struct boss_yoggsaron_descend_portalAI : public PassiveAI
DEBUG:refactor.py:056:find_register_start_end_index():1747;    {
DEBUG:refactor.py:056:find_register_start_end_index():1748;        boss_yoggsaron_descend_portalAI(Creature* creature) : PassiveAI(creature), _instance(creature->GetInstanceScript()) {}
DEBUG:refactor.py:056:find_register_start_end_index():1749;
DEBUG:refactor.py:056:find_register_start_end_index():1750;        void OnSpellClick(Unit* clicker, bool& spellClickHandled) override
DEBUG:refactor.py:056:find_register_start_end_index():1751;        {
DEBUG:refactor.py:056:find_register_start_end_index():1752;            if (!spellClickHandled)
DEBUG:refactor.py:056:find_register_start_end_index():1753;                return;
DEBUG:refactor.py:056:find_register_start_end_index():1754;
DEBUG:refactor.py:056:find_register_start_end_index():1755;            if (!me->GetUInt32Value(UNIT_NPC_FLAGS))
DEBUG:refactor.py:056:find_register_start_end_index():1756;                return;
DEBUG:refactor.py:056:find_register_start_end_index():1757;
DEBUG:refactor.py:056:find_register_start_end_index():1758;            switch (me->GetArmor())
DEBUG:refactor.py:056:find_register_start_end_index():1759;            {
DEBUG:refactor.py:056:find_register_start_end_index():1760;                case ACTION_ILLUSION_DRAGONS:
DEBUG:refactor.py:056:find_register_start_end_index():1761;                    clicker->CastSpell(clicker, SPELL_TELEPORT_TO_CHAMBER, true);
DEBUG:refactor.py:056:find_register_start_end_index():1762;                    break;
DEBUG:refactor.py:056:find_register_start_end_index():1763;                case ACTION_ILLUSION_ICECROWN:
DEBUG:refactor.py:056:find_register_start_end_index():1764;                    clicker->CastSpell(clicker, SPELL_TELEPORT_TO_ICECROWN, true);
DEBUG:refactor.py:056:find_register_start_end_index():1765;                    break;
DEBUG:refactor.py:056:find_register_start_end_index():1766;                case ACTION_ILLUSION_STORMWIND:
DEBUG:refactor.py:056:find_register_start_end_index():1767;                    clicker->CastSpell(clicker, SPELL_TELEPORT_TO_STORMWIND, true);
DEBUG:refactor.py:056:find_register_start_end_index():1768;                    break;
DEBUG:refactor.py:056:find_register_start_end_index():1769;            }
DEBUG:refactor.py:056:find_register_start_end_index():1770;
DEBUG:refactor.py:056:find_register_start_end_index():1771;            me->SetUInt32Value(UNIT_NPC_FLAGS, 0);
DEBUG:refactor.py:056:find_register_start_end_index():1772;            me->DespawnOrUnsummon(1000);
DEBUG:refactor.py:056:find_register_start_end_index():1773;        }
DEBUG:refactor.py:056:find_register_start_end_index():1774;
DEBUG:refactor.py:056:find_register_start_end_index():1775;    private:
DEBUG:refactor.py:056:find_register_start_end_index():1776;        InstanceScript* _instance;
DEBUG:refactor.py:056:find_register_start_end_index():1777;    };
DEBUG:refactor.py:056:find_register_start_end_index():1778;
DEBUG:refactor.py:056:find_register_start_end_index():1779;    CreatureAI* GetAI(Creature* creature) const override
DEBUG:refactor.py:056:find_register_start_end_index():1780;    {
DEBUG:refactor.py:056:find_register_start_end_index():1781;        return GetUlduarAI<boss_yoggsaron_descend_portalAI>(creature);
DEBUG:refactor.py:056:find_register_start_end_index():1782;    }
DEBUG:refactor.py:056:find_register_start_end_index():1783;};
DEBUG:refactor.py:056:find_register_start_end_index():1784;
DEBUG:refactor.py:056:find_register_start_end_index():1785;class boss_yoggsaron_influence_tentacle : public CreatureScript
DEBUG:refactor.py:056:find_register_start_end_index():1786;{
DEBUG:refactor.py:056:find_register_start_end_index():1787;public:
DEBUG:refactor.py:056:find_register_start_end_index():1788;    boss_yoggsaron_influence_tentacle() : CreatureScript("boss_yoggsaron_influence_tentacle") { }
DEBUG:refactor.py:056:find_register_start_end_index():1789;
DEBUG:refactor.py:056:find_register_start_end_index():1790;    CreatureAI* GetAI(Creature* pCreature) const override
DEBUG:refactor.py:056:find_register_start_end_index():1791;    {
DEBUG:refactor.py:056:find_register_start_end_index():1792;        return GetUlduarAI<boss_yoggsaron_influence_tentacleAI>(pCreature);
DEBUG:refactor.py:056:find_register_start_end_index():1793;    }
DEBUG:refactor.py:056:find_register_start_end_index():1794;
DEBUG:refactor.py:056:find_register_start_end_index():1795;    struct boss_yoggsaron_influence_tentacleAI : public NullCreatureAI
DEBUG:refactor.py:056:find_register_start_end_index():1796;    {
DEBUG:refactor.py:056:find_register_start_end_index():1797;        boss_yoggsaron_influence_tentacleAI(Creature* pCreature) : NullCreatureAI(pCreature)
DEBUG:refactor.py:056:find_register_start_end_index():1798;        {
DEBUG:refactor.py:056:find_register_start_end_index():1799;            me->CastSpell(me, SPELL_GRIM_REPRISAL, true);
DEBUG:refactor.py:056:find_register_start_end_index():1800;        }
DEBUG:refactor.py:056:find_register_start_end_index():1801;
DEBUG:refactor.py:056:find_register_start_end_index():1802;        void DamageTaken(Unit*, uint32&, DamageEffectType, SpellSchoolMask) override
DEBUG:refactor.py:056:find_register_start_end_index():1803;        {
DEBUG:refactor.py:056:find_register_start_end_index():1804;            if (me->GetEntry() != NPC_INFLUENCE_TENTACLE)
DEBUG:refactor.py:056:find_register_start_end_index():1805;                me->UpdateEntry(NPC_INFLUENCE_TENTACLE, 0, false);
DEBUG:refactor.py:056:find_register_start_end_index():1806;        }
DEBUG:refactor.py:056:find_register_start_end_index():1807;
DEBUG:refactor.py:056:find_register_start_end_index():1808;        void JustDied(Unit*) override
DEBUG:refactor.py:056:find_register_start_end_index():1809;        {
DEBUG:refactor.py:056:find_register_start_end_index():1810;            if (me->IsSummon())
DEBUG:refactor.py:056:find_register_start_end_index():1811;                if (Unit* sara = me->ToTempSummon()->GetSummonerUnit())
DEBUG:refactor.py:056:find_register_start_end_index():1812;                    sara->GetAI()->DoAction(ACTION_INFLUENCE_TENTACLE_DIED);
DEBUG:refactor.py:056:find_register_start_end_index():1813;        }
DEBUG:refactor.py:056:find_register_start_end_index():1814;    };
DEBUG:refactor.py:056:find_register_start_end_index():1815;};
DEBUG:refactor.py:056:find_register_start_end_index():1816;
DEBUG:refactor.py:056:find_register_start_end_index():1817;class boss_yoggsaron_immortal_guardian : public CreatureScript
DEBUG:refactor.py:056:find_register_start_end_index():1818;{
DEBUG:refactor.py:056:find_register_start_end_index():1819;public:
DEBUG:refactor.py:056:find_register_start_end_index():1820;    boss_yoggsaron_immortal_guardian() : CreatureScript("boss_yoggsaron_immortal_guardian") { }
DEBUG:refactor.py:056:find_register_start_end_index():1821;
DEBUG:refactor.py:056:find_register_start_end_index():1822;    CreatureAI* GetAI(Creature* pCreature) const override
DEBUG:refactor.py:056:find_register_start_end_index():1823;    {
DEBUG:refactor.py:056:find_register_start_end_index():1824;        return GetUlduarAI<boss_yoggsaron_immortal_guardianAI>(pCreature);
DEBUG:refactor.py:056:find_register_start_end_index():1825;    }
DEBUG:refactor.py:056:find_register_start_end_index():1826;
DEBUG:refactor.py:056:find_register_start_end_index():1827;    struct boss_yoggsaron_immortal_guardianAI : public ScriptedAI
DEBUG:refactor.py:056:find_register_start_end_index():1828;    {
DEBUG:refactor.py:056:find_register_start_end_index():1829;        boss_yoggsaron_immortal_guardianAI(Creature* pCreature) : ScriptedAI(pCreature)
DEBUG:refactor.py:056:find_register_start_end_index():1830;        {
DEBUG:refactor.py:056:find_register_start_end_index():1831;            Reset();
DEBUG:refactor.py:056:find_register_start_end_index():1832;        }
DEBUG:refactor.py:056:find_register_start_end_index():1833;
DEBUG:refactor.py:056:find_register_start_end_index():1834;        uint32 _visualTimer;
DEBUG:refactor.py:056:find_register_start_end_index():1835;        uint32 _spellTimer;
DEBUG:refactor.py:056:find_register_start_end_index():1836;
DEBUG:refactor.py:056:find_register_start_end_index():1837;        void Reset() override
DEBUG:refactor.py:056:find_register_start_end_index():1838;        {
DEBUG:refactor.py:056:find_register_start_end_index():1839;            me->CastSpell(me, SPELL_RECENTLY_SPAWNED, true);
DEBUG:refactor.py:056:find_register_start_end_index():1840;            //me->CastSpell(me, SPELL_EMPOWERED_PASSIVE, true);
DEBUG:refactor.py:056:find_register_start_end_index():1841;            if (Aura* aur = me->AddAura(SPELL_EMPOWERED_PASSIVE, me))
DEBUG:refactor.py:056:find_register_start_end_index():1842;                aur->SetStackAmount(9);
DEBUG:refactor.py:056:find_register_start_end_index():1843;
DEBUG:refactor.py:056:find_register_start_end_index():1844;            _spellTimer = 0;
DEBUG:refactor.py:056:find_register_start_end_index():1845;            _visualTimer = 1;
DEBUG:refactor.py:056:find_register_start_end_index():1846;            me->SetControlled(true, UNIT_STATE_ROOT);
DEBUG:refactor.py:056:find_register_start_end_index():1847;            me->SetInCombatWithZone();
DEBUG:refactor.py:056:find_register_start_end_index():1848;        }
DEBUG:refactor.py:056:find_register_start_end_index():1849;
DEBUG:refactor.py:056:find_register_start_end_index():1850;        void DamageTaken(Unit*, uint32& damage, DamageEffectType, SpellSchoolMask) override
DEBUG:refactor.py:056:find_register_start_end_index():1851;        {
DEBUG:refactor.py:056:find_register_start_end_index():1852;            if (damage >= me->GetHealth())
DEBUG:refactor.py:056:find_register_start_end_index():1853;                damage = me->GetHealth() - 1;
DEBUG:refactor.py:056:find_register_start_end_index():1854;        }
DEBUG:refactor.py:056:find_register_start_end_index():1855;
DEBUG:refactor.py:056:find_register_start_end_index():1856;        void SpellHit(Unit* caster, SpellInfo const* spellInfo) override
DEBUG:refactor.py:056:find_register_start_end_index():1857;        {
DEBUG:refactor.py:056:find_register_start_end_index():1858;            if (spellInfo->Id == SPELL_SHADOW_BEACON)
DEBUG:refactor.py:056:find_register_start_end_index():1859;                caster->GetAI()->DoAction(ACTION_YOGG_SARON_SHADOW_BEACON);
DEBUG:refactor.py:056:find_register_start_end_index():1860;        }
DEBUG:refactor.py:056:find_register_start_end_index():1861;
DEBUG:refactor.py:056:find_register_start_end_index():1862;        void UpdateAI(uint32 diff) override
DEBUG:refactor.py:056:find_register_start_end_index():1863;        {
DEBUG:refactor.py:056:find_register_start_end_index():1864;            if (!UpdateVictim())
DEBUG:refactor.py:056:find_register_start_end_index():1865;                return;
DEBUG:refactor.py:056:find_register_start_end_index():1866;
DEBUG:refactor.py:056:find_register_start_end_index():1867;            if (_visualTimer)
DEBUG:refactor.py:056:find_register_start_end_index():1868;            {
DEBUG:refactor.py:056:find_register_start_end_index():1869;                _visualTimer += diff;
DEBUG:refactor.py:056:find_register_start_end_index():1870;                if (_visualTimer >= 100 && _visualTimer < 10000 )
DEBUG:refactor.py:056:find_register_start_end_index():1871;                {
DEBUG:refactor.py:056:find_register_start_end_index():1872;                    me->CastSpell(me, SPELL_SIMPLE_TELEPORT, false);
DEBUG:refactor.py:056:find_register_start_end_index():1873;                    _visualTimer = 10000;
DEBUG:refactor.py:056:find_register_start_end_index():1874;                }
DEBUG:refactor.py:056:find_register_start_end_index():1875;                else if (_visualTimer >= 11000)
DEBUG:refactor.py:056:find_register_start_end_index():1876;                {
DEBUG:refactor.py:056:find_register_start_end_index():1877;                    me->SetControlled(false, UNIT_STATE_ROOT);
DEBUG:refactor.py:056:find_register_start_end_index():1878;                    _visualTimer = 0;
DEBUG:refactor.py:056:find_register_start_end_index():1879;                }
DEBUG:refactor.py:056:find_register_start_end_index():1880;            }
DEBUG:refactor.py:056:find_register_start_end_index():1881;
DEBUG:refactor.py:056:find_register_start_end_index():1882;            if (me->HasUnitState(UNIT_STATE_CASTING))
DEBUG:refactor.py:056:find_register_start_end_index():1883;                return;
DEBUG:refactor.py:056:find_register_start_end_index():1884;
DEBUG:refactor.py:056:find_register_start_end_index():1885;            _spellTimer += diff;
DEBUG:refactor.py:056:find_register_start_end_index():1886;            if (_spellTimer >= 9500)
DEBUG:refactor.py:056:find_register_start_end_index():1887;            {
DEBUG:refactor.py:056:find_register_start_end_index():1888;                if (me->HealthBelowPct(85))
DEBUG:refactor.py:056:find_register_start_end_index():1889;                {
DEBUG:refactor.py:056:find_register_start_end_index():1890;                    if (Unit* target = SelectTargetFromPlayerList(40.0f))
DEBUG:refactor.py:056:find_register_start_end_index():1891;                    {
DEBUG:refactor.py:056:find_register_start_end_index():1892;                        me->CastSpell(target, SPELL_DRAIN_LIFE, false);
DEBUG:refactor.py:056:find_register_start_end_index():1893;                        _spellTimer = 0;
DEBUG:refactor.py:056:find_register_start_end_index():1894;                    }
DEBUG:refactor.py:056:find_register_start_end_index():1895;                }
DEBUG:refactor.py:056:find_register_start_end_index():1896;                else
DEBUG:refactor.py:056:find_register_start_end_index():1897;                    _spellTimer = 7500;
DEBUG:refactor.py:056:find_register_start_end_index():1898;            }
DEBUG:refactor.py:056:find_register_start_end_index():1899;
DEBUG:refactor.py:056:find_register_start_end_index():1900;            DoMeleeAttackIfReady();
DEBUG:refactor.py:056:find_register_start_end_index():1901;        }
DEBUG:refactor.py:056:find_register_start_end_index():1902;    };
DEBUG:refactor.py:056:find_register_start_end_index():1903;};
DEBUG:refactor.py:056:find_register_start_end_index():1904;
DEBUG:refactor.py:056:find_register_start_end_index():1905;class boss_yoggsaron_lich_king : public CreatureScript
DEBUG:refactor.py:056:find_register_start_end_index():1906;{
DEBUG:refactor.py:056:find_register_start_end_index():1907;public:
DEBUG:refactor.py:056:find_register_start_end_index():1908;    boss_yoggsaron_lich_king() : CreatureScript("boss_yoggsaron_lich_king") { }
DEBUG:refactor.py:056:find_register_start_end_index():1909;
DEBUG:refactor.py:056:find_register_start_end_index():1910;    CreatureAI* GetAI(Creature* pCreature) const override
DEBUG:refactor.py:056:find_register_start_end_index():1911;    {
DEBUG:refactor.py:056:find_register_start_end_index():1912;        return GetUlduarAI<boss_yoggsaron_lich_kingAI>(pCreature);
DEBUG:refactor.py:056:find_register_start_end_index():1913;    }
DEBUG:refactor.py:056:find_register_start_end_index():1914;
DEBUG:refactor.py:056:find_register_start_end_index():1915;    struct boss_yoggsaron_lich_kingAI : public NullCreatureAI
DEBUG:refactor.py:056:find_register_start_end_index():1916;    {
DEBUG:refactor.py:056:find_register_start_end_index():1917;        boss_yoggsaron_lich_kingAI(Creature* c) : NullCreatureAI(c) { }
DEBUG:refactor.py:056:find_register_start_end_index():1918;
DEBUG:refactor.py:056:find_register_start_end_index():1919;        bool _running;
DEBUG:refactor.py:056:find_register_start_end_index():1920;        int32 _checkTimer;
DEBUG:refactor.py:056:find_register_start_end_index():1921;        uint8 _step;
DEBUG:refactor.py:056:find_register_start_end_index():1922;
DEBUG:refactor.py:056:find_register_start_end_index():1923;        void Reset() override
DEBUG:refactor.py:056:find_register_start_end_index():1924;        {
DEBUG:refactor.py:056:find_register_start_end_index():1925;            _running = true;
DEBUG:refactor.py:056:find_register_start_end_index():1926;            _checkTimer = 0;
DEBUG:refactor.py:056:find_register_start_end_index():1927;            _step = 0;
DEBUG:refactor.py:056:find_register_start_end_index():1928;        }
DEBUG:refactor.py:056:find_register_start_end_index():1929;
DEBUG:refactor.py:056:find_register_start_end_index():1930;        void NextStep(const uint32 time)
DEBUG:refactor.py:056:find_register_start_end_index():1931;        {
DEBUG:refactor.py:056:find_register_start_end_index():1932;            _step++;
DEBUG:refactor.py:056:find_register_start_end_index():1933;            _checkTimer = time;
DEBUG:refactor.py:056:find_register_start_end_index():1934;        }
DEBUG:refactor.py:056:find_register_start_end_index():1935;
DEBUG:refactor.py:056:find_register_start_end_index():1936;        void Say(uint8 text, uint32 id)
DEBUG:refactor.py:056:find_register_start_end_index():1937;        {
DEBUG:refactor.py:056:find_register_start_end_index():1938;            Creature* creature = me->FindNearestCreature(id, 50);
DEBUG:refactor.py:056:find_register_start_end_index():1939;            if (!creature)
DEBUG:refactor.py:056:find_register_start_end_index():1940;                return;
DEBUG:refactor.py:056:find_register_start_end_index():1941;
DEBUG:refactor.py:056:find_register_start_end_index():1942;            creature->AI()->Talk(text);
DEBUG:refactor.py:056:find_register_start_end_index():1943;                return;
DEBUG:refactor.py:056:find_register_start_end_index():1944;        }
DEBUG:refactor.py:056:find_register_start_end_index():1945;
DEBUG:refactor.py:056:find_register_start_end_index():1946;        void UpdateAI(uint32 diff) override
DEBUG:refactor.py:056:find_register_start_end_index():1947;        {
DEBUG:refactor.py:056:find_register_start_end_index():1948;            if (!_running)
DEBUG:refactor.py:056:find_register_start_end_index():1949;                return;
DEBUG:refactor.py:056:find_register_start_end_index():1950;
DEBUG:refactor.py:056:find_register_start_end_index():1951;            if (_checkTimer != 0)
DEBUG:refactor.py:056:find_register_start_end_index():1952;            {
DEBUG:refactor.py:056:find_register_start_end_index():1953;                _checkTimer -= diff;
DEBUG:refactor.py:056:find_register_start_end_index():1954;                if (_checkTimer < 0 )
DEBUG:refactor.py:056:find_register_start_end_index():1955;                    _checkTimer = 0;
DEBUG:refactor.py:056:find_register_start_end_index():1956;            }
DEBUG:refactor.py:056:find_register_start_end_index():1957;            else
DEBUG:refactor.py:056:find_register_start_end_index():1958;                switch (_step)
DEBUG:refactor.py:056:find_register_start_end_index():1959;                {
DEBUG:refactor.py:056:find_register_start_end_index():1960;                    case 0:
DEBUG:refactor.py:056:find_register_start_end_index():1961;                        NextStep(5000);
DEBUG:refactor.py:056:find_register_start_end_index():1962;                        break;
DEBUG:refactor.py:056:find_register_start_end_index():1963;                    case 1:
DEBUG:refactor.py:056:find_register_start_end_index():1964;                        Say(SAY_LK_1, NPC_LICH_KING);
DEBUG:refactor.py:056:find_register_start_end_index():1965;                        NextStep(7000);
DEBUG:refactor.py:056:find_register_start_end_index():1966;                        break;
DEBUG:refactor.py:056:find_register_start_end_index():1967;                    case 2:
DEBUG:refactor.py:056:find_register_start_end_index():1968;                        Say(SAY_IC_1, NPC_IMMOLATED_CHAMPION);
DEBUG:refactor.py:056:find_register_start_end_index():1969;                        NextStep(6000);
DEBUG:refactor.py:056:find_register_start_end_index():1970;                        break;
DEBUG:refactor.py:056:find_register_start_end_index():1971;                    case 3:
DEBUG:refactor.py:056:find_register_start_end_index():1972;                        Say(SAY_IC_2, NPC_IMMOLATED_CHAMPION);
DEBUG:refactor.py:056:find_register_start_end_index():1973;                        NextStep(6500);
DEBUG:refactor.py:056:find_register_start_end_index():1974;                        break;
DEBUG:refactor.py:056:find_register_start_end_index():1975;                    case 4:
DEBUG:refactor.py:056:find_register_start_end_index():1976;                        Say(SAY_LK_2, NPC_LICH_KING);
DEBUG:refactor.py:056:find_register_start_end_index():1977;                        NextStep(7500);
DEBUG:refactor.py:056:find_register_start_end_index():1978;                        break;
DEBUG:refactor.py:056:find_register_start_end_index():1979;                    case 5:
DEBUG:refactor.py:056:find_register_start_end_index():1980;                        Say(SAY_YOGG_5, NPC_YOGG_SARON_VISION);
DEBUG:refactor.py:056:find_register_start_end_index():1981;                        NextStep(5000);
DEBUG:refactor.py:056:find_register_start_end_index():1982;                        break;
DEBUG:refactor.py:056:find_register_start_end_index():1983;                    case 6:
DEBUG:refactor.py:056:find_register_start_end_index():1984;                        Say(SAY_YOGG_6, NPC_YOGG_SARON_VISION);
DEBUG:refactor.py:056:find_register_start_end_index():1985;                        _running = false;
DEBUG:refactor.py:056:find_register_start_end_index():1986;                        break;
DEBUG:refactor.py:056:find_register_start_end_index():1987;                }
DEBUG:refactor.py:056:find_register_start_end_index():1988;        }
DEBUG:refactor.py:056:find_register_start_end_index():1989;    };
DEBUG:refactor.py:056:find_register_start_end_index():1990;};
DEBUG:refactor.py:056:find_register_start_end_index():1991;
DEBUG:refactor.py:056:find_register_start_end_index():1992;class boss_yoggsaron_llane : public CreatureScript
DEBUG:refactor.py:056:find_register_start_end_index():1993;{
DEBUG:refactor.py:056:find_register_start_end_index():1994;public:
DEBUG:refactor.py:056:find_register_start_end_index():1995;    boss_yoggsaron_llane() : CreatureScript("boss_yoggsaron_llane") { }
DEBUG:refactor.py:056:find_register_start_end_index():1996;
DEBUG:refactor.py:056:find_register_start_end_index():1997;    CreatureAI* GetAI(Creature* pCreature) const override
DEBUG:refactor.py:056:find_register_start_end_index():1998;    {
DEBUG:refactor.py:056:find_register_start_end_index():1999;        return GetUlduarAI<boss_yoggsaron_llaneAI>(pCreature);
DEBUG:refactor.py:056:find_register_start_end_index():2000;    }
DEBUG:refactor.py:056:find_register_start_end_index():2001;
DEBUG:refactor.py:056:find_register_start_end_index():2002;    struct boss_yoggsaron_llaneAI : public NullCreatureAI
DEBUG:refactor.py:056:find_register_start_end_index():2003;    {
DEBUG:refactor.py:056:find_register_start_end_index():2004;        boss_yoggsaron_llaneAI(Creature* c) : NullCreatureAI(c) { }
DEBUG:refactor.py:056:find_register_start_end_index():2005;
DEBUG:refactor.py:056:find_register_start_end_index():2006;        bool _running;
DEBUG:refactor.py:056:find_register_start_end_index():2007;        int32 _checkTimer;
DEBUG:refactor.py:056:find_register_start_end_index():2008;        uint8 _step;
DEBUG:refactor.py:056:find_register_start_end_index():2009;
DEBUG:refactor.py:056:find_register_start_end_index():2010;        void Reset() override
DEBUG:refactor.py:056:find_register_start_end_index():2011;        {
DEBUG:refactor.py:056:find_register_start_end_index():2012;            _running = true;
DEBUG:refactor.py:056:find_register_start_end_index():2013;            _checkTimer = 0;
DEBUG:refactor.py:056:find_register_start_end_index():2014;            _step = 0;
DEBUG:refactor.py:056:find_register_start_end_index():2015;        }
DEBUG:refactor.py:056:find_register_start_end_index():2016;
DEBUG:refactor.py:056:find_register_start_end_index():2017;        void NextStep(const uint32 time)
DEBUG:refactor.py:056:find_register_start_end_index():2018;        {
DEBUG:refactor.py:056:find_register_start_end_index():2019;            _step++;
DEBUG:refactor.py:056:find_register_start_end_index():2020;            _checkTimer = time;
DEBUG:refactor.py:056:find_register_start_end_index():2021;        }
DEBUG:refactor.py:056:find_register_start_end_index():2022;
DEBUG:refactor.py:056:find_register_start_end_index():2023;        void Say(uint8 text, uint32 id)
DEBUG:refactor.py:056:find_register_start_end_index():2024;        {
DEBUG:refactor.py:056:find_register_start_end_index():2025;            Creature* creature = me->FindNearestCreature(id, 50);
DEBUG:refactor.py:056:find_register_start_end_index():2026;            if (!creature)
DEBUG:refactor.py:056:find_register_start_end_index():2027;                return;
DEBUG:refactor.py:056:find_register_start_end_index():2028;
DEBUG:refactor.py:056:find_register_start_end_index():2029;            creature->AI()->Talk(text);
DEBUG:refactor.py:056:find_register_start_end_index():2030;                return;
DEBUG:refactor.py:056:find_register_start_end_index():2031;        }
DEBUG:refactor.py:056:find_register_start_end_index():2032;
DEBUG:refactor.py:056:find_register_start_end_index():2033;        void UpdateAI(uint32 diff) override
DEBUG:refactor.py:056:find_register_start_end_index():2034;        {
DEBUG:refactor.py:056:find_register_start_end_index():2035;            if (!_running)
DEBUG:refactor.py:056:find_register_start_end_index():2036;                return;
DEBUG:refactor.py:056:find_register_start_end_index():2037;
DEBUG:refactor.py:056:find_register_start_end_index():2038;            if (_checkTimer != 0)
DEBUG:refactor.py:056:find_register_start_end_index():2039;            {
DEBUG:refactor.py:056:find_register_start_end_index():2040;                _checkTimer -= diff;
DEBUG:refactor.py:056:find_register_start_end_index():2041;                if (_checkTimer < 0 )
DEBUG:refactor.py:056:find_register_start_end_index():2042;                    _checkTimer = 0;
DEBUG:refactor.py:056:find_register_start_end_index():2043;            }
DEBUG:refactor.py:056:find_register_start_end_index():2044;            else
DEBUG:refactor.py:056:find_register_start_end_index():2045;                switch (_step)
DEBUG:refactor.py:056:find_register_start_end_index():2046;                {
DEBUG:refactor.py:056:find_register_start_end_index():2047;                    case 0:
DEBUG:refactor.py:056:find_register_start_end_index():2048;                        NextStep(5000);
DEBUG:refactor.py:056:find_register_start_end_index():2049;                        break;
DEBUG:refactor.py:056:find_register_start_end_index():2050;                    case 1:
DEBUG:refactor.py:056:find_register_start_end_index():2051;                        Say(SAY_GARONA_1, NPC_GARONA);
DEBUG:refactor.py:056:find_register_start_end_index():2052;                        NextStep(2000);
DEBUG:refactor.py:056:find_register_start_end_index():2053;                        break;
DEBUG:refactor.py:056:find_register_start_end_index():2054;                    case 2:
DEBUG:refactor.py:056:find_register_start_end_index():2055;                        Say(SAY_GARONA_2, NPC_GARONA);
DEBUG:refactor.py:056:find_register_start_end_index():2056;                        NextStep(6500);
DEBUG:refactor.py:056:find_register_start_end_index():2057;                        break;
DEBUG:refactor.py:056:find_register_start_end_index():2058;                    case 3:
DEBUG:refactor.py:056:find_register_start_end_index():2059;                        Say(SAY_GARONA_3, NPC_GARONA);
DEBUG:refactor.py:056:find_register_start_end_index():2060;                        NextStep(11000);
DEBUG:refactor.py:056:find_register_start_end_index():2061;                        break;
DEBUG:refactor.py:056:find_register_start_end_index():2062;                    case 4:
DEBUG:refactor.py:056:find_register_start_end_index():2063;                        Say(SAY_YOGG_1, NPC_YOGG_SARON_VISION);
DEBUG:refactor.py:056:find_register_start_end_index():2064;                        NextStep(2500);
DEBUG:refactor.py:056:find_register_start_end_index():2065;                        break;
DEBUG:refactor.py:056:find_register_start_end_index():2066;                    case 5:
DEBUG:refactor.py:056:find_register_start_end_index():2067;                        Say(SAY_YOGG_2, NPC_YOGG_SARON_VISION);
DEBUG:refactor.py:056:find_register_start_end_index():2068;                        NextStep(2500);
DEBUG:refactor.py:056:find_register_start_end_index():2069;                        break;
DEBUG:refactor.py:056:find_register_start_end_index():2070;                    case 6:
DEBUG:refactor.py:056:find_register_start_end_index():2071;                        Say(SAY_LLANE_1, NPC_KING_LLANE);
DEBUG:refactor.py:056:find_register_start_end_index():2072;                        NextStep(10000);
DEBUG:refactor.py:056:find_register_start_end_index():2073;                        break;
DEBUG:refactor.py:056:find_register_start_end_index():2074;                    case 7:
DEBUG:refactor.py:056:find_register_start_end_index():2075;                        Say(SAY_GARONA_4, NPC_GARONA);
DEBUG:refactor.py:056:find_register_start_end_index():2076;                        NextStep(5000);
DEBUG:refactor.py:056:find_register_start_end_index():2077;                        break;
DEBUG:refactor.py:056:find_register_start_end_index():2078;                    case 8:
DEBUG:refactor.py:056:find_register_start_end_index():2079;                        Say(SAY_YOGG_3, NPC_YOGG_SARON_VISION);
DEBUG:refactor.py:056:find_register_start_end_index():2080;                        _running = false;
DEBUG:refactor.py:056:find_register_start_end_index():2081;                        break;
DEBUG:refactor.py:056:find_register_start_end_index():2082;                }
DEBUG:refactor.py:056:find_register_start_end_index():2083;        }
DEBUG:refactor.py:056:find_register_start_end_index():2084;    };
DEBUG:refactor.py:056:find_register_start_end_index():2085;};
DEBUG:refactor.py:056:find_register_start_end_index():2086;
DEBUG:refactor.py:056:find_register_start_end_index():2087;class boss_yoggsaron_neltharion : public CreatureScript
DEBUG:refactor.py:056:find_register_start_end_index():2088;{
DEBUG:refactor.py:056:find_register_start_end_index():2089;public:
DEBUG:refactor.py:056:find_register_start_end_index():2090;    boss_yoggsaron_neltharion() : CreatureScript("boss_yoggsaron_neltharion") { }
DEBUG:refactor.py:056:find_register_start_end_index():2091;
DEBUG:refactor.py:056:find_register_start_end_index():2092;    CreatureAI* GetAI(Creature* pCreature) const override
DEBUG:refactor.py:056:find_register_start_end_index():2093;    {
DEBUG:refactor.py:056:find_register_start_end_index():2094;        return GetUlduarAI<boss_yoggsaron_neltharionAI>(pCreature);
DEBUG:refactor.py:056:find_register_start_end_index():2095;    }
DEBUG:refactor.py:056:find_register_start_end_index():2096;
DEBUG:refactor.py:056:find_register_start_end_index():2097;    struct boss_yoggsaron_neltharionAI : public ScriptedAI
DEBUG:refactor.py:056:find_register_start_end_index():2098;    {
DEBUG:refactor.py:056:find_register_start_end_index():2099;        boss_yoggsaron_neltharionAI(Creature* c) : ScriptedAI(c) { }
DEBUG:refactor.py:056:find_register_start_end_index():2100;
DEBUG:refactor.py:056:find_register_start_end_index():2101;        bool _running;
DEBUG:refactor.py:056:find_register_start_end_index():2102;        int32 _checkTimer;
DEBUG:refactor.py:056:find_register_start_end_index():2103;        uint8 _step;
DEBUG:refactor.py:056:find_register_start_end_index():2104;
DEBUG:refactor.py:056:find_register_start_end_index():2105;        void Reset() override
DEBUG:refactor.py:056:find_register_start_end_index():2106;        {
DEBUG:refactor.py:056:find_register_start_end_index():2107;            _running = true;
DEBUG:refactor.py:056:find_register_start_end_index():2108;            _checkTimer = 0;
DEBUG:refactor.py:056:find_register_start_end_index():2109;            _step = 0;
DEBUG:refactor.py:056:find_register_start_end_index():2110;        }
DEBUG:refactor.py:056:find_register_start_end_index():2111;
DEBUG:refactor.py:056:find_register_start_end_index():2112;        void NextStep(const uint32 time)
DEBUG:refactor.py:056:find_register_start_end_index():2113;        {
DEBUG:refactor.py:056:find_register_start_end_index():2114;            _step++;
DEBUG:refactor.py:056:find_register_start_end_index():2115;            _checkTimer = time;
DEBUG:refactor.py:056:find_register_start_end_index():2116;        }
DEBUG:refactor.py:056:find_register_start_end_index():2117;
DEBUG:refactor.py:056:find_register_start_end_index():2118;        void Say(uint8 text, uint32 id)
DEBUG:refactor.py:056:find_register_start_end_index():2119;        {
DEBUG:refactor.py:056:find_register_start_end_index():2120;            Creature* creature = me->FindNearestCreature(id, 50);
DEBUG:refactor.py:056:find_register_start_end_index():2121;            if (!creature)
DEBUG:refactor.py:056:find_register_start_end_index():2122;                return;
DEBUG:refactor.py:056:find_register_start_end_index():2123;
DEBUG:refactor.py:056:find_register_start_end_index():2124;            creature->AI()->Talk(text);
DEBUG:refactor.py:056:find_register_start_end_index():2125;                return;
DEBUG:refactor.py:056:find_register_start_end_index():2126;        }
DEBUG:refactor.py:056:find_register_start_end_index():2127;
DEBUG:refactor.py:056:find_register_start_end_index():2128;        void UpdateAI(uint32 diff) override
DEBUG:refactor.py:056:find_register_start_end_index():2129;        {
DEBUG:refactor.py:056:find_register_start_end_index():2130;            if (!_running)
DEBUG:refactor.py:056:find_register_start_end_index():2131;                return;
DEBUG:refactor.py:056:find_register_start_end_index():2132;
DEBUG:refactor.py:056:find_register_start_end_index():2133;            if (_checkTimer != 0)
DEBUG:refactor.py:056:find_register_start_end_index():2134;            {
DEBUG:refactor.py:056:find_register_start_end_index():2135;                _checkTimer -= diff;
DEBUG:refactor.py:056:find_register_start_end_index():2136;                if (_checkTimer < 0 )
DEBUG:refactor.py:056:find_register_start_end_index():2137;                    _checkTimer = 0;
DEBUG:refactor.py:056:find_register_start_end_index():2138;            }
DEBUG:refactor.py:056:find_register_start_end_index():2139;            else
DEBUG:refactor.py:056:find_register_start_end_index():2140;                switch (_step)
DEBUG:refactor.py:056:find_register_start_end_index():2141;                {
DEBUG:refactor.py:056:find_register_start_end_index():2142;                    case 0:
DEBUG:refactor.py:056:find_register_start_end_index():2143;                        NextStep(5000);
DEBUG:refactor.py:056:find_register_start_end_index():2144;                        break;
DEBUG:refactor.py:056:find_register_start_end_index():2145;                    case 1:
DEBUG:refactor.py:056:find_register_start_end_index():2146;                        Say(SAY_NEL_1, NPC_NELTHARION);
DEBUG:refactor.py:056:find_register_start_end_index():2147;                        NextStep(10000);
DEBUG:refactor.py:056:find_register_start_end_index():2148;                        break;
DEBUG:refactor.py:056:find_register_start_end_index():2149;                    case 2:
DEBUG:refactor.py:056:find_register_start_end_index():2150;                        Say(SAY_YAS_1, NPC_YSERA);
DEBUG:refactor.py:056:find_register_start_end_index():2151;                        NextStep(4000);
DEBUG:refactor.py:056:find_register_start_end_index():2152;                        break;
DEBUG:refactor.py:056:find_register_start_end_index():2153;                    case 3:
DEBUG:refactor.py:056:find_register_start_end_index():2154;                        Say(SAY_NEL_2, NPC_NELTHARION);
DEBUG:refactor.py:056:find_register_start_end_index():2155;                        NextStep(4000);
DEBUG:refactor.py:056:find_register_start_end_index():2156;                        break;
DEBUG:refactor.py:056:find_register_start_end_index():2157;                    case 4:
DEBUG:refactor.py:056:find_register_start_end_index():2158;                        Say(SAY_MAL_1, NPC_MALYGOS);
DEBUG:refactor.py:056:find_register_start_end_index():2159;                        NextStep(8000);
DEBUG:refactor.py:056:find_register_start_end_index():2160;                        break;
DEBUG:refactor.py:056:find_register_start_end_index():2161;                    case 5:
DEBUG:refactor.py:056:find_register_start_end_index():2162;                        Say(SAY_YOGG_4, NPC_YOGG_SARON_VISION);
DEBUG:refactor.py:056:find_register_start_end_index():2163;                        _running = false;
DEBUG:refactor.py:056:find_register_start_end_index():2164;                        break;
DEBUG:refactor.py:056:find_register_start_end_index():2165;                }
DEBUG:refactor.py:056:find_register_start_end_index():2166;        }
DEBUG:refactor.py:056:find_register_start_end_index():2167;    };
DEBUG:refactor.py:056:find_register_start_end_index():2168;};
DEBUG:refactor.py:056:find_register_start_end_index():2169;
DEBUG:refactor.py:056:find_register_start_end_index():2170;class boss_yoggsaron_voice : public CreatureScript
DEBUG:refactor.py:056:find_register_start_end_index():2171;{
DEBUG:refactor.py:056:find_register_start_end_index():2172;public:
DEBUG:refactor.py:056:find_register_start_end_index():2173;    boss_yoggsaron_voice() : CreatureScript("boss_yoggsaron_voice") { }
DEBUG:refactor.py:056:find_register_start_end_index():2174;
DEBUG:refactor.py:056:find_register_start_end_index():2175;    CreatureAI* GetAI(Creature* pCreature) const override
DEBUG:refactor.py:056:find_register_start_end_index():2176;    {
DEBUG:refactor.py:056:find_register_start_end_index():2177;        return GetUlduarAI<boss_yoggsaron_voiceAI>(pCreature);
DEBUG:refactor.py:056:find_register_start_end_index():2178;    }
DEBUG:refactor.py:056:find_register_start_end_index():2179;
DEBUG:refactor.py:056:find_register_start_end_index():2180;    struct boss_yoggsaron_voiceAI : public NullCreatureAI
DEBUG:refactor.py:056:find_register_start_end_index():2181;    {
DEBUG:refactor.py:056:find_register_start_end_index():2182;        boss_yoggsaron_voiceAI(Creature* pCreature) : NullCreatureAI(pCreature)
DEBUG:refactor.py:056:find_register_start_end_index():2183;        {
DEBUG:refactor.py:056:find_register_start_end_index():2184;            _targets.clear();
DEBUG:refactor.py:056:find_register_start_end_index():2185;            _current = 0;
DEBUG:refactor.py:056:find_register_start_end_index():2186;        }
DEBUG:refactor.py:056:find_register_start_end_index():2187;
DEBUG:refactor.py:056:find_register_start_end_index():2188;        EventMap events;
DEBUG:refactor.py:056:find_register_start_end_index():2189;        GuidVector _targets;
DEBUG:refactor.py:056:find_register_start_end_index():2190;        uint32 _current;
DEBUG:refactor.py:056:find_register_start_end_index():2191;
DEBUG:refactor.py:056:find_register_start_end_index():2192;        void Reset() override
DEBUG:refactor.py:056:find_register_start_end_index():2193;        {
DEBUG:refactor.py:056:find_register_start_end_index():2194;            me->CastSpell(me, SPELL_INSANE_PERIODIC, true);
DEBUG:refactor.py:056:find_register_start_end_index():2195;        }
DEBUG:refactor.py:056:find_register_start_end_index():2196;
DEBUG:refactor.py:056:find_register_start_end_index():2197;        void SpellHitTarget(Unit* target, SpellInfo const* spellInfo) override
DEBUG:refactor.py:056:find_register_start_end_index():2198;        {
DEBUG:refactor.py:056:find_register_start_end_index():2199;            if (spellInfo->Id == SPELL_INSANE1)
DEBUG:refactor.py:056:find_register_start_end_index():2200;            {
DEBUG:refactor.py:056:find_register_start_end_index():2201;                // Drive Me Crazy achievement failed
DEBUG:refactor.py:056:find_register_start_end_index():2202;                if (me->GetInstanceScript())
DEBUG:refactor.py:056:find_register_start_end_index():2203;                    if (Creature* yogg = ObjectAccessor::GetCreature(*me, me->GetInstanceScript()->GetGuidData(TYPE_YOGGSARON)))
DEBUG:refactor.py:056:find_register_start_end_index():2204;                        yogg->AI()->DoAction(ACTION_FAILED_DRIVE_ME_CRAZY);
DEBUG:refactor.py:056:find_register_start_end_index():2205;
DEBUG:refactor.py:056:find_register_start_end_index():2206;                events.ScheduleEvent(40, 2s);
DEBUG:refactor.py:056:find_register_start_end_index():2207;                _targets.push_back(target->GetGUID());
DEBUG:refactor.py:056:find_register_start_end_index():2208;            }
DEBUG:refactor.py:056:find_register_start_end_index():2209;        }
DEBUG:refactor.py:056:find_register_start_end_index():2210;
DEBUG:refactor.py:056:find_register_start_end_index():2211;        void UpdateAI(uint32 diff) override
DEBUG:refactor.py:056:find_register_start_end_index():2212;        {
DEBUG:refactor.py:056:find_register_start_end_index():2213;            events.Update(diff);
DEBUG:refactor.py:056:find_register_start_end_index():2214;            switch (events.ExecuteEvent())
DEBUG:refactor.py:056:find_register_start_end_index():2215;            {
DEBUG:refactor.py:056:find_register_start_end_index():2216;                case 40:
DEBUG:refactor.py:056:find_register_start_end_index():2217;                    {
DEBUG:refactor.py:056:find_register_start_end_index():2218;                        ObjectGuid _guid = _targets.at(_current);
DEBUG:refactor.py:056:find_register_start_end_index():2219;                        ++_current;
DEBUG:refactor.py:056:find_register_start_end_index():2220;
DEBUG:refactor.py:056:find_register_start_end_index():2221;                        if (Player* player = ObjectAccessor::GetPlayer(*me, _guid))
DEBUG:refactor.py:056:find_register_start_end_index():2222;                        {
DEBUG:refactor.py:056:find_register_start_end_index():2223;                            Talk(WHISPER_VOICE_INSANE, player);
DEBUG:refactor.py:056:find_register_start_end_index():2224;                        }
DEBUG:refactor.py:056:find_register_start_end_index():2225;                        break;
DEBUG:refactor.py:056:find_register_start_end_index():2226;                    }
DEBUG:refactor.py:056:find_register_start_end_index():2227;            }
DEBUG:refactor.py:056:find_register_start_end_index():2228;        }
DEBUG:refactor.py:056:find_register_start_end_index():2229;    };
DEBUG:refactor.py:056:find_register_start_end_index():2230;};
DEBUG:refactor.py:056:find_register_start_end_index():2231;
DEBUG:refactor.py:056:find_register_start_end_index():2232;// 63830, 63881 - Malady of the Mind
DEBUG:refactor.py:056:find_register_start_end_index():2233;class spell_yogg_saron_malady_of_the_mind : public SpellScriptLoader
DEBUG:refactor.py:056:find_register_start_end_index():2234;{
DEBUG:refactor.py:056:find_register_start_end_index():2235;public:
DEBUG:refactor.py:056:find_register_start_end_index():2236;    spell_yogg_saron_malady_of_the_mind() : SpellScriptLoader("spell_yogg_saron_malady_of_the_mind") { }
DEBUG:refactor.py:056:find_register_start_end_index():2237;
DEBUG:refactor.py:056:find_register_start_end_index():2238;    class spell_yogg_saron_malady_of_the_mind_AuraScript : public AuraScript
DEBUG:refactor.py:056:find_register_start_end_index():2239;    {
DEBUG:refactor.py:056:find_register_start_end_index():2240;        PrepareAuraScript(spell_yogg_saron_malady_of_the_mind_AuraScript);
DEBUG:refactor.py:056:find_register_start_end_index():2241;
DEBUG:refactor.py:056:find_register_start_end_index():2242;        void OnApply(AuraEffect const* /*aurEff*/, AuraEffectHandleModes /*mode*/)
DEBUG:refactor.py:056:find_register_start_end_index():2243;        {
DEBUG:refactor.py:056:find_register_start_end_index():2244;            GetUnitOwner()->ApplySpellImmune(SPELL_DEATH_RAY_DAMAGE_REAL, IMMUNITY_ID, SPELL_DEATH_RAY_DAMAGE_REAL, true);
DEBUG:refactor.py:056:find_register_start_end_index():2245;        }
DEBUG:refactor.py:056:find_register_start_end_index():2246;
DEBUG:refactor.py:056:find_register_start_end_index():2247;        void OnRemove(AuraEffect const* /*aurEff*/, AuraEffectHandleModes /*mode*/)
DEBUG:refactor.py:056:find_register_start_end_index():2248;        {
DEBUG:refactor.py:056:find_register_start_end_index():2249;            GetUnitOwner()->ApplySpellImmune(SPELL_DEATH_RAY_DAMAGE_REAL, IMMUNITY_ID, SPELL_DEATH_RAY_DAMAGE_REAL, false);
DEBUG:refactor.py:056:find_register_start_end_index():2250;            GetUnitOwner()->CastCustomSpell(SPELL_MALADY_OF_THE_MIND_TRIGGER, SPELLVALUE_MAX_TARGETS, 1, GetUnitOwner(), true);
DEBUG:refactor.py:056:find_register_start_end_index():2251;        }
DEBUG:refactor.py:056:find_register_start_end_index():2252;
DEBUG:refactor.py:056:find_register_start_end_index():2253;        void Register() override
DEBUG:refactor.py:056:find_register_start_end_index():2254;        {
DEBUG:refactor.py:056:find_register_start_end_index():2255;            OnEffectApply += AuraEffectApplyFn(spell_yogg_saron_malady_of_the_mind_AuraScript::OnApply, EFFECT_1, SPELL_AURA_MOD_FEAR, AURA_EFFECT_HANDLE_REAL);
DEBUG:refactor.py:056:find_register_start_end_index():2256;            OnEffectRemove += AuraEffectRemoveFn(spell_yogg_saron_malady_of_the_mind_AuraScript::OnRemove, EFFECT_1, SPELL_AURA_MOD_FEAR, AURA_EFFECT_HANDLE_REAL);
DEBUG:refactor.py:056:find_register_start_end_index():2257;        }
DEBUG:refactor.py:063:find_register_start_end_index():2253;2253         void Register() override
DEBUG:refactor.py:064:find_register_start_end_index():2257;2257         }
DEBUG:refactor.py:072:find_register_statements():2254;2258
DEBUG:refactor.py:074:find_register_statements():000:            OnEffectApply += AuraEffectApplyFn(spell_yogg_saron_malady_of_the_mind_AuraScript::OnApply, EFFECT_1, SPELL_AURA_MOD_FEAR, AURA_EFFECT_HANDLE_REAL);
DEBUG:refactor.py:074:find_register_statements():001:            OnEffectRemove += AuraEffectRemoveFn(spell_yogg_saron_malady_of_the_mind_AuraScript::OnRemove, EFFECT_1, SPELL_AURA_MOD_FEAR, AURA_EFFECT_HANDLE_REAL);
DEBUG:refactor.py:088:format_register_statements():before:000:            OnEffectProc += AuraEffectProcFn(spell_yogg_saron_grim_reprisal_AuraScript::HandleProc, EFFECT_0, SPELL_AURA_DUMMY);
DEBUG:refactor.py:090:format_register_statements():after :000:        OnEffectProc += AuraEffectProcFn(spell_yogg_saron_grim_reprisal_aura::HandleProc, EFFECT_0, SPELL_AURA_DUMMY);
DEBUG:refactor.py:018:find_start_last_index():2234 line='class spell_yogg_saron_malady_of_the_mind : public SpellScriptLoader'
DEBUG:refactor.py:018:find_start_last_index():2235 line='{'
DEBUG:refactor.py:018:find_start_last_index():2236 line='public:'
DEBUG:refactor.py:018:find_start_last_index():2237 line='    spell_yogg_saron_malady_of_the_mind() : SpellScriptLoader("spell_yogg_saron_malady_of_the_mind") { }'
DEBUG:refactor.py:018:find_start_last_index():2238 line=''
DEBUG:refactor.py:018:find_start_last_index():2239 line='    class spell_yogg_saron_malady_of_the_mind_AuraScript : public AuraScript'
DEBUG:refactor.py:018:find_start_last_index():2240 line='    {'
DEBUG:refactor.py:018:find_start_last_index():2241 line='        PrepareAuraScript(spell_yogg_saron_malady_of_the_mind_AuraScript);'
DEBUG:refactor.py:018:find_start_last_index():2242 line=''
DEBUG:refactor.py:018:find_start_last_index():2243 line='        void OnApply(AuraEffect const* /*aurEff*/, AuraEffectHandleModes /*mode*/)'
DEBUG:refactor.py:018:find_start_last_index():2244 line='        {'
DEBUG:refactor.py:018:find_start_last_index():2245 line='            GetUnitOwner()->ApplySpellImmune(SPELL_DEATH_RAY_DAMAGE_REAL, IMMUNITY_ID, SPELL_DEATH_RAY_DAMAGE_REAL, true);'
DEBUG:refactor.py:018:find_start_last_index():2246 line='        }'
DEBUG:refactor.py:018:find_start_last_index():2247 line=''
DEBUG:refactor.py:018:find_start_last_index():2248 line='        void OnRemove(AuraEffect const* /*aurEff*/, AuraEffectHandleModes /*mode*/)'
DEBUG:refactor.py:018:find_start_last_index():2249 line='        {'
DEBUG:refactor.py:018:find_start_last_index():2250 line='            GetUnitOwner()->ApplySpellImmune(SPELL_DEATH_RAY_DAMAGE_REAL, IMMUNITY_ID, SPELL_DEATH_RAY_DAMAGE_REAL, false);'
DEBUG:refactor.py:018:find_start_last_index():2251 line='            GetUnitOwner()->CastCustomSpell(SPELL_MALADY_OF_THE_MIND_TRIGGER, SPELLVALUE_MAX_TARGETS, 1, GetUnitOwner(), true);'
DEBUG:refactor.py:018:find_start_last_index():2252 line='        }'
DEBUG:refactor.py:018:find_start_last_index():2253 line=''
DEBUG:refactor.py:018:find_start_last_index():2254 line='        void Register() override'
DEBUG:refactor.py:018:find_start_last_index():2255 line='        {'
DEBUG:refactor.py:018:find_start_last_index():2256 line='            OnEffectApply += AuraEffectApplyFn(spell_yogg_saron_malady_of_the_mind_AuraScript::OnApply, EFFECT_1, SPELL_AURA_MOD_FEAR, AURA_EFFECT_HANDLE_REAL);'
DEBUG:refactor.py:018:find_start_last_index():2257 line='            OnEffectRemove += AuraEffectRemoveFn(spell_yogg_saron_malady_of_the_mind_AuraScript::OnRemove, EFFECT_1, SPELL_AURA_MOD_FEAR, AURA_EFFECT_HANDLE_REAL);'
DEBUG:refactor.py:018:find_start_last_index():2258 line='        }'
DEBUG:refactor.py:018:find_start_last_index():2259 line='    };'
DEBUG:refactor.py:018:find_start_last_index():2260 line=''
DEBUG:refactor.py:018:find_start_last_index():2261 line='    AuraScript* GetAuraScript() const override'
DEBUG:refactor.py:018:find_start_last_index():2262 line='    {'
DEBUG:refactor.py:018:find_start_last_index():2263 line='        return new spell_yogg_saron_malady_of_the_mind_AuraScript();'
DEBUG:refactor.py:018:find_start_last_index():2264 line='    }'
DEBUG:refactor.py:018:find_start_last_index():2265 line='};'
DEBUG:refactor.py:103:find_content_start_end_index():absolute_start=2241,absolute_end=2254
DEBUG:refactor.py:103:find_content_start_end_index():absolute_start=2241,absolute_end=2254
DEBUG:refactor.py:145:format_content_statements():before:000:
DEBUG:refactor.py:145:format_content_statements():before:001:        void OnApply(AuraEffect const* /*aurEff*/, AuraEffectHandleModes /*mode*/)
DEBUG:refactor.py:145:format_content_statements():before:002:        {
DEBUG:refactor.py:145:format_content_statements():before:003:            GetUnitOwner()->ApplySpellImmune(SPELL_DEATH_RAY_DAMAGE_REAL, IMMUNITY_ID, SPELL_DEATH_RAY_DAMAGE_REAL, true);
DEBUG:refactor.py:145:format_content_statements():before:004:        }
DEBUG:refactor.py:145:format_content_statements():before:005:
DEBUG:refactor.py:145:format_content_statements():before:006:        void OnRemove(AuraEffect const* /*aurEff*/, AuraEffectHandleModes /*mode*/)
DEBUG:refactor.py:145:format_content_statements():before:007:        {
DEBUG:refactor.py:145:format_content_statements():before:008:            GetUnitOwner()->ApplySpellImmune(SPELL_DEATH_RAY_DAMAGE_REAL, IMMUNITY_ID, SPELL_DEATH_RAY_DAMAGE_REAL, false);
DEBUG:refactor.py:145:format_content_statements():before:009:            GetUnitOwner()->CastCustomSpell(SPELL_MALADY_OF_THE_MIND_TRIGGER, SPELLVALUE_MAX_TARGETS, 1, GetUnitOwner(), true);
DEBUG:refactor.py:145:format_content_statements():before:010:        }
DEBUG:refactor.py:145:format_content_statements():before:011:
DEBUG:refactor.py:147:format_content_statements():after :000:
DEBUG:refactor.py:147:format_content_statements():after :001:    void OnApply(AuraEffect const* /*aurEff*/, AuraEffectHandleModes /*mode*/)
DEBUG:refactor.py:147:format_content_statements():after :002:    {
DEBUG:refactor.py:147:format_content_statements():after :003:        GetUnitOwner()->ApplySpellImmune(SPELL_DEATH_RAY_DAMAGE_REAL, IMMUNITY_ID, SPELL_DEATH_RAY_DAMAGE_REAL, true);
DEBUG:refactor.py:147:format_content_statements():after :004:    }
DEBUG:refactor.py:147:format_content_statements():after :005:
DEBUG:refactor.py:147:format_content_statements():after :006:    void OnRemove(AuraEffect const* /*aurEff*/, AuraEffectHandleModes /*mode*/)
DEBUG:refactor.py:147:format_content_statements():after :007:    {
DEBUG:refactor.py:147:format_content_statements():after :008:        GetUnitOwner()->ApplySpellImmune(SPELL_DEATH_RAY_DAMAGE_REAL, IMMUNITY_ID, SPELL_DEATH_RAY_DAMAGE_REAL, false);
DEBUG:refactor.py:147:format_content_statements():after :009:        GetUnitOwner()->CastCustomSpell(SPELL_MALADY_OF_THE_MIND_TRIGGER, SPELLVALUE_MAX_TARGETS, 1, GetUnitOwner(), true);
DEBUG:refactor.py:147:format_content_statements():after :010:    }
DEBUG:refactor.py:147:format_content_statements():after :011:
DEBUG:refactor.py:018:find_start_last_index():2234 line='class spell_yogg_saron_malady_of_the_mind : public SpellScriptLoader'
DEBUG:refactor.py:018:find_start_last_index():2235 line='{'
DEBUG:refactor.py:018:find_start_last_index():2236 line='public:'
DEBUG:refactor.py:018:find_start_last_index():2237 line='    spell_yogg_saron_malady_of_the_mind() : SpellScriptLoader("spell_yogg_saron_malady_of_the_mind") { }'
DEBUG:refactor.py:018:find_start_last_index():2238 line=''
DEBUG:refactor.py:018:find_start_last_index():2239 line='    class spell_yogg_saron_malady_of_the_mind_AuraScript : public AuraScript'
DEBUG:refactor.py:018:find_start_last_index():2240 line='    {'
DEBUG:refactor.py:018:find_start_last_index():2241 line='        PrepareAuraScript(spell_yogg_saron_malady_of_the_mind_AuraScript);'
DEBUG:refactor.py:018:find_start_last_index():2242 line=''
DEBUG:refactor.py:018:find_start_last_index():2243 line='        void OnApply(AuraEffect const* /*aurEff*/, AuraEffectHandleModes /*mode*/)'
DEBUG:refactor.py:018:find_start_last_index():2244 line='        {'
DEBUG:refactor.py:018:find_start_last_index():2245 line='            GetUnitOwner()->ApplySpellImmune(SPELL_DEATH_RAY_DAMAGE_REAL, IMMUNITY_ID, SPELL_DEATH_RAY_DAMAGE_REAL, true);'
DEBUG:refactor.py:018:find_start_last_index():2246 line='        }'
DEBUG:refactor.py:018:find_start_last_index():2247 line=''
DEBUG:refactor.py:018:find_start_last_index():2248 line='        void OnRemove(AuraEffect const* /*aurEff*/, AuraEffectHandleModes /*mode*/)'
DEBUG:refactor.py:018:find_start_last_index():2249 line='        {'
DEBUG:refactor.py:018:find_start_last_index():2250 line='            GetUnitOwner()->ApplySpellImmune(SPELL_DEATH_RAY_DAMAGE_REAL, IMMUNITY_ID, SPELL_DEATH_RAY_DAMAGE_REAL, false);'
DEBUG:refactor.py:018:find_start_last_index():2251 line='            GetUnitOwner()->CastCustomSpell(SPELL_MALADY_OF_THE_MIND_TRIGGER, SPELLVALUE_MAX_TARGETS, 1, GetUnitOwner(), true);'
DEBUG:refactor.py:018:find_start_last_index():2252 line='        }'
DEBUG:refactor.py:018:find_start_last_index():2253 line=''
DEBUG:refactor.py:018:find_start_last_index():2254 line='        void Register() override'
DEBUG:refactor.py:018:find_start_last_index():2255 line='        {'
DEBUG:refactor.py:018:find_start_last_index():2256 line='            OnEffectApply += AuraEffectApplyFn(spell_yogg_saron_malady_of_the_mind_AuraScript::OnApply, EFFECT_1, SPELL_AURA_MOD_FEAR, AURA_EFFECT_HANDLE_REAL);'
DEBUG:refactor.py:018:find_start_last_index():2257 line='            OnEffectRemove += AuraEffectRemoveFn(spell_yogg_saron_malady_of_the_mind_AuraScript::OnRemove, EFFECT_1, SPELL_AURA_MOD_FEAR, AURA_EFFECT_HANDLE_REAL);'
DEBUG:refactor.py:018:find_start_last_index():2258 line='        }'
DEBUG:refactor.py:018:find_start_last_index():2259 line='    };'
DEBUG:refactor.py:018:find_start_last_index():2260 line=''
DEBUG:refactor.py:018:find_start_last_index():2261 line='    AuraScript* GetAuraScript() const override'
DEBUG:refactor.py:018:find_start_last_index():2262 line='    {'
DEBUG:refactor.py:018:find_start_last_index():2263 line='        return new spell_yogg_saron_malady_of_the_mind_AuraScript();'
DEBUG:refactor.py:018:find_start_last_index():2264 line='    }'
DEBUG:refactor.py:018:find_start_last_index():2265 line='};'
DEBUG:refactor.py:223:convert_function_block():start_index=2234last_index=2265
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:036:     get_script_type():AuraScript line='    class spell_yogg_saron_malady_of_the_mind_AuraScript : public AuraScript'
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:036:     get_script_type():AuraScript line='        PrepareAuraScript(spell_yogg_saron_malady_of_the_mind_AuraScript);'
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:036:     get_script_type():AuraScript line='            OnEffectApply += AuraEffectApplyFn(spell_yogg_saron_malady_of_the_mind_AuraScript::OnApply, EFFECT_1, SPELL_AURA_MOD_FEAR, AURA_EFFECT_HANDLE_REAL);'
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:036:     get_script_type():AuraScript line='            OnEffectRemove += AuraEffectRemoveFn(spell_yogg_saron_malady_of_the_mind_AuraScript::OnRemove, EFFECT_1, SPELL_AURA_MOD_FEAR, AURA_EFFECT_HANDLE_REAL);'
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:036:     get_script_type():AuraScript line='    AuraScript* GetAuraScript() const override'
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:036:     get_script_type():AuraScript line='        return new spell_yogg_saron_malady_of_the_mind_AuraScript();'
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:225:convert_function_block():script_type=<ScriptType.AURA: 1>
DEBUG:refactor.py:027: find_name_of_script():name='spell_yogg_saron_malady_of_the_mind'
DEBUG:refactor.py:228:convert_function_block():script_name='spell_yogg_saron_malady_of_the_mind'
DEBUG:refactor.py:054:find_register_start_end_index():start_index=0
DEBUG:refactor.py:056:find_register_start_end_index():000;class spell_yogg_saron_malady_of_the_mind : public SpellScriptLoader
DEBUG:refactor.py:056:find_register_start_end_index():001;{
DEBUG:refactor.py:056:find_register_start_end_index():002;public:
DEBUG:refactor.py:056:find_register_start_end_index():003;    spell_yogg_saron_malady_of_the_mind() : SpellScriptLoader("spell_yogg_saron_malady_of_the_mind") { }
DEBUG:refactor.py:056:find_register_start_end_index():004;
DEBUG:refactor.py:056:find_register_start_end_index():005;    class spell_yogg_saron_malady_of_the_mind_AuraScript : public AuraScript
DEBUG:refactor.py:056:find_register_start_end_index():006;    {
DEBUG:refactor.py:056:find_register_start_end_index():007;        PrepareAuraScript(spell_yogg_saron_malady_of_the_mind_AuraScript);
DEBUG:refactor.py:056:find_register_start_end_index():008;
DEBUG:refactor.py:056:find_register_start_end_index():009;        void OnApply(AuraEffect const* /*aurEff*/, AuraEffectHandleModes /*mode*/)
DEBUG:refactor.py:056:find_register_start_end_index():010;        {
DEBUG:refactor.py:056:find_register_start_end_index():011;            GetUnitOwner()->ApplySpellImmune(SPELL_DEATH_RAY_DAMAGE_REAL, IMMUNITY_ID, SPELL_DEATH_RAY_DAMAGE_REAL, true);
DEBUG:refactor.py:056:find_register_start_end_index():012;        }
DEBUG:refactor.py:056:find_register_start_end_index():013;
DEBUG:refactor.py:056:find_register_start_end_index():014;        void OnRemove(AuraEffect const* /*aurEff*/, AuraEffectHandleModes /*mode*/)
DEBUG:refactor.py:056:find_register_start_end_index():015;        {
DEBUG:refactor.py:056:find_register_start_end_index():016;            GetUnitOwner()->ApplySpellImmune(SPELL_DEATH_RAY_DAMAGE_REAL, IMMUNITY_ID, SPELL_DEATH_RAY_DAMAGE_REAL, false);
DEBUG:refactor.py:056:find_register_start_end_index():017;            GetUnitOwner()->CastCustomSpell(SPELL_MALADY_OF_THE_MIND_TRIGGER, SPELLVALUE_MAX_TARGETS, 1, GetUnitOwner(), true);
DEBUG:refactor.py:056:find_register_start_end_index():018;        }
DEBUG:refactor.py:056:find_register_start_end_index():019;
DEBUG:refactor.py:056:find_register_start_end_index():020;        void Register() override
DEBUG:refactor.py:056:find_register_start_end_index():021;        {
DEBUG:refactor.py:056:find_register_start_end_index():022;            OnEffectApply += AuraEffectApplyFn(spell_yogg_saron_malady_of_the_mind_AuraScript::OnApply, EFFECT_1, SPELL_AURA_MOD_FEAR, AURA_EFFECT_HANDLE_REAL);
DEBUG:refactor.py:056:find_register_start_end_index():023;            OnEffectRemove += AuraEffectRemoveFn(spell_yogg_saron_malady_of_the_mind_AuraScript::OnRemove, EFFECT_1, SPELL_AURA_MOD_FEAR, AURA_EFFECT_HANDLE_REAL);
DEBUG:refactor.py:056:find_register_start_end_index():024;        }
DEBUG:refactor.py:063:find_register_start_end_index():20;20         void Register() override
DEBUG:refactor.py:064:find_register_start_end_index():24;24         }
DEBUG:refactor.py:072:find_register_statements():2254;2258
DEBUG:refactor.py:074:find_register_statements():000:            OnEffectApply += AuraEffectApplyFn(spell_yogg_saron_malady_of_the_mind_AuraScript::OnApply, EFFECT_1, SPELL_AURA_MOD_FEAR, AURA_EFFECT_HANDLE_REAL);
DEBUG:refactor.py:074:find_register_statements():001:            OnEffectRemove += AuraEffectRemoveFn(spell_yogg_saron_malady_of_the_mind_AuraScript::OnRemove, EFFECT_1, SPELL_AURA_MOD_FEAR, AURA_EFFECT_HANDLE_REAL);
DEBUG:refactor.py:088:format_register_statements():before:000:            OnEffectApply += AuraEffectApplyFn(spell_yogg_saron_malady_of_the_mind_AuraScript::OnApply, EFFECT_1, SPELL_AURA_MOD_FEAR, AURA_EFFECT_HANDLE_REAL);
DEBUG:refactor.py:088:format_register_statements():before:001:            OnEffectRemove += AuraEffectRemoveFn(spell_yogg_saron_malady_of_the_mind_AuraScript::OnRemove, EFFECT_1, SPELL_AURA_MOD_FEAR, AURA_EFFECT_HANDLE_REAL);
DEBUG:refactor.py:090:format_register_statements():after :000:        OnEffectApply += AuraEffectApplyFn(spell_yogg_saron_malady_of_the_mind_aura::OnApply, EFFECT_1, SPELL_AURA_MOD_FEAR, AURA_EFFECT_HANDLE_REAL);
DEBUG:refactor.py:090:format_register_statements():after :001:        OnEffectRemove += AuraEffectRemoveFn(spell_yogg_saron_malady_of_the_mind_aura::OnRemove, EFFECT_1, SPELL_AURA_MOD_FEAR, AURA_EFFECT_HANDLE_REAL);
DEBUG:refactor.py:103:find_content_start_end_index():absolute_start=7,absolute_end=20
DEBUG:refactor.py:145:format_content_statements():before:000:
DEBUG:refactor.py:145:format_content_statements():before:001:        void OnApply(AuraEffect const* /*aurEff*/, AuraEffectHandleModes /*mode*/)
DEBUG:refactor.py:145:format_content_statements():before:002:        {
DEBUG:refactor.py:145:format_content_statements():before:003:            GetUnitOwner()->ApplySpellImmune(SPELL_DEATH_RAY_DAMAGE_REAL, IMMUNITY_ID, SPELL_DEATH_RAY_DAMAGE_REAL, true);
DEBUG:refactor.py:145:format_content_statements():before:004:        }
DEBUG:refactor.py:145:format_content_statements():before:005:
DEBUG:refactor.py:145:format_content_statements():before:006:        void OnRemove(AuraEffect const* /*aurEff*/, AuraEffectHandleModes /*mode*/)
DEBUG:refactor.py:145:format_content_statements():before:007:        {
DEBUG:refactor.py:145:format_content_statements():before:008:            GetUnitOwner()->ApplySpellImmune(SPELL_DEATH_RAY_DAMAGE_REAL, IMMUNITY_ID, SPELL_DEATH_RAY_DAMAGE_REAL, false);
DEBUG:refactor.py:145:format_content_statements():before:009:            GetUnitOwner()->CastCustomSpell(SPELL_MALADY_OF_THE_MIND_TRIGGER, SPELLVALUE_MAX_TARGETS, 1, GetUnitOwner(), true);
DEBUG:refactor.py:145:format_content_statements():before:010:        }
DEBUG:refactor.py:145:format_content_statements():before:011:
DEBUG:refactor.py:147:format_content_statements():after :000:
DEBUG:refactor.py:147:format_content_statements():after :001:    void OnApply(AuraEffect const* /*aurEff*/, AuraEffectHandleModes /*mode*/)
DEBUG:refactor.py:147:format_content_statements():after :002:    {
DEBUG:refactor.py:147:format_content_statements():after :003:        GetUnitOwner()->ApplySpellImmune(SPELL_DEATH_RAY_DAMAGE_REAL, IMMUNITY_ID, SPELL_DEATH_RAY_DAMAGE_REAL, true);
DEBUG:refactor.py:147:format_content_statements():after :004:    }
DEBUG:refactor.py:147:format_content_statements():after :005:
DEBUG:refactor.py:147:format_content_statements():after :006:    void OnRemove(AuraEffect const* /*aurEff*/, AuraEffectHandleModes /*mode*/)
DEBUG:refactor.py:147:format_content_statements():after :007:    {
DEBUG:refactor.py:147:format_content_statements():after :008:        GetUnitOwner()->ApplySpellImmune(SPELL_DEATH_RAY_DAMAGE_REAL, IMMUNITY_ID, SPELL_DEATH_RAY_DAMAGE_REAL, false);
DEBUG:refactor.py:147:format_content_statements():after :009:        GetUnitOwner()->CastCustomSpell(SPELL_MALADY_OF_THE_MIND_TRIGGER, SPELLVALUE_MAX_TARGETS, 1, GetUnitOwner(), true);
DEBUG:refactor.py:147:format_content_statements():after :010:    }
DEBUG:refactor.py:147:format_content_statements():after :011:
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:000:class spell_yogg_saron_malady_of_the_mind : public SpellScriptLoader
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:001:{
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:002:public:
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:003:    spell_yogg_saron_malady_of_the_mind() : SpellScriptLoader("spell_yogg_saron_malady_of_the_mind") { }
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:004:
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:005:    class spell_yogg_saron_malady_of_the_mind_AuraScript : public AuraScript
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:006:    {
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:007:        PrepareAuraScript(spell_yogg_saron_malady_of_the_mind_AuraScript);
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:008:
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:009:        void OnApply(AuraEffect const* /*aurEff*/, AuraEffectHandleModes /*mode*/)
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:010:        {
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:011:            GetUnitOwner()->ApplySpellImmune(SPELL_DEATH_RAY_DAMAGE_REAL, IMMUNITY_ID, SPELL_DEATH_RAY_DAMAGE_REAL, true);
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:012:        }
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:013:
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:014:        void OnRemove(AuraEffect const* /*aurEff*/, AuraEffectHandleModes /*mode*/)
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:015:        {
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:016:            GetUnitOwner()->ApplySpellImmune(SPELL_DEATH_RAY_DAMAGE_REAL, IMMUNITY_ID, SPELL_DEATH_RAY_DAMAGE_REAL, false);
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:017:            GetUnitOwner()->CastCustomSpell(SPELL_MALADY_OF_THE_MIND_TRIGGER, SPELLVALUE_MAX_TARGETS, 1, GetUnitOwner(), true);
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:018:        }
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:019:
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:020:        void Register() override
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:021:        {
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:022:            OnEffectApply += AuraEffectApplyFn(spell_yogg_saron_malady_of_the_mind_AuraScript::OnApply, EFFECT_1, SPELL_AURA_MOD_FEAR, AURA_EFFECT_HANDLE_REAL);
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:023:            OnEffectRemove += AuraEffectRemoveFn(spell_yogg_saron_malady_of_the_mind_AuraScript::OnRemove, EFFECT_1, SPELL_AURA_MOD_FEAR, AURA_EFFECT_HANDLE_REAL);
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:024:        }
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:025:    };
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:026:
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:027:    AuraScript* GetAuraScript() const override
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:028:    {
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:029:        return new spell_yogg_saron_malady_of_the_mind_AuraScript();
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:030:    }
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:031:};
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :000:class spell_yogg_saron_malady_of_the_mind_aura : public AuraScript
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :001:{
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :002:    PrepareAuraScript(spell_yogg_saron_malady_of_the_mind_aura);
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :003:
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :004:    void OnApply(AuraEffect const* /*aurEff*/, AuraEffectHandleModes /*mode*/)
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :005:    {
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :006:        GetUnitOwner()->ApplySpellImmune(SPELL_DEATH_RAY_DAMAGE_REAL, IMMUNITY_ID, SPELL_DEATH_RAY_DAMAGE_REAL, true);
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :007:    }
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :008:
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :009:    void OnRemove(AuraEffect const* /*aurEff*/, AuraEffectHandleModes /*mode*/)
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :010:    {
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :011:        GetUnitOwner()->ApplySpellImmune(SPELL_DEATH_RAY_DAMAGE_REAL, IMMUNITY_ID, SPELL_DEATH_RAY_DAMAGE_REAL, false);
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :012:        GetUnitOwner()->CastCustomSpell(SPELL_MALADY_OF_THE_MIND_TRIGGER, SPELLVALUE_MAX_TARGETS, 1, GetUnitOwner(), true);
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :013:    }
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :014:
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :015:    void Register() override
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :016:    {
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :017:        OnEffectApply += AuraEffectApplyFn(spell_yogg_saron_malady_of_the_mind_aura::OnApply, EFFECT_1, SPELL_AURA_MOD_FEAR, AURA_EFFECT_HANDLE_REAL);
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :018:        OnEffectRemove += AuraEffectRemoveFn(spell_yogg_saron_malady_of_the_mind_aura::OnRemove, EFFECT_1, SPELL_AURA_MOD_FEAR, AURA_EFFECT_HANDLE_REAL);
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :019:    }
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :020:};
DEBUG:refactor.py:018:find_start_last_index():1 line='class spell_yogg_saron_grim_reprisal : public SpellScriptLoader'
DEBUG:refactor.py:018:find_start_last_index():2 line='{'
DEBUG:refactor.py:018:find_start_last_index():3 line='public:'
DEBUG:refactor.py:018:find_start_last_index():4 line='    spell_yogg_saron_grim_reprisal() : SpellScriptLoader("spell_yogg_saron_grim_reprisal") { }'
DEBUG:refactor.py:018:find_start_last_index():5 line=''
DEBUG:refactor.py:018:find_start_last_index():6 line='    class spell_yogg_saron_grim_reprisal_AuraScript : public AuraScript'
DEBUG:refactor.py:018:find_start_last_index():7 line='    {'
DEBUG:refactor.py:018:find_start_last_index():8 line='        PrepareAuraScript(spell_yogg_saron_grim_reprisal_AuraScript);'
DEBUG:refactor.py:018:find_start_last_index():9 line=''
DEBUG:refactor.py:018:find_start_last_index():10 line='        bool Validate(SpellInfo const* /*spellInfo*/) override'
DEBUG:refactor.py:018:find_start_last_index():11 line='        {'
DEBUG:refactor.py:018:find_start_last_index():12 line='            return ValidateSpellInfo({ SPELL_GRIM_REPRISAL_DAMAGE });'
DEBUG:refactor.py:018:find_start_last_index():13 line='        }'
DEBUG:refactor.py:018:find_start_last_index():14 line=''
DEBUG:refactor.py:018:find_start_last_index():15 line='        void HandleProc(AuraEffect const* aurEff, ProcEventInfo& eventInfo)'
DEBUG:refactor.py:018:find_start_last_index():16 line='        {'
DEBUG:refactor.py:018:find_start_last_index():17 line='            DamageInfo* damageInfo = eventInfo.GetDamageInfo();'
DEBUG:refactor.py:018:find_start_last_index():18 line=''
DEBUG:refactor.py:018:find_start_last_index():19 line='            if (!damageInfo || !damageInfo->GetDamage())'
DEBUG:refactor.py:018:find_start_last_index():20 line='            {'
DEBUG:refactor.py:018:find_start_last_index():21 line='                return;'
DEBUG:refactor.py:018:find_start_last_index():22 line='            }'
DEBUG:refactor.py:018:find_start_last_index():23 line=''
DEBUG:refactor.py:018:find_start_last_index():24 line='            int32 damage = CalculatePct(static_cast<int32>(damageInfo->GetDamage()), 60);'
DEBUG:refactor.py:018:find_start_last_index():25 line='            GetTarget()->CastCustomSpell(SPELL_GRIM_REPRISAL_DAMAGE, SPELLVALUE_BASE_POINT0, damage, damageInfo->GetAttacker(), true, nullptr, aurEff);'
DEBUG:refactor.py:018:find_start_last_index():26 line='        }'
DEBUG:refactor.py:018:find_start_last_index():27 line=''
DEBUG:refactor.py:018:find_start_last_index():28 line='        void Register() override'
DEBUG:refactor.py:018:find_start_last_index():29 line='        {'
DEBUG:refactor.py:018:find_start_last_index():30 line='            OnEffectProc += AuraEffectProcFn(spell_yogg_saron_grim_reprisal_AuraScript::HandleProc, EFFECT_0, SPELL_AURA_DUMMY);'
DEBUG:refactor.py:018:find_start_last_index():31 line='        }'
DEBUG:refactor.py:018:find_start_last_index():32 line='    };'
DEBUG:refactor.py:018:find_start_last_index():33 line=''
DEBUG:refactor.py:018:find_start_last_index():34 line='    AuraScript* GetAuraScript() const override'
DEBUG:refactor.py:018:find_start_last_index():35 line='    {'
DEBUG:refactor.py:018:find_start_last_index():36 line='        return new spell_yogg_saron_grim_reprisal_AuraScript();'
DEBUG:refactor.py:018:find_start_last_index():37 line='    }'
DEBUG:refactor.py:018:find_start_last_index():38 line='};'
DEBUG:refactor.py:027: find_name_of_script():name='spell_yogg_saron_grim_reprisal'
DEBUG:refactor.py:018:find_start_last_index():1 line='class spell_yogg_saron_grim_reprisal : public SpellScriptLoader'
DEBUG:refactor.py:018:find_start_last_index():2 line='{'
DEBUG:refactor.py:018:find_start_last_index():3 line='public:'
DEBUG:refactor.py:018:find_start_last_index():4 line='    spell_yogg_saron_grim_reprisal() : SpellScriptLoader("spell_yogg_saron_grim_reprisal") { }'
DEBUG:refactor.py:018:find_start_last_index():5 line=''
DEBUG:refactor.py:018:find_start_last_index():6 line='    class spell_yogg_saron_grim_reprisal_AuraScript : public AuraScript'
DEBUG:refactor.py:018:find_start_last_index():7 line='    {'
DEBUG:refactor.py:018:find_start_last_index():8 line='        PrepareAuraScript(spell_yogg_saron_grim_reprisal_AuraScript);'
DEBUG:refactor.py:018:find_start_last_index():9 line=''
DEBUG:refactor.py:018:find_start_last_index():10 line='        bool Validate(SpellInfo const* /*spellInfo*/) override'
DEBUG:refactor.py:018:find_start_last_index():11 line='        {'
DEBUG:refactor.py:018:find_start_last_index():12 line='            return ValidateSpellInfo({ SPELL_GRIM_REPRISAL_DAMAGE });'
DEBUG:refactor.py:018:find_start_last_index():13 line='        }'
DEBUG:refactor.py:018:find_start_last_index():14 line=''
DEBUG:refactor.py:018:find_start_last_index():15 line='        void HandleProc(AuraEffect const* aurEff, ProcEventInfo& eventInfo)'
DEBUG:refactor.py:018:find_start_last_index():16 line='        {'
DEBUG:refactor.py:018:find_start_last_index():17 line='            DamageInfo* damageInfo = eventInfo.GetDamageInfo();'
DEBUG:refactor.py:018:find_start_last_index():18 line=''
DEBUG:refactor.py:018:find_start_last_index():19 line='            if (!damageInfo || !damageInfo->GetDamage())'
DEBUG:refactor.py:018:find_start_last_index():20 line='            {'
DEBUG:refactor.py:018:find_start_last_index():21 line='                return;'
DEBUG:refactor.py:018:find_start_last_index():22 line='            }'
DEBUG:refactor.py:018:find_start_last_index():23 line=''
DEBUG:refactor.py:018:find_start_last_index():24 line='            int32 damage = CalculatePct(static_cast<int32>(damageInfo->GetDamage()), 60);'
DEBUG:refactor.py:018:find_start_last_index():25 line='            GetTarget()->CastCustomSpell(SPELL_GRIM_REPRISAL_DAMAGE, SPELLVALUE_BASE_POINT0, damage, damageInfo->GetAttacker(), true, nullptr, aurEff);'
DEBUG:refactor.py:018:find_start_last_index():26 line='        }'
DEBUG:refactor.py:018:find_start_last_index():27 line=''
DEBUG:refactor.py:018:find_start_last_index():28 line='        void Register() override'
DEBUG:refactor.py:018:find_start_last_index():29 line='        {'
DEBUG:refactor.py:018:find_start_last_index():30 line='            OnEffectProc += AuraEffectProcFn(spell_yogg_saron_grim_reprisal_AuraScript::HandleProc, EFFECT_0, SPELL_AURA_DUMMY);'
DEBUG:refactor.py:018:find_start_last_index():31 line='        }'
DEBUG:refactor.py:018:find_start_last_index():32 line='    };'
DEBUG:refactor.py:018:find_start_last_index():33 line=''
DEBUG:refactor.py:018:find_start_last_index():34 line='    AuraScript* GetAuraScript() const override'
DEBUG:refactor.py:018:find_start_last_index():35 line='    {'
DEBUG:refactor.py:018:find_start_last_index():36 line='        return new spell_yogg_saron_grim_reprisal_AuraScript();'
DEBUG:refactor.py:018:find_start_last_index():37 line='    }'
DEBUG:refactor.py:018:find_start_last_index():38 line='};'
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:036:     get_script_type():AuraScript line='    class spell_yogg_saron_grim_reprisal_AuraScript : public AuraScript'
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:036:     get_script_type():AuraScript line='        PrepareAuraScript(spell_yogg_saron_grim_reprisal_AuraScript);'
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:036:     get_script_type():AuraScript line='            OnEffectProc += AuraEffectProcFn(spell_yogg_saron_grim_reprisal_AuraScript::HandleProc, EFFECT_0, SPELL_AURA_DUMMY);'
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:036:     get_script_type():AuraScript line='    AuraScript* GetAuraScript() const override'
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:036:     get_script_type():AuraScript line='        return new spell_yogg_saron_grim_reprisal_AuraScript();'
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:018:find_start_last_index():1 line='class spell_yogg_saron_grim_reprisal : public SpellScriptLoader'
DEBUG:refactor.py:018:find_start_last_index():2 line='{'
DEBUG:refactor.py:018:find_start_last_index():3 line='public:'
DEBUG:refactor.py:018:find_start_last_index():4 line='    spell_yogg_saron_grim_reprisal() : SpellScriptLoader("spell_yogg_saron_grim_reprisal") { }'
DEBUG:refactor.py:018:find_start_last_index():5 line=''
DEBUG:refactor.py:018:find_start_last_index():6 line='    class spell_yogg_saron_grim_reprisal_AuraScript : public AuraScript'
DEBUG:refactor.py:018:find_start_last_index():7 line='    {'
DEBUG:refactor.py:018:find_start_last_index():8 line='        PrepareAuraScript(spell_yogg_saron_grim_reprisal_AuraScript);'
DEBUG:refactor.py:018:find_start_last_index():9 line=''
DEBUG:refactor.py:018:find_start_last_index():10 line='        bool Validate(SpellInfo const* /*spellInfo*/) override'
DEBUG:refactor.py:018:find_start_last_index():11 line='        {'
DEBUG:refactor.py:018:find_start_last_index():12 line='            return ValidateSpellInfo({ SPELL_GRIM_REPRISAL_DAMAGE });'
DEBUG:refactor.py:018:find_start_last_index():13 line='        }'
DEBUG:refactor.py:018:find_start_last_index():14 line=''
DEBUG:refactor.py:018:find_start_last_index():15 line='        void HandleProc(AuraEffect const* aurEff, ProcEventInfo& eventInfo)'
DEBUG:refactor.py:018:find_start_last_index():16 line='        {'
DEBUG:refactor.py:018:find_start_last_index():17 line='            DamageInfo* damageInfo = eventInfo.GetDamageInfo();'
DEBUG:refactor.py:018:find_start_last_index():18 line=''
DEBUG:refactor.py:018:find_start_last_index():19 line='            if (!damageInfo || !damageInfo->GetDamage())'
DEBUG:refactor.py:018:find_start_last_index():20 line='            {'
DEBUG:refactor.py:018:find_start_last_index():21 line='                return;'
DEBUG:refactor.py:018:find_start_last_index():22 line='            }'
DEBUG:refactor.py:018:find_start_last_index():23 line=''
DEBUG:refactor.py:018:find_start_last_index():24 line='            int32 damage = CalculatePct(static_cast<int32>(damageInfo->GetDamage()), 60);'
DEBUG:refactor.py:018:find_start_last_index():25 line='            GetTarget()->CastCustomSpell(SPELL_GRIM_REPRISAL_DAMAGE, SPELLVALUE_BASE_POINT0, damage, damageInfo->GetAttacker(), true, nullptr, aurEff);'
DEBUG:refactor.py:018:find_start_last_index():26 line='        }'
DEBUG:refactor.py:018:find_start_last_index():27 line=''
DEBUG:refactor.py:018:find_start_last_index():28 line='        void Register() override'
DEBUG:refactor.py:018:find_start_last_index():29 line='        {'
DEBUG:refactor.py:018:find_start_last_index():30 line='            OnEffectProc += AuraEffectProcFn(spell_yogg_saron_grim_reprisal_AuraScript::HandleProc, EFFECT_0, SPELL_AURA_DUMMY);'
DEBUG:refactor.py:018:find_start_last_index():31 line='        }'
DEBUG:refactor.py:018:find_start_last_index():32 line='    };'
DEBUG:refactor.py:018:find_start_last_index():33 line=''
DEBUG:refactor.py:018:find_start_last_index():34 line='    AuraScript* GetAuraScript() const override'
DEBUG:refactor.py:018:find_start_last_index():35 line='    {'
DEBUG:refactor.py:018:find_start_last_index():36 line='        return new spell_yogg_saron_grim_reprisal_AuraScript();'
DEBUG:refactor.py:018:find_start_last_index():37 line='    }'
DEBUG:refactor.py:018:find_start_last_index():38 line='};'
DEBUG:refactor.py:054:find_register_start_end_index():start_index=1
DEBUG:refactor.py:056:find_register_start_end_index():000;class spell_yogg_saron_grim_reprisal : public SpellScriptLoader
DEBUG:refactor.py:056:find_register_start_end_index():001;{
DEBUG:refactor.py:056:find_register_start_end_index():002;public:
DEBUG:refactor.py:056:find_register_start_end_index():003;    spell_yogg_saron_grim_reprisal() : SpellScriptLoader("spell_yogg_saron_grim_reprisal") { }
DEBUG:refactor.py:056:find_register_start_end_index():004;
DEBUG:refactor.py:056:find_register_start_end_index():005;    class spell_yogg_saron_grim_reprisal_AuraScript : public AuraScript
DEBUG:refactor.py:056:find_register_start_end_index():006;    {
DEBUG:refactor.py:056:find_register_start_end_index():007;        PrepareAuraScript(spell_yogg_saron_grim_reprisal_AuraScript);
DEBUG:refactor.py:056:find_register_start_end_index():008;
DEBUG:refactor.py:056:find_register_start_end_index():009;        bool Validate(SpellInfo const* /*spellInfo*/) override
DEBUG:refactor.py:056:find_register_start_end_index():010;        {
DEBUG:refactor.py:056:find_register_start_end_index():011;            return ValidateSpellInfo({ SPELL_GRIM_REPRISAL_DAMAGE });
DEBUG:refactor.py:056:find_register_start_end_index():012;        }
DEBUG:refactor.py:056:find_register_start_end_index():013;
DEBUG:refactor.py:056:find_register_start_end_index():014;        void HandleProc(AuraEffect const* aurEff, ProcEventInfo& eventInfo)
DEBUG:refactor.py:056:find_register_start_end_index():015;        {
DEBUG:refactor.py:056:find_register_start_end_index():016;            DamageInfo* damageInfo = eventInfo.GetDamageInfo();
DEBUG:refactor.py:056:find_register_start_end_index():017;
DEBUG:refactor.py:056:find_register_start_end_index():018;            if (!damageInfo || !damageInfo->GetDamage())
DEBUG:refactor.py:056:find_register_start_end_index():019;            {
DEBUG:refactor.py:056:find_register_start_end_index():020;                return;
DEBUG:refactor.py:056:find_register_start_end_index():021;            }
DEBUG:refactor.py:056:find_register_start_end_index():022;
DEBUG:refactor.py:056:find_register_start_end_index():023;            int32 damage = CalculatePct(static_cast<int32>(damageInfo->GetDamage()), 60);
DEBUG:refactor.py:056:find_register_start_end_index():024;            GetTarget()->CastCustomSpell(SPELL_GRIM_REPRISAL_DAMAGE, SPELLVALUE_BASE_POINT0, damage, damageInfo->GetAttacker(), true, nullptr, aurEff);
DEBUG:refactor.py:056:find_register_start_end_index():025;        }
DEBUG:refactor.py:056:find_register_start_end_index():026;
DEBUG:refactor.py:056:find_register_start_end_index():027;        void Register() override
DEBUG:refactor.py:056:find_register_start_end_index():028;        {
DEBUG:refactor.py:056:find_register_start_end_index():029;            OnEffectProc += AuraEffectProcFn(spell_yogg_saron_grim_reprisal_AuraScript::HandleProc, EFFECT_0, SPELL_AURA_DUMMY);
DEBUG:refactor.py:056:find_register_start_end_index():030;        }
DEBUG:refactor.py:063:find_register_start_end_index():27;28 
DEBUG:refactor.py:064:find_register_start_end_index():30;31             OnEffectProc += AuraEffectProcFn(spell_yogg_saron_grim_reprisal_AuraScript::HandleProc, EFFECT_0, SPELL_AURA_DUMMY);
DEBUG:refactor.py:054:find_register_start_end_index():start_index=0
DEBUG:refactor.py:056:find_register_start_end_index():000;class spell_yogg_saron_grim_reprisal : public SpellScriptLoader
DEBUG:refactor.py:056:find_register_start_end_index():001;{
DEBUG:refactor.py:056:find_register_start_end_index():002;public:
DEBUG:refactor.py:056:find_register_start_end_index():003;    spell_yogg_saron_grim_reprisal() : SpellScriptLoader("spell_yogg_saron_grim_reprisal") { }
DEBUG:refactor.py:056:find_register_start_end_index():004;
DEBUG:refactor.py:056:find_register_start_end_index():005;    class spell_yogg_saron_grim_reprisal_AuraScript : public AuraScript
DEBUG:refactor.py:056:find_register_start_end_index():006;    {
DEBUG:refactor.py:056:find_register_start_end_index():007;        PrepareAuraScript(spell_yogg_saron_grim_reprisal_AuraScript);
DEBUG:refactor.py:056:find_register_start_end_index():008;
DEBUG:refactor.py:056:find_register_start_end_index():009;        bool Validate(SpellInfo const* /*spellInfo*/) override
DEBUG:refactor.py:056:find_register_start_end_index():010;        {
DEBUG:refactor.py:056:find_register_start_end_index():011;            return ValidateSpellInfo({ SPELL_GRIM_REPRISAL_DAMAGE });
DEBUG:refactor.py:056:find_register_start_end_index():012;        }
DEBUG:refactor.py:056:find_register_start_end_index():013;
DEBUG:refactor.py:056:find_register_start_end_index():014;        void HandleProc(AuraEffect const* aurEff, ProcEventInfo& eventInfo)
DEBUG:refactor.py:056:find_register_start_end_index():015;        {
DEBUG:refactor.py:056:find_register_start_end_index():016;            DamageInfo* damageInfo = eventInfo.GetDamageInfo();
DEBUG:refactor.py:056:find_register_start_end_index():017;
DEBUG:refactor.py:056:find_register_start_end_index():018;            if (!damageInfo || !damageInfo->GetDamage())
DEBUG:refactor.py:056:find_register_start_end_index():019;            {
DEBUG:refactor.py:056:find_register_start_end_index():020;                return;
DEBUG:refactor.py:056:find_register_start_end_index():021;            }
DEBUG:refactor.py:056:find_register_start_end_index():022;
DEBUG:refactor.py:056:find_register_start_end_index():023;            int32 damage = CalculatePct(static_cast<int32>(damageInfo->GetDamage()), 60);
DEBUG:refactor.py:056:find_register_start_end_index():024;            GetTarget()->CastCustomSpell(SPELL_GRIM_REPRISAL_DAMAGE, SPELLVALUE_BASE_POINT0, damage, damageInfo->GetAttacker(), true, nullptr, aurEff);
DEBUG:refactor.py:056:find_register_start_end_index():025;        }
DEBUG:refactor.py:056:find_register_start_end_index():026;
DEBUG:refactor.py:056:find_register_start_end_index():027;        void Register() override
DEBUG:refactor.py:056:find_register_start_end_index():028;        {
DEBUG:refactor.py:056:find_register_start_end_index():029;            OnEffectProc += AuraEffectProcFn(spell_yogg_saron_grim_reprisal_AuraScript::HandleProc, EFFECT_0, SPELL_AURA_DUMMY);
DEBUG:refactor.py:056:find_register_start_end_index():030;        }
DEBUG:refactor.py:063:find_register_start_end_index():27;27         void Register() override
DEBUG:refactor.py:064:find_register_start_end_index():30;30         }
DEBUG:refactor.py:072:find_register_statements():28;31
DEBUG:refactor.py:074:find_register_statements():000:            OnEffectProc += AuraEffectProcFn(spell_yogg_saron_grim_reprisal_AuraScript::HandleProc, EFFECT_0, SPELL_AURA_DUMMY);
DEBUG:refactor.py:088:format_register_statements():before:000:            OnEffectProc += AuraEffectProcFn(spell_yogg_saron_grim_reprisal_AuraScript::HandleProc, EFFECT_0, SPELL_AURA_DUMMY);
DEBUG:refactor.py:090:format_register_statements():after :000:        OnEffectProc += AuraEffectProcFn(spell_yogg_saron_grim_reprisal_aura::HandleProc, EFFECT_0, SPELL_AURA_DUMMY);
DEBUG:refactor.py:103:find_content_start_end_index():absolute_start=8,absolute_end=28
DEBUG:refactor.py:103:find_content_start_end_index():absolute_start=8,absolute_end=28
DEBUG:refactor.py:145:format_content_statements():before:000:
DEBUG:refactor.py:145:format_content_statements():before:001:        bool Validate(SpellInfo const* /*spellInfo*/) override
DEBUG:refactor.py:145:format_content_statements():before:002:        {
DEBUG:refactor.py:145:format_content_statements():before:003:            return ValidateSpellInfo({ SPELL_GRIM_REPRISAL_DAMAGE });
DEBUG:refactor.py:145:format_content_statements():before:004:        }
DEBUG:refactor.py:145:format_content_statements():before:005:
DEBUG:refactor.py:145:format_content_statements():before:006:        void HandleProc(AuraEffect const* aurEff, ProcEventInfo& eventInfo)
DEBUG:refactor.py:145:format_content_statements():before:007:        {
DEBUG:refactor.py:145:format_content_statements():before:008:            DamageInfo* damageInfo = eventInfo.GetDamageInfo();
DEBUG:refactor.py:145:format_content_statements():before:009:
DEBUG:refactor.py:145:format_content_statements():before:010:            if (!damageInfo || !damageInfo->GetDamage())
DEBUG:refactor.py:145:format_content_statements():before:011:            {
DEBUG:refactor.py:145:format_content_statements():before:012:                return;
DEBUG:refactor.py:145:format_content_statements():before:013:            }
DEBUG:refactor.py:145:format_content_statements():before:014:
DEBUG:refactor.py:145:format_content_statements():before:015:            int32 damage = CalculatePct(static_cast<int32>(damageInfo->GetDamage()), 60);
DEBUG:refactor.py:145:format_content_statements():before:016:            GetTarget()->CastCustomSpell(SPELL_GRIM_REPRISAL_DAMAGE, SPELLVALUE_BASE_POINT0, damage, damageInfo->GetAttacker(), true, nullptr, aurEff);
DEBUG:refactor.py:145:format_content_statements():before:017:        }
DEBUG:refactor.py:145:format_content_statements():before:018:
DEBUG:refactor.py:147:format_content_statements():after :000:
DEBUG:refactor.py:147:format_content_statements():after :001:    bool Validate(SpellInfo const* /*spellInfo*/) override
DEBUG:refactor.py:147:format_content_statements():after :002:    {
DEBUG:refactor.py:147:format_content_statements():after :003:        return ValidateSpellInfo({ SPELL_GRIM_REPRISAL_DAMAGE });
DEBUG:refactor.py:147:format_content_statements():after :004:    }
DEBUG:refactor.py:147:format_content_statements():after :005:
DEBUG:refactor.py:147:format_content_statements():after :006:    void HandleProc(AuraEffect const* aurEff, ProcEventInfo& eventInfo)
DEBUG:refactor.py:147:format_content_statements():after :007:    {
DEBUG:refactor.py:147:format_content_statements():after :008:        DamageInfo* damageInfo = eventInfo.GetDamageInfo();
DEBUG:refactor.py:147:format_content_statements():after :009:
DEBUG:refactor.py:147:format_content_statements():after :010:        if (!damageInfo || !damageInfo->GetDamage())
DEBUG:refactor.py:147:format_content_statements():after :011:        {
DEBUG:refactor.py:147:format_content_statements():after :012:            return;
DEBUG:refactor.py:147:format_content_statements():after :013:        }
DEBUG:refactor.py:147:format_content_statements():after :014:
DEBUG:refactor.py:147:format_content_statements():after :015:        int32 damage = CalculatePct(static_cast<int32>(damageInfo->GetDamage()), 60);
DEBUG:refactor.py:147:format_content_statements():after :016:        GetTarget()->CastCustomSpell(SPELL_GRIM_REPRISAL_DAMAGE, SPELLVALUE_BASE_POINT0, damage, damageInfo->GetAttacker(), true, nullptr, aurEff);
DEBUG:refactor.py:147:format_content_statements():after :017:    }
DEBUG:refactor.py:147:format_content_statements():after :018:
DEBUG:refactor.py:018:find_start_last_index():1 line='class spell_yogg_saron_grim_reprisal : public SpellScriptLoader'
DEBUG:refactor.py:018:find_start_last_index():2 line='{'
DEBUG:refactor.py:018:find_start_last_index():3 line='public:'
DEBUG:refactor.py:018:find_start_last_index():4 line='    spell_yogg_saron_grim_reprisal() : SpellScriptLoader("spell_yogg_saron_grim_reprisal") { }'
DEBUG:refactor.py:018:find_start_last_index():5 line=''
DEBUG:refactor.py:018:find_start_last_index():6 line='    class spell_yogg_saron_grim_reprisal_AuraScript : public AuraScript'
DEBUG:refactor.py:018:find_start_last_index():7 line='    {'
DEBUG:refactor.py:018:find_start_last_index():8 line='        PrepareAuraScript(spell_yogg_saron_grim_reprisal_AuraScript);'
DEBUG:refactor.py:018:find_start_last_index():9 line=''
DEBUG:refactor.py:018:find_start_last_index():10 line='        bool Validate(SpellInfo const* /*spellInfo*/) override'
DEBUG:refactor.py:018:find_start_last_index():11 line='        {'
DEBUG:refactor.py:018:find_start_last_index():12 line='            return ValidateSpellInfo({ SPELL_GRIM_REPRISAL_DAMAGE });'
DEBUG:refactor.py:018:find_start_last_index():13 line='        }'
DEBUG:refactor.py:018:find_start_last_index():14 line=''
DEBUG:refactor.py:018:find_start_last_index():15 line='        void HandleProc(AuraEffect const* aurEff, ProcEventInfo& eventInfo)'
DEBUG:refactor.py:018:find_start_last_index():16 line='        {'
DEBUG:refactor.py:018:find_start_last_index():17 line='            DamageInfo* damageInfo = eventInfo.GetDamageInfo();'
DEBUG:refactor.py:018:find_start_last_index():18 line=''
DEBUG:refactor.py:018:find_start_last_index():19 line='            if (!damageInfo || !damageInfo->GetDamage())'
DEBUG:refactor.py:018:find_start_last_index():20 line='            {'
DEBUG:refactor.py:018:find_start_last_index():21 line='                return;'
DEBUG:refactor.py:018:find_start_last_index():22 line='            }'
DEBUG:refactor.py:018:find_start_last_index():23 line=''
DEBUG:refactor.py:018:find_start_last_index():24 line='            int32 damage = CalculatePct(static_cast<int32>(damageInfo->GetDamage()), 60);'
DEBUG:refactor.py:018:find_start_last_index():25 line='            GetTarget()->CastCustomSpell(SPELL_GRIM_REPRISAL_DAMAGE, SPELLVALUE_BASE_POINT0, damage, damageInfo->GetAttacker(), true, nullptr, aurEff);'
DEBUG:refactor.py:018:find_start_last_index():26 line='        }'
DEBUG:refactor.py:018:find_start_last_index():27 line=''
DEBUG:refactor.py:018:find_start_last_index():28 line='        void Register() override'
DEBUG:refactor.py:018:find_start_last_index():29 line='        {'
DEBUG:refactor.py:018:find_start_last_index():30 line='            OnEffectProc += AuraEffectProcFn(spell_yogg_saron_grim_reprisal_AuraScript::HandleProc, EFFECT_0, SPELL_AURA_DUMMY);'
DEBUG:refactor.py:018:find_start_last_index():31 line='        }'
DEBUG:refactor.py:018:find_start_last_index():32 line='    };'
DEBUG:refactor.py:018:find_start_last_index():33 line=''
DEBUG:refactor.py:018:find_start_last_index():34 line='    AuraScript* GetAuraScript() const override'
DEBUG:refactor.py:018:find_start_last_index():35 line='    {'
DEBUG:refactor.py:018:find_start_last_index():36 line='        return new spell_yogg_saron_grim_reprisal_AuraScript();'
DEBUG:refactor.py:018:find_start_last_index():37 line='    }'
DEBUG:refactor.py:018:find_start_last_index():38 line='};'
DEBUG:refactor.py:223:convert_function_block():start_index=1last_index=38
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:036:     get_script_type():AuraScript line='    class spell_yogg_saron_grim_reprisal_AuraScript : public AuraScript'
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:036:     get_script_type():AuraScript line='        PrepareAuraScript(spell_yogg_saron_grim_reprisal_AuraScript);'
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:036:     get_script_type():AuraScript line='            OnEffectProc += AuraEffectProcFn(spell_yogg_saron_grim_reprisal_AuraScript::HandleProc, EFFECT_0, SPELL_AURA_DUMMY);'
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:036:     get_script_type():AuraScript line='    AuraScript* GetAuraScript() const override'
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:036:     get_script_type():AuraScript line='        return new spell_yogg_saron_grim_reprisal_AuraScript();'
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:225:convert_function_block():script_type=<ScriptType.AURA: 1>
DEBUG:refactor.py:027: find_name_of_script():name='spell_yogg_saron_grim_reprisal'
DEBUG:refactor.py:228:convert_function_block():script_name='spell_yogg_saron_grim_reprisal'
DEBUG:refactor.py:054:find_register_start_end_index():start_index=0
DEBUG:refactor.py:056:find_register_start_end_index():000;class spell_yogg_saron_grim_reprisal : public SpellScriptLoader
DEBUG:refactor.py:056:find_register_start_end_index():001;{
DEBUG:refactor.py:056:find_register_start_end_index():002;public:
DEBUG:refactor.py:056:find_register_start_end_index():003;    spell_yogg_saron_grim_reprisal() : SpellScriptLoader("spell_yogg_saron_grim_reprisal") { }
DEBUG:refactor.py:056:find_register_start_end_index():004;
DEBUG:refactor.py:056:find_register_start_end_index():005;    class spell_yogg_saron_grim_reprisal_AuraScript : public AuraScript
DEBUG:refactor.py:056:find_register_start_end_index():006;    {
DEBUG:refactor.py:056:find_register_start_end_index():007;        PrepareAuraScript(spell_yogg_saron_grim_reprisal_AuraScript);
DEBUG:refactor.py:056:find_register_start_end_index():008;
DEBUG:refactor.py:056:find_register_start_end_index():009;        bool Validate(SpellInfo const* /*spellInfo*/) override
DEBUG:refactor.py:056:find_register_start_end_index():010;        {
DEBUG:refactor.py:056:find_register_start_end_index():011;            return ValidateSpellInfo({ SPELL_GRIM_REPRISAL_DAMAGE });
DEBUG:refactor.py:056:find_register_start_end_index():012;        }
DEBUG:refactor.py:056:find_register_start_end_index():013;
DEBUG:refactor.py:056:find_register_start_end_index():014;        void HandleProc(AuraEffect const* aurEff, ProcEventInfo& eventInfo)
DEBUG:refactor.py:056:find_register_start_end_index():015;        {
DEBUG:refactor.py:056:find_register_start_end_index():016;            DamageInfo* damageInfo = eventInfo.GetDamageInfo();
DEBUG:refactor.py:056:find_register_start_end_index():017;
DEBUG:refactor.py:056:find_register_start_end_index():018;            if (!damageInfo || !damageInfo->GetDamage())
DEBUG:refactor.py:056:find_register_start_end_index():019;            {
DEBUG:refactor.py:056:find_register_start_end_index():020;                return;
DEBUG:refactor.py:056:find_register_start_end_index():021;            }
DEBUG:refactor.py:056:find_register_start_end_index():022;
DEBUG:refactor.py:056:find_register_start_end_index():023;            int32 damage = CalculatePct(static_cast<int32>(damageInfo->GetDamage()), 60);
DEBUG:refactor.py:056:find_register_start_end_index():024;            GetTarget()->CastCustomSpell(SPELL_GRIM_REPRISAL_DAMAGE, SPELLVALUE_BASE_POINT0, damage, damageInfo->GetAttacker(), true, nullptr, aurEff);
DEBUG:refactor.py:056:find_register_start_end_index():025;        }
DEBUG:refactor.py:056:find_register_start_end_index():026;
DEBUG:refactor.py:056:find_register_start_end_index():027;        void Register() override
DEBUG:refactor.py:056:find_register_start_end_index():028;        {
DEBUG:refactor.py:056:find_register_start_end_index():029;            OnEffectProc += AuraEffectProcFn(spell_yogg_saron_grim_reprisal_AuraScript::HandleProc, EFFECT_0, SPELL_AURA_DUMMY);
DEBUG:refactor.py:056:find_register_start_end_index():030;        }
DEBUG:refactor.py:063:find_register_start_end_index():27;27         void Register() override
DEBUG:refactor.py:064:find_register_start_end_index():30;30         }
DEBUG:refactor.py:072:find_register_statements():28;31
DEBUG:refactor.py:074:find_register_statements():000:            OnEffectProc += AuraEffectProcFn(spell_yogg_saron_grim_reprisal_AuraScript::HandleProc, EFFECT_0, SPELL_AURA_DUMMY);
DEBUG:refactor.py:088:format_register_statements():before:000:            OnEffectProc += AuraEffectProcFn(spell_yogg_saron_grim_reprisal_AuraScript::HandleProc, EFFECT_0, SPELL_AURA_DUMMY);
DEBUG:refactor.py:090:format_register_statements():after :000:        OnEffectProc += AuraEffectProcFn(spell_yogg_saron_grim_reprisal_aura::HandleProc, EFFECT_0, SPELL_AURA_DUMMY);
DEBUG:refactor.py:103:find_content_start_end_index():absolute_start=7,absolute_end=27
DEBUG:refactor.py:145:format_content_statements():before:000:
DEBUG:refactor.py:145:format_content_statements():before:001:        bool Validate(SpellInfo const* /*spellInfo*/) override
DEBUG:refactor.py:145:format_content_statements():before:002:        {
DEBUG:refactor.py:145:format_content_statements():before:003:            return ValidateSpellInfo({ SPELL_GRIM_REPRISAL_DAMAGE });
DEBUG:refactor.py:145:format_content_statements():before:004:        }
DEBUG:refactor.py:145:format_content_statements():before:005:
DEBUG:refactor.py:145:format_content_statements():before:006:        void HandleProc(AuraEffect const* aurEff, ProcEventInfo& eventInfo)
DEBUG:refactor.py:145:format_content_statements():before:007:        {
DEBUG:refactor.py:145:format_content_statements():before:008:            DamageInfo* damageInfo = eventInfo.GetDamageInfo();
DEBUG:refactor.py:145:format_content_statements():before:009:
DEBUG:refactor.py:145:format_content_statements():before:010:            if (!damageInfo || !damageInfo->GetDamage())
DEBUG:refactor.py:145:format_content_statements():before:011:            {
DEBUG:refactor.py:145:format_content_statements():before:012:                return;
DEBUG:refactor.py:145:format_content_statements():before:013:            }
DEBUG:refactor.py:145:format_content_statements():before:014:
DEBUG:refactor.py:145:format_content_statements():before:015:            int32 damage = CalculatePct(static_cast<int32>(damageInfo->GetDamage()), 60);
DEBUG:refactor.py:145:format_content_statements():before:016:            GetTarget()->CastCustomSpell(SPELL_GRIM_REPRISAL_DAMAGE, SPELLVALUE_BASE_POINT0, damage, damageInfo->GetAttacker(), true, nullptr, aurEff);
DEBUG:refactor.py:145:format_content_statements():before:017:        }
DEBUG:refactor.py:145:format_content_statements():before:018:
DEBUG:refactor.py:147:format_content_statements():after :000:
DEBUG:refactor.py:147:format_content_statements():after :001:    bool Validate(SpellInfo const* /*spellInfo*/) override
DEBUG:refactor.py:147:format_content_statements():after :002:    {
DEBUG:refactor.py:147:format_content_statements():after :003:        return ValidateSpellInfo({ SPELL_GRIM_REPRISAL_DAMAGE });
DEBUG:refactor.py:147:format_content_statements():after :004:    }
DEBUG:refactor.py:147:format_content_statements():after :005:
DEBUG:refactor.py:147:format_content_statements():after :006:    void HandleProc(AuraEffect const* aurEff, ProcEventInfo& eventInfo)
DEBUG:refactor.py:147:format_content_statements():after :007:    {
DEBUG:refactor.py:147:format_content_statements():after :008:        DamageInfo* damageInfo = eventInfo.GetDamageInfo();
DEBUG:refactor.py:147:format_content_statements():after :009:
DEBUG:refactor.py:147:format_content_statements():after :010:        if (!damageInfo || !damageInfo->GetDamage())
DEBUG:refactor.py:147:format_content_statements():after :011:        {
DEBUG:refactor.py:147:format_content_statements():after :012:            return;
DEBUG:refactor.py:147:format_content_statements():after :013:        }
DEBUG:refactor.py:147:format_content_statements():after :014:
DEBUG:refactor.py:147:format_content_statements():after :015:        int32 damage = CalculatePct(static_cast<int32>(damageInfo->GetDamage()), 60);
DEBUG:refactor.py:147:format_content_statements():after :016:        GetTarget()->CastCustomSpell(SPELL_GRIM_REPRISAL_DAMAGE, SPELLVALUE_BASE_POINT0, damage, damageInfo->GetAttacker(), true, nullptr, aurEff);
DEBUG:refactor.py:147:format_content_statements():after :017:    }
DEBUG:refactor.py:147:format_content_statements():after :018:
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:000:class spell_yogg_saron_grim_reprisal : public SpellScriptLoader
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:001:{
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:002:public:
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:003:    spell_yogg_saron_grim_reprisal() : SpellScriptLoader("spell_yogg_saron_grim_reprisal") { }
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:004:
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:005:    class spell_yogg_saron_grim_reprisal_AuraScript : public AuraScript
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:006:    {
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:007:        PrepareAuraScript(spell_yogg_saron_grim_reprisal_AuraScript);
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:008:
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:009:        bool Validate(SpellInfo const* /*spellInfo*/) override
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:010:        {
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:011:            return ValidateSpellInfo({ SPELL_GRIM_REPRISAL_DAMAGE });
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:012:        }
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:013:
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:014:        void HandleProc(AuraEffect const* aurEff, ProcEventInfo& eventInfo)
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:015:        {
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:016:            DamageInfo* damageInfo = eventInfo.GetDamageInfo();
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:017:
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:018:            if (!damageInfo || !damageInfo->GetDamage())
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:019:            {
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:020:                return;
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:021:            }
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:022:
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:023:            int32 damage = CalculatePct(static_cast<int32>(damageInfo->GetDamage()), 60);
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:024:            GetTarget()->CastCustomSpell(SPELL_GRIM_REPRISAL_DAMAGE, SPELLVALUE_BASE_POINT0, damage, damageInfo->GetAttacker(), true, nullptr, aurEff);
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:025:        }
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:026:
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:027:        void Register() override
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:028:        {
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:029:            OnEffectProc += AuraEffectProcFn(spell_yogg_saron_grim_reprisal_AuraScript::HandleProc, EFFECT_0, SPELL_AURA_DUMMY);
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:030:        }
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:031:    };
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:032:
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:033:    AuraScript* GetAuraScript() const override
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:034:    {
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:035:        return new spell_yogg_saron_grim_reprisal_AuraScript();
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:036:    }
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:037:};
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :000:class spell_yogg_saron_grim_reprisal_aura : public AuraScript
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :001:{
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :002:    PrepareAuraScript(spell_yogg_saron_grim_reprisal_aura);
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :003:
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :004:    bool Validate(SpellInfo const* /*spellInfo*/) override
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :005:    {
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :006:        return ValidateSpellInfo({ SPELL_GRIM_REPRISAL_DAMAGE });
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :007:    }
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :008:
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :009:    void HandleProc(AuraEffect const* aurEff, ProcEventInfo& eventInfo)
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :010:    {
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :011:        DamageInfo* damageInfo = eventInfo.GetDamageInfo();
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :012:
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :013:        if (!damageInfo || !damageInfo->GetDamage())
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :014:        {
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :015:            return;
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :016:        }
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :017:
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :018:        int32 damage = CalculatePct(static_cast<int32>(damageInfo->GetDamage()), 60);
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :019:        GetTarget()->CastCustomSpell(SPELL_GRIM_REPRISAL_DAMAGE, SPELLVALUE_BASE_POINT0, damage, damageInfo->GetAttacker(), true, nullptr, aurEff);
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :020:    }
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :021:
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :022:    void Register() override
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :023:    {
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :024:        OnEffectProc += AuraEffectProcFn(spell_yogg_saron_grim_reprisal_aura::HandleProc, EFFECT_0, SPELL_AURA_DUMMY);
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :025:    }
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :026:};
DEBUG:refactor.py:018:find_start_last_index():1 line='class spell_yogg_saron_brain_link : public SpellScriptLoader'
DEBUG:refactor.py:018:find_start_last_index():2 line='{'
DEBUG:refactor.py:018:find_start_last_index():3 line='public:'
DEBUG:refactor.py:018:find_start_last_index():4 line='    spell_yogg_saron_brain_link() : SpellScriptLoader("spell_yogg_saron_brain_link") { }'
DEBUG:refactor.py:018:find_start_last_index():5 line=''
DEBUG:refactor.py:018:find_start_last_index():6 line='    class spell_yogg_saron_brain_link_AuraScript : public AuraScript'
DEBUG:refactor.py:018:find_start_last_index():7 line='    {'
DEBUG:refactor.py:018:find_start_last_index():8 line='        PrepareAuraScript(spell_yogg_saron_brain_link_AuraScript);'
DEBUG:refactor.py:018:find_start_last_index():9 line=''
DEBUG:refactor.py:018:find_start_last_index():10 line='        void HandleOnEffectApply(AuraEffect const* /*aurEff*/, AuraEffectHandleModes /*mode*/)'
DEBUG:refactor.py:018:find_start_last_index():11 line='        {'
DEBUG:refactor.py:018:find_start_last_index():12 line='            PreventDefaultAction();'
DEBUG:refactor.py:018:find_start_last_index():13 line='            Player* target = nullptr;'
DEBUG:refactor.py:018:find_start_last_index():14 line='            Map::PlayerList const& pList = GetUnitOwner()->GetMap()->GetPlayers();'
DEBUG:refactor.py:018:find_start_last_index():15 line='            uint8 _offset = urand(0, pList.getSize() - 1);'
DEBUG:refactor.py:018:find_start_last_index():16 line='            uint8 _counter = 0;'
DEBUG:refactor.py:018:find_start_last_index():17 line='            for(Map::PlayerList::const_iterator itr = pList.begin(); itr != pList.end(); ++itr, ++_counter)'
DEBUG:refactor.py:018:find_start_last_index():18 line='            {'
DEBUG:refactor.py:018:find_start_last_index():19 line='                if (itr->GetSource() == GetUnitOwner() || GetUnitOwner()->GetDistance(itr->GetSource()) > 50.0f || !itr->GetSource()->IsAlive() || itr->GetSource()->IsGameMaster())'
DEBUG:refactor.py:018:find_start_last_index():20 line='                    continue;'
DEBUG:refactor.py:018:find_start_last_index():21 line=''
DEBUG:refactor.py:018:find_start_last_index():22 line='                if (_counter <= _offset || !target)'
DEBUG:refactor.py:018:find_start_last_index():23 line='                    target = itr->GetSource();'
DEBUG:refactor.py:018:find_start_last_index():24 line='                else'
DEBUG:refactor.py:018:find_start_last_index():25 line='                    break;'
DEBUG:refactor.py:018:find_start_last_index():26 line='            }'
DEBUG:refactor.py:018:find_start_last_index():27 line=''
DEBUG:refactor.py:018:find_start_last_index():28 line='            if (!target)'
DEBUG:refactor.py:018:find_start_last_index():29 line='                SetDuration(0);'
DEBUG:refactor.py:018:find_start_last_index():30 line='            else'
DEBUG:refactor.py:018:find_start_last_index():31 line='                _targetGUID = target->GetGUID();'
DEBUG:refactor.py:018:find_start_last_index():32 line='        }'
DEBUG:refactor.py:018:find_start_last_index():33 line=''
DEBUG:refactor.py:018:find_start_last_index():34 line='        void OnPeriodic(AuraEffect const*  /*aurEff*/)'
DEBUG:refactor.py:018:find_start_last_index():35 line='        {'
DEBUG:refactor.py:018:find_start_last_index():36 line='            Unit* owner = GetUnitOwner();'
DEBUG:refactor.py:018:find_start_last_index():37 line='            if (!owner)'
DEBUG:refactor.py:018:find_start_last_index():38 line='            {'
DEBUG:refactor.py:018:find_start_last_index():39 line='                SetDuration(0);'
DEBUG:refactor.py:018:find_start_last_index():40 line='                return;'
DEBUG:refactor.py:018:find_start_last_index():41 line='            }'
DEBUG:refactor.py:018:find_start_last_index():42 line=''
DEBUG:refactor.py:018:find_start_last_index():43 line='            Unit* _target = ObjectAccessor::GetUnit(*owner, _targetGUID);'
DEBUG:refactor.py:018:find_start_last_index():44 line='            if (!_target || !_target->IsAlive() || std::fabs(owner->GetPositionZ() - _target->GetPositionZ()) > 10.0f) // Target or owner underground'
DEBUG:refactor.py:018:find_start_last_index():45 line='            {'
DEBUG:refactor.py:018:find_start_last_index():46 line='                SetDuration(0);'
DEBUG:refactor.py:018:find_start_last_index():47 line='                return;'
DEBUG:refactor.py:018:find_start_last_index():48 line='            }'
DEBUG:refactor.py:018:find_start_last_index():49 line=''
DEBUG:refactor.py:018:find_start_last_index():50 line='            if (owner->GetDistance(_target) > 20.0f)'
DEBUG:refactor.py:018:find_start_last_index():51 line='            {'
DEBUG:refactor.py:018:find_start_last_index():52 line='                owner->CastSpell(_target, SPELL_BRAIN_LINK_DAMAGE, true);'
DEBUG:refactor.py:018:find_start_last_index():53 line='                owner->CastSpell(owner, SPELL_BRAIN_LINK_DAMAGE, true);'
DEBUG:refactor.py:018:find_start_last_index():54 line='            }'
DEBUG:refactor.py:018:find_start_last_index():55 line='            else'
DEBUG:refactor.py:018:find_start_last_index():56 line='                owner->CastSpell(_target, SPELL_BRAIN_LINK_OK, true);'
DEBUG:refactor.py:018:find_start_last_index():57 line='        }'
DEBUG:refactor.py:018:find_start_last_index():58 line=''
DEBUG:refactor.py:018:find_start_last_index():59 line='        void Register() override'
DEBUG:refactor.py:018:find_start_last_index():60 line='        {'
DEBUG:refactor.py:018:find_start_last_index():61 line='            OnEffectApply += AuraEffectApplyFn(spell_yogg_saron_brain_link_AuraScript::HandleOnEffectApply, EFFECT_0, SPELL_AURA_PERIODIC_DUMMY, AURA_EFFECT_HANDLE_REAL);'
DEBUG:refactor.py:018:find_start_last_index():62 line='            OnEffectPeriodic += AuraEffectPeriodicFn(spell_yogg_saron_brain_link_AuraScript::OnPeriodic, EFFECT_0, SPELL_AURA_PERIODIC_DUMMY);'
DEBUG:refactor.py:018:find_start_last_index():63 line='        }'
DEBUG:refactor.py:018:find_start_last_index():64 line=''
DEBUG:refactor.py:018:find_start_last_index():65 line='    protected:'
DEBUG:refactor.py:018:find_start_last_index():66 line='        ObjectGuid _targetGUID;'
DEBUG:refactor.py:018:find_start_last_index():67 line='    };'
DEBUG:refactor.py:018:find_start_last_index():68 line=''
DEBUG:refactor.py:018:find_start_last_index():69 line='    AuraScript* GetAuraScript() const override'
DEBUG:refactor.py:018:find_start_last_index():70 line='    {'
DEBUG:refactor.py:018:find_start_last_index():71 line='        return new spell_yogg_saron_brain_link_AuraScript();'
DEBUG:refactor.py:018:find_start_last_index():72 line='    }'
DEBUG:refactor.py:018:find_start_last_index():73 line=''
DEBUG:refactor.py:018:find_start_last_index():74 line='    class spell_yogg_saron_brain_link_SpellScript : public SpellScript'
DEBUG:refactor.py:018:find_start_last_index():75 line='    {'
DEBUG:refactor.py:018:find_start_last_index():76 line='        PrepareSpellScript(spell_yogg_saron_brain_link_SpellScript);'
DEBUG:refactor.py:018:find_start_last_index():77 line=''
DEBUG:refactor.py:018:find_start_last_index():78 line='        void FilterTargets(std::list<WorldObject*>& targets)'
DEBUG:refactor.py:018:find_start_last_index():79 line='        {'
DEBUG:refactor.py:018:find_start_last_index():80 line='            std::list<WorldObject*> tempList;'
DEBUG:refactor.py:018:find_start_last_index():81 line='            for (std::list<WorldObject*>::iterator itr = targets.begin(); itr != targets.end(); ++itr)'
DEBUG:refactor.py:018:find_start_last_index():82 line='                if ((*itr)->GetPositionZ() > 300.0f)'
DEBUG:refactor.py:018:find_start_last_index():83 line='                    tempList.push_back(*itr);'
DEBUG:refactor.py:018:find_start_last_index():84 line=''
DEBUG:refactor.py:018:find_start_last_index():85 line='            targets.clear();'
DEBUG:refactor.py:018:find_start_last_index():86 line='            for (std::list<WorldObject*>::iterator itr = tempList.begin(); itr != tempList.end(); ++itr)'
DEBUG:refactor.py:018:find_start_last_index():87 line='                targets.push_back(*itr);'
DEBUG:refactor.py:018:find_start_last_index():88 line='        }'
DEBUG:refactor.py:018:find_start_last_index():89 line=''
DEBUG:refactor.py:018:find_start_last_index():90 line='        void Register() override'
DEBUG:refactor.py:018:find_start_last_index():91 line='        {'
DEBUG:refactor.py:018:find_start_last_index():92 line='            OnObjectAreaTargetSelect += SpellObjectAreaTargetSelectFn(spell_yogg_saron_brain_link_SpellScript::FilterTargets, EFFECT_0, TARGET_UNIT_SRC_AREA_ENEMY);'
DEBUG:refactor.py:018:find_start_last_index():93 line='        }'
DEBUG:refactor.py:018:find_start_last_index():94 line='    };'
DEBUG:refactor.py:018:find_start_last_index():95 line=''
DEBUG:refactor.py:018:find_start_last_index():96 line='    SpellScript* GetSpellScript() const override'
DEBUG:refactor.py:018:find_start_last_index():97 line='    {'
DEBUG:refactor.py:018:find_start_last_index():98 line='        return new spell_yogg_saron_brain_link_SpellScript();'
DEBUG:refactor.py:018:find_start_last_index():99 line='    }'
DEBUG:refactor.py:018:find_start_last_index():100 line='};'
DEBUG:refactor.py:027: find_name_of_script():name='spell_yogg_saron_brain_link'
DEBUG:refactor.py:018:find_start_last_index():1 line='class spell_yogg_saron_brain_link : public SpellScriptLoader'
DEBUG:refactor.py:018:find_start_last_index():2 line='{'
DEBUG:refactor.py:018:find_start_last_index():3 line='public:'
DEBUG:refactor.py:018:find_start_last_index():4 line='    spell_yogg_saron_brain_link() : SpellScriptLoader("spell_yogg_saron_brain_link") { }'
DEBUG:refactor.py:018:find_start_last_index():5 line=''
DEBUG:refactor.py:018:find_start_last_index():6 line='    class spell_yogg_saron_brain_link_AuraScript : public AuraScript'
DEBUG:refactor.py:018:find_start_last_index():7 line='    {'
DEBUG:refactor.py:018:find_start_last_index():8 line='        PrepareAuraScript(spell_yogg_saron_brain_link_AuraScript);'
DEBUG:refactor.py:018:find_start_last_index():9 line=''
DEBUG:refactor.py:018:find_start_last_index():10 line='        void HandleOnEffectApply(AuraEffect const* /*aurEff*/, AuraEffectHandleModes /*mode*/)'
DEBUG:refactor.py:018:find_start_last_index():11 line='        {'
DEBUG:refactor.py:018:find_start_last_index():12 line='            PreventDefaultAction();'
DEBUG:refactor.py:018:find_start_last_index():13 line='            Player* target = nullptr;'
DEBUG:refactor.py:018:find_start_last_index():14 line='            Map::PlayerList const& pList = GetUnitOwner()->GetMap()->GetPlayers();'
DEBUG:refactor.py:018:find_start_last_index():15 line='            uint8 _offset = urand(0, pList.getSize() - 1);'
DEBUG:refactor.py:018:find_start_last_index():16 line='            uint8 _counter = 0;'
DEBUG:refactor.py:018:find_start_last_index():17 line='            for(Map::PlayerList::const_iterator itr = pList.begin(); itr != pList.end(); ++itr, ++_counter)'
DEBUG:refactor.py:018:find_start_last_index():18 line='            {'
DEBUG:refactor.py:018:find_start_last_index():19 line='                if (itr->GetSource() == GetUnitOwner() || GetUnitOwner()->GetDistance(itr->GetSource()) > 50.0f || !itr->GetSource()->IsAlive() || itr->GetSource()->IsGameMaster())'
DEBUG:refactor.py:018:find_start_last_index():20 line='                    continue;'
DEBUG:refactor.py:018:find_start_last_index():21 line=''
DEBUG:refactor.py:018:find_start_last_index():22 line='                if (_counter <= _offset || !target)'
DEBUG:refactor.py:018:find_start_last_index():23 line='                    target = itr->GetSource();'
DEBUG:refactor.py:018:find_start_last_index():24 line='                else'
DEBUG:refactor.py:018:find_start_last_index():25 line='                    break;'
DEBUG:refactor.py:018:find_start_last_index():26 line='            }'
DEBUG:refactor.py:018:find_start_last_index():27 line=''
DEBUG:refactor.py:018:find_start_last_index():28 line='            if (!target)'
DEBUG:refactor.py:018:find_start_last_index():29 line='                SetDuration(0);'
DEBUG:refactor.py:018:find_start_last_index():30 line='            else'
DEBUG:refactor.py:018:find_start_last_index():31 line='                _targetGUID = target->GetGUID();'
DEBUG:refactor.py:018:find_start_last_index():32 line='        }'
DEBUG:refactor.py:018:find_start_last_index():33 line=''
DEBUG:refactor.py:018:find_start_last_index():34 line='        void OnPeriodic(AuraEffect const*  /*aurEff*/)'
DEBUG:refactor.py:018:find_start_last_index():35 line='        {'
DEBUG:refactor.py:018:find_start_last_index():36 line='            Unit* owner = GetUnitOwner();'
DEBUG:refactor.py:018:find_start_last_index():37 line='            if (!owner)'
DEBUG:refactor.py:018:find_start_last_index():38 line='            {'
DEBUG:refactor.py:018:find_start_last_index():39 line='                SetDuration(0);'
DEBUG:refactor.py:018:find_start_last_index():40 line='                return;'
DEBUG:refactor.py:018:find_start_last_index():41 line='            }'
DEBUG:refactor.py:018:find_start_last_index():42 line=''
DEBUG:refactor.py:018:find_start_last_index():43 line='            Unit* _target = ObjectAccessor::GetUnit(*owner, _targetGUID);'
DEBUG:refactor.py:018:find_start_last_index():44 line='            if (!_target || !_target->IsAlive() || std::fabs(owner->GetPositionZ() - _target->GetPositionZ()) > 10.0f) // Target or owner underground'
DEBUG:refactor.py:018:find_start_last_index():45 line='            {'
DEBUG:refactor.py:018:find_start_last_index():46 line='                SetDuration(0);'
DEBUG:refactor.py:018:find_start_last_index():47 line='                return;'
DEBUG:refactor.py:018:find_start_last_index():48 line='            }'
DEBUG:refactor.py:018:find_start_last_index():49 line=''
DEBUG:refactor.py:018:find_start_last_index():50 line='            if (owner->GetDistance(_target) > 20.0f)'
DEBUG:refactor.py:018:find_start_last_index():51 line='            {'
DEBUG:refactor.py:018:find_start_last_index():52 line='                owner->CastSpell(_target, SPELL_BRAIN_LINK_DAMAGE, true);'
DEBUG:refactor.py:018:find_start_last_index():53 line='                owner->CastSpell(owner, SPELL_BRAIN_LINK_DAMAGE, true);'
DEBUG:refactor.py:018:find_start_last_index():54 line='            }'
DEBUG:refactor.py:018:find_start_last_index():55 line='            else'
DEBUG:refactor.py:018:find_start_last_index():56 line='                owner->CastSpell(_target, SPELL_BRAIN_LINK_OK, true);'
DEBUG:refactor.py:018:find_start_last_index():57 line='        }'
DEBUG:refactor.py:018:find_start_last_index():58 line=''
DEBUG:refactor.py:018:find_start_last_index():59 line='        void Register() override'
DEBUG:refactor.py:018:find_start_last_index():60 line='        {'
DEBUG:refactor.py:018:find_start_last_index():61 line='            OnEffectApply += AuraEffectApplyFn(spell_yogg_saron_brain_link_AuraScript::HandleOnEffectApply, EFFECT_0, SPELL_AURA_PERIODIC_DUMMY, AURA_EFFECT_HANDLE_REAL);'
DEBUG:refactor.py:018:find_start_last_index():62 line='            OnEffectPeriodic += AuraEffectPeriodicFn(spell_yogg_saron_brain_link_AuraScript::OnPeriodic, EFFECT_0, SPELL_AURA_PERIODIC_DUMMY);'
DEBUG:refactor.py:018:find_start_last_index():63 line='        }'
DEBUG:refactor.py:018:find_start_last_index():64 line=''
DEBUG:refactor.py:018:find_start_last_index():65 line='    protected:'
DEBUG:refactor.py:018:find_start_last_index():66 line='        ObjectGuid _targetGUID;'
DEBUG:refactor.py:018:find_start_last_index():67 line='    };'
DEBUG:refactor.py:018:find_start_last_index():68 line=''
DEBUG:refactor.py:018:find_start_last_index():69 line='    AuraScript* GetAuraScript() const override'
DEBUG:refactor.py:018:find_start_last_index():70 line='    {'
DEBUG:refactor.py:018:find_start_last_index():71 line='        return new spell_yogg_saron_brain_link_AuraScript();'
DEBUG:refactor.py:018:find_start_last_index():72 line='    }'
DEBUG:refactor.py:018:find_start_last_index():73 line=''
DEBUG:refactor.py:018:find_start_last_index():74 line='    class spell_yogg_saron_brain_link_SpellScript : public SpellScript'
DEBUG:refactor.py:018:find_start_last_index():75 line='    {'
DEBUG:refactor.py:018:find_start_last_index():76 line='        PrepareSpellScript(spell_yogg_saron_brain_link_SpellScript);'
DEBUG:refactor.py:018:find_start_last_index():77 line=''
DEBUG:refactor.py:018:find_start_last_index():78 line='        void FilterTargets(std::list<WorldObject*>& targets)'
DEBUG:refactor.py:018:find_start_last_index():79 line='        {'
DEBUG:refactor.py:018:find_start_last_index():80 line='            std::list<WorldObject*> tempList;'
DEBUG:refactor.py:018:find_start_last_index():81 line='            for (std::list<WorldObject*>::iterator itr = targets.begin(); itr != targets.end(); ++itr)'
DEBUG:refactor.py:018:find_start_last_index():82 line='                if ((*itr)->GetPositionZ() > 300.0f)'
DEBUG:refactor.py:018:find_start_last_index():83 line='                    tempList.push_back(*itr);'
DEBUG:refactor.py:018:find_start_last_index():84 line=''
DEBUG:refactor.py:018:find_start_last_index():85 line='            targets.clear();'
DEBUG:refactor.py:018:find_start_last_index():86 line='            for (std::list<WorldObject*>::iterator itr = tempList.begin(); itr != tempList.end(); ++itr)'
DEBUG:refactor.py:018:find_start_last_index():87 line='                targets.push_back(*itr);'
DEBUG:refactor.py:018:find_start_last_index():88 line='        }'
DEBUG:refactor.py:018:find_start_last_index():89 line=''
DEBUG:refactor.py:018:find_start_last_index():90 line='        void Register() override'
DEBUG:refactor.py:018:find_start_last_index():91 line='        {'
DEBUG:refactor.py:018:find_start_last_index():92 line='            OnObjectAreaTargetSelect += SpellObjectAreaTargetSelectFn(spell_yogg_saron_brain_link_SpellScript::FilterTargets, EFFECT_0, TARGET_UNIT_SRC_AREA_ENEMY);'
DEBUG:refactor.py:018:find_start_last_index():93 line='        }'
DEBUG:refactor.py:018:find_start_last_index():94 line='    };'
DEBUG:refactor.py:018:find_start_last_index():95 line=''
DEBUG:refactor.py:018:find_start_last_index():96 line='    SpellScript* GetSpellScript() const override'
DEBUG:refactor.py:018:find_start_last_index():97 line='    {'
DEBUG:refactor.py:018:find_start_last_index():98 line='        return new spell_yogg_saron_brain_link_SpellScript();'
DEBUG:refactor.py:018:find_start_last_index():99 line='    }'
DEBUG:refactor.py:018:find_start_last_index():100 line='};'
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:036:     get_script_type():AuraScript line='    class spell_yogg_saron_brain_link_AuraScript : public AuraScript'
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:036:     get_script_type():AuraScript line='        PrepareAuraScript(spell_yogg_saron_brain_link_AuraScript);'
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:036:     get_script_type():AuraScript line='            OnEffectApply += AuraEffectApplyFn(spell_yogg_saron_brain_link_AuraScript::HandleOnEffectApply, EFFECT_0, SPELL_AURA_PERIODIC_DUMMY, AURA_EFFECT_HANDLE_REAL);'
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:036:     get_script_type():AuraScript line='            OnEffectPeriodic += AuraEffectPeriodicFn(spell_yogg_saron_brain_link_AuraScript::OnPeriodic, EFFECT_0, SPELL_AURA_PERIODIC_DUMMY);'
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:036:     get_script_type():AuraScript line='    AuraScript* GetAuraScript() const override'
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:036:     get_script_type():AuraScript line='        return new spell_yogg_saron_brain_link_AuraScript();'
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:039:     get_script_type():SpellScript line='    class spell_yogg_saron_brain_link_SpellScript : public SpellScript'
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:039:     get_script_type():SpellScript line='        PrepareSpellScript(spell_yogg_saron_brain_link_SpellScript);'
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:039:     get_script_type():SpellScript line='            OnObjectAreaTargetSelect += SpellObjectAreaTargetSelectFn(spell_yogg_saron_brain_link_SpellScript::FilterTargets, EFFECT_0, TARGET_UNIT_SRC_AREA_ENEMY);'
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:039:     get_script_type():SpellScript line='    SpellScript* GetSpellScript() const override'
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:039:     get_script_type():SpellScript line='        return new spell_yogg_saron_brain_link_SpellScript();'
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:018:find_start_last_index():1 line='class spell_yogg_saron_brain_link : public SpellScriptLoader'
DEBUG:refactor.py:018:find_start_last_index():2 line='{'
DEBUG:refactor.py:018:find_start_last_index():3 line='public:'
DEBUG:refactor.py:018:find_start_last_index():4 line='    spell_yogg_saron_brain_link() : SpellScriptLoader("spell_yogg_saron_brain_link") { }'
DEBUG:refactor.py:018:find_start_last_index():5 line=''
DEBUG:refactor.py:018:find_start_last_index():6 line='    class spell_yogg_saron_brain_link_AuraScript : public AuraScript'
DEBUG:refactor.py:018:find_start_last_index():7 line='    {'
DEBUG:refactor.py:018:find_start_last_index():8 line='        PrepareAuraScript(spell_yogg_saron_brain_link_AuraScript);'
DEBUG:refactor.py:018:find_start_last_index():9 line=''
DEBUG:refactor.py:018:find_start_last_index():10 line='        void HandleOnEffectApply(AuraEffect const* /*aurEff*/, AuraEffectHandleModes /*mode*/)'
DEBUG:refactor.py:018:find_start_last_index():11 line='        {'
DEBUG:refactor.py:018:find_start_last_index():12 line='            PreventDefaultAction();'
DEBUG:refactor.py:018:find_start_last_index():13 line='            Player* target = nullptr;'
DEBUG:refactor.py:018:find_start_last_index():14 line='            Map::PlayerList const& pList = GetUnitOwner()->GetMap()->GetPlayers();'
DEBUG:refactor.py:018:find_start_last_index():15 line='            uint8 _offset = urand(0, pList.getSize() - 1);'
DEBUG:refactor.py:018:find_start_last_index():16 line='            uint8 _counter = 0;'
DEBUG:refactor.py:018:find_start_last_index():17 line='            for(Map::PlayerList::const_iterator itr = pList.begin(); itr != pList.end(); ++itr, ++_counter)'
DEBUG:refactor.py:018:find_start_last_index():18 line='            {'
DEBUG:refactor.py:018:find_start_last_index():19 line='                if (itr->GetSource() == GetUnitOwner() || GetUnitOwner()->GetDistance(itr->GetSource()) > 50.0f || !itr->GetSource()->IsAlive() || itr->GetSource()->IsGameMaster())'
DEBUG:refactor.py:018:find_start_last_index():20 line='                    continue;'
DEBUG:refactor.py:018:find_start_last_index():21 line=''
DEBUG:refactor.py:018:find_start_last_index():22 line='                if (_counter <= _offset || !target)'
DEBUG:refactor.py:018:find_start_last_index():23 line='                    target = itr->GetSource();'
DEBUG:refactor.py:018:find_start_last_index():24 line='                else'
DEBUG:refactor.py:018:find_start_last_index():25 line='                    break;'
DEBUG:refactor.py:018:find_start_last_index():26 line='            }'
DEBUG:refactor.py:018:find_start_last_index():27 line=''
DEBUG:refactor.py:018:find_start_last_index():28 line='            if (!target)'
DEBUG:refactor.py:018:find_start_last_index():29 line='                SetDuration(0);'
DEBUG:refactor.py:018:find_start_last_index():30 line='            else'
DEBUG:refactor.py:018:find_start_last_index():31 line='                _targetGUID = target->GetGUID();'
DEBUG:refactor.py:018:find_start_last_index():32 line='        }'
DEBUG:refactor.py:018:find_start_last_index():33 line=''
DEBUG:refactor.py:018:find_start_last_index():34 line='        void OnPeriodic(AuraEffect const*  /*aurEff*/)'
DEBUG:refactor.py:018:find_start_last_index():35 line='        {'
DEBUG:refactor.py:018:find_start_last_index():36 line='            Unit* owner = GetUnitOwner();'
DEBUG:refactor.py:018:find_start_last_index():37 line='            if (!owner)'
DEBUG:refactor.py:018:find_start_last_index():38 line='            {'
DEBUG:refactor.py:018:find_start_last_index():39 line='                SetDuration(0);'
DEBUG:refactor.py:018:find_start_last_index():40 line='                return;'
DEBUG:refactor.py:018:find_start_last_index():41 line='            }'
DEBUG:refactor.py:018:find_start_last_index():42 line=''
DEBUG:refactor.py:018:find_start_last_index():43 line='            Unit* _target = ObjectAccessor::GetUnit(*owner, _targetGUID);'
DEBUG:refactor.py:018:find_start_last_index():44 line='            if (!_target || !_target->IsAlive() || std::fabs(owner->GetPositionZ() - _target->GetPositionZ()) > 10.0f) // Target or owner underground'
DEBUG:refactor.py:018:find_start_last_index():45 line='            {'
DEBUG:refactor.py:018:find_start_last_index():46 line='                SetDuration(0);'
DEBUG:refactor.py:018:find_start_last_index():47 line='                return;'
DEBUG:refactor.py:018:find_start_last_index():48 line='            }'
DEBUG:refactor.py:018:find_start_last_index():49 line=''
DEBUG:refactor.py:018:find_start_last_index():50 line='            if (owner->GetDistance(_target) > 20.0f)'
DEBUG:refactor.py:018:find_start_last_index():51 line='            {'
DEBUG:refactor.py:018:find_start_last_index():52 line='                owner->CastSpell(_target, SPELL_BRAIN_LINK_DAMAGE, true);'
DEBUG:refactor.py:018:find_start_last_index():53 line='                owner->CastSpell(owner, SPELL_BRAIN_LINK_DAMAGE, true);'
DEBUG:refactor.py:018:find_start_last_index():54 line='            }'
DEBUG:refactor.py:018:find_start_last_index():55 line='            else'
DEBUG:refactor.py:018:find_start_last_index():56 line='                owner->CastSpell(_target, SPELL_BRAIN_LINK_OK, true);'
DEBUG:refactor.py:018:find_start_last_index():57 line='        }'
DEBUG:refactor.py:018:find_start_last_index():58 line=''
DEBUG:refactor.py:018:find_start_last_index():59 line='        void Register() override'
DEBUG:refactor.py:018:find_start_last_index():60 line='        {'
DEBUG:refactor.py:018:find_start_last_index():61 line='            OnEffectApply += AuraEffectApplyFn(spell_yogg_saron_brain_link_AuraScript::HandleOnEffectApply, EFFECT_0, SPELL_AURA_PERIODIC_DUMMY, AURA_EFFECT_HANDLE_REAL);'
DEBUG:refactor.py:018:find_start_last_index():62 line='            OnEffectPeriodic += AuraEffectPeriodicFn(spell_yogg_saron_brain_link_AuraScript::OnPeriodic, EFFECT_0, SPELL_AURA_PERIODIC_DUMMY);'
DEBUG:refactor.py:018:find_start_last_index():63 line='        }'
DEBUG:refactor.py:018:find_start_last_index():64 line=''
DEBUG:refactor.py:018:find_start_last_index():65 line='    protected:'
DEBUG:refactor.py:018:find_start_last_index():66 line='        ObjectGuid _targetGUID;'
DEBUG:refactor.py:018:find_start_last_index():67 line='    };'
DEBUG:refactor.py:018:find_start_last_index():68 line=''
DEBUG:refactor.py:018:find_start_last_index():69 line='    AuraScript* GetAuraScript() const override'
DEBUG:refactor.py:018:find_start_last_index():70 line='    {'
DEBUG:refactor.py:018:find_start_last_index():71 line='        return new spell_yogg_saron_brain_link_AuraScript();'
DEBUG:refactor.py:018:find_start_last_index():72 line='    }'
DEBUG:refactor.py:018:find_start_last_index():73 line=''
DEBUG:refactor.py:018:find_start_last_index():74 line='    class spell_yogg_saron_brain_link_SpellScript : public SpellScript'
DEBUG:refactor.py:018:find_start_last_index():75 line='    {'
DEBUG:refactor.py:018:find_start_last_index():76 line='        PrepareSpellScript(spell_yogg_saron_brain_link_SpellScript);'
DEBUG:refactor.py:018:find_start_last_index():77 line=''
DEBUG:refactor.py:018:find_start_last_index():78 line='        void FilterTargets(std::list<WorldObject*>& targets)'
DEBUG:refactor.py:018:find_start_last_index():79 line='        {'
DEBUG:refactor.py:018:find_start_last_index():80 line='            std::list<WorldObject*> tempList;'
DEBUG:refactor.py:018:find_start_last_index():81 line='            for (std::list<WorldObject*>::iterator itr = targets.begin(); itr != targets.end(); ++itr)'
DEBUG:refactor.py:018:find_start_last_index():82 line='                if ((*itr)->GetPositionZ() > 300.0f)'
DEBUG:refactor.py:018:find_start_last_index():83 line='                    tempList.push_back(*itr);'
DEBUG:refactor.py:018:find_start_last_index():84 line=''
DEBUG:refactor.py:018:find_start_last_index():85 line='            targets.clear();'
DEBUG:refactor.py:018:find_start_last_index():86 line='            for (std::list<WorldObject*>::iterator itr = tempList.begin(); itr != tempList.end(); ++itr)'
DEBUG:refactor.py:018:find_start_last_index():87 line='                targets.push_back(*itr);'
DEBUG:refactor.py:018:find_start_last_index():88 line='        }'
DEBUG:refactor.py:018:find_start_last_index():89 line=''
DEBUG:refactor.py:018:find_start_last_index():90 line='        void Register() override'
DEBUG:refactor.py:018:find_start_last_index():91 line='        {'
DEBUG:refactor.py:018:find_start_last_index():92 line='            OnObjectAreaTargetSelect += SpellObjectAreaTargetSelectFn(spell_yogg_saron_brain_link_SpellScript::FilterTargets, EFFECT_0, TARGET_UNIT_SRC_AREA_ENEMY);'
DEBUG:refactor.py:018:find_start_last_index():93 line='        }'
DEBUG:refactor.py:018:find_start_last_index():94 line='    };'
DEBUG:refactor.py:018:find_start_last_index():95 line=''
DEBUG:refactor.py:018:find_start_last_index():96 line='    SpellScript* GetSpellScript() const override'
DEBUG:refactor.py:018:find_start_last_index():97 line='    {'
DEBUG:refactor.py:018:find_start_last_index():98 line='        return new spell_yogg_saron_brain_link_SpellScript();'
DEBUG:refactor.py:018:find_start_last_index():99 line='    }'
DEBUG:refactor.py:018:find_start_last_index():100 line='};'
DEBUG:refactor.py:207:find_spell_block_in_pair():5 line='    class spell_yogg_saron_brain_link_AuraScript : public AuraScript'
DEBUG:refactor.py:207:find_spell_block_in_pair():6 line='    {'
DEBUG:refactor.py:207:find_spell_block_in_pair():7 line='        PrepareAuraScript(spell_yogg_saron_brain_link_AuraScript);'
DEBUG:refactor.py:207:find_spell_block_in_pair():8 line=''
DEBUG:refactor.py:207:find_spell_block_in_pair():9 line='        void HandleOnEffectApply(AuraEffect const* /*aurEff*/, AuraEffectHandleModes /*mode*/)'
DEBUG:refactor.py:207:find_spell_block_in_pair():10 line='        {'
DEBUG:refactor.py:207:find_spell_block_in_pair():11 line='            PreventDefaultAction();'
DEBUG:refactor.py:207:find_spell_block_in_pair():12 line='            Player* target = nullptr;'
DEBUG:refactor.py:207:find_spell_block_in_pair():13 line='            Map::PlayerList const& pList = GetUnitOwner()->GetMap()->GetPlayers();'
DEBUG:refactor.py:207:find_spell_block_in_pair():14 line='            uint8 _offset = urand(0, pList.getSize() - 1);'
DEBUG:refactor.py:207:find_spell_block_in_pair():15 line='            uint8 _counter = 0;'
DEBUG:refactor.py:207:find_spell_block_in_pair():16 line='            for(Map::PlayerList::const_iterator itr = pList.begin(); itr != pList.end(); ++itr, ++_counter)'
DEBUG:refactor.py:207:find_spell_block_in_pair():17 line='            {'
DEBUG:refactor.py:207:find_spell_block_in_pair():18 line='                if (itr->GetSource() == GetUnitOwner() || GetUnitOwner()->GetDistance(itr->GetSource()) > 50.0f || !itr->GetSource()->IsAlive() || itr->GetSource()->IsGameMaster())'
DEBUG:refactor.py:207:find_spell_block_in_pair():19 line='                    continue;'
DEBUG:refactor.py:207:find_spell_block_in_pair():20 line=''
DEBUG:refactor.py:207:find_spell_block_in_pair():21 line='                if (_counter <= _offset || !target)'
DEBUG:refactor.py:207:find_spell_block_in_pair():22 line='                    target = itr->GetSource();'
DEBUG:refactor.py:207:find_spell_block_in_pair():23 line='                else'
DEBUG:refactor.py:207:find_spell_block_in_pair():24 line='                    break;'
DEBUG:refactor.py:207:find_spell_block_in_pair():25 line='            }'
DEBUG:refactor.py:207:find_spell_block_in_pair():26 line=''
DEBUG:refactor.py:207:find_spell_block_in_pair():27 line='            if (!target)'
DEBUG:refactor.py:207:find_spell_block_in_pair():28 line='                SetDuration(0);'
DEBUG:refactor.py:207:find_spell_block_in_pair():29 line='            else'
DEBUG:refactor.py:207:find_spell_block_in_pair():30 line='                _targetGUID = target->GetGUID();'
DEBUG:refactor.py:207:find_spell_block_in_pair():31 line='        }'
DEBUG:refactor.py:207:find_spell_block_in_pair():32 line=''
DEBUG:refactor.py:207:find_spell_block_in_pair():33 line='        void OnPeriodic(AuraEffect const*  /*aurEff*/)'
DEBUG:refactor.py:207:find_spell_block_in_pair():34 line='        {'
DEBUG:refactor.py:207:find_spell_block_in_pair():35 line='            Unit* owner = GetUnitOwner();'
DEBUG:refactor.py:207:find_spell_block_in_pair():36 line='            if (!owner)'
DEBUG:refactor.py:207:find_spell_block_in_pair():37 line='            {'
DEBUG:refactor.py:207:find_spell_block_in_pair():38 line='                SetDuration(0);'
DEBUG:refactor.py:207:find_spell_block_in_pair():39 line='                return;'
DEBUG:refactor.py:207:find_spell_block_in_pair():40 line='            }'
DEBUG:refactor.py:207:find_spell_block_in_pair():41 line=''
DEBUG:refactor.py:207:find_spell_block_in_pair():42 line='            Unit* _target = ObjectAccessor::GetUnit(*owner, _targetGUID);'
DEBUG:refactor.py:207:find_spell_block_in_pair():43 line='            if (!_target || !_target->IsAlive() || std::fabs(owner->GetPositionZ() - _target->GetPositionZ()) > 10.0f) // Target or owner underground'
DEBUG:refactor.py:207:find_spell_block_in_pair():44 line='            {'
DEBUG:refactor.py:207:find_spell_block_in_pair():45 line='                SetDuration(0);'
DEBUG:refactor.py:207:find_spell_block_in_pair():46 line='                return;'
DEBUG:refactor.py:207:find_spell_block_in_pair():47 line='            }'
DEBUG:refactor.py:207:find_spell_block_in_pair():48 line=''
DEBUG:refactor.py:207:find_spell_block_in_pair():49 line='            if (owner->GetDistance(_target) > 20.0f)'
DEBUG:refactor.py:207:find_spell_block_in_pair():50 line='            {'
DEBUG:refactor.py:207:find_spell_block_in_pair():51 line='                owner->CastSpell(_target, SPELL_BRAIN_LINK_DAMAGE, true);'
DEBUG:refactor.py:207:find_spell_block_in_pair():52 line='                owner->CastSpell(owner, SPELL_BRAIN_LINK_DAMAGE, true);'
DEBUG:refactor.py:207:find_spell_block_in_pair():53 line='            }'
DEBUG:refactor.py:207:find_spell_block_in_pair():54 line='            else'
DEBUG:refactor.py:207:find_spell_block_in_pair():55 line='                owner->CastSpell(_target, SPELL_BRAIN_LINK_OK, true);'
DEBUG:refactor.py:207:find_spell_block_in_pair():56 line='        }'
DEBUG:refactor.py:207:find_spell_block_in_pair():57 line=''
DEBUG:refactor.py:207:find_spell_block_in_pair():58 line='        void Register() override'
DEBUG:refactor.py:207:find_spell_block_in_pair():59 line='        {'
DEBUG:refactor.py:207:find_spell_block_in_pair():60 line='            OnEffectApply += AuraEffectApplyFn(spell_yogg_saron_brain_link_AuraScript::HandleOnEffectApply, EFFECT_0, SPELL_AURA_PERIODIC_DUMMY, AURA_EFFECT_HANDLE_REAL);'
DEBUG:refactor.py:207:find_spell_block_in_pair():61 line='            OnEffectPeriodic += AuraEffectPeriodicFn(spell_yogg_saron_brain_link_AuraScript::OnPeriodic, EFFECT_0, SPELL_AURA_PERIODIC_DUMMY);'
DEBUG:refactor.py:207:find_spell_block_in_pair():62 line='        }'
DEBUG:refactor.py:207:find_spell_block_in_pair():63 line=''
DEBUG:refactor.py:207:find_spell_block_in_pair():64 line='    protected:'
DEBUG:refactor.py:207:find_spell_block_in_pair():65 line='        ObjectGuid _targetGUID;'
DEBUG:refactor.py:207:find_spell_block_in_pair():66 line='    };'
DEBUG:refactor.py:018:find_start_last_index():1 line='class spell_yogg_saron_brain_link : public SpellScriptLoader'
DEBUG:refactor.py:018:find_start_last_index():2 line='{'
DEBUG:refactor.py:018:find_start_last_index():3 line='public:'
DEBUG:refactor.py:018:find_start_last_index():4 line='    spell_yogg_saron_brain_link() : SpellScriptLoader("spell_yogg_saron_brain_link") { }'
DEBUG:refactor.py:018:find_start_last_index():5 line=''
DEBUG:refactor.py:018:find_start_last_index():6 line='    class spell_yogg_saron_brain_link_AuraScript : public AuraScript'
DEBUG:refactor.py:018:find_start_last_index():7 line='    {'
DEBUG:refactor.py:018:find_start_last_index():8 line='        PrepareAuraScript(spell_yogg_saron_brain_link_AuraScript);'
DEBUG:refactor.py:018:find_start_last_index():9 line=''
DEBUG:refactor.py:018:find_start_last_index():10 line='        void HandleOnEffectApply(AuraEffect const* /*aurEff*/, AuraEffectHandleModes /*mode*/)'
DEBUG:refactor.py:018:find_start_last_index():11 line='        {'
DEBUG:refactor.py:018:find_start_last_index():12 line='            PreventDefaultAction();'
DEBUG:refactor.py:018:find_start_last_index():13 line='            Player* target = nullptr;'
DEBUG:refactor.py:018:find_start_last_index():14 line='            Map::PlayerList const& pList = GetUnitOwner()->GetMap()->GetPlayers();'
DEBUG:refactor.py:018:find_start_last_index():15 line='            uint8 _offset = urand(0, pList.getSize() - 1);'
DEBUG:refactor.py:018:find_start_last_index():16 line='            uint8 _counter = 0;'
DEBUG:refactor.py:018:find_start_last_index():17 line='            for(Map::PlayerList::const_iterator itr = pList.begin(); itr != pList.end(); ++itr, ++_counter)'
DEBUG:refactor.py:018:find_start_last_index():18 line='            {'
DEBUG:refactor.py:018:find_start_last_index():19 line='                if (itr->GetSource() == GetUnitOwner() || GetUnitOwner()->GetDistance(itr->GetSource()) > 50.0f || !itr->GetSource()->IsAlive() || itr->GetSource()->IsGameMaster())'
DEBUG:refactor.py:018:find_start_last_index():20 line='                    continue;'
DEBUG:refactor.py:018:find_start_last_index():21 line=''
DEBUG:refactor.py:018:find_start_last_index():22 line='                if (_counter <= _offset || !target)'
DEBUG:refactor.py:018:find_start_last_index():23 line='                    target = itr->GetSource();'
DEBUG:refactor.py:018:find_start_last_index():24 line='                else'
DEBUG:refactor.py:018:find_start_last_index():25 line='                    break;'
DEBUG:refactor.py:018:find_start_last_index():26 line='            }'
DEBUG:refactor.py:018:find_start_last_index():27 line=''
DEBUG:refactor.py:018:find_start_last_index():28 line='            if (!target)'
DEBUG:refactor.py:018:find_start_last_index():29 line='                SetDuration(0);'
DEBUG:refactor.py:018:find_start_last_index():30 line='            else'
DEBUG:refactor.py:018:find_start_last_index():31 line='                _targetGUID = target->GetGUID();'
DEBUG:refactor.py:018:find_start_last_index():32 line='        }'
DEBUG:refactor.py:018:find_start_last_index():33 line=''
DEBUG:refactor.py:018:find_start_last_index():34 line='        void OnPeriodic(AuraEffect const*  /*aurEff*/)'
DEBUG:refactor.py:018:find_start_last_index():35 line='        {'
DEBUG:refactor.py:018:find_start_last_index():36 line='            Unit* owner = GetUnitOwner();'
DEBUG:refactor.py:018:find_start_last_index():37 line='            if (!owner)'
DEBUG:refactor.py:018:find_start_last_index():38 line='            {'
DEBUG:refactor.py:018:find_start_last_index():39 line='                SetDuration(0);'
DEBUG:refactor.py:018:find_start_last_index():40 line='                return;'
DEBUG:refactor.py:018:find_start_last_index():41 line='            }'
DEBUG:refactor.py:018:find_start_last_index():42 line=''
DEBUG:refactor.py:018:find_start_last_index():43 line='            Unit* _target = ObjectAccessor::GetUnit(*owner, _targetGUID);'
DEBUG:refactor.py:018:find_start_last_index():44 line='            if (!_target || !_target->IsAlive() || std::fabs(owner->GetPositionZ() - _target->GetPositionZ()) > 10.0f) // Target or owner underground'
DEBUG:refactor.py:018:find_start_last_index():45 line='            {'
DEBUG:refactor.py:018:find_start_last_index():46 line='                SetDuration(0);'
DEBUG:refactor.py:018:find_start_last_index():47 line='                return;'
DEBUG:refactor.py:018:find_start_last_index():48 line='            }'
DEBUG:refactor.py:018:find_start_last_index():49 line=''
DEBUG:refactor.py:018:find_start_last_index():50 line='            if (owner->GetDistance(_target) > 20.0f)'
DEBUG:refactor.py:018:find_start_last_index():51 line='            {'
DEBUG:refactor.py:018:find_start_last_index():52 line='                owner->CastSpell(_target, SPELL_BRAIN_LINK_DAMAGE, true);'
DEBUG:refactor.py:018:find_start_last_index():53 line='                owner->CastSpell(owner, SPELL_BRAIN_LINK_DAMAGE, true);'
DEBUG:refactor.py:018:find_start_last_index():54 line='            }'
DEBUG:refactor.py:018:find_start_last_index():55 line='            else'
DEBUG:refactor.py:018:find_start_last_index():56 line='                owner->CastSpell(_target, SPELL_BRAIN_LINK_OK, true);'
DEBUG:refactor.py:018:find_start_last_index():57 line='        }'
DEBUG:refactor.py:018:find_start_last_index():58 line=''
DEBUG:refactor.py:018:find_start_last_index():59 line='        void Register() override'
DEBUG:refactor.py:018:find_start_last_index():60 line='        {'
DEBUG:refactor.py:018:find_start_last_index():61 line='            OnEffectApply += AuraEffectApplyFn(spell_yogg_saron_brain_link_AuraScript::HandleOnEffectApply, EFFECT_0, SPELL_AURA_PERIODIC_DUMMY, AURA_EFFECT_HANDLE_REAL);'
DEBUG:refactor.py:018:find_start_last_index():62 line='            OnEffectPeriodic += AuraEffectPeriodicFn(spell_yogg_saron_brain_link_AuraScript::OnPeriodic, EFFECT_0, SPELL_AURA_PERIODIC_DUMMY);'
DEBUG:refactor.py:018:find_start_last_index():63 line='        }'
DEBUG:refactor.py:018:find_start_last_index():64 line=''
DEBUG:refactor.py:018:find_start_last_index():65 line='    protected:'
DEBUG:refactor.py:018:find_start_last_index():66 line='        ObjectGuid _targetGUID;'
DEBUG:refactor.py:018:find_start_last_index():67 line='    };'
DEBUG:refactor.py:018:find_start_last_index():68 line=''
DEBUG:refactor.py:018:find_start_last_index():69 line='    AuraScript* GetAuraScript() const override'
DEBUG:refactor.py:018:find_start_last_index():70 line='    {'
DEBUG:refactor.py:018:find_start_last_index():71 line='        return new spell_yogg_saron_brain_link_AuraScript();'
DEBUG:refactor.py:018:find_start_last_index():72 line='    }'
DEBUG:refactor.py:018:find_start_last_index():73 line=''
DEBUG:refactor.py:018:find_start_last_index():74 line='    class spell_yogg_saron_brain_link_SpellScript : public SpellScript'
DEBUG:refactor.py:018:find_start_last_index():75 line='    {'
DEBUG:refactor.py:018:find_start_last_index():76 line='        PrepareSpellScript(spell_yogg_saron_brain_link_SpellScript);'
DEBUG:refactor.py:018:find_start_last_index():77 line=''
DEBUG:refactor.py:018:find_start_last_index():78 line='        void FilterTargets(std::list<WorldObject*>& targets)'
DEBUG:refactor.py:018:find_start_last_index():79 line='        {'
DEBUG:refactor.py:018:find_start_last_index():80 line='            std::list<WorldObject*> tempList;'
DEBUG:refactor.py:018:find_start_last_index():81 line='            for (std::list<WorldObject*>::iterator itr = targets.begin(); itr != targets.end(); ++itr)'
DEBUG:refactor.py:018:find_start_last_index():82 line='                if ((*itr)->GetPositionZ() > 300.0f)'
DEBUG:refactor.py:018:find_start_last_index():83 line='                    tempList.push_back(*itr);'
DEBUG:refactor.py:018:find_start_last_index():84 line=''
DEBUG:refactor.py:018:find_start_last_index():85 line='            targets.clear();'
DEBUG:refactor.py:018:find_start_last_index():86 line='            for (std::list<WorldObject*>::iterator itr = tempList.begin(); itr != tempList.end(); ++itr)'
DEBUG:refactor.py:018:find_start_last_index():87 line='                targets.push_back(*itr);'
DEBUG:refactor.py:018:find_start_last_index():88 line='        }'
DEBUG:refactor.py:018:find_start_last_index():89 line=''
DEBUG:refactor.py:018:find_start_last_index():90 line='        void Register() override'
DEBUG:refactor.py:018:find_start_last_index():91 line='        {'
DEBUG:refactor.py:018:find_start_last_index():92 line='            OnObjectAreaTargetSelect += SpellObjectAreaTargetSelectFn(spell_yogg_saron_brain_link_SpellScript::FilterTargets, EFFECT_0, TARGET_UNIT_SRC_AREA_ENEMY);'
DEBUG:refactor.py:018:find_start_last_index():93 line='        }'
DEBUG:refactor.py:018:find_start_last_index():94 line='    };'
DEBUG:refactor.py:018:find_start_last_index():95 line=''
DEBUG:refactor.py:018:find_start_last_index():96 line='    SpellScript* GetSpellScript() const override'
DEBUG:refactor.py:018:find_start_last_index():97 line='    {'
DEBUG:refactor.py:018:find_start_last_index():98 line='        return new spell_yogg_saron_brain_link_SpellScript();'
DEBUG:refactor.py:018:find_start_last_index():99 line='    }'
DEBUG:refactor.py:018:find_start_last_index():100 line='};'
DEBUG:refactor.py:223:convert_function_block():start_index=1last_index=100
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:036:     get_script_type():AuraScript line='    class spell_yogg_saron_brain_link_AuraScript : public AuraScript'
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:036:     get_script_type():AuraScript line='        PrepareAuraScript(spell_yogg_saron_brain_link_AuraScript);'
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:036:     get_script_type():AuraScript line='            OnEffectApply += AuraEffectApplyFn(spell_yogg_saron_brain_link_AuraScript::HandleOnEffectApply, EFFECT_0, SPELL_AURA_PERIODIC_DUMMY, AURA_EFFECT_HANDLE_REAL);'
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:036:     get_script_type():AuraScript line='            OnEffectPeriodic += AuraEffectPeriodicFn(spell_yogg_saron_brain_link_AuraScript::OnPeriodic, EFFECT_0, SPELL_AURA_PERIODIC_DUMMY);'
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:036:     get_script_type():AuraScript line='    AuraScript* GetAuraScript() const override'
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:036:     get_script_type():AuraScript line='        return new spell_yogg_saron_brain_link_AuraScript();'
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:039:     get_script_type():SpellScript line='    class spell_yogg_saron_brain_link_SpellScript : public SpellScript'
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:039:     get_script_type():SpellScript line='        PrepareSpellScript(spell_yogg_saron_brain_link_SpellScript);'
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:039:     get_script_type():SpellScript line='            OnObjectAreaTargetSelect += SpellObjectAreaTargetSelectFn(spell_yogg_saron_brain_link_SpellScript::FilterTargets, EFFECT_0, TARGET_UNIT_SRC_AREA_ENEMY);'
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:039:     get_script_type():SpellScript line='    SpellScript* GetSpellScript() const override'
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:039:     get_script_type():SpellScript line='        return new spell_yogg_saron_brain_link_SpellScript();'
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:225:convert_function_block():script_type=<ScriptType.PAIR: 3>
DEBUG:refactor.py:027: find_name_of_script():name='spell_yogg_saron_brain_link'
DEBUG:refactor.py:228:convert_function_block():script_name='spell_yogg_saron_brain_link'
DEBUG:refactor.py:207:find_spell_block_in_pair():73 line='    class spell_yogg_saron_brain_link_SpellScript : public SpellScript'
DEBUG:refactor.py:207:find_spell_block_in_pair():74 line='    {'
DEBUG:refactor.py:207:find_spell_block_in_pair():75 line='        PrepareSpellScript(spell_yogg_saron_brain_link_SpellScript);'
DEBUG:refactor.py:207:find_spell_block_in_pair():76 line=''
DEBUG:refactor.py:207:find_spell_block_in_pair():77 line='        void FilterTargets(std::list<WorldObject*>& targets)'
DEBUG:refactor.py:207:find_spell_block_in_pair():78 line='        {'
DEBUG:refactor.py:207:find_spell_block_in_pair():79 line='            std::list<WorldObject*> tempList;'
DEBUG:refactor.py:207:find_spell_block_in_pair():80 line='            for (std::list<WorldObject*>::iterator itr = targets.begin(); itr != targets.end(); ++itr)'
DEBUG:refactor.py:207:find_spell_block_in_pair():81 line='                if ((*itr)->GetPositionZ() > 300.0f)'
DEBUG:refactor.py:207:find_spell_block_in_pair():82 line='                    tempList.push_back(*itr);'
DEBUG:refactor.py:207:find_spell_block_in_pair():83 line=''
DEBUG:refactor.py:207:find_spell_block_in_pair():84 line='            targets.clear();'
DEBUG:refactor.py:207:find_spell_block_in_pair():85 line='            for (std::list<WorldObject*>::iterator itr = tempList.begin(); itr != tempList.end(); ++itr)'
DEBUG:refactor.py:207:find_spell_block_in_pair():86 line='                targets.push_back(*itr);'
DEBUG:refactor.py:207:find_spell_block_in_pair():87 line='        }'
DEBUG:refactor.py:207:find_spell_block_in_pair():88 line=''
DEBUG:refactor.py:207:find_spell_block_in_pair():89 line='        void Register() override'
DEBUG:refactor.py:207:find_spell_block_in_pair():90 line='        {'
DEBUG:refactor.py:207:find_spell_block_in_pair():91 line='            OnObjectAreaTargetSelect += SpellObjectAreaTargetSelectFn(spell_yogg_saron_brain_link_SpellScript::FilterTargets, EFFECT_0, TARGET_UNIT_SRC_AREA_ENEMY);'
DEBUG:refactor.py:207:find_spell_block_in_pair():92 line='        }'
DEBUG:refactor.py:207:find_spell_block_in_pair():93 line='    };'
DEBUG:refactor.py:054:find_register_start_end_index():start_index=0
DEBUG:refactor.py:056:find_register_start_end_index():000;    class spell_yogg_saron_brain_link_SpellScript : public SpellScript
DEBUG:refactor.py:056:find_register_start_end_index():001;    {
DEBUG:refactor.py:056:find_register_start_end_index():002;        PrepareSpellScript(spell_yogg_saron_brain_link_SpellScript);
DEBUG:refactor.py:056:find_register_start_end_index():003;
DEBUG:refactor.py:056:find_register_start_end_index():004;        void FilterTargets(std::list<WorldObject*>& targets)
DEBUG:refactor.py:056:find_register_start_end_index():005;        {
DEBUG:refactor.py:056:find_register_start_end_index():006;            std::list<WorldObject*> tempList;
DEBUG:refactor.py:056:find_register_start_end_index():007;            for (std::list<WorldObject*>::iterator itr = targets.begin(); itr != targets.end(); ++itr)
DEBUG:refactor.py:056:find_register_start_end_index():008;                if ((*itr)->GetPositionZ() > 300.0f)
DEBUG:refactor.py:056:find_register_start_end_index():009;                    tempList.push_back(*itr);
DEBUG:refactor.py:056:find_register_start_end_index():010;
DEBUG:refactor.py:056:find_register_start_end_index():011;            targets.clear();
DEBUG:refactor.py:056:find_register_start_end_index():012;            for (std::list<WorldObject*>::iterator itr = tempList.begin(); itr != tempList.end(); ++itr)
DEBUG:refactor.py:056:find_register_start_end_index():013;                targets.push_back(*itr);
DEBUG:refactor.py:056:find_register_start_end_index():014;        }
DEBUG:refactor.py:056:find_register_start_end_index():015;
DEBUG:refactor.py:056:find_register_start_end_index():016;        void Register() override
DEBUG:refactor.py:056:find_register_start_end_index():017;        {
DEBUG:refactor.py:056:find_register_start_end_index():018;            OnObjectAreaTargetSelect += SpellObjectAreaTargetSelectFn(spell_yogg_saron_brain_link_SpellScript::FilterTargets, EFFECT_0, TARGET_UNIT_SRC_AREA_ENEMY);
DEBUG:refactor.py:056:find_register_start_end_index():019;        }
DEBUG:refactor.py:063:find_register_start_end_index():16;16         void Register() override
DEBUG:refactor.py:064:find_register_start_end_index():19;19         }
DEBUG:refactor.py:072:find_register_statements():16;19
DEBUG:refactor.py:074:find_register_statements():000:            OnObjectAreaTargetSelect += SpellObjectAreaTargetSelectFn(spell_yogg_saron_brain_link_SpellScript::FilterTargets, EFFECT_0, TARGET_UNIT_SRC_AREA_ENEMY);
DEBUG:refactor.py:088:format_register_statements():before:000:            OnObjectAreaTargetSelect += SpellObjectAreaTargetSelectFn(spell_yogg_saron_brain_link_SpellScript::FilterTargets, EFFECT_0, TARGET_UNIT_SRC_AREA_ENEMY);
DEBUG:refactor.py:090:format_register_statements():after :000:        OnObjectAreaTargetSelect += SpellObjectAreaTargetSelectFn(spell_yogg_saron_brain_link::FilterTargets, EFFECT_0, TARGET_UNIT_SRC_AREA_ENEMY);
DEBUG:refactor.py:103:find_content_start_end_index():absolute_start=2,absolute_end=16
DEBUG:refactor.py:145:format_content_statements():before:000:
DEBUG:refactor.py:145:format_content_statements():before:001:        void FilterTargets(std::list<WorldObject*>& targets)
DEBUG:refactor.py:145:format_content_statements():before:002:        {
DEBUG:refactor.py:145:format_content_statements():before:003:            std::list<WorldObject*> tempList;
DEBUG:refactor.py:145:format_content_statements():before:004:            for (std::list<WorldObject*>::iterator itr = targets.begin(); itr != targets.end(); ++itr)
DEBUG:refactor.py:145:format_content_statements():before:005:                if ((*itr)->GetPositionZ() > 300.0f)
DEBUG:refactor.py:145:format_content_statements():before:006:                    tempList.push_back(*itr);
DEBUG:refactor.py:145:format_content_statements():before:007:
DEBUG:refactor.py:145:format_content_statements():before:008:            targets.clear();
DEBUG:refactor.py:145:format_content_statements():before:009:            for (std::list<WorldObject*>::iterator itr = tempList.begin(); itr != tempList.end(); ++itr)
DEBUG:refactor.py:145:format_content_statements():before:010:                targets.push_back(*itr);
DEBUG:refactor.py:145:format_content_statements():before:011:        }
DEBUG:refactor.py:145:format_content_statements():before:012:
DEBUG:refactor.py:147:format_content_statements():after :000:
DEBUG:refactor.py:147:format_content_statements():after :001:    void FilterTargets(std::list<WorldObject*>& targets)
DEBUG:refactor.py:147:format_content_statements():after :002:    {
DEBUG:refactor.py:147:format_content_statements():after :003:        std::list<WorldObject*> tempList;
DEBUG:refactor.py:147:format_content_statements():after :004:        for (std::list<WorldObject*>::iterator itr = targets.begin(); itr != targets.end(); ++itr)
DEBUG:refactor.py:147:format_content_statements():after :005:            if ((*itr)->GetPositionZ() > 300.0f)
DEBUG:refactor.py:147:format_content_statements():after :006:                tempList.push_back(*itr);
DEBUG:refactor.py:147:format_content_statements():after :007:
DEBUG:refactor.py:147:format_content_statements():after :008:        targets.clear();
DEBUG:refactor.py:147:format_content_statements():after :009:        for (std::list<WorldObject*>::iterator itr = tempList.begin(); itr != tempList.end(); ++itr)
DEBUG:refactor.py:147:format_content_statements():after :010:            targets.push_back(*itr);
DEBUG:refactor.py:147:format_content_statements():after :011:    }
DEBUG:refactor.py:147:format_content_statements():after :012:
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:000:    class spell_yogg_saron_brain_link_SpellScript : public SpellScript
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:001:    {
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:002:        PrepareSpellScript(spell_yogg_saron_brain_link_SpellScript);
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:003:
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:004:        void FilterTargets(std::list<WorldObject*>& targets)
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:005:        {
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:006:            std::list<WorldObject*> tempList;
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:007:            for (std::list<WorldObject*>::iterator itr = targets.begin(); itr != targets.end(); ++itr)
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:008:                if ((*itr)->GetPositionZ() > 300.0f)
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:009:                    tempList.push_back(*itr);
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:010:
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:011:            targets.clear();
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:012:            for (std::list<WorldObject*>::iterator itr = tempList.begin(); itr != tempList.end(); ++itr)
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:013:                targets.push_back(*itr);
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:014:        }
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:015:
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:016:        void Register() override
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:017:        {
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:018:            OnObjectAreaTargetSelect += SpellObjectAreaTargetSelectFn(spell_yogg_saron_brain_link_SpellScript::FilterTargets, EFFECT_0, TARGET_UNIT_SRC_AREA_ENEMY);
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:019:        }
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:020:    };
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :000:class spell_yogg_saron_brain_link : public SpellScript
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :001:{
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :002:    PrepareSpellScript(spell_yogg_saron_brain_link);
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :003:
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :004:    void FilterTargets(std::list<WorldObject*>& targets)
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :005:    {
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :006:        std::list<WorldObject*> tempList;
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :007:        for (std::list<WorldObject*>::iterator itr = targets.begin(); itr != targets.end(); ++itr)
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :008:            if ((*itr)->GetPositionZ() > 300.0f)
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :009:                tempList.push_back(*itr);
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :010:
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :011:        targets.clear();
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :012:        for (std::list<WorldObject*>::iterator itr = tempList.begin(); itr != tempList.end(); ++itr)
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :013:            targets.push_back(*itr);
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :014:    }
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :015:
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :016:    void Register() override
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :017:    {
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :018:        OnObjectAreaTargetSelect += SpellObjectAreaTargetSelectFn(spell_yogg_saron_brain_link::FilterTargets, EFFECT_0, TARGET_UNIT_SRC_AREA_ENEMY);
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :019:    }
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :020:};
DEBUG:refactor.py:207:find_spell_block_in_pair():5 line='    class spell_yogg_saron_brain_link_AuraScript : public AuraScript'
DEBUG:refactor.py:207:find_spell_block_in_pair():6 line='    {'
DEBUG:refactor.py:207:find_spell_block_in_pair():7 line='        PrepareAuraScript(spell_yogg_saron_brain_link_AuraScript);'
DEBUG:refactor.py:207:find_spell_block_in_pair():8 line=''
DEBUG:refactor.py:207:find_spell_block_in_pair():9 line='        void HandleOnEffectApply(AuraEffect const* /*aurEff*/, AuraEffectHandleModes /*mode*/)'
DEBUG:refactor.py:207:find_spell_block_in_pair():10 line='        {'
DEBUG:refactor.py:207:find_spell_block_in_pair():11 line='            PreventDefaultAction();'
DEBUG:refactor.py:207:find_spell_block_in_pair():12 line='            Player* target = nullptr;'
DEBUG:refactor.py:207:find_spell_block_in_pair():13 line='            Map::PlayerList const& pList = GetUnitOwner()->GetMap()->GetPlayers();'
DEBUG:refactor.py:207:find_spell_block_in_pair():14 line='            uint8 _offset = urand(0, pList.getSize() - 1);'
DEBUG:refactor.py:207:find_spell_block_in_pair():15 line='            uint8 _counter = 0;'
DEBUG:refactor.py:207:find_spell_block_in_pair():16 line='            for(Map::PlayerList::const_iterator itr = pList.begin(); itr != pList.end(); ++itr, ++_counter)'
DEBUG:refactor.py:207:find_spell_block_in_pair():17 line='            {'
DEBUG:refactor.py:207:find_spell_block_in_pair():18 line='                if (itr->GetSource() == GetUnitOwner() || GetUnitOwner()->GetDistance(itr->GetSource()) > 50.0f || !itr->GetSource()->IsAlive() || itr->GetSource()->IsGameMaster())'
DEBUG:refactor.py:207:find_spell_block_in_pair():19 line='                    continue;'
DEBUG:refactor.py:207:find_spell_block_in_pair():20 line=''
DEBUG:refactor.py:207:find_spell_block_in_pair():21 line='                if (_counter <= _offset || !target)'
DEBUG:refactor.py:207:find_spell_block_in_pair():22 line='                    target = itr->GetSource();'
DEBUG:refactor.py:207:find_spell_block_in_pair():23 line='                else'
DEBUG:refactor.py:207:find_spell_block_in_pair():24 line='                    break;'
DEBUG:refactor.py:207:find_spell_block_in_pair():25 line='            }'
DEBUG:refactor.py:207:find_spell_block_in_pair():26 line=''
DEBUG:refactor.py:207:find_spell_block_in_pair():27 line='            if (!target)'
DEBUG:refactor.py:207:find_spell_block_in_pair():28 line='                SetDuration(0);'
DEBUG:refactor.py:207:find_spell_block_in_pair():29 line='            else'
DEBUG:refactor.py:207:find_spell_block_in_pair():30 line='                _targetGUID = target->GetGUID();'
DEBUG:refactor.py:207:find_spell_block_in_pair():31 line='        }'
DEBUG:refactor.py:207:find_spell_block_in_pair():32 line=''
DEBUG:refactor.py:207:find_spell_block_in_pair():33 line='        void OnPeriodic(AuraEffect const*  /*aurEff*/)'
DEBUG:refactor.py:207:find_spell_block_in_pair():34 line='        {'
DEBUG:refactor.py:207:find_spell_block_in_pair():35 line='            Unit* owner = GetUnitOwner();'
DEBUG:refactor.py:207:find_spell_block_in_pair():36 line='            if (!owner)'
DEBUG:refactor.py:207:find_spell_block_in_pair():37 line='            {'
DEBUG:refactor.py:207:find_spell_block_in_pair():38 line='                SetDuration(0);'
DEBUG:refactor.py:207:find_spell_block_in_pair():39 line='                return;'
DEBUG:refactor.py:207:find_spell_block_in_pair():40 line='            }'
DEBUG:refactor.py:207:find_spell_block_in_pair():41 line=''
DEBUG:refactor.py:207:find_spell_block_in_pair():42 line='            Unit* _target = ObjectAccessor::GetUnit(*owner, _targetGUID);'
DEBUG:refactor.py:207:find_spell_block_in_pair():43 line='            if (!_target || !_target->IsAlive() || std::fabs(owner->GetPositionZ() - _target->GetPositionZ()) > 10.0f) // Target or owner underground'
DEBUG:refactor.py:207:find_spell_block_in_pair():44 line='            {'
DEBUG:refactor.py:207:find_spell_block_in_pair():45 line='                SetDuration(0);'
DEBUG:refactor.py:207:find_spell_block_in_pair():46 line='                return;'
DEBUG:refactor.py:207:find_spell_block_in_pair():47 line='            }'
DEBUG:refactor.py:207:find_spell_block_in_pair():48 line=''
DEBUG:refactor.py:207:find_spell_block_in_pair():49 line='            if (owner->GetDistance(_target) > 20.0f)'
DEBUG:refactor.py:207:find_spell_block_in_pair():50 line='            {'
DEBUG:refactor.py:207:find_spell_block_in_pair():51 line='                owner->CastSpell(_target, SPELL_BRAIN_LINK_DAMAGE, true);'
DEBUG:refactor.py:207:find_spell_block_in_pair():52 line='                owner->CastSpell(owner, SPELL_BRAIN_LINK_DAMAGE, true);'
DEBUG:refactor.py:207:find_spell_block_in_pair():53 line='            }'
DEBUG:refactor.py:207:find_spell_block_in_pair():54 line='            else'
DEBUG:refactor.py:207:find_spell_block_in_pair():55 line='                owner->CastSpell(_target, SPELL_BRAIN_LINK_OK, true);'
DEBUG:refactor.py:207:find_spell_block_in_pair():56 line='        }'
DEBUG:refactor.py:207:find_spell_block_in_pair():57 line=''
DEBUG:refactor.py:207:find_spell_block_in_pair():58 line='        void Register() override'
DEBUG:refactor.py:207:find_spell_block_in_pair():59 line='        {'
DEBUG:refactor.py:207:find_spell_block_in_pair():60 line='            OnEffectApply += AuraEffectApplyFn(spell_yogg_saron_brain_link_AuraScript::HandleOnEffectApply, EFFECT_0, SPELL_AURA_PERIODIC_DUMMY, AURA_EFFECT_HANDLE_REAL);'
DEBUG:refactor.py:207:find_spell_block_in_pair():61 line='            OnEffectPeriodic += AuraEffectPeriodicFn(spell_yogg_saron_brain_link_AuraScript::OnPeriodic, EFFECT_0, SPELL_AURA_PERIODIC_DUMMY);'
DEBUG:refactor.py:207:find_spell_block_in_pair():62 line='        }'
DEBUG:refactor.py:207:find_spell_block_in_pair():63 line=''
DEBUG:refactor.py:207:find_spell_block_in_pair():64 line='    protected:'
DEBUG:refactor.py:207:find_spell_block_in_pair():65 line='        ObjectGuid _targetGUID;'
DEBUG:refactor.py:207:find_spell_block_in_pair():66 line='    };'
DEBUG:refactor.py:054:find_register_start_end_index():start_index=0
DEBUG:refactor.py:056:find_register_start_end_index():000;    class spell_yogg_saron_brain_link_AuraScript : public AuraScript
DEBUG:refactor.py:056:find_register_start_end_index():001;    {
DEBUG:refactor.py:056:find_register_start_end_index():002;        PrepareAuraScript(spell_yogg_saron_brain_link_AuraScript);
DEBUG:refactor.py:056:find_register_start_end_index():003;
DEBUG:refactor.py:056:find_register_start_end_index():004;        void HandleOnEffectApply(AuraEffect const* /*aurEff*/, AuraEffectHandleModes /*mode*/)
DEBUG:refactor.py:056:find_register_start_end_index():005;        {
DEBUG:refactor.py:056:find_register_start_end_index():006;            PreventDefaultAction();
DEBUG:refactor.py:056:find_register_start_end_index():007;            Player* target = nullptr;
DEBUG:refactor.py:056:find_register_start_end_index():008;            Map::PlayerList const& pList = GetUnitOwner()->GetMap()->GetPlayers();
DEBUG:refactor.py:056:find_register_start_end_index():009;            uint8 _offset = urand(0, pList.getSize() - 1);
DEBUG:refactor.py:056:find_register_start_end_index():010;            uint8 _counter = 0;
DEBUG:refactor.py:056:find_register_start_end_index():011;            for(Map::PlayerList::const_iterator itr = pList.begin(); itr != pList.end(); ++itr, ++_counter)
DEBUG:refactor.py:056:find_register_start_end_index():012;            {
DEBUG:refactor.py:056:find_register_start_end_index():013;                if (itr->GetSource() == GetUnitOwner() || GetUnitOwner()->GetDistance(itr->GetSource()) > 50.0f || !itr->GetSource()->IsAlive() || itr->GetSource()->IsGameMaster())
DEBUG:refactor.py:056:find_register_start_end_index():014;                    continue;
DEBUG:refactor.py:056:find_register_start_end_index():015;
DEBUG:refactor.py:056:find_register_start_end_index():016;                if (_counter <= _offset || !target)
DEBUG:refactor.py:056:find_register_start_end_index():017;                    target = itr->GetSource();
DEBUG:refactor.py:056:find_register_start_end_index():018;                else
DEBUG:refactor.py:056:find_register_start_end_index():019;                    break;
DEBUG:refactor.py:056:find_register_start_end_index():020;            }
DEBUG:refactor.py:056:find_register_start_end_index():021;
DEBUG:refactor.py:056:find_register_start_end_index():022;            if (!target)
DEBUG:refactor.py:056:find_register_start_end_index():023;                SetDuration(0);
DEBUG:refactor.py:056:find_register_start_end_index():024;            else
DEBUG:refactor.py:056:find_register_start_end_index():025;                _targetGUID = target->GetGUID();
DEBUG:refactor.py:056:find_register_start_end_index():026;        }
DEBUG:refactor.py:056:find_register_start_end_index():027;
DEBUG:refactor.py:056:find_register_start_end_index():028;        void OnPeriodic(AuraEffect const*  /*aurEff*/)
DEBUG:refactor.py:056:find_register_start_end_index():029;        {
DEBUG:refactor.py:056:find_register_start_end_index():030;            Unit* owner = GetUnitOwner();
DEBUG:refactor.py:056:find_register_start_end_index():031;            if (!owner)
DEBUG:refactor.py:056:find_register_start_end_index():032;            {
DEBUG:refactor.py:056:find_register_start_end_index():033;                SetDuration(0);
DEBUG:refactor.py:056:find_register_start_end_index():034;                return;
DEBUG:refactor.py:056:find_register_start_end_index():035;            }
DEBUG:refactor.py:056:find_register_start_end_index():036;
DEBUG:refactor.py:056:find_register_start_end_index():037;            Unit* _target = ObjectAccessor::GetUnit(*owner, _targetGUID);
DEBUG:refactor.py:056:find_register_start_end_index():038;            if (!_target || !_target->IsAlive() || std::fabs(owner->GetPositionZ() - _target->GetPositionZ()) > 10.0f) // Target or owner underground
DEBUG:refactor.py:056:find_register_start_end_index():039;            {
DEBUG:refactor.py:056:find_register_start_end_index():040;                SetDuration(0);
DEBUG:refactor.py:056:find_register_start_end_index():041;                return;
DEBUG:refactor.py:056:find_register_start_end_index():042;            }
DEBUG:refactor.py:056:find_register_start_end_index():043;
DEBUG:refactor.py:056:find_register_start_end_index():044;            if (owner->GetDistance(_target) > 20.0f)
DEBUG:refactor.py:056:find_register_start_end_index():045;            {
DEBUG:refactor.py:056:find_register_start_end_index():046;                owner->CastSpell(_target, SPELL_BRAIN_LINK_DAMAGE, true);
DEBUG:refactor.py:056:find_register_start_end_index():047;                owner->CastSpell(owner, SPELL_BRAIN_LINK_DAMAGE, true);
DEBUG:refactor.py:056:find_register_start_end_index():048;            }
DEBUG:refactor.py:056:find_register_start_end_index():049;            else
DEBUG:refactor.py:056:find_register_start_end_index():050;                owner->CastSpell(_target, SPELL_BRAIN_LINK_OK, true);
DEBUG:refactor.py:056:find_register_start_end_index():051;        }
DEBUG:refactor.py:056:find_register_start_end_index():052;
DEBUG:refactor.py:056:find_register_start_end_index():053;        void Register() override
DEBUG:refactor.py:056:find_register_start_end_index():054;        {
DEBUG:refactor.py:056:find_register_start_end_index():055;            OnEffectApply += AuraEffectApplyFn(spell_yogg_saron_brain_link_AuraScript::HandleOnEffectApply, EFFECT_0, SPELL_AURA_PERIODIC_DUMMY, AURA_EFFECT_HANDLE_REAL);
DEBUG:refactor.py:056:find_register_start_end_index():056;            OnEffectPeriodic += AuraEffectPeriodicFn(spell_yogg_saron_brain_link_AuraScript::OnPeriodic, EFFECT_0, SPELL_AURA_PERIODIC_DUMMY);
DEBUG:refactor.py:056:find_register_start_end_index():057;        }
DEBUG:refactor.py:063:find_register_start_end_index():53;53         void Register() override
DEBUG:refactor.py:064:find_register_start_end_index():57;57         }
DEBUG:refactor.py:072:find_register_statements():53;57
DEBUG:refactor.py:074:find_register_statements():000:            OnEffectApply += AuraEffectApplyFn(spell_yogg_saron_brain_link_AuraScript::HandleOnEffectApply, EFFECT_0, SPELL_AURA_PERIODIC_DUMMY, AURA_EFFECT_HANDLE_REAL);
DEBUG:refactor.py:074:find_register_statements():001:            OnEffectPeriodic += AuraEffectPeriodicFn(spell_yogg_saron_brain_link_AuraScript::OnPeriodic, EFFECT_0, SPELL_AURA_PERIODIC_DUMMY);
DEBUG:refactor.py:088:format_register_statements():before:000:            OnEffectApply += AuraEffectApplyFn(spell_yogg_saron_brain_link_AuraScript::HandleOnEffectApply, EFFECT_0, SPELL_AURA_PERIODIC_DUMMY, AURA_EFFECT_HANDLE_REAL);
DEBUG:refactor.py:088:format_register_statements():before:001:            OnEffectPeriodic += AuraEffectPeriodicFn(spell_yogg_saron_brain_link_AuraScript::OnPeriodic, EFFECT_0, SPELL_AURA_PERIODIC_DUMMY);
DEBUG:refactor.py:090:format_register_statements():after :000:        OnEffectApply += AuraEffectApplyFn(spell_yogg_saron_brain_link_aura::HandleOnEffectApply, EFFECT_0, SPELL_AURA_PERIODIC_DUMMY, AURA_EFFECT_HANDLE_REAL);
DEBUG:refactor.py:090:format_register_statements():after :001:        OnEffectPeriodic += AuraEffectPeriodicFn(spell_yogg_saron_brain_link_aura::OnPeriodic, EFFECT_0, SPELL_AURA_PERIODIC_DUMMY);
DEBUG:refactor.py:103:find_content_start_end_index():absolute_start=2,absolute_end=53
DEBUG:refactor.py:145:format_content_statements():before:000:
DEBUG:refactor.py:145:format_content_statements():before:001:        void HandleOnEffectApply(AuraEffect const* /*aurEff*/, AuraEffectHandleModes /*mode*/)
DEBUG:refactor.py:145:format_content_statements():before:002:        {
DEBUG:refactor.py:145:format_content_statements():before:003:            PreventDefaultAction();
DEBUG:refactor.py:145:format_content_statements():before:004:            Player* target = nullptr;
DEBUG:refactor.py:145:format_content_statements():before:005:            Map::PlayerList const& pList = GetUnitOwner()->GetMap()->GetPlayers();
DEBUG:refactor.py:145:format_content_statements():before:006:            uint8 _offset = urand(0, pList.getSize() - 1);
DEBUG:refactor.py:145:format_content_statements():before:007:            uint8 _counter = 0;
DEBUG:refactor.py:145:format_content_statements():before:008:            for(Map::PlayerList::const_iterator itr = pList.begin(); itr != pList.end(); ++itr, ++_counter)
DEBUG:refactor.py:145:format_content_statements():before:009:            {
DEBUG:refactor.py:145:format_content_statements():before:010:                if (itr->GetSource() == GetUnitOwner() || GetUnitOwner()->GetDistance(itr->GetSource()) > 50.0f || !itr->GetSource()->IsAlive() || itr->GetSource()->IsGameMaster())
DEBUG:refactor.py:145:format_content_statements():before:011:                    continue;
DEBUG:refactor.py:145:format_content_statements():before:012:
DEBUG:refactor.py:145:format_content_statements():before:013:                if (_counter <= _offset || !target)
DEBUG:refactor.py:145:format_content_statements():before:014:                    target = itr->GetSource();
DEBUG:refactor.py:145:format_content_statements():before:015:                else
DEBUG:refactor.py:145:format_content_statements():before:016:                    break;
DEBUG:refactor.py:145:format_content_statements():before:017:            }
DEBUG:refactor.py:145:format_content_statements():before:018:
DEBUG:refactor.py:145:format_content_statements():before:019:            if (!target)
DEBUG:refactor.py:145:format_content_statements():before:020:                SetDuration(0);
DEBUG:refactor.py:145:format_content_statements():before:021:            else
DEBUG:refactor.py:145:format_content_statements():before:022:                _targetGUID = target->GetGUID();
DEBUG:refactor.py:145:format_content_statements():before:023:        }
DEBUG:refactor.py:145:format_content_statements():before:024:
DEBUG:refactor.py:145:format_content_statements():before:025:        void OnPeriodic(AuraEffect const*  /*aurEff*/)
DEBUG:refactor.py:145:format_content_statements():before:026:        {
DEBUG:refactor.py:145:format_content_statements():before:027:            Unit* owner = GetUnitOwner();
DEBUG:refactor.py:145:format_content_statements():before:028:            if (!owner)
DEBUG:refactor.py:145:format_content_statements():before:029:            {
DEBUG:refactor.py:145:format_content_statements():before:030:                SetDuration(0);
DEBUG:refactor.py:145:format_content_statements():before:031:                return;
DEBUG:refactor.py:145:format_content_statements():before:032:            }
DEBUG:refactor.py:145:format_content_statements():before:033:
DEBUG:refactor.py:145:format_content_statements():before:034:            Unit* _target = ObjectAccessor::GetUnit(*owner, _targetGUID);
DEBUG:refactor.py:145:format_content_statements():before:035:            if (!_target || !_target->IsAlive() || std::fabs(owner->GetPositionZ() - _target->GetPositionZ()) > 10.0f) // Target or owner underground
DEBUG:refactor.py:145:format_content_statements():before:036:            {
DEBUG:refactor.py:145:format_content_statements():before:037:                SetDuration(0);
DEBUG:refactor.py:145:format_content_statements():before:038:                return;
DEBUG:refactor.py:145:format_content_statements():before:039:            }
DEBUG:refactor.py:145:format_content_statements():before:040:
DEBUG:refactor.py:145:format_content_statements():before:041:            if (owner->GetDistance(_target) > 20.0f)
DEBUG:refactor.py:145:format_content_statements():before:042:            {
DEBUG:refactor.py:145:format_content_statements():before:043:                owner->CastSpell(_target, SPELL_BRAIN_LINK_DAMAGE, true);
DEBUG:refactor.py:145:format_content_statements():before:044:                owner->CastSpell(owner, SPELL_BRAIN_LINK_DAMAGE, true);
DEBUG:refactor.py:145:format_content_statements():before:045:            }
DEBUG:refactor.py:145:format_content_statements():before:046:            else
DEBUG:refactor.py:145:format_content_statements():before:047:                owner->CastSpell(_target, SPELL_BRAIN_LINK_OK, true);
DEBUG:refactor.py:145:format_content_statements():before:048:        }
DEBUG:refactor.py:145:format_content_statements():before:049:
DEBUG:refactor.py:147:format_content_statements():after :000:
DEBUG:refactor.py:147:format_content_statements():after :001:    void HandleOnEffectApply(AuraEffect const* /*aurEff*/, AuraEffectHandleModes /*mode*/)
DEBUG:refactor.py:147:format_content_statements():after :002:    {
DEBUG:refactor.py:147:format_content_statements():after :003:        PreventDefaultAction();
DEBUG:refactor.py:147:format_content_statements():after :004:        Player* target = nullptr;
DEBUG:refactor.py:147:format_content_statements():after :005:        Map::PlayerList const& pList = GetUnitOwner()->GetMap()->GetPlayers();
DEBUG:refactor.py:147:format_content_statements():after :006:        uint8 _offset = urand(0, pList.getSize() - 1);
DEBUG:refactor.py:147:format_content_statements():after :007:        uint8 _counter = 0;
DEBUG:refactor.py:147:format_content_statements():after :008:        for(Map::PlayerList::const_iterator itr = pList.begin(); itr != pList.end(); ++itr, ++_counter)
DEBUG:refactor.py:147:format_content_statements():after :009:        {
DEBUG:refactor.py:147:format_content_statements():after :010:            if (itr->GetSource() == GetUnitOwner() || GetUnitOwner()->GetDistance(itr->GetSource()) > 50.0f || !itr->GetSource()->IsAlive() || itr->GetSource()->IsGameMaster())
DEBUG:refactor.py:147:format_content_statements():after :011:                continue;
DEBUG:refactor.py:147:format_content_statements():after :012:
DEBUG:refactor.py:147:format_content_statements():after :013:            if (_counter <= _offset || !target)
DEBUG:refactor.py:147:format_content_statements():after :014:                target = itr->GetSource();
DEBUG:refactor.py:147:format_content_statements():after :015:            else
DEBUG:refactor.py:147:format_content_statements():after :016:                break;
DEBUG:refactor.py:147:format_content_statements():after :017:        }
DEBUG:refactor.py:147:format_content_statements():after :018:
DEBUG:refactor.py:147:format_content_statements():after :019:        if (!target)
DEBUG:refactor.py:147:format_content_statements():after :020:            SetDuration(0);
DEBUG:refactor.py:147:format_content_statements():after :021:        else
DEBUG:refactor.py:147:format_content_statements():after :022:            _targetGUID = target->GetGUID();
DEBUG:refactor.py:147:format_content_statements():after :023:    }
DEBUG:refactor.py:147:format_content_statements():after :024:
DEBUG:refactor.py:147:format_content_statements():after :025:    void OnPeriodic(AuraEffect const*  /*aurEff*/)
DEBUG:refactor.py:147:format_content_statements():after :026:    {
DEBUG:refactor.py:147:format_content_statements():after :027:        Unit* owner = GetUnitOwner();
DEBUG:refactor.py:147:format_content_statements():after :028:        if (!owner)
DEBUG:refactor.py:147:format_content_statements():after :029:        {
DEBUG:refactor.py:147:format_content_statements():after :030:            SetDuration(0);
DEBUG:refactor.py:147:format_content_statements():after :031:            return;
DEBUG:refactor.py:147:format_content_statements():after :032:        }
DEBUG:refactor.py:147:format_content_statements():after :033:
DEBUG:refactor.py:147:format_content_statements():after :034:        Unit* _target = ObjectAccessor::GetUnit(*owner, _targetGUID);
DEBUG:refactor.py:147:format_content_statements():after :035:        if (!_target || !_target->IsAlive() || std::fabs(owner->GetPositionZ() - _target->GetPositionZ()) > 10.0f) // Target or owner underground
DEBUG:refactor.py:147:format_content_statements():after :036:        {
DEBUG:refactor.py:147:format_content_statements():after :037:            SetDuration(0);
DEBUG:refactor.py:147:format_content_statements():after :038:            return;
DEBUG:refactor.py:147:format_content_statements():after :039:        }
DEBUG:refactor.py:147:format_content_statements():after :040:
DEBUG:refactor.py:147:format_content_statements():after :041:        if (owner->GetDistance(_target) > 20.0f)
DEBUG:refactor.py:147:format_content_statements():after :042:        {
DEBUG:refactor.py:147:format_content_statements():after :043:            owner->CastSpell(_target, SPELL_BRAIN_LINK_DAMAGE, true);
DEBUG:refactor.py:147:format_content_statements():after :044:            owner->CastSpell(owner, SPELL_BRAIN_LINK_DAMAGE, true);
DEBUG:refactor.py:147:format_content_statements():after :045:        }
DEBUG:refactor.py:147:format_content_statements():after :046:        else
DEBUG:refactor.py:147:format_content_statements():after :047:            owner->CastSpell(_target, SPELL_BRAIN_LINK_OK, true);
DEBUG:refactor.py:147:format_content_statements():after :048:    }
DEBUG:refactor.py:147:format_content_statements():after :049:
DEBUG:refactor.py:119:      find_variables():HERE 59
DEBUG:refactor.py:120:      find_variables():    protected:
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:000:    class spell_yogg_saron_brain_link_AuraScript : public AuraScript
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:001:    {
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:002:        PrepareAuraScript(spell_yogg_saron_brain_link_AuraScript);
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:003:
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:004:        void HandleOnEffectApply(AuraEffect const* /*aurEff*/, AuraEffectHandleModes /*mode*/)
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:005:        {
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:006:            PreventDefaultAction();
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:007:            Player* target = nullptr;
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:008:            Map::PlayerList const& pList = GetUnitOwner()->GetMap()->GetPlayers();
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:009:            uint8 _offset = urand(0, pList.getSize() - 1);
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:010:            uint8 _counter = 0;
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:011:            for(Map::PlayerList::const_iterator itr = pList.begin(); itr != pList.end(); ++itr, ++_counter)
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:012:            {
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:013:                if (itr->GetSource() == GetUnitOwner() || GetUnitOwner()->GetDistance(itr->GetSource()) > 50.0f || !itr->GetSource()->IsAlive() || itr->GetSource()->IsGameMaster())
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:014:                    continue;
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:015:
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:016:                if (_counter <= _offset || !target)
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:017:                    target = itr->GetSource();
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:018:                else
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:019:                    break;
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:020:            }
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:021:
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:022:            if (!target)
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:023:                SetDuration(0);
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:024:            else
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:025:                _targetGUID = target->GetGUID();
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:026:        }
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:027:
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:028:        void OnPeriodic(AuraEffect const*  /*aurEff*/)
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:029:        {
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:030:            Unit* owner = GetUnitOwner();
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:031:            if (!owner)
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:032:            {
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:033:                SetDuration(0);
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:034:                return;
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:035:            }
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:036:
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:037:            Unit* _target = ObjectAccessor::GetUnit(*owner, _targetGUID);
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:038:            if (!_target || !_target->IsAlive() || std::fabs(owner->GetPositionZ() - _target->GetPositionZ()) > 10.0f) // Target or owner underground
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:039:            {
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:040:                SetDuration(0);
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:041:                return;
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:042:            }
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:043:
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:044:            if (owner->GetDistance(_target) > 20.0f)
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:045:            {
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:046:                owner->CastSpell(_target, SPELL_BRAIN_LINK_DAMAGE, true);
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:047:                owner->CastSpell(owner, SPELL_BRAIN_LINK_DAMAGE, true);
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:048:            }
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:049:            else
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:050:                owner->CastSpell(_target, SPELL_BRAIN_LINK_OK, true);
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:051:        }
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:052:
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:053:        void Register() override
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:054:        {
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:055:            OnEffectApply += AuraEffectApplyFn(spell_yogg_saron_brain_link_AuraScript::HandleOnEffectApply, EFFECT_0, SPELL_AURA_PERIODIC_DUMMY, AURA_EFFECT_HANDLE_REAL);
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:056:            OnEffectPeriodic += AuraEffectPeriodicFn(spell_yogg_saron_brain_link_AuraScript::OnPeriodic, EFFECT_0, SPELL_AURA_PERIODIC_DUMMY);
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:057:        }
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:058:
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:059:    protected:
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:060:        ObjectGuid _targetGUID;
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:061:    };
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :000:class spell_yogg_saron_brain_link_aura : public AuraScript
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :001:{
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :002:    PrepareAuraScript(spell_yogg_saron_brain_link_aura);
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :003:
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :004:    void HandleOnEffectApply(AuraEffect const* /*aurEff*/, AuraEffectHandleModes /*mode*/)
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :005:    {
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :006:        PreventDefaultAction();
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :007:        Player* target = nullptr;
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :008:        Map::PlayerList const& pList = GetUnitOwner()->GetMap()->GetPlayers();
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :009:        uint8 _offset = urand(0, pList.getSize() - 1);
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :010:        uint8 _counter = 0;
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :011:        for(Map::PlayerList::const_iterator itr = pList.begin(); itr != pList.end(); ++itr, ++_counter)
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :012:        {
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :013:            if (itr->GetSource() == GetUnitOwner() || GetUnitOwner()->GetDistance(itr->GetSource()) > 50.0f || !itr->GetSource()->IsAlive() || itr->GetSource()->IsGameMaster())
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :014:                continue;
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :015:
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :016:            if (_counter <= _offset || !target)
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :017:                target = itr->GetSource();
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :018:            else
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :019:                break;
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :020:        }
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :021:
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :022:        if (!target)
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :023:            SetDuration(0);
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :024:        else
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :025:            _targetGUID = target->GetGUID();
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :026:    }
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :027:
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :028:    void OnPeriodic(AuraEffect const*  /*aurEff*/)
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :029:    {
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :030:        Unit* owner = GetUnitOwner();
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :031:        if (!owner)
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :032:        {
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :033:            SetDuration(0);
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :034:            return;
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :035:        }
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :036:
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :037:        Unit* _target = ObjectAccessor::GetUnit(*owner, _targetGUID);
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :038:        if (!_target || !_target->IsAlive() || std::fabs(owner->GetPositionZ() - _target->GetPositionZ()) > 10.0f) // Target or owner underground
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :039:        {
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :040:            SetDuration(0);
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :041:            return;
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :042:        }
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :043:
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :044:        if (owner->GetDistance(_target) > 20.0f)
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :045:        {
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :046:            owner->CastSpell(_target, SPELL_BRAIN_LINK_DAMAGE, true);
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :047:            owner->CastSpell(owner, SPELL_BRAIN_LINK_DAMAGE, true);
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :048:        }
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :049:        else
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :050:            owner->CastSpell(_target, SPELL_BRAIN_LINK_OK, true);
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :051:    }
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :052:
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :053:    void Register() override
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :054:    {
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :055:        OnEffectApply += AuraEffectApplyFn(spell_yogg_saron_brain_link_aura::HandleOnEffectApply, EFFECT_0, SPELL_AURA_PERIODIC_DUMMY, AURA_EFFECT_HANDLE_REAL);
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :056:        OnEffectPeriodic += AuraEffectPeriodicFn(spell_yogg_saron_brain_link_aura::OnPeriodic, EFFECT_0, SPELL_AURA_PERIODIC_DUMMY);
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :057:    }
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :058:
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :059:protected:
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :060:    ObjectGuid _targetGUID;
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :061:};
DEBUG:refactor.py:018:find_start_last_index():1 line='class spell_yogg_saron_grim_reprisal : public SpellScriptLoader'
DEBUG:refactor.py:018:find_start_last_index():2 line='{'
DEBUG:refactor.py:018:find_start_last_index():3 line='public:'
DEBUG:refactor.py:018:find_start_last_index():4 line='    spell_yogg_saron_grim_reprisal() : SpellScriptLoader("spell_yogg_saron_grim_reprisal") { }'
DEBUG:refactor.py:018:find_start_last_index():5 line=''
DEBUG:refactor.py:018:find_start_last_index():6 line='    class spell_yogg_saron_grim_reprisal_AuraScript : public AuraScript'
DEBUG:refactor.py:018:find_start_last_index():7 line='    {'
DEBUG:refactor.py:018:find_start_last_index():8 line='        PrepareAuraScript(spell_yogg_saron_grim_reprisal_AuraScript);'
DEBUG:refactor.py:018:find_start_last_index():9 line=''
DEBUG:refactor.py:018:find_start_last_index():10 line='        bool Validate(SpellInfo const* /*spellInfo*/) override'
DEBUG:refactor.py:018:find_start_last_index():11 line='        {'
DEBUG:refactor.py:018:find_start_last_index():12 line='            return ValidateSpellInfo({ SPELL_GRIM_REPRISAL_DAMAGE });'
DEBUG:refactor.py:018:find_start_last_index():13 line='        }'
DEBUG:refactor.py:018:find_start_last_index():14 line=''
DEBUG:refactor.py:018:find_start_last_index():15 line='        void HandleProc(AuraEffect const* aurEff, ProcEventInfo& eventInfo)'
DEBUG:refactor.py:018:find_start_last_index():16 line='        {'
DEBUG:refactor.py:018:find_start_last_index():17 line='            DamageInfo* damageInfo = eventInfo.GetDamageInfo();'
DEBUG:refactor.py:018:find_start_last_index():18 line=''
DEBUG:refactor.py:018:find_start_last_index():19 line='            if (!damageInfo || !damageInfo->GetDamage())'
DEBUG:refactor.py:018:find_start_last_index():20 line='            {'
DEBUG:refactor.py:018:find_start_last_index():21 line='                return;'
DEBUG:refactor.py:018:find_start_last_index():22 line='            }'
DEBUG:refactor.py:018:find_start_last_index():23 line=''
DEBUG:refactor.py:018:find_start_last_index():24 line='            int32 damage = CalculatePct(static_cast<int32>(damageInfo->GetDamage()), 60);'
DEBUG:refactor.py:018:find_start_last_index():25 line='            GetTarget()->CastCustomSpell(SPELL_GRIM_REPRISAL_DAMAGE, SPELLVALUE_BASE_POINT0, damage, damageInfo->GetAttacker(), true, nullptr, aurEff);'
DEBUG:refactor.py:018:find_start_last_index():26 line='        }'
DEBUG:refactor.py:018:find_start_last_index():27 line=''
DEBUG:refactor.py:018:find_start_last_index():28 line='        void Register() override'
DEBUG:refactor.py:018:find_start_last_index():29 line='        {'
DEBUG:refactor.py:018:find_start_last_index():30 line='            OnEffectProc += AuraEffectProcFn(spell_yogg_saron_grim_reprisal_AuraScript::HandleProc, EFFECT_0, SPELL_AURA_DUMMY);'
DEBUG:refactor.py:018:find_start_last_index():31 line='        }'
DEBUG:refactor.py:018:find_start_last_index():32 line='    private:'
DEBUG:refactor.py:018:find_start_last_index():33 line='        uint8 someVariables;'
DEBUG:refactor.py:018:find_start_last_index():34 line='        bool anotherOne;'
DEBUG:refactor.py:018:find_start_last_index():35 line='    };'
DEBUG:refactor.py:018:find_start_last_index():36 line=''
DEBUG:refactor.py:018:find_start_last_index():37 line='    AuraScript* GetAuraScript() const override'
DEBUG:refactor.py:018:find_start_last_index():38 line='    {'
DEBUG:refactor.py:018:find_start_last_index():39 line='        return new spell_yogg_saron_grim_reprisal_AuraScript();'
DEBUG:refactor.py:018:find_start_last_index():40 line='    }'
DEBUG:refactor.py:018:find_start_last_index():41 line='};'
DEBUG:refactor.py:027: find_name_of_script():name='spell_yogg_saron_grim_reprisal'
DEBUG:refactor.py:018:find_start_last_index():1 line='class spell_yogg_saron_grim_reprisal : public SpellScriptLoader'
DEBUG:refactor.py:018:find_start_last_index():2 line='{'
DEBUG:refactor.py:018:find_start_last_index():3 line='public:'
DEBUG:refactor.py:018:find_start_last_index():4 line='    spell_yogg_saron_grim_reprisal() : SpellScriptLoader("spell_yogg_saron_grim_reprisal") { }'
DEBUG:refactor.py:018:find_start_last_index():5 line=''
DEBUG:refactor.py:018:find_start_last_index():6 line='    class spell_yogg_saron_grim_reprisal_AuraScript : public AuraScript'
DEBUG:refactor.py:018:find_start_last_index():7 line='    {'
DEBUG:refactor.py:018:find_start_last_index():8 line='        PrepareAuraScript(spell_yogg_saron_grim_reprisal_AuraScript);'
DEBUG:refactor.py:018:find_start_last_index():9 line=''
DEBUG:refactor.py:018:find_start_last_index():10 line='        bool Validate(SpellInfo const* /*spellInfo*/) override'
DEBUG:refactor.py:018:find_start_last_index():11 line='        {'
DEBUG:refactor.py:018:find_start_last_index():12 line='            return ValidateSpellInfo({ SPELL_GRIM_REPRISAL_DAMAGE });'
DEBUG:refactor.py:018:find_start_last_index():13 line='        }'
DEBUG:refactor.py:018:find_start_last_index():14 line=''
DEBUG:refactor.py:018:find_start_last_index():15 line='        void HandleProc(AuraEffect const* aurEff, ProcEventInfo& eventInfo)'
DEBUG:refactor.py:018:find_start_last_index():16 line='        {'
DEBUG:refactor.py:018:find_start_last_index():17 line='            DamageInfo* damageInfo = eventInfo.GetDamageInfo();'
DEBUG:refactor.py:018:find_start_last_index():18 line=''
DEBUG:refactor.py:018:find_start_last_index():19 line='            if (!damageInfo || !damageInfo->GetDamage())'
DEBUG:refactor.py:018:find_start_last_index():20 line='            {'
DEBUG:refactor.py:018:find_start_last_index():21 line='                return;'
DEBUG:refactor.py:018:find_start_last_index():22 line='            }'
DEBUG:refactor.py:018:find_start_last_index():23 line=''
DEBUG:refactor.py:018:find_start_last_index():24 line='            int32 damage = CalculatePct(static_cast<int32>(damageInfo->GetDamage()), 60);'
DEBUG:refactor.py:018:find_start_last_index():25 line='            GetTarget()->CastCustomSpell(SPELL_GRIM_REPRISAL_DAMAGE, SPELLVALUE_BASE_POINT0, damage, damageInfo->GetAttacker(), true, nullptr, aurEff);'
DEBUG:refactor.py:018:find_start_last_index():26 line='        }'
DEBUG:refactor.py:018:find_start_last_index():27 line=''
DEBUG:refactor.py:018:find_start_last_index():28 line='        void Register() override'
DEBUG:refactor.py:018:find_start_last_index():29 line='        {'
DEBUG:refactor.py:018:find_start_last_index():30 line='            OnEffectProc += AuraEffectProcFn(spell_yogg_saron_grim_reprisal_AuraScript::HandleProc, EFFECT_0, SPELL_AURA_DUMMY);'
DEBUG:refactor.py:018:find_start_last_index():31 line='        }'
DEBUG:refactor.py:018:find_start_last_index():32 line='    private:'
DEBUG:refactor.py:018:find_start_last_index():33 line='        uint8 someVariables;'
DEBUG:refactor.py:018:find_start_last_index():34 line='        bool anotherOne;'
DEBUG:refactor.py:018:find_start_last_index():35 line='    };'
DEBUG:refactor.py:018:find_start_last_index():36 line=''
DEBUG:refactor.py:018:find_start_last_index():37 line='    AuraScript* GetAuraScript() const override'
DEBUG:refactor.py:018:find_start_last_index():38 line='    {'
DEBUG:refactor.py:018:find_start_last_index():39 line='        return new spell_yogg_saron_grim_reprisal_AuraScript();'
DEBUG:refactor.py:018:find_start_last_index():40 line='    }'
DEBUG:refactor.py:018:find_start_last_index():41 line='};'
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:036:     get_script_type():AuraScript line='    class spell_yogg_saron_grim_reprisal_AuraScript : public AuraScript'
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:036:     get_script_type():AuraScript line='        PrepareAuraScript(spell_yogg_saron_grim_reprisal_AuraScript);'
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:036:     get_script_type():AuraScript line='            OnEffectProc += AuraEffectProcFn(spell_yogg_saron_grim_reprisal_AuraScript::HandleProc, EFFECT_0, SPELL_AURA_DUMMY);'
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:036:     get_script_type():AuraScript line='    AuraScript* GetAuraScript() const override'
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:036:     get_script_type():AuraScript line='        return new spell_yogg_saron_grim_reprisal_AuraScript();'
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:018:find_start_last_index():1 line='class spell_yogg_saron_grim_reprisal : public SpellScriptLoader'
DEBUG:refactor.py:018:find_start_last_index():2 line='{'
DEBUG:refactor.py:018:find_start_last_index():3 line='public:'
DEBUG:refactor.py:018:find_start_last_index():4 line='    spell_yogg_saron_grim_reprisal() : SpellScriptLoader("spell_yogg_saron_grim_reprisal") { }'
DEBUG:refactor.py:018:find_start_last_index():5 line=''
DEBUG:refactor.py:018:find_start_last_index():6 line='    class spell_yogg_saron_grim_reprisal_AuraScript : public AuraScript'
DEBUG:refactor.py:018:find_start_last_index():7 line='    {'
DEBUG:refactor.py:018:find_start_last_index():8 line='        PrepareAuraScript(spell_yogg_saron_grim_reprisal_AuraScript);'
DEBUG:refactor.py:018:find_start_last_index():9 line=''
DEBUG:refactor.py:018:find_start_last_index():10 line='        bool Validate(SpellInfo const* /*spellInfo*/) override'
DEBUG:refactor.py:018:find_start_last_index():11 line='        {'
DEBUG:refactor.py:018:find_start_last_index():12 line='            return ValidateSpellInfo({ SPELL_GRIM_REPRISAL_DAMAGE });'
DEBUG:refactor.py:018:find_start_last_index():13 line='        }'
DEBUG:refactor.py:018:find_start_last_index():14 line=''
DEBUG:refactor.py:018:find_start_last_index():15 line='        void HandleProc(AuraEffect const* aurEff, ProcEventInfo& eventInfo)'
DEBUG:refactor.py:018:find_start_last_index():16 line='        {'
DEBUG:refactor.py:018:find_start_last_index():17 line='            DamageInfo* damageInfo = eventInfo.GetDamageInfo();'
DEBUG:refactor.py:018:find_start_last_index():18 line=''
DEBUG:refactor.py:018:find_start_last_index():19 line='            if (!damageInfo || !damageInfo->GetDamage())'
DEBUG:refactor.py:018:find_start_last_index():20 line='            {'
DEBUG:refactor.py:018:find_start_last_index():21 line='                return;'
DEBUG:refactor.py:018:find_start_last_index():22 line='            }'
DEBUG:refactor.py:018:find_start_last_index():23 line=''
DEBUG:refactor.py:018:find_start_last_index():24 line='            int32 damage = CalculatePct(static_cast<int32>(damageInfo->GetDamage()), 60);'
DEBUG:refactor.py:018:find_start_last_index():25 line='            GetTarget()->CastCustomSpell(SPELL_GRIM_REPRISAL_DAMAGE, SPELLVALUE_BASE_POINT0, damage, damageInfo->GetAttacker(), true, nullptr, aurEff);'
DEBUG:refactor.py:018:find_start_last_index():26 line='        }'
DEBUG:refactor.py:018:find_start_last_index():27 line=''
DEBUG:refactor.py:018:find_start_last_index():28 line='        void Register() override'
DEBUG:refactor.py:018:find_start_last_index():29 line='        {'
DEBUG:refactor.py:018:find_start_last_index():30 line='            OnEffectProc += AuraEffectProcFn(spell_yogg_saron_grim_reprisal_AuraScript::HandleProc, EFFECT_0, SPELL_AURA_DUMMY);'
DEBUG:refactor.py:018:find_start_last_index():31 line='        }'
DEBUG:refactor.py:018:find_start_last_index():32 line='    private:'
DEBUG:refactor.py:018:find_start_last_index():33 line='        uint8 someVariables;'
DEBUG:refactor.py:018:find_start_last_index():34 line='        bool anotherOne;'
DEBUG:refactor.py:018:find_start_last_index():35 line='    };'
DEBUG:refactor.py:018:find_start_last_index():36 line=''
DEBUG:refactor.py:018:find_start_last_index():37 line='    AuraScript* GetAuraScript() const override'
DEBUG:refactor.py:018:find_start_last_index():38 line='    {'
DEBUG:refactor.py:018:find_start_last_index():39 line='        return new spell_yogg_saron_grim_reprisal_AuraScript();'
DEBUG:refactor.py:018:find_start_last_index():40 line='    }'
DEBUG:refactor.py:018:find_start_last_index():41 line='};'
DEBUG:refactor.py:054:find_register_start_end_index():start_index=1
DEBUG:refactor.py:056:find_register_start_end_index():000;class spell_yogg_saron_grim_reprisal : public SpellScriptLoader
DEBUG:refactor.py:056:find_register_start_end_index():001;{
DEBUG:refactor.py:056:find_register_start_end_index():002;public:
DEBUG:refactor.py:056:find_register_start_end_index():003;    spell_yogg_saron_grim_reprisal() : SpellScriptLoader("spell_yogg_saron_grim_reprisal") { }
DEBUG:refactor.py:056:find_register_start_end_index():004;
DEBUG:refactor.py:056:find_register_start_end_index():005;    class spell_yogg_saron_grim_reprisal_AuraScript : public AuraScript
DEBUG:refactor.py:056:find_register_start_end_index():006;    {
DEBUG:refactor.py:056:find_register_start_end_index():007;        PrepareAuraScript(spell_yogg_saron_grim_reprisal_AuraScript);
DEBUG:refactor.py:056:find_register_start_end_index():008;
DEBUG:refactor.py:056:find_register_start_end_index():009;        bool Validate(SpellInfo const* /*spellInfo*/) override
DEBUG:refactor.py:056:find_register_start_end_index():010;        {
DEBUG:refactor.py:056:find_register_start_end_index():011;            return ValidateSpellInfo({ SPELL_GRIM_REPRISAL_DAMAGE });
DEBUG:refactor.py:056:find_register_start_end_index():012;        }
DEBUG:refactor.py:056:find_register_start_end_index():013;
DEBUG:refactor.py:056:find_register_start_end_index():014;        void HandleProc(AuraEffect const* aurEff, ProcEventInfo& eventInfo)
DEBUG:refactor.py:056:find_register_start_end_index():015;        {
DEBUG:refactor.py:056:find_register_start_end_index():016;            DamageInfo* damageInfo = eventInfo.GetDamageInfo();
DEBUG:refactor.py:056:find_register_start_end_index():017;
DEBUG:refactor.py:056:find_register_start_end_index():018;            if (!damageInfo || !damageInfo->GetDamage())
DEBUG:refactor.py:056:find_register_start_end_index():019;            {
DEBUG:refactor.py:056:find_register_start_end_index():020;                return;
DEBUG:refactor.py:056:find_register_start_end_index():021;            }
DEBUG:refactor.py:056:find_register_start_end_index():022;
DEBUG:refactor.py:056:find_register_start_end_index():023;            int32 damage = CalculatePct(static_cast<int32>(damageInfo->GetDamage()), 60);
DEBUG:refactor.py:056:find_register_start_end_index():024;            GetTarget()->CastCustomSpell(SPELL_GRIM_REPRISAL_DAMAGE, SPELLVALUE_BASE_POINT0, damage, damageInfo->GetAttacker(), true, nullptr, aurEff);
DEBUG:refactor.py:056:find_register_start_end_index():025;        }
DEBUG:refactor.py:056:find_register_start_end_index():026;
DEBUG:refactor.py:056:find_register_start_end_index():027;        void Register() override
DEBUG:refactor.py:056:find_register_start_end_index():028;        {
DEBUG:refactor.py:056:find_register_start_end_index():029;            OnEffectProc += AuraEffectProcFn(spell_yogg_saron_grim_reprisal_AuraScript::HandleProc, EFFECT_0, SPELL_AURA_DUMMY);
DEBUG:refactor.py:056:find_register_start_end_index():030;        }
DEBUG:refactor.py:063:find_register_start_end_index():27;28 
DEBUG:refactor.py:064:find_register_start_end_index():30;31             OnEffectProc += AuraEffectProcFn(spell_yogg_saron_grim_reprisal_AuraScript::HandleProc, EFFECT_0, SPELL_AURA_DUMMY);
DEBUG:refactor.py:054:find_register_start_end_index():start_index=0
DEBUG:refactor.py:056:find_register_start_end_index():000;class spell_yogg_saron_grim_reprisal : public SpellScriptLoader
DEBUG:refactor.py:056:find_register_start_end_index():001;{
DEBUG:refactor.py:056:find_register_start_end_index():002;public:
DEBUG:refactor.py:056:find_register_start_end_index():003;    spell_yogg_saron_grim_reprisal() : SpellScriptLoader("spell_yogg_saron_grim_reprisal") { }
DEBUG:refactor.py:056:find_register_start_end_index():004;
DEBUG:refactor.py:056:find_register_start_end_index():005;    class spell_yogg_saron_grim_reprisal_AuraScript : public AuraScript
DEBUG:refactor.py:056:find_register_start_end_index():006;    {
DEBUG:refactor.py:056:find_register_start_end_index():007;        PrepareAuraScript(spell_yogg_saron_grim_reprisal_AuraScript);
DEBUG:refactor.py:056:find_register_start_end_index():008;
DEBUG:refactor.py:056:find_register_start_end_index():009;        bool Validate(SpellInfo const* /*spellInfo*/) override
DEBUG:refactor.py:056:find_register_start_end_index():010;        {
DEBUG:refactor.py:056:find_register_start_end_index():011;            return ValidateSpellInfo({ SPELL_GRIM_REPRISAL_DAMAGE });
DEBUG:refactor.py:056:find_register_start_end_index():012;        }
DEBUG:refactor.py:056:find_register_start_end_index():013;
DEBUG:refactor.py:056:find_register_start_end_index():014;        void HandleProc(AuraEffect const* aurEff, ProcEventInfo& eventInfo)
DEBUG:refactor.py:056:find_register_start_end_index():015;        {
DEBUG:refactor.py:056:find_register_start_end_index():016;            DamageInfo* damageInfo = eventInfo.GetDamageInfo();
DEBUG:refactor.py:056:find_register_start_end_index():017;
DEBUG:refactor.py:056:find_register_start_end_index():018;            if (!damageInfo || !damageInfo->GetDamage())
DEBUG:refactor.py:056:find_register_start_end_index():019;            {
DEBUG:refactor.py:056:find_register_start_end_index():020;                return;
DEBUG:refactor.py:056:find_register_start_end_index():021;            }
DEBUG:refactor.py:056:find_register_start_end_index():022;
DEBUG:refactor.py:056:find_register_start_end_index():023;            int32 damage = CalculatePct(static_cast<int32>(damageInfo->GetDamage()), 60);
DEBUG:refactor.py:056:find_register_start_end_index():024;            GetTarget()->CastCustomSpell(SPELL_GRIM_REPRISAL_DAMAGE, SPELLVALUE_BASE_POINT0, damage, damageInfo->GetAttacker(), true, nullptr, aurEff);
DEBUG:refactor.py:056:find_register_start_end_index():025;        }
DEBUG:refactor.py:056:find_register_start_end_index():026;
DEBUG:refactor.py:056:find_register_start_end_index():027;        void Register() override
DEBUG:refactor.py:056:find_register_start_end_index():028;        {
DEBUG:refactor.py:056:find_register_start_end_index():029;            OnEffectProc += AuraEffectProcFn(spell_yogg_saron_grim_reprisal_AuraScript::HandleProc, EFFECT_0, SPELL_AURA_DUMMY);
DEBUG:refactor.py:056:find_register_start_end_index():030;        }
DEBUG:refactor.py:063:find_register_start_end_index():27;27         void Register() override
DEBUG:refactor.py:064:find_register_start_end_index():30;30         }
DEBUG:refactor.py:072:find_register_statements():28;31
DEBUG:refactor.py:074:find_register_statements():000:            OnEffectProc += AuraEffectProcFn(spell_yogg_saron_grim_reprisal_AuraScript::HandleProc, EFFECT_0, SPELL_AURA_DUMMY);
DEBUG:refactor.py:088:format_register_statements():before:000:            OnEffectProc += AuraEffectProcFn(spell_yogg_saron_grim_reprisal_AuraScript::HandleProc, EFFECT_0, SPELL_AURA_DUMMY);
DEBUG:refactor.py:090:format_register_statements():after :000:        OnEffectProc += AuraEffectProcFn(spell_yogg_saron_grim_reprisal_aura::HandleProc, EFFECT_0, SPELL_AURA_DUMMY);
DEBUG:refactor.py:103:find_content_start_end_index():absolute_start=8,absolute_end=28
DEBUG:refactor.py:103:find_content_start_end_index():absolute_start=8,absolute_end=28
DEBUG:refactor.py:145:format_content_statements():before:000:
DEBUG:refactor.py:145:format_content_statements():before:001:        bool Validate(SpellInfo const* /*spellInfo*/) override
DEBUG:refactor.py:145:format_content_statements():before:002:        {
DEBUG:refactor.py:145:format_content_statements():before:003:            return ValidateSpellInfo({ SPELL_GRIM_REPRISAL_DAMAGE });
DEBUG:refactor.py:145:format_content_statements():before:004:        }
DEBUG:refactor.py:145:format_content_statements():before:005:
DEBUG:refactor.py:145:format_content_statements():before:006:        void HandleProc(AuraEffect const* aurEff, ProcEventInfo& eventInfo)
DEBUG:refactor.py:145:format_content_statements():before:007:        {
DEBUG:refactor.py:145:format_content_statements():before:008:            DamageInfo* damageInfo = eventInfo.GetDamageInfo();
DEBUG:refactor.py:145:format_content_statements():before:009:
DEBUG:refactor.py:145:format_content_statements():before:010:            if (!damageInfo || !damageInfo->GetDamage())
DEBUG:refactor.py:145:format_content_statements():before:011:            {
DEBUG:refactor.py:145:format_content_statements():before:012:                return;
DEBUG:refactor.py:145:format_content_statements():before:013:            }
DEBUG:refactor.py:145:format_content_statements():before:014:
DEBUG:refactor.py:145:format_content_statements():before:015:            int32 damage = CalculatePct(static_cast<int32>(damageInfo->GetDamage()), 60);
DEBUG:refactor.py:145:format_content_statements():before:016:            GetTarget()->CastCustomSpell(SPELL_GRIM_REPRISAL_DAMAGE, SPELLVALUE_BASE_POINT0, damage, damageInfo->GetAttacker(), true, nullptr, aurEff);
DEBUG:refactor.py:145:format_content_statements():before:017:        }
DEBUG:refactor.py:145:format_content_statements():before:018:
DEBUG:refactor.py:147:format_content_statements():after :000:
DEBUG:refactor.py:147:format_content_statements():after :001:    bool Validate(SpellInfo const* /*spellInfo*/) override
DEBUG:refactor.py:147:format_content_statements():after :002:    {
DEBUG:refactor.py:147:format_content_statements():after :003:        return ValidateSpellInfo({ SPELL_GRIM_REPRISAL_DAMAGE });
DEBUG:refactor.py:147:format_content_statements():after :004:    }
DEBUG:refactor.py:147:format_content_statements():after :005:
DEBUG:refactor.py:147:format_content_statements():after :006:    void HandleProc(AuraEffect const* aurEff, ProcEventInfo& eventInfo)
DEBUG:refactor.py:147:format_content_statements():after :007:    {
DEBUG:refactor.py:147:format_content_statements():after :008:        DamageInfo* damageInfo = eventInfo.GetDamageInfo();
DEBUG:refactor.py:147:format_content_statements():after :009:
DEBUG:refactor.py:147:format_content_statements():after :010:        if (!damageInfo || !damageInfo->GetDamage())
DEBUG:refactor.py:147:format_content_statements():after :011:        {
DEBUG:refactor.py:147:format_content_statements():after :012:            return;
DEBUG:refactor.py:147:format_content_statements():after :013:        }
DEBUG:refactor.py:147:format_content_statements():after :014:
DEBUG:refactor.py:147:format_content_statements():after :015:        int32 damage = CalculatePct(static_cast<int32>(damageInfo->GetDamage()), 60);
DEBUG:refactor.py:147:format_content_statements():after :016:        GetTarget()->CastCustomSpell(SPELL_GRIM_REPRISAL_DAMAGE, SPELLVALUE_BASE_POINT0, damage, damageInfo->GetAttacker(), true, nullptr, aurEff);
DEBUG:refactor.py:147:format_content_statements():after :017:    }
DEBUG:refactor.py:147:format_content_statements():after :018:
DEBUG:refactor.py:018:find_start_last_index():1 line='class spell_yogg_saron_grim_reprisal : public SpellScriptLoader'
DEBUG:refactor.py:018:find_start_last_index():2 line='{'
DEBUG:refactor.py:018:find_start_last_index():3 line='public:'
DEBUG:refactor.py:018:find_start_last_index():4 line='    spell_yogg_saron_grim_reprisal() : SpellScriptLoader("spell_yogg_saron_grim_reprisal") { }'
DEBUG:refactor.py:018:find_start_last_index():5 line=''
DEBUG:refactor.py:018:find_start_last_index():6 line='    class spell_yogg_saron_grim_reprisal_AuraScript : public AuraScript'
DEBUG:refactor.py:018:find_start_last_index():7 line='    {'
DEBUG:refactor.py:018:find_start_last_index():8 line='        PrepareAuraScript(spell_yogg_saron_grim_reprisal_AuraScript);'
DEBUG:refactor.py:018:find_start_last_index():9 line=''
DEBUG:refactor.py:018:find_start_last_index():10 line='        bool Validate(SpellInfo const* /*spellInfo*/) override'
DEBUG:refactor.py:018:find_start_last_index():11 line='        {'
DEBUG:refactor.py:018:find_start_last_index():12 line='            return ValidateSpellInfo({ SPELL_GRIM_REPRISAL_DAMAGE });'
DEBUG:refactor.py:018:find_start_last_index():13 line='        }'
DEBUG:refactor.py:018:find_start_last_index():14 line=''
DEBUG:refactor.py:018:find_start_last_index():15 line='        void HandleProc(AuraEffect const* aurEff, ProcEventInfo& eventInfo)'
DEBUG:refactor.py:018:find_start_last_index():16 line='        {'
DEBUG:refactor.py:018:find_start_last_index():17 line='            DamageInfo* damageInfo = eventInfo.GetDamageInfo();'
DEBUG:refactor.py:018:find_start_last_index():18 line=''
DEBUG:refactor.py:018:find_start_last_index():19 line='            if (!damageInfo || !damageInfo->GetDamage())'
DEBUG:refactor.py:018:find_start_last_index():20 line='            {'
DEBUG:refactor.py:018:find_start_last_index():21 line='                return;'
DEBUG:refactor.py:018:find_start_last_index():22 line='            }'
DEBUG:refactor.py:018:find_start_last_index():23 line=''
DEBUG:refactor.py:018:find_start_last_index():24 line='            int32 damage = CalculatePct(static_cast<int32>(damageInfo->GetDamage()), 60);'
DEBUG:refactor.py:018:find_start_last_index():25 line='            GetTarget()->CastCustomSpell(SPELL_GRIM_REPRISAL_DAMAGE, SPELLVALUE_BASE_POINT0, damage, damageInfo->GetAttacker(), true, nullptr, aurEff);'
DEBUG:refactor.py:018:find_start_last_index():26 line='        }'
DEBUG:refactor.py:018:find_start_last_index():27 line=''
DEBUG:refactor.py:018:find_start_last_index():28 line='        void Register() override'
DEBUG:refactor.py:018:find_start_last_index():29 line='        {'
DEBUG:refactor.py:018:find_start_last_index():30 line='            OnEffectProc += AuraEffectProcFn(spell_yogg_saron_grim_reprisal_AuraScript::HandleProc, EFFECT_0, SPELL_AURA_DUMMY);'
DEBUG:refactor.py:018:find_start_last_index():31 line='        }'
DEBUG:refactor.py:018:find_start_last_index():32 line='    private:'
DEBUG:refactor.py:018:find_start_last_index():33 line='        uint8 someVariables;'
DEBUG:refactor.py:018:find_start_last_index():34 line='        bool anotherOne;'
DEBUG:refactor.py:018:find_start_last_index():35 line='    };'
DEBUG:refactor.py:018:find_start_last_index():36 line=''
DEBUG:refactor.py:018:find_start_last_index():37 line='    AuraScript* GetAuraScript() const override'
DEBUG:refactor.py:018:find_start_last_index():38 line='    {'
DEBUG:refactor.py:018:find_start_last_index():39 line='        return new spell_yogg_saron_grim_reprisal_AuraScript();'
DEBUG:refactor.py:018:find_start_last_index():40 line='    }'
DEBUG:refactor.py:018:find_start_last_index():41 line='};'
DEBUG:refactor.py:223:convert_function_block():start_index=1last_index=41
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:036:     get_script_type():AuraScript line='    class spell_yogg_saron_grim_reprisal_AuraScript : public AuraScript'
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:036:     get_script_type():AuraScript line='        PrepareAuraScript(spell_yogg_saron_grim_reprisal_AuraScript);'
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:036:     get_script_type():AuraScript line='            OnEffectProc += AuraEffectProcFn(spell_yogg_saron_grim_reprisal_AuraScript::HandleProc, EFFECT_0, SPELL_AURA_DUMMY);'
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:036:     get_script_type():AuraScript line='    AuraScript* GetAuraScript() const override'
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:036:     get_script_type():AuraScript line='        return new spell_yogg_saron_grim_reprisal_AuraScript();'
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:225:convert_function_block():script_type=<ScriptType.AURA: 1>
DEBUG:refactor.py:027: find_name_of_script():name='spell_yogg_saron_grim_reprisal'
DEBUG:refactor.py:228:convert_function_block():script_name='spell_yogg_saron_grim_reprisal'
DEBUG:refactor.py:054:find_register_start_end_index():start_index=0
DEBUG:refactor.py:056:find_register_start_end_index():000;class spell_yogg_saron_grim_reprisal : public SpellScriptLoader
DEBUG:refactor.py:056:find_register_start_end_index():001;{
DEBUG:refactor.py:056:find_register_start_end_index():002;public:
DEBUG:refactor.py:056:find_register_start_end_index():003;    spell_yogg_saron_grim_reprisal() : SpellScriptLoader("spell_yogg_saron_grim_reprisal") { }
DEBUG:refactor.py:056:find_register_start_end_index():004;
DEBUG:refactor.py:056:find_register_start_end_index():005;    class spell_yogg_saron_grim_reprisal_AuraScript : public AuraScript
DEBUG:refactor.py:056:find_register_start_end_index():006;    {
DEBUG:refactor.py:056:find_register_start_end_index():007;        PrepareAuraScript(spell_yogg_saron_grim_reprisal_AuraScript);
DEBUG:refactor.py:056:find_register_start_end_index():008;
DEBUG:refactor.py:056:find_register_start_end_index():009;        bool Validate(SpellInfo const* /*spellInfo*/) override
DEBUG:refactor.py:056:find_register_start_end_index():010;        {
DEBUG:refactor.py:056:find_register_start_end_index():011;            return ValidateSpellInfo({ SPELL_GRIM_REPRISAL_DAMAGE });
DEBUG:refactor.py:056:find_register_start_end_index():012;        }
DEBUG:refactor.py:056:find_register_start_end_index():013;
DEBUG:refactor.py:056:find_register_start_end_index():014;        void HandleProc(AuraEffect const* aurEff, ProcEventInfo& eventInfo)
DEBUG:refactor.py:056:find_register_start_end_index():015;        {
DEBUG:refactor.py:056:find_register_start_end_index():016;            DamageInfo* damageInfo = eventInfo.GetDamageInfo();
DEBUG:refactor.py:056:find_register_start_end_index():017;
DEBUG:refactor.py:056:find_register_start_end_index():018;            if (!damageInfo || !damageInfo->GetDamage())
DEBUG:refactor.py:056:find_register_start_end_index():019;            {
DEBUG:refactor.py:056:find_register_start_end_index():020;                return;
DEBUG:refactor.py:056:find_register_start_end_index():021;            }
DEBUG:refactor.py:056:find_register_start_end_index():022;
DEBUG:refactor.py:056:find_register_start_end_index():023;            int32 damage = CalculatePct(static_cast<int32>(damageInfo->GetDamage()), 60);
DEBUG:refactor.py:056:find_register_start_end_index():024;            GetTarget()->CastCustomSpell(SPELL_GRIM_REPRISAL_DAMAGE, SPELLVALUE_BASE_POINT0, damage, damageInfo->GetAttacker(), true, nullptr, aurEff);
DEBUG:refactor.py:056:find_register_start_end_index():025;        }
DEBUG:refactor.py:056:find_register_start_end_index():026;
DEBUG:refactor.py:056:find_register_start_end_index():027;        void Register() override
DEBUG:refactor.py:056:find_register_start_end_index():028;        {
DEBUG:refactor.py:056:find_register_start_end_index():029;            OnEffectProc += AuraEffectProcFn(spell_yogg_saron_grim_reprisal_AuraScript::HandleProc, EFFECT_0, SPELL_AURA_DUMMY);
DEBUG:refactor.py:056:find_register_start_end_index():030;        }
DEBUG:refactor.py:063:find_register_start_end_index():27;27         void Register() override
DEBUG:refactor.py:064:find_register_start_end_index():30;30         }
DEBUG:refactor.py:072:find_register_statements():28;31
DEBUG:refactor.py:074:find_register_statements():000:            OnEffectProc += AuraEffectProcFn(spell_yogg_saron_grim_reprisal_AuraScript::HandleProc, EFFECT_0, SPELL_AURA_DUMMY);
DEBUG:refactor.py:088:format_register_statements():before:000:            OnEffectProc += AuraEffectProcFn(spell_yogg_saron_grim_reprisal_AuraScript::HandleProc, EFFECT_0, SPELL_AURA_DUMMY);
DEBUG:refactor.py:090:format_register_statements():after :000:        OnEffectProc += AuraEffectProcFn(spell_yogg_saron_grim_reprisal_aura::HandleProc, EFFECT_0, SPELL_AURA_DUMMY);
DEBUG:refactor.py:103:find_content_start_end_index():absolute_start=7,absolute_end=27
DEBUG:refactor.py:145:format_content_statements():before:000:
DEBUG:refactor.py:145:format_content_statements():before:001:        bool Validate(SpellInfo const* /*spellInfo*/) override
DEBUG:refactor.py:145:format_content_statements():before:002:        {
DEBUG:refactor.py:145:format_content_statements():before:003:            return ValidateSpellInfo({ SPELL_GRIM_REPRISAL_DAMAGE });
DEBUG:refactor.py:145:format_content_statements():before:004:        }
DEBUG:refactor.py:145:format_content_statements():before:005:
DEBUG:refactor.py:145:format_content_statements():before:006:        void HandleProc(AuraEffect const* aurEff, ProcEventInfo& eventInfo)
DEBUG:refactor.py:145:format_content_statements():before:007:        {
DEBUG:refactor.py:145:format_content_statements():before:008:            DamageInfo* damageInfo = eventInfo.GetDamageInfo();
DEBUG:refactor.py:145:format_content_statements():before:009:
DEBUG:refactor.py:145:format_content_statements():before:010:            if (!damageInfo || !damageInfo->GetDamage())
DEBUG:refactor.py:145:format_content_statements():before:011:            {
DEBUG:refactor.py:145:format_content_statements():before:012:                return;
DEBUG:refactor.py:145:format_content_statements():before:013:            }
DEBUG:refactor.py:145:format_content_statements():before:014:
DEBUG:refactor.py:145:format_content_statements():before:015:            int32 damage = CalculatePct(static_cast<int32>(damageInfo->GetDamage()), 60);
DEBUG:refactor.py:145:format_content_statements():before:016:            GetTarget()->CastCustomSpell(SPELL_GRIM_REPRISAL_DAMAGE, SPELLVALUE_BASE_POINT0, damage, damageInfo->GetAttacker(), true, nullptr, aurEff);
DEBUG:refactor.py:145:format_content_statements():before:017:        }
DEBUG:refactor.py:145:format_content_statements():before:018:
DEBUG:refactor.py:147:format_content_statements():after :000:
DEBUG:refactor.py:147:format_content_statements():after :001:    bool Validate(SpellInfo const* /*spellInfo*/) override
DEBUG:refactor.py:147:format_content_statements():after :002:    {
DEBUG:refactor.py:147:format_content_statements():after :003:        return ValidateSpellInfo({ SPELL_GRIM_REPRISAL_DAMAGE });
DEBUG:refactor.py:147:format_content_statements():after :004:    }
DEBUG:refactor.py:147:format_content_statements():after :005:
DEBUG:refactor.py:147:format_content_statements():after :006:    void HandleProc(AuraEffect const* aurEff, ProcEventInfo& eventInfo)
DEBUG:refactor.py:147:format_content_statements():after :007:    {
DEBUG:refactor.py:147:format_content_statements():after :008:        DamageInfo* damageInfo = eventInfo.GetDamageInfo();
DEBUG:refactor.py:147:format_content_statements():after :009:
DEBUG:refactor.py:147:format_content_statements():after :010:        if (!damageInfo || !damageInfo->GetDamage())
DEBUG:refactor.py:147:format_content_statements():after :011:        {
DEBUG:refactor.py:147:format_content_statements():after :012:            return;
DEBUG:refactor.py:147:format_content_statements():after :013:        }
DEBUG:refactor.py:147:format_content_statements():after :014:
DEBUG:refactor.py:147:format_content_statements():after :015:        int32 damage = CalculatePct(static_cast<int32>(damageInfo->GetDamage()), 60);
DEBUG:refactor.py:147:format_content_statements():after :016:        GetTarget()->CastCustomSpell(SPELL_GRIM_REPRISAL_DAMAGE, SPELLVALUE_BASE_POINT0, damage, damageInfo->GetAttacker(), true, nullptr, aurEff);
DEBUG:refactor.py:147:format_content_statements():after :017:    }
DEBUG:refactor.py:147:format_content_statements():after :018:
DEBUG:refactor.py:119:      find_variables():HERE 32
DEBUG:refactor.py:120:      find_variables():    private:
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:000:class spell_yogg_saron_grim_reprisal : public SpellScriptLoader
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:001:{
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:002:public:
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:003:    spell_yogg_saron_grim_reprisal() : SpellScriptLoader("spell_yogg_saron_grim_reprisal") { }
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:004:
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:005:    class spell_yogg_saron_grim_reprisal_AuraScript : public AuraScript
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:006:    {
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:007:        PrepareAuraScript(spell_yogg_saron_grim_reprisal_AuraScript);
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:008:
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:009:        bool Validate(SpellInfo const* /*spellInfo*/) override
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:010:        {
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:011:            return ValidateSpellInfo({ SPELL_GRIM_REPRISAL_DAMAGE });
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:012:        }
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:013:
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:014:        void HandleProc(AuraEffect const* aurEff, ProcEventInfo& eventInfo)
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:015:        {
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:016:            DamageInfo* damageInfo = eventInfo.GetDamageInfo();
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:017:
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:018:            if (!damageInfo || !damageInfo->GetDamage())
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:019:            {
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:020:                return;
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:021:            }
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:022:
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:023:            int32 damage = CalculatePct(static_cast<int32>(damageInfo->GetDamage()), 60);
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:024:            GetTarget()->CastCustomSpell(SPELL_GRIM_REPRISAL_DAMAGE, SPELLVALUE_BASE_POINT0, damage, damageInfo->GetAttacker(), true, nullptr, aurEff);
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:025:        }
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:026:
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:027:        void Register() override
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:028:        {
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:029:            OnEffectProc += AuraEffectProcFn(spell_yogg_saron_grim_reprisal_AuraScript::HandleProc, EFFECT_0, SPELL_AURA_DUMMY);
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:030:        }
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:031:    private:
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:032:        uint8 someVariables;
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:033:        bool anotherOne;
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:034:    };
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:035:
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:036:    AuraScript* GetAuraScript() const override
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:037:    {
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:038:        return new spell_yogg_saron_grim_reprisal_AuraScript();
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:039:    }
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:040:};
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :000:class spell_yogg_saron_grim_reprisal_aura : public AuraScript
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :001:{
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :002:    PrepareAuraScript(spell_yogg_saron_grim_reprisal_aura);
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :003:
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :004:    bool Validate(SpellInfo const* /*spellInfo*/) override
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :005:    {
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :006:        return ValidateSpellInfo({ SPELL_GRIM_REPRISAL_DAMAGE });
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :007:    }
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :008:
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :009:    void HandleProc(AuraEffect const* aurEff, ProcEventInfo& eventInfo)
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :010:    {
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :011:        DamageInfo* damageInfo = eventInfo.GetDamageInfo();
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :012:
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :013:        if (!damageInfo || !damageInfo->GetDamage())
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :014:        {
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :015:            return;
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :016:        }
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :017:
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :018:        int32 damage = CalculatePct(static_cast<int32>(damageInfo->GetDamage()), 60);
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :019:        GetTarget()->CastCustomSpell(SPELL_GRIM_REPRISAL_DAMAGE, SPELLVALUE_BASE_POINT0, damage, damageInfo->GetAttacker(), true, nullptr, aurEff);
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :020:    }
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :021:
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :022:    void Register() override
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :023:    {
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :024:        OnEffectProc += AuraEffectProcFn(spell_yogg_saron_grim_reprisal_aura::HandleProc, EFFECT_0, SPELL_AURA_DUMMY);
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :025:    }
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :026:
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :027:private:
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :028:    uint8 someVariables;
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :029:    bool anotherOne;
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :030:};
INFO:refactor.py:263:format_first_block_in_file():path_in='tests/test_write_replace_file/boss_yoggsaron_read.cpp'
INFO:refactor.py:264:format_first_block_in_file():path_out='tests/test_write_replace_file/boss_yoggsaron_write.cpp'
DEBUG:refactor.py:268:format_first_block_in_file():len(lines)=3082 path_in='tests/test_write_replace_file/boss_yoggsaron_read.cpp'
DEBUG:refactor.py:018:find_start_last_index():2234 line='class spell_yogg_saron_malady_of_the_mind : public SpellScriptLoader'
DEBUG:refactor.py:018:find_start_last_index():2235 line='{'
DEBUG:refactor.py:018:find_start_last_index():2236 line='public:'
DEBUG:refactor.py:018:find_start_last_index():2237 line='    spell_yogg_saron_malady_of_the_mind() : SpellScriptLoader("spell_yogg_saron_malady_of_the_mind") { }'
DEBUG:refactor.py:018:find_start_last_index():2238 line=''
DEBUG:refactor.py:018:find_start_last_index():2239 line='    class spell_yogg_saron_malady_of_the_mind_AuraScript : public AuraScript'
DEBUG:refactor.py:018:find_start_last_index():2240 line='    {'
DEBUG:refactor.py:018:find_start_last_index():2241 line='        PrepareAuraScript(spell_yogg_saron_malady_of_the_mind_AuraScript);'
DEBUG:refactor.py:018:find_start_last_index():2242 line=''
DEBUG:refactor.py:018:find_start_last_index():2243 line='        void OnApply(AuraEffect const* /*aurEff*/, AuraEffectHandleModes /*mode*/)'
DEBUG:refactor.py:018:find_start_last_index():2244 line='        {'
DEBUG:refactor.py:018:find_start_last_index():2245 line='            GetUnitOwner()->ApplySpellImmune(SPELL_DEATH_RAY_DAMAGE_REAL, IMMUNITY_ID, SPELL_DEATH_RAY_DAMAGE_REAL, true);'
DEBUG:refactor.py:018:find_start_last_index():2246 line='        }'
DEBUG:refactor.py:018:find_start_last_index():2247 line=''
DEBUG:refactor.py:018:find_start_last_index():2248 line='        void OnRemove(AuraEffect const* /*aurEff*/, AuraEffectHandleModes /*mode*/)'
DEBUG:refactor.py:018:find_start_last_index():2249 line='        {'
DEBUG:refactor.py:018:find_start_last_index():2250 line='            GetUnitOwner()->ApplySpellImmune(SPELL_DEATH_RAY_DAMAGE_REAL, IMMUNITY_ID, SPELL_DEATH_RAY_DAMAGE_REAL, false);'
DEBUG:refactor.py:018:find_start_last_index():2251 line='            GetUnitOwner()->CastCustomSpell(SPELL_MALADY_OF_THE_MIND_TRIGGER, SPELLVALUE_MAX_TARGETS, 1, GetUnitOwner(), true);'
DEBUG:refactor.py:018:find_start_last_index():2252 line='        }'
DEBUG:refactor.py:018:find_start_last_index():2253 line=''
DEBUG:refactor.py:018:find_start_last_index():2254 line='        void Register() override'
DEBUG:refactor.py:018:find_start_last_index():2255 line='        {'
DEBUG:refactor.py:018:find_start_last_index():2256 line='            OnEffectApply += AuraEffectApplyFn(spell_yogg_saron_malady_of_the_mind_AuraScript::OnApply, EFFECT_1, SPELL_AURA_MOD_FEAR, AURA_EFFECT_HANDLE_REAL);'
DEBUG:refactor.py:018:find_start_last_index():2257 line='            OnEffectRemove += AuraEffectRemoveFn(spell_yogg_saron_malady_of_the_mind_AuraScript::OnRemove, EFFECT_1, SPELL_AURA_MOD_FEAR, AURA_EFFECT_HANDLE_REAL);'
DEBUG:refactor.py:018:find_start_last_index():2258 line='        }'
DEBUG:refactor.py:018:find_start_last_index():2259 line='    };'
DEBUG:refactor.py:018:find_start_last_index():2260 line=''
DEBUG:refactor.py:018:find_start_last_index():2261 line='    AuraScript* GetAuraScript() const override'
DEBUG:refactor.py:018:find_start_last_index():2262 line='    {'
DEBUG:refactor.py:018:find_start_last_index():2263 line='        return new spell_yogg_saron_malady_of_the_mind_AuraScript();'
DEBUG:refactor.py:018:find_start_last_index():2264 line='    }'
DEBUG:refactor.py:018:find_start_last_index():2265 line='};'
DEBUG:refactor.py:223:convert_function_block():start_index=2234last_index=2265
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:036:     get_script_type():AuraScript line='    class spell_yogg_saron_malady_of_the_mind_AuraScript : public AuraScript'
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:036:     get_script_type():AuraScript line='        PrepareAuraScript(spell_yogg_saron_malady_of_the_mind_AuraScript);'
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:036:     get_script_type():AuraScript line='            OnEffectApply += AuraEffectApplyFn(spell_yogg_saron_malady_of_the_mind_AuraScript::OnApply, EFFECT_1, SPELL_AURA_MOD_FEAR, AURA_EFFECT_HANDLE_REAL);'
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:036:     get_script_type():AuraScript line='            OnEffectRemove += AuraEffectRemoveFn(spell_yogg_saron_malady_of_the_mind_AuraScript::OnRemove, EFFECT_1, SPELL_AURA_MOD_FEAR, AURA_EFFECT_HANDLE_REAL);'
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:036:     get_script_type():AuraScript line='    AuraScript* GetAuraScript() const override'
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:036:     get_script_type():AuraScript line='        return new spell_yogg_saron_malady_of_the_mind_AuraScript();'
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:225:convert_function_block():script_type=<ScriptType.AURA: 1>
DEBUG:refactor.py:027: find_name_of_script():name='spell_yogg_saron_malady_of_the_mind'
DEBUG:refactor.py:228:convert_function_block():script_name='spell_yogg_saron_malady_of_the_mind'
DEBUG:refactor.py:054:find_register_start_end_index():start_index=0
DEBUG:refactor.py:056:find_register_start_end_index():000;class spell_yogg_saron_malady_of_the_mind : public SpellScriptLoader
DEBUG:refactor.py:056:find_register_start_end_index():001;{
DEBUG:refactor.py:056:find_register_start_end_index():002;public:
DEBUG:refactor.py:056:find_register_start_end_index():003;    spell_yogg_saron_malady_of_the_mind() : SpellScriptLoader("spell_yogg_saron_malady_of_the_mind") { }
DEBUG:refactor.py:056:find_register_start_end_index():004;
DEBUG:refactor.py:056:find_register_start_end_index():005;    class spell_yogg_saron_malady_of_the_mind_AuraScript : public AuraScript
DEBUG:refactor.py:056:find_register_start_end_index():006;    {
DEBUG:refactor.py:056:find_register_start_end_index():007;        PrepareAuraScript(spell_yogg_saron_malady_of_the_mind_AuraScript);
DEBUG:refactor.py:056:find_register_start_end_index():008;
DEBUG:refactor.py:056:find_register_start_end_index():009;        void OnApply(AuraEffect const* /*aurEff*/, AuraEffectHandleModes /*mode*/)
DEBUG:refactor.py:056:find_register_start_end_index():010;        {
DEBUG:refactor.py:056:find_register_start_end_index():011;            GetUnitOwner()->ApplySpellImmune(SPELL_DEATH_RAY_DAMAGE_REAL, IMMUNITY_ID, SPELL_DEATH_RAY_DAMAGE_REAL, true);
DEBUG:refactor.py:056:find_register_start_end_index():012;        }
DEBUG:refactor.py:056:find_register_start_end_index():013;
DEBUG:refactor.py:056:find_register_start_end_index():014;        void OnRemove(AuraEffect const* /*aurEff*/, AuraEffectHandleModes /*mode*/)
DEBUG:refactor.py:056:find_register_start_end_index():015;        {
DEBUG:refactor.py:056:find_register_start_end_index():016;            GetUnitOwner()->ApplySpellImmune(SPELL_DEATH_RAY_DAMAGE_REAL, IMMUNITY_ID, SPELL_DEATH_RAY_DAMAGE_REAL, false);
DEBUG:refactor.py:056:find_register_start_end_index():017;            GetUnitOwner()->CastCustomSpell(SPELL_MALADY_OF_THE_MIND_TRIGGER, SPELLVALUE_MAX_TARGETS, 1, GetUnitOwner(), true);
DEBUG:refactor.py:056:find_register_start_end_index():018;        }
DEBUG:refactor.py:056:find_register_start_end_index():019;
DEBUG:refactor.py:056:find_register_start_end_index():020;        void Register() override
DEBUG:refactor.py:056:find_register_start_end_index():021;        {
DEBUG:refactor.py:056:find_register_start_end_index():022;            OnEffectApply += AuraEffectApplyFn(spell_yogg_saron_malady_of_the_mind_AuraScript::OnApply, EFFECT_1, SPELL_AURA_MOD_FEAR, AURA_EFFECT_HANDLE_REAL);
DEBUG:refactor.py:056:find_register_start_end_index():023;            OnEffectRemove += AuraEffectRemoveFn(spell_yogg_saron_malady_of_the_mind_AuraScript::OnRemove, EFFECT_1, SPELL_AURA_MOD_FEAR, AURA_EFFECT_HANDLE_REAL);
DEBUG:refactor.py:056:find_register_start_end_index():024;        }
DEBUG:refactor.py:063:find_register_start_end_index():20;20         void Register() override
DEBUG:refactor.py:064:find_register_start_end_index():24;24         }
DEBUG:refactor.py:072:find_register_statements():2254;2258
DEBUG:refactor.py:074:find_register_statements():000:            OnEffectApply += AuraEffectApplyFn(spell_yogg_saron_malady_of_the_mind_AuraScript::OnApply, EFFECT_1, SPELL_AURA_MOD_FEAR, AURA_EFFECT_HANDLE_REAL);
DEBUG:refactor.py:074:find_register_statements():001:            OnEffectRemove += AuraEffectRemoveFn(spell_yogg_saron_malady_of_the_mind_AuraScript::OnRemove, EFFECT_1, SPELL_AURA_MOD_FEAR, AURA_EFFECT_HANDLE_REAL);
DEBUG:refactor.py:088:format_register_statements():before:000:            OnEffectApply += AuraEffectApplyFn(spell_yogg_saron_malady_of_the_mind_AuraScript::OnApply, EFFECT_1, SPELL_AURA_MOD_FEAR, AURA_EFFECT_HANDLE_REAL);
DEBUG:refactor.py:088:format_register_statements():before:001:            OnEffectRemove += AuraEffectRemoveFn(spell_yogg_saron_malady_of_the_mind_AuraScript::OnRemove, EFFECT_1, SPELL_AURA_MOD_FEAR, AURA_EFFECT_HANDLE_REAL);
DEBUG:refactor.py:090:format_register_statements():after :000:        OnEffectApply += AuraEffectApplyFn(spell_yogg_saron_malady_of_the_mind_aura::OnApply, EFFECT_1, SPELL_AURA_MOD_FEAR, AURA_EFFECT_HANDLE_REAL);
DEBUG:refactor.py:090:format_register_statements():after :001:        OnEffectRemove += AuraEffectRemoveFn(spell_yogg_saron_malady_of_the_mind_aura::OnRemove, EFFECT_1, SPELL_AURA_MOD_FEAR, AURA_EFFECT_HANDLE_REAL);
DEBUG:refactor.py:103:find_content_start_end_index():absolute_start=7,absolute_end=20
DEBUG:refactor.py:145:format_content_statements():before:000:
DEBUG:refactor.py:145:format_content_statements():before:001:        void OnApply(AuraEffect const* /*aurEff*/, AuraEffectHandleModes /*mode*/)
DEBUG:refactor.py:145:format_content_statements():before:002:        {
DEBUG:refactor.py:145:format_content_statements():before:003:            GetUnitOwner()->ApplySpellImmune(SPELL_DEATH_RAY_DAMAGE_REAL, IMMUNITY_ID, SPELL_DEATH_RAY_DAMAGE_REAL, true);
DEBUG:refactor.py:145:format_content_statements():before:004:        }
DEBUG:refactor.py:145:format_content_statements():before:005:
DEBUG:refactor.py:145:format_content_statements():before:006:        void OnRemove(AuraEffect const* /*aurEff*/, AuraEffectHandleModes /*mode*/)
DEBUG:refactor.py:145:format_content_statements():before:007:        {
DEBUG:refactor.py:145:format_content_statements():before:008:            GetUnitOwner()->ApplySpellImmune(SPELL_DEATH_RAY_DAMAGE_REAL, IMMUNITY_ID, SPELL_DEATH_RAY_DAMAGE_REAL, false);
DEBUG:refactor.py:145:format_content_statements():before:009:            GetUnitOwner()->CastCustomSpell(SPELL_MALADY_OF_THE_MIND_TRIGGER, SPELLVALUE_MAX_TARGETS, 1, GetUnitOwner(), true);
DEBUG:refactor.py:145:format_content_statements():before:010:        }
DEBUG:refactor.py:145:format_content_statements():before:011:
DEBUG:refactor.py:147:format_content_statements():after :000:
DEBUG:refactor.py:147:format_content_statements():after :001:    void OnApply(AuraEffect const* /*aurEff*/, AuraEffectHandleModes /*mode*/)
DEBUG:refactor.py:147:format_content_statements():after :002:    {
DEBUG:refactor.py:147:format_content_statements():after :003:        GetUnitOwner()->ApplySpellImmune(SPELL_DEATH_RAY_DAMAGE_REAL, IMMUNITY_ID, SPELL_DEATH_RAY_DAMAGE_REAL, true);
DEBUG:refactor.py:147:format_content_statements():after :004:    }
DEBUG:refactor.py:147:format_content_statements():after :005:
DEBUG:refactor.py:147:format_content_statements():after :006:    void OnRemove(AuraEffect const* /*aurEff*/, AuraEffectHandleModes /*mode*/)
DEBUG:refactor.py:147:format_content_statements():after :007:    {
DEBUG:refactor.py:147:format_content_statements():after :008:        GetUnitOwner()->ApplySpellImmune(SPELL_DEATH_RAY_DAMAGE_REAL, IMMUNITY_ID, SPELL_DEATH_RAY_DAMAGE_REAL, false);
DEBUG:refactor.py:147:format_content_statements():after :009:        GetUnitOwner()->CastCustomSpell(SPELL_MALADY_OF_THE_MIND_TRIGGER, SPELLVALUE_MAX_TARGETS, 1, GetUnitOwner(), true);
DEBUG:refactor.py:147:format_content_statements():after :010:    }
DEBUG:refactor.py:147:format_content_statements():after :011:
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:000:class spell_yogg_saron_malady_of_the_mind : public SpellScriptLoader
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:001:{
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:002:public:
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:003:    spell_yogg_saron_malady_of_the_mind() : SpellScriptLoader("spell_yogg_saron_malady_of_the_mind") { }
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:004:
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:005:    class spell_yogg_saron_malady_of_the_mind_AuraScript : public AuraScript
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:006:    {
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:007:        PrepareAuraScript(spell_yogg_saron_malady_of_the_mind_AuraScript);
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:008:
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:009:        void OnApply(AuraEffect const* /*aurEff*/, AuraEffectHandleModes /*mode*/)
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:010:        {
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:011:            GetUnitOwner()->ApplySpellImmune(SPELL_DEATH_RAY_DAMAGE_REAL, IMMUNITY_ID, SPELL_DEATH_RAY_DAMAGE_REAL, true);
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:012:        }
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:013:
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:014:        void OnRemove(AuraEffect const* /*aurEff*/, AuraEffectHandleModes /*mode*/)
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:015:        {
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:016:            GetUnitOwner()->ApplySpellImmune(SPELL_DEATH_RAY_DAMAGE_REAL, IMMUNITY_ID, SPELL_DEATH_RAY_DAMAGE_REAL, false);
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:017:            GetUnitOwner()->CastCustomSpell(SPELL_MALADY_OF_THE_MIND_TRIGGER, SPELLVALUE_MAX_TARGETS, 1, GetUnitOwner(), true);
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:018:        }
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:019:
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:020:        void Register() override
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:021:        {
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:022:            OnEffectApply += AuraEffectApplyFn(spell_yogg_saron_malady_of_the_mind_AuraScript::OnApply, EFFECT_1, SPELL_AURA_MOD_FEAR, AURA_EFFECT_HANDLE_REAL);
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:023:            OnEffectRemove += AuraEffectRemoveFn(spell_yogg_saron_malady_of_the_mind_AuraScript::OnRemove, EFFECT_1, SPELL_AURA_MOD_FEAR, AURA_EFFECT_HANDLE_REAL);
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:024:        }
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:025:    };
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:026:
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:027:    AuraScript* GetAuraScript() const override
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:028:    {
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:029:        return new spell_yogg_saron_malady_of_the_mind_AuraScript();
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:030:    }
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:031:};
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :000:class spell_yogg_saron_malady_of_the_mind_aura : public AuraScript
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :001:{
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :002:    PrepareAuraScript(spell_yogg_saron_malady_of_the_mind_aura);
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :003:
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :004:    void OnApply(AuraEffect const* /*aurEff*/, AuraEffectHandleModes /*mode*/)
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :005:    {
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :006:        GetUnitOwner()->ApplySpellImmune(SPELL_DEATH_RAY_DAMAGE_REAL, IMMUNITY_ID, SPELL_DEATH_RAY_DAMAGE_REAL, true);
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :007:    }
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :008:
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :009:    void OnRemove(AuraEffect const* /*aurEff*/, AuraEffectHandleModes /*mode*/)
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :010:    {
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :011:        GetUnitOwner()->ApplySpellImmune(SPELL_DEATH_RAY_DAMAGE_REAL, IMMUNITY_ID, SPELL_DEATH_RAY_DAMAGE_REAL, false);
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :012:        GetUnitOwner()->CastCustomSpell(SPELL_MALADY_OF_THE_MIND_TRIGGER, SPELLVALUE_MAX_TARGETS, 1, GetUnitOwner(), true);
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :013:    }
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :014:
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :015:    void Register() override
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :016:    {
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :017:        OnEffectApply += AuraEffectApplyFn(spell_yogg_saron_malady_of_the_mind_aura::OnApply, EFFECT_1, SPELL_AURA_MOD_FEAR, AURA_EFFECT_HANDLE_REAL);
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :018:        OnEffectRemove += AuraEffectRemoveFn(spell_yogg_saron_malady_of_the_mind_aura::OnRemove, EFFECT_1, SPELL_AURA_MOD_FEAR, AURA_EFFECT_HANDLE_REAL);
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :019:    }
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :020:};
DEBUG:refactor.py:246:format_RegisterSpellScript():register_statement='    RegisterSpellScript(spell_yogg_saron_malady_of_the_mind_aura);'
DEBUG:refactor.py:255:replace_new_with_RegisterSpellScript():script_name_search='new spell_yogg_saron_malady_of_the_mind'
DEBUG:refactor.py:256:replace_new_with_RegisterSpellScript():script_name='spell_yogg_saron_malady_of_the_mind_aura'
DEBUG:refactor.py:257:replace_new_with_RegisterSpellScript():before:    RegisterSpellScript(spell_yogg_saron_malady_of_the_mind_aura);
DEBUG:refactor.py:258:replace_new_with_RegisterSpellScript():after :    RegisterSpellScript(spell_yogg_saron_malady_of_the_mind_aura);
DEBUG:refactor.py:277:format_first_block_in_file():000:/*
DEBUG:refactor.py:277:format_first_block_in_file():001: * This file is part of the AzerothCore Project. See AUTHORS file for Copyright information
DEBUG:refactor.py:277:format_first_block_in_file():002: *
DEBUG:refactor.py:277:format_first_block_in_file():003: * This program is free software; you can redistribute it and/or modify it
DEBUG:refactor.py:277:format_first_block_in_file():004: * under the terms of the GNU Affero General Public License as published by the
DEBUG:refactor.py:277:format_first_block_in_file():005: * Free Software Foundation; either version 3 of the License, or (at your
DEBUG:refactor.py:277:format_first_block_in_file():006: * option) any later version.
DEBUG:refactor.py:277:format_first_block_in_file():007: *
DEBUG:refactor.py:277:format_first_block_in_file():008: * This program is distributed in the hope that it will be useful, but WITHOUT
DEBUG:refactor.py:277:format_first_block_in_file():009: * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
DEBUG:refactor.py:277:format_first_block_in_file():010: * FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero General Public License for
DEBUG:refactor.py:277:format_first_block_in_file():011: * more details.
DEBUG:refactor.py:277:format_first_block_in_file():012: *
DEBUG:refactor.py:277:format_first_block_in_file():013: * You should have received a copy of the GNU General Public License along
DEBUG:refactor.py:277:format_first_block_in_file():014: * with this program. If not, see <http://www.gnu.org/licenses/>.
DEBUG:refactor.py:277:format_first_block_in_file():015: */
DEBUG:refactor.py:277:format_first_block_in_file():016:
DEBUG:refactor.py:277:format_first_block_in_file():017:#include "AchievementCriteriaScript.h"
DEBUG:refactor.py:277:format_first_block_in_file():018:#include "CreatureAI.h"
DEBUG:refactor.py:277:format_first_block_in_file():019:#include "CreatureScript.h"
DEBUG:refactor.py:277:format_first_block_in_file():020:#include "Object.h"
DEBUG:refactor.py:277:format_first_block_in_file():021:#include "Opcodes.h"
DEBUG:refactor.py:277:format_first_block_in_file():022:#include "PassiveAI.h"
DEBUG:refactor.py:277:format_first_block_in_file():023:#include "Player.h"
DEBUG:refactor.py:277:format_first_block_in_file():024:#include "ScriptedCreature.h"
DEBUG:refactor.py:277:format_first_block_in_file():025:#include "ScriptedEscortAI.h"
DEBUG:refactor.py:277:format_first_block_in_file():026:#include "SpellAuras.h"
DEBUG:refactor.py:277:format_first_block_in_file():027:#include "SpellScript.h"
DEBUG:refactor.py:277:format_first_block_in_file():028:#include "SpellScriptLoader.h"
DEBUG:refactor.py:277:format_first_block_in_file():029:#include "ulduar.h"
DEBUG:refactor.py:277:format_first_block_in_file():030:
DEBUG:refactor.py:277:format_first_block_in_file():031:enum YoggSpells
DEBUG:refactor.py:277:format_first_block_in_file():032:{
DEBUG:refactor.py:277:format_first_block_in_file():033:    // KEEPERS
DEBUG:refactor.py:277:format_first_block_in_file():034:    SPELL_KEEPER_ACTIVE                 = 62647,
DEBUG:refactor.py:277:format_first_block_in_file():035:    SPELL_MIMIRON_PASSIVE               = 62671,
DEBUG:refactor.py:277:format_first_block_in_file():036:    SPELL_THORIM_PASSIVE                = 62702,
DEBUG:refactor.py:277:format_first_block_in_file():037:    SPELL_HODIR_PASSIVE                 = 62650,
DEBUG:refactor.py:277:format_first_block_in_file():038:    SPELL_FREYA_PASSIVE                 = 62670,
DEBUG:refactor.py:277:format_first_block_in_file():039:
DEBUG:refactor.py:277:format_first_block_in_file():040:    SPELL_DESTABILIZATION_MATRIX        = 65206,
DEBUG:refactor.py:277:format_first_block_in_file():041:    SPELL_DESTABILIZATION_MATRIX_ATTACK = 65210,
DEBUG:refactor.py:277:format_first_block_in_file():042:    SPELL_SANITY_WELL_VISUAL            = 63288,
DEBUG:refactor.py:277:format_first_block_in_file():043:    SPELL_SANITY_WELL_BUFF              = 64169,
DEBUG:refactor.py:277:format_first_block_in_file():044:    SPELL_PROTECTIVE_GAZE               = 64174, // COOLDOWN 25 SECS BEFORE NEXT USE
DEBUG:refactor.py:277:format_first_block_in_file():045:    SPELL_HODIR_FLASH_FREEZE            = 64175,
DEBUG:refactor.py:277:format_first_block_in_file():046:    SPELL_CONJURE_SANITY_WELL           = 64170,
DEBUG:refactor.py:277:format_first_block_in_file():047:
DEBUG:refactor.py:277:format_first_block_in_file():048:    SPELL_TITANIC_STORM_PASSIVE         = 64171,
DEBUG:refactor.py:277:format_first_block_in_file():049:    SPELL_WEAKENED                      = 64162,
DEBUG:refactor.py:277:format_first_block_in_file():050:
DEBUG:refactor.py:277:format_first_block_in_file():051:    // GLOBAL
DEBUG:refactor.py:277:format_first_block_in_file():052:    SPELL_SANITY_BASE                   = 63786,
DEBUG:refactor.py:277:format_first_block_in_file():053:    SPELL_SANITY                        = 63050,
DEBUG:refactor.py:277:format_first_block_in_file():054:    SPELL_EXTINGUISH_ALL_LIFE           = 64166,
DEBUG:refactor.py:277:format_first_block_in_file():055:    SPELL_CLOUD_VISUAL                  = 63084,
DEBUG:refactor.py:277:format_first_block_in_file():056:    SPELL_SUMMON_GUARDIAN_OF_YS         = 63031,
DEBUG:refactor.py:277:format_first_block_in_file():057:    SPELL_INSANE1                       = 63120,
DEBUG:refactor.py:277:format_first_block_in_file():058:    SPELL_INSANE2                       = 64464,
DEBUG:refactor.py:277:format_first_block_in_file():059:    SPELL_INSANE_PERIODIC               = 64554, // this checks if player dc'ed and insanes him instantly after logging in
DEBUG:refactor.py:277:format_first_block_in_file():060:
DEBUG:refactor.py:277:format_first_block_in_file():061:    // SARA P1
DEBUG:refactor.py:277:format_first_block_in_file():062:    SPELL_SARAS_FAVOR                       = 63138,
DEBUG:refactor.py:277:format_first_block_in_file():063:    SPELL_SARAS_FAVOR_TARGET_SELECTOR       = 63747,
DEBUG:refactor.py:277:format_first_block_in_file():064:    SPELL_SARAS_BLESSING                    = 63134,
DEBUG:refactor.py:277:format_first_block_in_file():065:    SPELL_SARAS_BLESSING_TARGET_SELECTOR    = 63745,
DEBUG:refactor.py:277:format_first_block_in_file():066:    SPELL_SARAS_ANGER                       = 63147,
DEBUG:refactor.py:277:format_first_block_in_file():067:    SPELL_SARAS_ANGER_TARGET_SELECTOR       = 63744,
DEBUG:refactor.py:277:format_first_block_in_file():068:    SPELL_SHADOWY_BARRIER                   = 64775,
DEBUG:refactor.py:277:format_first_block_in_file():069:
DEBUG:refactor.py:277:format_first_block_in_file():070:    // GUARDIANS OF YOGG-SARON
DEBUG:refactor.py:277:format_first_block_in_file():071:    SPELL_SHADOW_NOVA                   = 62714,
DEBUG:refactor.py:277:format_first_block_in_file():072:    SPELL_DARK_VOLLEY                   = 63038,
DEBUG:refactor.py:277:format_first_block_in_file():073:
DEBUG:refactor.py:277:format_first_block_in_file():074:    // SARA P2
DEBUG:refactor.py:277:format_first_block_in_file():075:    SPELL_SARA_PSYCHOSIS_10             = 63795,
DEBUG:refactor.py:277:format_first_block_in_file():076:    SPELL_SARA_PSYCHOSIS_25             = 65301,
DEBUG:refactor.py:277:format_first_block_in_file():077:    SPELL_MALADY_OF_THE_MIND            = 63830,
DEBUG:refactor.py:277:format_first_block_in_file():078:    SPELL_MALADY_OF_THE_MIND_TRIGGER    = 63881,
DEBUG:refactor.py:277:format_first_block_in_file():079:    SPELL_BRAIN_LINK                    = 63802,
DEBUG:refactor.py:277:format_first_block_in_file():080:    SPELL_BRAIN_LINK_DAMAGE             = 63803,
DEBUG:refactor.py:277:format_first_block_in_file():081:    SPELL_BRAIN_LINK_OK                 = 63804,
DEBUG:refactor.py:277:format_first_block_in_file():082:
DEBUG:refactor.py:277:format_first_block_in_file():083:    SPELL_DEATH_RAY_DAMAGE_VISUAL       = 63886,
DEBUG:refactor.py:277:format_first_block_in_file():084:    SPELL_DEATH_RAY_ORIGIN_VISUAL       = 63893,
DEBUG:refactor.py:277:format_first_block_in_file():085:    SPELL_DEATH_RAY_WARNING             = 63882,
DEBUG:refactor.py:277:format_first_block_in_file():086:    SPELL_DEATH_RAY_DAMAGE              = 63883,
DEBUG:refactor.py:277:format_first_block_in_file():087:    SPELL_DEATH_RAY_DAMAGE_REAL         = 63884,
DEBUG:refactor.py:277:format_first_block_in_file():088:
DEBUG:refactor.py:277:format_first_block_in_file():089:    // YOGG-SARON P2
DEBUG:refactor.py:277:format_first_block_in_file():090:    SPELL_SHADOW_BARRIER                = 63894,
DEBUG:refactor.py:277:format_first_block_in_file():091:    SPELL_KNOCK_AWAY                    = 64022,
DEBUG:refactor.py:277:format_first_block_in_file():092:
DEBUG:refactor.py:277:format_first_block_in_file():093:    // TENTACLES
DEBUG:refactor.py:277:format_first_block_in_file():094:    SPELL_VOID_ZONE_SMALL               = 64384,
DEBUG:refactor.py:277:format_first_block_in_file():095:    SPELL_VOID_ZONE_LARGE               = 64017,
DEBUG:refactor.py:277:format_first_block_in_file():096:    SPELL_TENTACLE_ERUPT                = 64144,
DEBUG:refactor.py:277:format_first_block_in_file():097:
DEBUG:refactor.py:277:format_first_block_in_file():098:    // CRUSHER TENTACLE
DEBUG:refactor.py:277:format_first_block_in_file():099:    SPELL_CRUSH                         = 64146,
DEBUG:refactor.py:277:format_first_block_in_file():100:    SPELL_DIMINISH_POWER                = 64145,
DEBUG:refactor.py:277:format_first_block_in_file():101:    SPELL_FOCUSED_ANGER                 = 57688,
DEBUG:refactor.py:277:format_first_block_in_file():102:
DEBUG:refactor.py:277:format_first_block_in_file():103:    // CONSTRICTOR TENTACLE
DEBUG:refactor.py:277:format_first_block_in_file():104:    SPELL_LUNGE                         = 64123,
DEBUG:refactor.py:277:format_first_block_in_file():105:    SPELL_SQUEEZE_10                    = 64125,
DEBUG:refactor.py:277:format_first_block_in_file():106:    SPELL_SQUEEZE_25                    = 64126,
DEBUG:refactor.py:277:format_first_block_in_file():107:
DEBUG:refactor.py:277:format_first_block_in_file():108:    // CORRUPTOR TENTACLE
DEBUG:refactor.py:277:format_first_block_in_file():109:    SPELL_APATHY                        = 64156,
DEBUG:refactor.py:277:format_first_block_in_file():110:    SPELL_BLACK_PLAGUE                  = 64153,
DEBUG:refactor.py:277:format_first_block_in_file():111:    SPELL_CURSE_OF_DOOM                 = 64157,
DEBUG:refactor.py:277:format_first_block_in_file():112:    SPELL_DRAINING_POISON               = 64152,
DEBUG:refactor.py:277:format_first_block_in_file():113:
DEBUG:refactor.py:277:format_first_block_in_file():114:    // MISC
DEBUG:refactor.py:277:format_first_block_in_file():115:    SPELL_REVEALED_TENTACLE             = 64012,
DEBUG:refactor.py:277:format_first_block_in_file():116:    SPELL_IN_THE_MAWS_OF_THE_OLD_GOD    = 64184,
DEBUG:refactor.py:277:format_first_block_in_file():117:
DEBUG:refactor.py:277:format_first_block_in_file():118:    // BRAIN OF YOGG-SARON
DEBUG:refactor.py:277:format_first_block_in_file():119:    SPELL_SHATTERED_ILLUSION            = 64173,
DEBUG:refactor.py:277:format_first_block_in_file():120:    SPELL_INDUCE_MADNESS                = 64059,
DEBUG:refactor.py:277:format_first_block_in_file():121:    SPELL_BRAIN_HURT_VISUAL             = 64361,
DEBUG:refactor.py:277:format_first_block_in_file():122:
DEBUG:refactor.py:277:format_first_block_in_file():123:    // PORTALS
DEBUG:refactor.py:277:format_first_block_in_file():124:    SPELL_TELEPORT_TO_CHAMBER           = 63997,
DEBUG:refactor.py:277:format_first_block_in_file():125:    SPELL_TELEPORT_TO_ICECROWN          = 63998,
DEBUG:refactor.py:277:format_first_block_in_file():126:    SPELL_TELEPORT_TO_STORMWIND         = 63989,
DEBUG:refactor.py:277:format_first_block_in_file():127:    SPELL_TELEPORT_BACK                 = 63992,
DEBUG:refactor.py:277:format_first_block_in_file():128:    SPELL_CANCEL_ILLUSION_AURA          = 63993,
DEBUG:refactor.py:277:format_first_block_in_file():129:
DEBUG:refactor.py:277:format_first_block_in_file():130:    // LAUGHING SKULL AND INFLUENCE TENTACLE AND OTHERS
DEBUG:refactor.py:277:format_first_block_in_file():131:    SPELL_LUNATIC_GAZE                  = 64167,
DEBUG:refactor.py:277:format_first_block_in_file():132:    SPELL_GRIM_REPRISAL                 = 63305,
DEBUG:refactor.py:277:format_first_block_in_file():133:    SPELL_GRIM_REPRISAL_DAMAGE          = 64039,
DEBUG:refactor.py:277:format_first_block_in_file():134:    SPELL_DEATHGRASP                    = 63037,
DEBUG:refactor.py:277:format_first_block_in_file():135:
DEBUG:refactor.py:277:format_first_block_in_file():136:    // YOGG-SARON P3
DEBUG:refactor.py:277:format_first_block_in_file():137:    SPELL_LUNATIC_GAZE_YS               = 64163,
DEBUG:refactor.py:277:format_first_block_in_file():138:    SPELL_DEAFENING_ROAR                = 64189,
DEBUG:refactor.py:277:format_first_block_in_file():139:    SPELL_SHADOW_BEACON                 = 64465,
DEBUG:refactor.py:277:format_first_block_in_file():140:
DEBUG:refactor.py:277:format_first_block_in_file():141:    // IMMORTAL GUARDIAN
DEBUG:refactor.py:277:format_first_block_in_file():142:    SPELL_SIMPLE_TELEPORT               = 64195,
DEBUG:refactor.py:277:format_first_block_in_file():143:    SPELL_EMPOWERED                     = 65294,
DEBUG:refactor.py:277:format_first_block_in_file():144:    SPELL_EMPOWERED_PASSIVE             = 64161,
DEBUG:refactor.py:277:format_first_block_in_file():145:    SPELL_DRAIN_LIFE_10                 = 64159,
DEBUG:refactor.py:277:format_first_block_in_file():146:    SPELL_DRAIN_LIFE_25                 = 64160,
DEBUG:refactor.py:277:format_first_block_in_file():147:    SPELL_RECENTLY_SPAWNED              = 64497,
DEBUG:refactor.py:277:format_first_block_in_file():148:};
DEBUG:refactor.py:277:format_first_block_in_file():149:
DEBUG:refactor.py:277:format_first_block_in_file():150:#define SPELL_PSYCHOSIS         RAID_MODE(SPELL_SARA_PSYCHOSIS_10, SPELL_SARA_PSYCHOSIS_25)
DEBUG:refactor.py:277:format_first_block_in_file():151:#define SPELL_SQUEEZE           RAID_MODE(SPELL_SQUEEZE_10, SPELL_SQUEEZE_25)
DEBUG:refactor.py:277:format_first_block_in_file():152:#define SPELL_DRAIN_LIFE        RAID_MODE(SPELL_DRAIN_LIFE_10, SPELL_DRAIN_LIFE_25)
DEBUG:refactor.py:277:format_first_block_in_file():153:
DEBUG:refactor.py:277:format_first_block_in_file():154:enum YoggEvents
DEBUG:refactor.py:277:format_first_block_in_file():155:{
DEBUG:refactor.py:277:format_first_block_in_file():156:    EVENT_SARA_P1_DOORS_CLOSE           = 1,
DEBUG:refactor.py:277:format_first_block_in_file():157:    EVENT_SARA_P1_SUMMON                = 2,
DEBUG:refactor.py:277:format_first_block_in_file():158:    EVENT_SARA_P1_SPELLS                = 3,
DEBUG:refactor.py:277:format_first_block_in_file():159:    EVENT_SARA_P1_BERSERK               = 4,
DEBUG:refactor.py:277:format_first_block_in_file():160:
DEBUG:refactor.py:277:format_first_block_in_file():161:    EVENT_SARA_P2_START                 = 10,
DEBUG:refactor.py:277:format_first_block_in_file():162:    EVENT_SARA_P2_SUMMON_T1             = 11,
DEBUG:refactor.py:277:format_first_block_in_file():163:    EVENT_SARA_P2_SUMMON_T2             = 12,
DEBUG:refactor.py:277:format_first_block_in_file():164:    EVENT_SARA_P2_SUMMON_T3             = 13,
DEBUG:refactor.py:277:format_first_block_in_file():165:    EVENT_SARA_P2_BRAIN_LINK            = 14,
DEBUG:refactor.py:277:format_first_block_in_file():166:    EVENT_SARA_P2_DEATH_RAY             = 15,
DEBUG:refactor.py:277:format_first_block_in_file():167:    EVENT_SARA_P2_MALADY                = 16,
DEBUG:refactor.py:277:format_first_block_in_file():168:    EVENT_SARA_P2_PSYCHOSIS             = 17,
DEBUG:refactor.py:277:format_first_block_in_file():169:    EVENT_SARA_P2_OPEN_PORTALS          = 18,
DEBUG:refactor.py:277:format_first_block_in_file():170:    EVENT_SARA_P2_REMOVE_STUN           = 19,
DEBUG:refactor.py:277:format_first_block_in_file():171:    EVENT_SARA_P2_SPAWN_START_TENTACLES = 20,
DEBUG:refactor.py:277:format_first_block_in_file():172:
DEBUG:refactor.py:277:format_first_block_in_file():173:    EVENT_YS_LUNATIC_GAZE               = 30,
DEBUG:refactor.py:277:format_first_block_in_file():174:    EVENT_YS_DEAFENING_ROAR             = 31,
DEBUG:refactor.py:277:format_first_block_in_file():175:    EVENT_YS_SUMMON_GUARDIAN            = 32,
DEBUG:refactor.py:277:format_first_block_in_file():176:    EVENT_YS_SHADOW_BEACON              = 33,
DEBUG:refactor.py:277:format_first_block_in_file():177:};
DEBUG:refactor.py:277:format_first_block_in_file():178:
DEBUG:refactor.py:277:format_first_block_in_file():179:enum NPCsGOs
DEBUG:refactor.py:277:format_first_block_in_file():180:{
DEBUG:refactor.py:277:format_first_block_in_file():181:    // NPCs
DEBUG:refactor.py:277:format_first_block_in_file():182:    NPC_OMINOUS_CLOUD                   = 33292,
DEBUG:refactor.py:277:format_first_block_in_file():183:    NPC_GUARDIAN_OF_YS                  = 33136,
DEBUG:refactor.py:277:format_first_block_in_file():184:    NPC_SANITY_WELL                     = 33991,
DEBUG:refactor.py:277:format_first_block_in_file():185:    NPC_YOGG_SARON                      = 33288,
DEBUG:refactor.py:277:format_first_block_in_file():186:    NPC_VOICE_OF_YOGG_SARON             = 33280,
DEBUG:refactor.py:277:format_first_block_in_file():187:    NPC_YOGG_SARON_VISION               = 33552,
DEBUG:refactor.py:277:format_first_block_in_file():188:
DEBUG:refactor.py:277:format_first_block_in_file():189:    NPC_CRUSHER_TENTACLE                = 33966, // 50 secs ?
DEBUG:refactor.py:277:format_first_block_in_file():190:    NPC_CONSTRICTOR_TENTACLE            = 33983, // 15-20 secs ?
DEBUG:refactor.py:277:format_first_block_in_file():191:    NPC_CORRUPTOR_TENTACLE              = 33985, // 30-40 secs ?
DEBUG:refactor.py:277:format_first_block_in_file():192:
DEBUG:refactor.py:277:format_first_block_in_file():193:    NPC_INFLUENCE_TENTACLE              = 33943,
DEBUG:refactor.py:277:format_first_block_in_file():194:    NPC_DEATH_ORB                       = 33882,
DEBUG:refactor.py:277:format_first_block_in_file():195:    NPC_DESCEND_INTO_MADNESS            = 34072,
DEBUG:refactor.py:277:format_first_block_in_file():196:    NPC_LAUGHING_SKULL                  = 33990,
DEBUG:refactor.py:277:format_first_block_in_file():197:
DEBUG:refactor.py:277:format_first_block_in_file():198:    NPC_IMMORTAL_GUARDIAN               = 33988,
DEBUG:refactor.py:277:format_first_block_in_file():199:    NPC_MARKED_IMMORTAL_GUARDIAN        = 36064,
DEBUG:refactor.py:277:format_first_block_in_file():200:
DEBUG:refactor.py:277:format_first_block_in_file():201:    // CHAMBER ILLUSION
DEBUG:refactor.py:277:format_first_block_in_file():202:    NPC_CONSORT_FIRST                   = 33716,
DEBUG:refactor.py:277:format_first_block_in_file():203:    NPC_CONSORT_LAST                    = 33720,
DEBUG:refactor.py:277:format_first_block_in_file():204:    NPC_ALEXTRASZA                      = 33536,
DEBUG:refactor.py:277:format_first_block_in_file():205:    NPC_MALYGOS                         = 33535,
DEBUG:refactor.py:277:format_first_block_in_file():206:    NPC_NELTHARION                      = 33523,
DEBUG:refactor.py:277:format_first_block_in_file():207:    NPC_YSERA                           = 33495,
DEBUG:refactor.py:277:format_first_block_in_file():208:    GO_DRAGON_SOUL                      = 194462,
DEBUG:refactor.py:277:format_first_block_in_file():209:
DEBUG:refactor.py:277:format_first_block_in_file():210:    // ICECROWN ILLUSION
DEBUG:refactor.py:277:format_first_block_in_file():211:    NPC_DEATHSWORN_ZEALOT               = 33567,
DEBUG:refactor.py:277:format_first_block_in_file():212:    NPC_LICH_KING                       = 33441,
DEBUG:refactor.py:277:format_first_block_in_file():213:    NPC_IMMOLATED_CHAMPION              = 33442,
DEBUG:refactor.py:277:format_first_block_in_file():214:
DEBUG:refactor.py:277:format_first_block_in_file():215:    // STORMWIND ILLUSION
DEBUG:refactor.py:277:format_first_block_in_file():216:    NPC_SUIT_OF_ARMOR                   = 33433,
DEBUG:refactor.py:277:format_first_block_in_file():217:    NPC_GARONA                          = 33436,
DEBUG:refactor.py:277:format_first_block_in_file():218:    NPC_KING_LLANE                      = 33437,
DEBUG:refactor.py:277:format_first_block_in_file():219:
DEBUG:refactor.py:277:format_first_block_in_file():220:    // GOs
DEBUG:refactor.py:277:format_first_block_in_file():221:    GO_DOORS                            = 194773,
DEBUG:refactor.py:277:format_first_block_in_file():222:    GO_FLEE_TO_THE_SURFACE_PORTAL       = 194625,
DEBUG:refactor.py:277:format_first_block_in_file():223:    GO_CHAMBER_ILLUSION_DOORS           = 194635,
DEBUG:refactor.py:277:format_first_block_in_file():224:    GO_ICECROWN_ILLUSION_DOORS          = 194636,
DEBUG:refactor.py:277:format_first_block_in_file():225:    GO_STORMWIND_ILLUSION_DOORS         = 194637,
DEBUG:refactor.py:277:format_first_block_in_file():226:
DEBUG:refactor.py:277:format_first_block_in_file():227:    // MODELs
DEBUG:refactor.py:277:format_first_block_in_file():228:    SARA_TRANSFORM_MODEL                = 29182,
DEBUG:refactor.py:277:format_first_block_in_file():229:};
DEBUG:refactor.py:277:format_first_block_in_file():230:
DEBUG:refactor.py:277:format_first_block_in_file():231:enum Misc
DEBUG:refactor.py:277:format_first_block_in_file():232:{
DEBUG:refactor.py:277:format_first_block_in_file():233:    ACTION_UNSUMMON_CLOUDS              = -16,
DEBUG:refactor.py:277:format_first_block_in_file():234:    ACTION_DESPAWN_ADDS                 = -15,
DEBUG:refactor.py:277:format_first_block_in_file():235:    ACTION_START_SUMMONING              = -14,
DEBUG:refactor.py:277:format_first_block_in_file():236:    ACTION_YOGG_SARON_APPEAR            = -13,
DEBUG:refactor.py:277:format_first_block_in_file():237:    ACTION_YOGG_SARON_DEATH             = -12,
DEBUG:refactor.py:277:format_first_block_in_file():238:    ACTION_YOGG_SARON_START_YELL        = -11,
DEBUG:refactor.py:277:format_first_block_in_file():239:    ACTION_YOGG_SARON_OPEN_PORTAL_YELL  = -10,
DEBUG:refactor.py:277:format_first_block_in_file():240:    ACTION_INFLUENCE_TENTACLE_DIED      = -9,
DEBUG:refactor.py:277:format_first_block_in_file():241:    ACTION_BRAIN_DAMAGED                = -8,
DEBUG:refactor.py:277:format_first_block_in_file():242:    ACTION_REMOVE_STUN                  = -7,
DEBUG:refactor.py:277:format_first_block_in_file():243:    ACTION_YOGG_SARON_START_P3          = -6,
DEBUG:refactor.py:277:format_first_block_in_file():244:    ACTION_YOGG_SARON_HARD_MODE         = -5,
DEBUG:refactor.py:277:format_first_block_in_file():245:    ACTION_YOGG_SARON_SHADOW_BEACON     = -4,
DEBUG:refactor.py:277:format_first_block_in_file():246:    ACTION_THORIM_START_STORM           = -3,
DEBUG:refactor.py:277:format_first_block_in_file():247:    ACTION_FAILED_DRIVE_ME_CRAZY        = -2,
DEBUG:refactor.py:277:format_first_block_in_file():248:
DEBUG:refactor.py:277:format_first_block_in_file():249:    ACTION_ILLUSION_DRAGONS             = 1,
DEBUG:refactor.py:277:format_first_block_in_file():250:    ACTION_ILLUSION_ICECROWN            = 2,
DEBUG:refactor.py:277:format_first_block_in_file():251:    ACTION_ILLUSION_STORMWIND           = 3,
DEBUG:refactor.py:277:format_first_block_in_file():252:
DEBUG:refactor.py:277:format_first_block_in_file():253:    EVENT_PHASE_ONE                     = 1,
DEBUG:refactor.py:277:format_first_block_in_file():254:    EVENT_PHASE_TWO                     = 2,
DEBUG:refactor.py:277:format_first_block_in_file():255:    EVENT_PHASE_THREE                   = 3,
DEBUG:refactor.py:277:format_first_block_in_file():256:
DEBUG:refactor.py:277:format_first_block_in_file():257:    CRITERIA_NOT_GETTING_OLDER          = 21001,
DEBUG:refactor.py:277:format_first_block_in_file():258:
DEBUG:refactor.py:277:format_first_block_in_file():259:    // YOGG-SARON (laugh)
DEBUG:refactor.py:277:format_first_block_in_file():260:    YS_P3_LUNATIC_GAZE                  = 15757,
DEBUG:refactor.py:277:format_first_block_in_file():261:
DEBUG:refactor.py:277:format_first_block_in_file():262:    DATA_GET_KEEPERS_COUNT              = 1,
DEBUG:refactor.py:277:format_first_block_in_file():263:    DATA_GET_CURRENT_ILLUSION           = 2,
DEBUG:refactor.py:277:format_first_block_in_file():264:    DATA_GET_SARA_PHASE                 = 3,
DEBUG:refactor.py:277:format_first_block_in_file():265:    DATA_GET_DRIVE_ME_CRAZY             = 4,
DEBUG:refactor.py:277:format_first_block_in_file():266:};
DEBUG:refactor.py:277:format_first_block_in_file():267:
DEBUG:refactor.py:277:format_first_block_in_file():268:struct LocationsXY
DEBUG:refactor.py:277:format_first_block_in_file():269:{
DEBUG:refactor.py:277:format_first_block_in_file():270:    float x, y, z;
DEBUG:refactor.py:277:format_first_block_in_file():271:};
DEBUG:refactor.py:277:format_first_block_in_file():272:
DEBUG:refactor.py:277:format_first_block_in_file():273:static LocationsXY yoggPortalLoc[] =
DEBUG:refactor.py:277:format_first_block_in_file():274:{
DEBUG:refactor.py:277:format_first_block_in_file():275:    {1970.48f, -9.75f, 325.5f},
DEBUG:refactor.py:277:format_first_block_in_file():276:    {1992.76f, -10.21f, 325.5f},
DEBUG:refactor.py:277:format_first_block_in_file():277:    {1995.53f, -39.78f, 325.5f},
DEBUG:refactor.py:277:format_first_block_in_file():278:    {1969.25f, -42.00f, 325.5f},
DEBUG:refactor.py:277:format_first_block_in_file():279:    {1960.62f, -32.00f, 325.5f},
DEBUG:refactor.py:277:format_first_block_in_file():280:    {1981.98f, -5.69f, 325.5f},
DEBUG:refactor.py:277:format_first_block_in_file():281:    {1982.78f, -45.73f, 325.5f},
DEBUG:refactor.py:277:format_first_block_in_file():282:    {2000.66f, -29.68f, 325.5f},
DEBUG:refactor.py:277:format_first_block_in_file():283:    {1999.88f, -19.61f, 325.5f},
DEBUG:refactor.py:277:format_first_block_in_file():284:    {1961.37f, -19.54f, 325.5f}
DEBUG:refactor.py:277:format_first_block_in_file():285:};
DEBUG:refactor.py:277:format_first_block_in_file():286:
DEBUG:refactor.py:277:format_first_block_in_file():287:enum Texts
DEBUG:refactor.py:277:format_first_block_in_file():288:{
DEBUG:refactor.py:277:format_first_block_in_file():289:    // Sara
DEBUG:refactor.py:277:format_first_block_in_file():290:    SAY_SARA_ULDUAR_SCREAM_0            = 0, // Unused
DEBUG:refactor.py:277:format_first_block_in_file():291:    SAY_SARA_ULDUAR_SCREAM_1            = 1, // Unused
DEBUG:refactor.py:277:format_first_block_in_file():292:    SAY_SARA_AGGRO                      = 2,
DEBUG:refactor.py:277:format_first_block_in_file():293:    SAY_SARA_FERVOR_HIT                 = 3,
DEBUG:refactor.py:277:format_first_block_in_file():294:    SAY_SARA_ANGER                      = 4, // Comment in DB is for BLESSING_HIT, but it's wrong.
DEBUG:refactor.py:277:format_first_block_in_file():295:    SAY_SARA_KILL                       = 5,
DEBUG:refactor.py:277:format_first_block_in_file():296:    SAY_SARA_TRANSFORM_1                = 6, // "I am the lucid dream."
DEBUG:refactor.py:277:format_first_block_in_file():297:    SAY_SARA_TRANSFORM_2                = 7, // "The monster in your nightmares."
DEBUG:refactor.py:277:format_first_block_in_file():298:    SAY_SARA_TRANSFORM_3                = 8, // "The fiend of a thousand faces."
DEBUG:refactor.py:277:format_first_block_in_file():299:    SAY_SARA_TRANSFORM_4                = 9, // "Cower before my true form."
DEBUG:refactor.py:277:format_first_block_in_file():300:    SAY_SARA_DEATH_RAY                  = 10,
DEBUG:refactor.py:277:format_first_block_in_file():301:    SAY_SARA_PSYCHOSIS_HIT              = 11,
DEBUG:refactor.py:277:format_first_block_in_file():302:
DEBUG:refactor.py:277:format_first_block_in_file():303:    // Voice of Yogg-Saron
DEBUG:refactor.py:277:format_first_block_in_file():304:    WHISPER_VOICE_PHASE_1_WIPE          = 0,
DEBUG:refactor.py:277:format_first_block_in_file():305:    WHISPER_VOICE_INSANE                = 1,
DEBUG:refactor.py:277:format_first_block_in_file():306:
DEBUG:refactor.py:277:format_first_block_in_file():307:    // Brain of Yogg-Saron
DEBUG:refactor.py:277:format_first_block_in_file():308:    EMOTE_YOGG_SARON_BRAIN_SHATTERED    = 0,
DEBUG:refactor.py:277:format_first_block_in_file():309:
DEBUG:refactor.py:277:format_first_block_in_file():310:    // Yogg-Saron
DEBUG:refactor.py:277:format_first_block_in_file():311:    SAY_YOGG_SARON_SPAWN                = 0,
DEBUG:refactor.py:277:format_first_block_in_file():312:    SAY_YOGG_SARON_MADNESS              = 1, // Open Portals
DEBUG:refactor.py:277:format_first_block_in_file():313:    EMOTE_YOGG_SARON_MADNESS            = 2,
DEBUG:refactor.py:277:format_first_block_in_file():314:    SAY_YOGG_SARON_PHASE_3              = 3,
DEBUG:refactor.py:277:format_first_block_in_file():315:    SAY_YOGG_SARON_DEAFENING_ROAR       = 4,
DEBUG:refactor.py:277:format_first_block_in_file():316:    EMOTE_YOGG_SARON_DEAFENING_ROAR     = 5,
DEBUG:refactor.py:277:format_first_block_in_file():317:    SAY_YOGG_SARON_DEATH                = 6,
DEBUG:refactor.py:277:format_first_block_in_file():318:    EMOTE_YOGG_SARON_EMPOWERING_SHADOWS = 7, // Shadow Beacon
DEBUG:refactor.py:277:format_first_block_in_file():319:    EMOTE_YOGG_SARON_BERSERK            = 8,
DEBUG:refactor.py:277:format_first_block_in_file():320:
DEBUG:refactor.py:277:format_first_block_in_file():321:    // Visions - Text is in order of Roleplay
DEBUG:refactor.py:277:format_first_block_in_file():322:    // The Assassination of King Llane vision
DEBUG:refactor.py:277:format_first_block_in_file():323:    SAY_GARONA_1                        = 0,
DEBUG:refactor.py:277:format_first_block_in_file():324:    SAY_GARONA_2                        = 1,
DEBUG:refactor.py:277:format_first_block_in_file():325:    SAY_GARONA_3                        = 2,
DEBUG:refactor.py:277:format_first_block_in_file():326:    SAY_YOGG_1                          = 0,
DEBUG:refactor.py:277:format_first_block_in_file():327:    SAY_YOGG_2                          = 1,
DEBUG:refactor.py:277:format_first_block_in_file():328:    SAY_LLANE_1                         = 0,
DEBUG:refactor.py:277:format_first_block_in_file():329:    SAY_GARONA_4                        = 3,
DEBUG:refactor.py:277:format_first_block_in_file():330:    SAY_YOGG_3                          = 2,
DEBUG:refactor.py:277:format_first_block_in_file():331:
DEBUG:refactor.py:277:format_first_block_in_file():332:    // The Forging of the Demon Soul vision
DEBUG:refactor.py:277:format_first_block_in_file():333:    SAY_NEL_1                           = 0,
DEBUG:refactor.py:277:format_first_block_in_file():334:    SAY_YAS_1                           = 0,
DEBUG:refactor.py:277:format_first_block_in_file():335:    SAY_NEL_2                           = 1,
DEBUG:refactor.py:277:format_first_block_in_file():336:    SAY_MAL_1                           = 0,
DEBUG:refactor.py:277:format_first_block_in_file():337:    SAY_YOGG_4                          = 5,
DEBUG:refactor.py:277:format_first_block_in_file():338:
DEBUG:refactor.py:277:format_first_block_in_file():339:    // The Tortured Champion vision
DEBUG:refactor.py:277:format_first_block_in_file():340:    SAY_LK_1                            = 0,
DEBUG:refactor.py:277:format_first_block_in_file():341:    SAY_IC_1                            = 0,
DEBUG:refactor.py:277:format_first_block_in_file():342:    SAY_IC_2                            = 1,
DEBUG:refactor.py:277:format_first_block_in_file():343:    SAY_LK_2                            = 1,
DEBUG:refactor.py:277:format_first_block_in_file():344:    SAY_YOGG_5                          = 3,
DEBUG:refactor.py:277:format_first_block_in_file():345:    SAY_YOGG_6                          = 4,
DEBUG:refactor.py:277:format_first_block_in_file():346:
DEBUG:refactor.py:277:format_first_block_in_file():347:};
DEBUG:refactor.py:277:format_first_block_in_file():348:
DEBUG:refactor.py:277:format_first_block_in_file():349:const Position Middle = {1980.28f, -25.5868f, 329.397f, M_PI * 1.5f};
DEBUG:refactor.py:277:format_first_block_in_file():350:
DEBUG:refactor.py:277:format_first_block_in_file():351:class boss_yoggsaron_sara : public CreatureScript
DEBUG:refactor.py:277:format_first_block_in_file():352:{
DEBUG:refactor.py:277:format_first_block_in_file():353:public:
DEBUG:refactor.py:277:format_first_block_in_file():354:    boss_yoggsaron_sara() : CreatureScript("boss_yoggsaron_sara") { }
DEBUG:refactor.py:277:format_first_block_in_file():355:
DEBUG:refactor.py:277:format_first_block_in_file():356:    CreatureAI* GetAI(Creature* pCreature) const override
DEBUG:refactor.py:277:format_first_block_in_file():357:    {
DEBUG:refactor.py:277:format_first_block_in_file():358:        return GetUlduarAI<boss_yoggsaron_saraAI>(pCreature);
DEBUG:refactor.py:277:format_first_block_in_file():359:    }
DEBUG:refactor.py:277:format_first_block_in_file():360:
DEBUG:refactor.py:277:format_first_block_in_file():361:    struct boss_yoggsaron_saraAI : public ScriptedAI
DEBUG:refactor.py:277:format_first_block_in_file():362:    {
DEBUG:refactor.py:277:format_first_block_in_file():363:        boss_yoggsaron_saraAI(Creature* pCreature) : ScriptedAI(pCreature), summons(pCreature)
DEBUG:refactor.py:277:format_first_block_in_file():364:        {
DEBUG:refactor.py:277:format_first_block_in_file():365:            m_pInstance = pCreature->GetInstanceScript();
DEBUG:refactor.py:277:format_first_block_in_file():366:        }
DEBUG:refactor.py:277:format_first_block_in_file():367:
DEBUG:refactor.py:277:format_first_block_in_file():368:        InstanceScript* m_pInstance;
DEBUG:refactor.py:277:format_first_block_in_file():369:        EventMap events;
DEBUG:refactor.py:277:format_first_block_in_file():370:        SummonList summons;
DEBUG:refactor.py:277:format_first_block_in_file():371:
DEBUG:refactor.py:277:format_first_block_in_file():372:        uint32 _initFight;
DEBUG:refactor.py:277:format_first_block_in_file():373:        uint8 _summonedGuardiansCount;
DEBUG:refactor.py:277:format_first_block_in_file():374:        uint32 _p2TalkTimer;
DEBUG:refactor.py:277:format_first_block_in_file():375:        bool _secondPhase;
DEBUG:refactor.py:277:format_first_block_in_file():376:        float _summonSpeed;
DEBUG:refactor.py:277:format_first_block_in_file():377:        uint8 _currentIllusion;
DEBUG:refactor.py:277:format_first_block_in_file():378:        bool _isIllusionReversed;
DEBUG:refactor.py:277:format_first_block_in_file():379:
DEBUG:refactor.py:277:format_first_block_in_file():380:        void AttackStart(Unit*) override { }
DEBUG:refactor.py:277:format_first_block_in_file():381:        void MoveInLineOfSight(Unit*) override { }
DEBUG:refactor.py:277:format_first_block_in_file():382:
DEBUG:refactor.py:277:format_first_block_in_file():383:        void JustSummoned(Creature* cr) override
DEBUG:refactor.py:277:format_first_block_in_file():384:        {
DEBUG:refactor.py:277:format_first_block_in_file():385:            summons.Summon(cr);
DEBUG:refactor.py:277:format_first_block_in_file():386:            if (cr->GetEntry() == NPC_SANITY_WELL)
DEBUG:refactor.py:277:format_first_block_in_file():387:                cr->ApplySpellImmune(0, IMMUNITY_STATE, SPELL_AURA_MOD_SCALE, true);
DEBUG:refactor.py:277:format_first_block_in_file():388:        }
DEBUG:refactor.py:277:format_first_block_in_file():389:
DEBUG:refactor.py:277:format_first_block_in_file():390:        void SpawnClouds()
DEBUG:refactor.py:277:format_first_block_in_file():391:        {
DEBUG:refactor.py:277:format_first_block_in_file():392:            for (uint8 i = 0; i < 6; ++i)
DEBUG:refactor.py:277:format_first_block_in_file():393:            {
DEBUG:refactor.py:277:format_first_block_in_file():394:                float Zplus = i > 2 ? (i - 2) * 1.6f : 0;
DEBUG:refactor.py:277:format_first_block_in_file():395:                if (i % 2)
DEBUG:refactor.py:277:format_first_block_in_file():396:                    me->SummonCreature(NPC_OMINOUS_CLOUD, me->GetPositionX() + 8 + i * 7, me->GetPositionY() + 8 + i * 7, 326 + Zplus, 0);
DEBUG:refactor.py:277:format_first_block_in_file():397:                else
DEBUG:refactor.py:277:format_first_block_in_file():398:                    me->SummonCreature(NPC_OMINOUS_CLOUD, me->GetPositionX() - 8 - i * 7, me->GetPositionY() - 8 - i * 7, 326 + Zplus, 0);
DEBUG:refactor.py:277:format_first_block_in_file():399:            }
DEBUG:refactor.py:277:format_first_block_in_file():400:        }
DEBUG:refactor.py:277:format_first_block_in_file():401:
DEBUG:refactor.py:277:format_first_block_in_file():402:        void EnterEvadeMode(EvadeReason why) override
DEBUG:refactor.py:277:format_first_block_in_file():403:        {
DEBUG:refactor.py:277:format_first_block_in_file():404:            if (!_EnterEvadeMode(why))
DEBUG:refactor.py:277:format_first_block_in_file():405:                return;
DEBUG:refactor.py:277:format_first_block_in_file():406:
DEBUG:refactor.py:277:format_first_block_in_file():407:            Position pos;
DEBUG:refactor.py:277:format_first_block_in_file():408:            pos = me->GetHomePosition();
DEBUG:refactor.py:277:format_first_block_in_file():409:            me->NearTeleportTo(pos.GetPositionX(), pos.GetPositionY(), pos.GetPositionZ(), pos.GetOrientation());
DEBUG:refactor.py:277:format_first_block_in_file():410:            Reset();
DEBUG:refactor.py:277:format_first_block_in_file():411:            me->setActive(false);
DEBUG:refactor.py:277:format_first_block_in_file():412:        }
DEBUG:refactor.py:277:format_first_block_in_file():413:
DEBUG:refactor.py:277:format_first_block_in_file():414:        void EnableSara(bool apply)
DEBUG:refactor.py:277:format_first_block_in_file():415:        {
DEBUG:refactor.py:277:format_first_block_in_file():416:            if (apply)
DEBUG:refactor.py:277:format_first_block_in_file():417:            {
DEBUG:refactor.py:277:format_first_block_in_file():418:                me->RemoveUnitFlag(UNIT_FLAG_DISABLE_MOVE);
DEBUG:refactor.py:277:format_first_block_in_file():419:                me->DisableRotate(false);
DEBUG:refactor.py:277:format_first_block_in_file():420:                me->ClearUnitState(UNIT_STATE_ROOT);
DEBUG:refactor.py:277:format_first_block_in_file():421:            }
DEBUG:refactor.py:277:format_first_block_in_file():422:            else
DEBUG:refactor.py:277:format_first_block_in_file():423:            {
DEBUG:refactor.py:277:format_first_block_in_file():424:                me->SetUnitFlag(UNIT_FLAG_DISABLE_MOVE);
DEBUG:refactor.py:277:format_first_block_in_file():425:                me->DisableRotate(true);
DEBUG:refactor.py:277:format_first_block_in_file():426:                me->AddUnitState(UNIT_STATE_ROOT);
DEBUG:refactor.py:277:format_first_block_in_file():427:            }
DEBUG:refactor.py:277:format_first_block_in_file():428:        }
DEBUG:refactor.py:277:format_first_block_in_file():429:
DEBUG:refactor.py:277:format_first_block_in_file():430:        void Reset() override
DEBUG:refactor.py:277:format_first_block_in_file():431:        {
DEBUG:refactor.py:277:format_first_block_in_file():432:            if (!_secondPhase) // Phase 1 wipe
DEBUG:refactor.py:277:format_first_block_in_file():433:            {
DEBUG:refactor.py:277:format_first_block_in_file():434:                me->GetMap()->DoForAllPlayers([&](Player* player)
DEBUG:refactor.py:277:format_first_block_in_file():435:                {
DEBUG:refactor.py:277:format_first_block_in_file():436:                    if (Creature* voice = me->FindNearestCreature(NPC_VOICE_OF_YOGG_SARON, 10.0f))
DEBUG:refactor.py:277:format_first_block_in_file():437:                    {
DEBUG:refactor.py:277:format_first_block_in_file():438:                        voice->AI()->Talk(WHISPER_VOICE_PHASE_1_WIPE, player);
DEBUG:refactor.py:277:format_first_block_in_file():439:                    }
DEBUG:refactor.py:277:format_first_block_in_file():440:                });
DEBUG:refactor.py:277:format_first_block_in_file():441:            }
DEBUG:refactor.py:277:format_first_block_in_file():442:
DEBUG:refactor.py:277:format_first_block_in_file():443:            summons.DoAction(ACTION_DESPAWN_ADDS);
DEBUG:refactor.py:277:format_first_block_in_file():444:            events.Reset();
DEBUG:refactor.py:277:format_first_block_in_file():445:            summons.DespawnAll();
DEBUG:refactor.py:277:format_first_block_in_file():446:
DEBUG:refactor.py:277:format_first_block_in_file():447:            me->SetVisible(true);
DEBUG:refactor.py:277:format_first_block_in_file():448:            me->SetDisplayId(me->GetNativeDisplayId());
DEBUG:refactor.py:277:format_first_block_in_file():449:            me->SetDisableGravity(true);
DEBUG:refactor.py:277:format_first_block_in_file():450:            EnableSara(false);
DEBUG:refactor.py:277:format_first_block_in_file():451:            SpawnClouds();
DEBUG:refactor.py:277:format_first_block_in_file():452:
DEBUG:refactor.py:277:format_first_block_in_file():453:            _initFight = 1;
DEBUG:refactor.py:277:format_first_block_in_file():454:
DEBUG:refactor.py:277:format_first_block_in_file():455:            _summonedGuardiansCount = 0;
DEBUG:refactor.py:277:format_first_block_in_file():456:            _p2TalkTimer = 0;
DEBUG:refactor.py:277:format_first_block_in_file():457:            _secondPhase = false;
DEBUG:refactor.py:277:format_first_block_in_file():458:            _summonSpeed = 1.0f;
DEBUG:refactor.py:277:format_first_block_in_file():459:            _currentIllusion = urand(1, 3);
DEBUG:refactor.py:277:format_first_block_in_file():460:            _isIllusionReversed = urand(0, 1);
DEBUG:refactor.py:277:format_first_block_in_file():461:
DEBUG:refactor.py:277:format_first_block_in_file():462:            if (m_pInstance)
DEBUG:refactor.py:277:format_first_block_in_file():463:            {
DEBUG:refactor.py:277:format_first_block_in_file():464:                m_pInstance->DoStopTimedAchievement(ACHIEVEMENT_TIMED_TYPE_EVENT, CRITERIA_NOT_GETTING_OLDER);
DEBUG:refactor.py:277:format_first_block_in_file():465:                m_pInstance->DoRemoveAurasDueToSpellOnPlayers(SPELL_SANITY);
DEBUG:refactor.py:277:format_first_block_in_file():466:                m_pInstance->SetData(TYPE_YOGGSARON, NOT_STARTED);
DEBUG:refactor.py:277:format_first_block_in_file():467:                if (GameObject* go = ObjectAccessor::GetGameObject(*me, m_pInstance->GetGuidData(GO_YOGG_SARON_DOORS)))
DEBUG:refactor.py:277:format_first_block_in_file():468:                    go->SetGoState(GO_STATE_ACTIVE);
DEBUG:refactor.py:277:format_first_block_in_file():469:            }
DEBUG:refactor.py:277:format_first_block_in_file():470:        }
DEBUG:refactor.py:277:format_first_block_in_file():471:
DEBUG:refactor.py:277:format_first_block_in_file():472:        void InitFight(Unit* target)
DEBUG:refactor.py:277:format_first_block_in_file():473:        {
DEBUG:refactor.py:277:format_first_block_in_file():474:            if (!m_pInstance)
DEBUG:refactor.py:277:format_first_block_in_file():475:                return;
DEBUG:refactor.py:277:format_first_block_in_file():476:
DEBUG:refactor.py:277:format_first_block_in_file():477:            // some simple hack checks
DEBUG:refactor.py:277:format_first_block_in_file():478:            if (m_pInstance->GetData(TYPE_VEZAX) != DONE || m_pInstance->GetData(TYPE_XT002) != DONE)
DEBUG:refactor.py:277:format_first_block_in_file():479:                return;
DEBUG:refactor.py:277:format_first_block_in_file():480:
DEBUG:refactor.py:277:format_first_block_in_file():481:            m_pInstance->DoStartTimedAchievement(ACHIEVEMENT_TIMED_TYPE_EVENT, CRITERIA_NOT_GETTING_OLDER);
DEBUG:refactor.py:277:format_first_block_in_file():482:            m_pInstance->SetData(TYPE_YOGGSARON, IN_PROGRESS);
DEBUG:refactor.py:277:format_first_block_in_file():483:            me->SetInCombatWithZone();
DEBUG:refactor.py:277:format_first_block_in_file():484:            AttackStart(target);
DEBUG:refactor.py:277:format_first_block_in_file():485:
DEBUG:refactor.py:277:format_first_block_in_file():486:            me->CastSpell(me, SPELL_SANITY_BASE, true);
DEBUG:refactor.py:277:format_first_block_in_file():487:
DEBUG:refactor.py:277:format_first_block_in_file():488:            events.ScheduleEvent(EVENT_SARA_P1_DOORS_CLOSE, 15s, 0, EVENT_PHASE_ONE);
DEBUG:refactor.py:277:format_first_block_in_file():489:            events.ScheduleEvent(EVENT_SARA_P1_BERSERK, 15min, 0, 0);
DEBUG:refactor.py:277:format_first_block_in_file():490:            events.ScheduleEvent(EVENT_SARA_P1_SUMMON, 0ms, 0, EVENT_PHASE_ONE);
DEBUG:refactor.py:277:format_first_block_in_file():491:            events.SetPhase(EVENT_PHASE_ONE);
DEBUG:refactor.py:277:format_first_block_in_file():492:
DEBUG:refactor.py:277:format_first_block_in_file():493:            Talk(SAY_SARA_AGGRO);
DEBUG:refactor.py:277:format_first_block_in_file():494:            me->setActive(true);
DEBUG:refactor.py:277:format_first_block_in_file():495:        }
DEBUG:refactor.py:277:format_first_block_in_file():496:
DEBUG:refactor.py:277:format_first_block_in_file():497:        void InformCloud()
DEBUG:refactor.py:277:format_first_block_in_file():498:        {
DEBUG:refactor.py:277:format_first_block_in_file():499:            Creature* cloud = nullptr;
DEBUG:refactor.py:277:format_first_block_in_file():500:            for (SummonList::const_iterator itr = summons.begin(); itr != summons.end();)
DEBUG:refactor.py:277:format_first_block_in_file():501:            {
DEBUG:refactor.py:277:format_first_block_in_file():502:                Creature* summon = ObjectAccessor::GetCreature(*me, *itr);
DEBUG:refactor.py:277:format_first_block_in_file():503:                ++itr;
DEBUG:refactor.py:277:format_first_block_in_file():504:                if (!summon || summon->GetEntry() != NPC_OMINOUS_CLOUD || me->GetDistance(summon) < 20)
DEBUG:refactor.py:277:format_first_block_in_file():505:                    continue;
DEBUG:refactor.py:277:format_first_block_in_file():506:
DEBUG:refactor.py:277:format_first_block_in_file():507:                if ((!cloud || (urand(0, 1) && !summon->HasAura(SPELL_SUMMON_GUARDIAN_OF_YS))))
DEBUG:refactor.py:277:format_first_block_in_file():508:                    cloud = summon;
DEBUG:refactor.py:277:format_first_block_in_file():509:            }
DEBUG:refactor.py:277:format_first_block_in_file():510:
DEBUG:refactor.py:277:format_first_block_in_file():511:            if (cloud)
DEBUG:refactor.py:277:format_first_block_in_file():512:                cloud->AI()->DoAction(ACTION_START_SUMMONING);
DEBUG:refactor.py:277:format_first_block_in_file():513:        }
DEBUG:refactor.py:277:format_first_block_in_file():514:
DEBUG:refactor.py:277:format_first_block_in_file():515:        void SpawnTentacle(uint32 entry)
DEBUG:refactor.py:277:format_first_block_in_file():516:        {
DEBUG:refactor.py:277:format_first_block_in_file():517:            uint32 dist = urand(38, 48);
DEBUG:refactor.py:277:format_first_block_in_file():518:            float o = rand_norm() * M_PI * 2;
DEBUG:refactor.py:277:format_first_block_in_file():519:            float Zplus = (dist - 38) / 6.5f;
DEBUG:refactor.py:277:format_first_block_in_file():520:            if (Creature* cr = me->SummonCreature(entry, me->GetPositionX() + dist * cos(o), me->GetPositionY() + dist * std::sin(o), 327.2 + Zplus, 0, TEMPSUMMON_CORPSE_TIMED_DESPAWN, 5000))
DEBUG:refactor.py:277:format_first_block_in_file():521:            {
DEBUG:refactor.py:277:format_first_block_in_file():522:                cr->CastSpell(cr, SPELL_TENTACLE_ERUPT, true);
DEBUG:refactor.py:277:format_first_block_in_file():523:                cr->CastSpell(cr, SPELL_VOID_ZONE_SMALL, true);
DEBUG:refactor.py:277:format_first_block_in_file():524:                cr->HandleEmoteCommand(EMOTE_ONESHOT_EMERGE);
DEBUG:refactor.py:277:format_first_block_in_file():525:            }
DEBUG:refactor.py:277:format_first_block_in_file():526:        }
DEBUG:refactor.py:277:format_first_block_in_file():527:
DEBUG:refactor.py:277:format_first_block_in_file():528:        void SummonDeathOrbs()
DEBUG:refactor.py:277:format_first_block_in_file():529:        {
DEBUG:refactor.py:277:format_first_block_in_file():530:            for (uint8 i = 0; i < 4; ++i)
DEBUG:refactor.py:277:format_first_block_in_file():531:            {
DEBUG:refactor.py:277:format_first_block_in_file():532:                uint32 dist = urand(38, 48);
DEBUG:refactor.py:277:format_first_block_in_file():533:                float o = rand_norm() * M_PI * 2;
DEBUG:refactor.py:277:format_first_block_in_file():534:                float Zplus = (dist - 38) / 6.5f;
DEBUG:refactor.py:277:format_first_block_in_file():535:                me->SummonCreature(NPC_DEATH_ORB, me->GetPositionX() + dist * cos(o), me->GetPositionY() + dist * std::sin(o), 327.2 + Zplus, 0, TEMPSUMMON_TIMED_DESPAWN, 20000);
DEBUG:refactor.py:277:format_first_block_in_file():536:            }
DEBUG:refactor.py:277:format_first_block_in_file():537:        }
DEBUG:refactor.py:277:format_first_block_in_file():538:
DEBUG:refactor.py:277:format_first_block_in_file():539:        void AddPortals()
DEBUG:refactor.py:277:format_first_block_in_file():540:        {
DEBUG:refactor.py:277:format_first_block_in_file():541:            _summonSpeed -= 0.1f;
DEBUG:refactor.py:277:format_first_block_in_file():542:            Creature* cr = nullptr;
DEBUG:refactor.py:277:format_first_block_in_file():543:
DEBUG:refactor.py:277:format_first_block_in_file():544:            // Spawn Portals
DEBUG:refactor.py:277:format_first_block_in_file():545:            for (uint8 i = 0; i < RAID_MODE(4, 10); ++i)
DEBUG:refactor.py:277:format_first_block_in_file():546:            {
DEBUG:refactor.py:277:format_first_block_in_file():547:                if ((cr = me->SummonCreature(NPC_DESCEND_INTO_MADNESS, yoggPortalLoc[i].x, yoggPortalLoc[i].y, yoggPortalLoc[i].z, 0, TEMPSUMMON_TIMED_DESPAWN, 25000)))
DEBUG:refactor.py:277:format_first_block_in_file():548:                {
DEBUG:refactor.py:277:format_first_block_in_file():549:                    cr->SetUnitFlag(UNIT_FLAG_DISABLE_MOVE | UNIT_FLAG_NON_ATTACKABLE);
DEBUG:refactor.py:277:format_first_block_in_file():550:                    cr->SetArmor(_currentIllusion);
DEBUG:refactor.py:277:format_first_block_in_file():551:                }
DEBUG:refactor.py:277:format_first_block_in_file():552:            }
DEBUG:refactor.py:277:format_first_block_in_file():553:
DEBUG:refactor.py:277:format_first_block_in_file():554:            EntryCheckPredicate pred(NPC_BRAIN_OF_YOGG_SARON);
DEBUG:refactor.py:277:format_first_block_in_file():555:            summons.DoAction(_currentIllusion, pred);
DEBUG:refactor.py:277:format_first_block_in_file():556:
DEBUG:refactor.py:277:format_first_block_in_file():557:            if (_isIllusionReversed)
DEBUG:refactor.py:277:format_first_block_in_file():558:                _currentIllusion = _currentIllusion == 3 ? 1 : (_currentIllusion + 1);
DEBUG:refactor.py:277:format_first_block_in_file():559:            else
DEBUG:refactor.py:277:format_first_block_in_file():560:                _currentIllusion = _currentIllusion == 1 ? 3 : (_currentIllusion - 1);
DEBUG:refactor.py:277:format_first_block_in_file():561:        }
DEBUG:refactor.py:277:format_first_block_in_file():562:
DEBUG:refactor.py:277:format_first_block_in_file():563:        void KilledUnit(Unit* who) override
DEBUG:refactor.py:277:format_first_block_in_file():564:        {
DEBUG:refactor.py:277:format_first_block_in_file():565:            if (who->IsPlayer())
DEBUG:refactor.py:277:format_first_block_in_file():566:            {
DEBUG:refactor.py:277:format_first_block_in_file():567:                Talk(SAY_SARA_KILL);
DEBUG:refactor.py:277:format_first_block_in_file():568:            }
DEBUG:refactor.py:277:format_first_block_in_file():569:        }
DEBUG:refactor.py:277:format_first_block_in_file():570:
DEBUG:refactor.py:277:format_first_block_in_file():571:        void SpellHitTarget(Unit* target, SpellInfo const* spellInfo) override
DEBUG:refactor.py:277:format_first_block_in_file():572:        {
DEBUG:refactor.py:277:format_first_block_in_file():573:            if (spellInfo->Id == SPELL_SANITY)
DEBUG:refactor.py:277:format_first_block_in_file():574:                if (Aura* aur = target->GetAura(SPELL_SANITY))
DEBUG:refactor.py:277:format_first_block_in_file():575:                    aur->SetStackAmount(100);
DEBUG:refactor.py:277:format_first_block_in_file():576:        }
DEBUG:refactor.py:277:format_first_block_in_file():577:
DEBUG:refactor.py:277:format_first_block_in_file():578:        uint32 GetData(uint32 param) const override
DEBUG:refactor.py:277:format_first_block_in_file():579:        {
DEBUG:refactor.py:277:format_first_block_in_file():580:            if (param == DATA_GET_KEEPERS_COUNT)
DEBUG:refactor.py:277:format_first_block_in_file():581:            {
DEBUG:refactor.py:277:format_first_block_in_file():582:                uint8 _count = 0;
DEBUG:refactor.py:277:format_first_block_in_file():583:                for (uint8 i = 0; i < 4; ++i)
DEBUG:refactor.py:277:format_first_block_in_file():584:                    if (m_pInstance->GetData(TYPE_WATCHERS) & (1 << i))
DEBUG:refactor.py:277:format_first_block_in_file():585:                        ++_count;
DEBUG:refactor.py:277:format_first_block_in_file():586:                return _count;
DEBUG:refactor.py:277:format_first_block_in_file():587:            }
DEBUG:refactor.py:277:format_first_block_in_file():588:            else if (param == DATA_GET_SARA_PHASE)
DEBUG:refactor.py:277:format_first_block_in_file():589:                return _secondPhase;
DEBUG:refactor.py:277:format_first_block_in_file():590:
DEBUG:refactor.py:277:format_first_block_in_file():591:            return 4; // just to be sure, return max numer of keepers
DEBUG:refactor.py:277:format_first_block_in_file():592:        }
DEBUG:refactor.py:277:format_first_block_in_file():593:
DEBUG:refactor.py:277:format_first_block_in_file():594:        void DoAction(int32 param) override
DEBUG:refactor.py:277:format_first_block_in_file():595:        {
DEBUG:refactor.py:277:format_first_block_in_file():596:            if (param == ACTION_BRAIN_DAMAGED)
DEBUG:refactor.py:277:format_first_block_in_file():597:            {
DEBUG:refactor.py:277:format_first_block_in_file():598:                summons.DoAction(ACTION_REMOVE_STUN);
DEBUG:refactor.py:277:format_first_block_in_file():599:
DEBUG:refactor.py:277:format_first_block_in_file():600:                EntryCheckPredicate pred2(NPC_YOGG_SARON);
DEBUG:refactor.py:277:format_first_block_in_file():601:                summons.DoAction(ACTION_YOGG_SARON_START_P3, pred2);
DEBUG:refactor.py:277:format_first_block_in_file():602:
DEBUG:refactor.py:277:format_first_block_in_file():603:                if (Creature* cr = ObjectAccessor::GetCreature(*me, m_pInstance->GetGuidData(NPC_THORIM_KEEPER)))
DEBUG:refactor.py:277:format_first_block_in_file():604:                    cr->CastSpell(cr, SPELL_TITANIC_STORM_PASSIVE, false);
DEBUG:refactor.py:277:format_first_block_in_file():605:
DEBUG:refactor.py:277:format_first_block_in_file():606:                if (me->GetMap()->Is25ManRaid() && (GetData(DATA_GET_KEEPERS_COUNT) > 0))
DEBUG:refactor.py:277:format_first_block_in_file():607:                    summons.DoAction(ACTION_YOGG_SARON_HARD_MODE, pred2);
DEBUG:refactor.py:277:format_first_block_in_file():608:
DEBUG:refactor.py:277:format_first_block_in_file():609:                summons.DespawnEntry(NPC_DEATH_ORB);
DEBUG:refactor.py:277:format_first_block_in_file():610:                events.SetPhase(EVENT_PHASE_THREE);
DEBUG:refactor.py:277:format_first_block_in_file():611:
DEBUG:refactor.py:277:format_first_block_in_file():612:                me->RemoveAllAuras();
DEBUG:refactor.py:277:format_first_block_in_file():613:                me->SetVisible(false);
DEBUG:refactor.py:277:format_first_block_in_file():614:                return;
DEBUG:refactor.py:277:format_first_block_in_file():615:            }
DEBUG:refactor.py:277:format_first_block_in_file():616:            else if (param == ACTION_YOGG_SARON_DEATH)
DEBUG:refactor.py:277:format_first_block_in_file():617:            {
DEBUG:refactor.py:277:format_first_block_in_file():618:                summons.DespawnEntry(NPC_VOICE_OF_YOGG_SARON);
DEBUG:refactor.py:277:format_first_block_in_file():619:                summons.DespawnEntry(NPC_BRAIN_OF_YOGG_SARON);
DEBUG:refactor.py:277:format_first_block_in_file():620:                summons.DespawnEntry(NPC_SANITY_WELL);
DEBUG:refactor.py:277:format_first_block_in_file():621:                me->KillSelf();
DEBUG:refactor.py:277:format_first_block_in_file():622:                return;
DEBUG:refactor.py:277:format_first_block_in_file():623:            }
DEBUG:refactor.py:277:format_first_block_in_file():624:
DEBUG:refactor.py:277:format_first_block_in_file():625:            // Determine shatter duration
DEBUG:refactor.py:277:format_first_block_in_file():626:            if (param <= 0)
DEBUG:refactor.py:277:format_first_block_in_file():627:                return;
DEBUG:refactor.py:277:format_first_block_in_file():628:
DEBUG:refactor.py:277:format_first_block_in_file():629:            // Illusion shatters (param - stun time)
DEBUG:refactor.py:277:format_first_block_in_file():630:            if (Creature* yoggb = ObjectAccessor::GetCreature(*me, me->GetInstanceScript()->GetGuidData(NPC_BRAIN_OF_YOGG_SARON)))
DEBUG:refactor.py:277:format_first_block_in_file():631:            {
DEBUG:refactor.py:277:format_first_block_in_file():632:                yoggb->AI()->Talk(EMOTE_YOGG_SARON_BRAIN_SHATTERED);
DEBUG:refactor.py:277:format_first_block_in_file():633:            }
DEBUG:refactor.py:277:format_first_block_in_file():634:
DEBUG:refactor.py:277:format_first_block_in_file():635:            uint32 timer = events.GetNextEventTime(EVENT_SARA_P2_OPEN_PORTALS);
DEBUG:refactor.py:277:format_first_block_in_file():636:            uint32 portalTime = (timer > events.GetTimer() ? timer - events.GetTimer() : 0);
DEBUG:refactor.py:277:format_first_block_in_file():637:            events.DelayEvents(param + 100);
DEBUG:refactor.py:277:format_first_block_in_file():638:            events.RescheduleEvent(EVENT_SARA_P2_OPEN_PORTALS, portalTime, 0, EVENT_PHASE_TWO);
DEBUG:refactor.py:277:format_first_block_in_file():639:            events.ScheduleEvent(EVENT_SARA_P2_REMOVE_STUN, param, 0, EVENT_PHASE_TWO);
DEBUG:refactor.py:277:format_first_block_in_file():640:            me->CastSpell(me, SPELL_SHATTERED_ILLUSION, true);
DEBUG:refactor.py:277:format_first_block_in_file():641:        }
DEBUG:refactor.py:277:format_first_block_in_file():642:
DEBUG:refactor.py:277:format_first_block_in_file():643:        void DamageTaken(Unit* who, uint32& damage, DamageEffectType, SpellSchoolMask) override
DEBUG:refactor.py:277:format_first_block_in_file():644:        {
DEBUG:refactor.py:277:format_first_block_in_file():645:            if (who && who->GetEntry() == NPC_GUARDIAN_OF_YS && !_secondPhase)
DEBUG:refactor.py:277:format_first_block_in_file():646:            {
DEBUG:refactor.py:277:format_first_block_in_file():647:                damage = 25000;
DEBUG:refactor.py:277:format_first_block_in_file():648:
DEBUG:refactor.py:277:format_first_block_in_file():649:                // START PHASE 2
DEBUG:refactor.py:277:format_first_block_in_file():650:                if (me->GetHealth() <= damage)
DEBUG:refactor.py:277:format_first_block_in_file():651:                {
DEBUG:refactor.py:277:format_first_block_in_file():652:                    _secondPhase = true;
DEBUG:refactor.py:277:format_first_block_in_file():653:                    damage = 0;
DEBUG:refactor.py:277:format_first_block_in_file():654:
DEBUG:refactor.py:277:format_first_block_in_file():655:                    events.SetPhase(EVENT_PHASE_TWO);
DEBUG:refactor.py:277:format_first_block_in_file():656:                    me->SetHealth(me->GetMaxHealth());
DEBUG:refactor.py:277:format_first_block_in_file():657:
DEBUG:refactor.py:277:format_first_block_in_file():658:                    if (Creature* cr = me->SummonCreature(NPC_YOGG_SARON, me->GetPositionX(), me->GetPositionY(), me->GetPositionZ(), M_PI))
DEBUG:refactor.py:277:format_first_block_in_file():659:                        cr->SetVisible(false);
DEBUG:refactor.py:277:format_first_block_in_file():660:
DEBUG:refactor.py:277:format_first_block_in_file():661:                    _p2TalkTimer++;
DEBUG:refactor.py:277:format_first_block_in_file():662:                    Talk(SAY_SARA_TRANSFORM_1);
DEBUG:refactor.py:277:format_first_block_in_file():663:                }
DEBUG:refactor.py:277:format_first_block_in_file():664:                return;
DEBUG:refactor.py:277:format_first_block_in_file():665:            }
DEBUG:refactor.py:277:format_first_block_in_file():666:
DEBUG:refactor.py:277:format_first_block_in_file():667:            damage = 0;
DEBUG:refactor.py:277:format_first_block_in_file():668:        }
DEBUG:refactor.py:277:format_first_block_in_file():669:
DEBUG:refactor.py:277:format_first_block_in_file():670:        void UpdateAI(uint32 diff) override
DEBUG:refactor.py:277:format_first_block_in_file():671:        {
DEBUG:refactor.py:277:format_first_block_in_file():672:            if (_initFight)
DEBUG:refactor.py:277:format_first_block_in_file():673:            {
DEBUG:refactor.py:277:format_first_block_in_file():674:                _initFight += diff;
DEBUG:refactor.py:277:format_first_block_in_file():675:                if (_initFight > 5000)
DEBUG:refactor.py:277:format_first_block_in_file():676:                {
DEBUG:refactor.py:277:format_first_block_in_file():677:                    if (Unit* target = SelectTargetFromPlayerList(90))
DEBUG:refactor.py:277:format_first_block_in_file():678:                    {
DEBUG:refactor.py:277:format_first_block_in_file():679:                        _initFight = 0;
DEBUG:refactor.py:277:format_first_block_in_file():680:                        InitFight(target);
DEBUG:refactor.py:277:format_first_block_in_file():681:                    }
DEBUG:refactor.py:277:format_first_block_in_file():682:                    else
DEBUG:refactor.py:277:format_first_block_in_file():683:                        _initFight = 1;
DEBUG:refactor.py:277:format_first_block_in_file():684:                }
DEBUG:refactor.py:277:format_first_block_in_file():685:                return;
DEBUG:refactor.py:277:format_first_block_in_file():686:            }
DEBUG:refactor.py:277:format_first_block_in_file():687:
DEBUG:refactor.py:277:format_first_block_in_file():688:            if (!SelectTargetFromPlayerList(90, SPELL_INSANE1))
DEBUG:refactor.py:277:format_first_block_in_file():689:            {
DEBUG:refactor.py:277:format_first_block_in_file():690:                m_pInstance->DoRemoveAurasDueToSpellOnPlayers(SPELL_INSANE1);
DEBUG:refactor.py:277:format_first_block_in_file():691:                EnterEvadeMode(EVADE_REASON_OTHER);
DEBUG:refactor.py:277:format_first_block_in_file():692:                return;
DEBUG:refactor.py:277:format_first_block_in_file():693:            }
DEBUG:refactor.py:277:format_first_block_in_file():694:
DEBUG:refactor.py:277:format_first_block_in_file():695:            if (_p2TalkTimer)
DEBUG:refactor.py:277:format_first_block_in_file():696:            {
DEBUG:refactor.py:277:format_first_block_in_file():697:                _p2TalkTimer += diff;
DEBUG:refactor.py:277:format_first_block_in_file():698:                if (_p2TalkTimer >= 4000 && _p2TalkTimer < 20000)
DEBUG:refactor.py:277:format_first_block_in_file():699:                {
DEBUG:refactor.py:277:format_first_block_in_file():700:                    EntryCheckPredicate pred(NPC_OMINOUS_CLOUD);
DEBUG:refactor.py:277:format_first_block_in_file():701:                    summons.DoAction(ACTION_UNSUMMON_CLOUDS, pred);
DEBUG:refactor.py:277:format_first_block_in_file():702:                    Talk(SAY_SARA_TRANSFORM_2);
DEBUG:refactor.py:277:format_first_block_in_file():703:                    _p2TalkTimer = 20000;
DEBUG:refactor.py:277:format_first_block_in_file():704:                }
DEBUG:refactor.py:277:format_first_block_in_file():705:                else if (_p2TalkTimer >= 25000 && _p2TalkTimer < 40000)
DEBUG:refactor.py:277:format_first_block_in_file():706:                {
DEBUG:refactor.py:277:format_first_block_in_file():707:                    summons.DespawnEntry(NPC_OMINOUS_CLOUD);
DEBUG:refactor.py:277:format_first_block_in_file():708:                    Talk(SAY_SARA_TRANSFORM_3);
DEBUG:refactor.py:277:format_first_block_in_file():709:                    _p2TalkTimer = 40000;
DEBUG:refactor.py:277:format_first_block_in_file():710:                }
DEBUG:refactor.py:277:format_first_block_in_file():711:                else if (_p2TalkTimer >= 44500 && _p2TalkTimer < 60000)
DEBUG:refactor.py:277:format_first_block_in_file():712:                {
DEBUG:refactor.py:277:format_first_block_in_file():713:                    Talk(SAY_SARA_TRANSFORM_4);
DEBUG:refactor.py:277:format_first_block_in_file():714:                    _p2TalkTimer = 60000;
DEBUG:refactor.py:277:format_first_block_in_file():715:                }
DEBUG:refactor.py:277:format_first_block_in_file():716:                else if (_p2TalkTimer >= 64000)
DEBUG:refactor.py:277:format_first_block_in_file():717:                {
DEBUG:refactor.py:277:format_first_block_in_file():718:                    EntryCheckPredicate pred(NPC_YOGG_SARON);
DEBUG:refactor.py:277:format_first_block_in_file():719:                    summons.DoAction(ACTION_YOGG_SARON_START_YELL, pred);
DEBUG:refactor.py:277:format_first_block_in_file():720:                    _p2TalkTimer = 0;
DEBUG:refactor.py:277:format_first_block_in_file():721:                    events.ScheduleEvent(EVENT_SARA_P2_START, 500ms, 0, EVENT_PHASE_TWO);
DEBUG:refactor.py:277:format_first_block_in_file():722:                }
DEBUG:refactor.py:277:format_first_block_in_file():723:                return;
DEBUG:refactor.py:277:format_first_block_in_file():724:            }
DEBUG:refactor.py:277:format_first_block_in_file():725:
DEBUG:refactor.py:277:format_first_block_in_file():726:            events.Update(diff);
DEBUG:refactor.py:277:format_first_block_in_file():727:            if (me->HasUnitState(UNIT_STATE_CASTING))
DEBUG:refactor.py:277:format_first_block_in_file():728:                return;
DEBUG:refactor.py:277:format_first_block_in_file():729:
DEBUG:refactor.py:277:format_first_block_in_file():730:            switch(events.ExecuteEvent())
DEBUG:refactor.py:277:format_first_block_in_file():731:            {
DEBUG:refactor.py:277:format_first_block_in_file():732:                case EVENT_SARA_P1_DOORS_CLOSE:
DEBUG:refactor.py:277:format_first_block_in_file():733:                    // Whispers of YS
DEBUG:refactor.py:277:format_first_block_in_file():734:                    me->SummonCreature(NPC_VOICE_OF_YOGG_SARON, me->GetPositionX(), me->GetPositionY(), me->GetPositionZ());
DEBUG:refactor.py:277:format_first_block_in_file():735:
DEBUG:refactor.py:277:format_first_block_in_file():736:                    if (m_pInstance)
DEBUG:refactor.py:277:format_first_block_in_file():737:                        if (GameObject* go = ObjectAccessor::GetGameObject(*me, m_pInstance->GetGuidData(GO_YOGG_SARON_DOORS)))
DEBUG:refactor.py:277:format_first_block_in_file():738:                            go->SetGoState(GO_STATE_READY);
DEBUG:refactor.py:277:format_first_block_in_file():739:
DEBUG:refactor.py:277:format_first_block_in_file():740:                    events.ScheduleEvent(EVENT_SARA_P1_SPELLS, 0ms, 1, EVENT_PHASE_ONE);
DEBUG:refactor.py:277:format_first_block_in_file():741:                    break;
DEBUG:refactor.py:277:format_first_block_in_file():742:                case EVENT_SARA_P1_SUMMON:
DEBUG:refactor.py:277:format_first_block_in_file():743:                    events.RepeatEvent(20000 - (std::min(_summonedGuardiansCount, (uint8)5) * 2000));
DEBUG:refactor.py:277:format_first_block_in_file():744:                    ++_summonedGuardiansCount;
DEBUG:refactor.py:277:format_first_block_in_file():745:                    InformCloud();
DEBUG:refactor.py:277:format_first_block_in_file():746:                    break;
DEBUG:refactor.py:277:format_first_block_in_file():747:                case EVENT_SARA_P1_SPELLS:
DEBUG:refactor.py:277:format_first_block_in_file():748:                    {
DEBUG:refactor.py:277:format_first_block_in_file():749:                        uint32 spell = RAND(SPELL_SARAS_ANGER_TARGET_SELECTOR, SPELL_SARAS_BLESSING_TARGET_SELECTOR, SPELL_SARAS_FAVOR_TARGET_SELECTOR);
DEBUG:refactor.py:277:format_first_block_in_file():750:                        if (urand(0, 2))
DEBUG:refactor.py:277:format_first_block_in_file():751:                        {
DEBUG:refactor.py:277:format_first_block_in_file():752:                            if (spell == SPELL_SARAS_ANGER_TARGET_SELECTOR)
DEBUG:refactor.py:277:format_first_block_in_file():753:                            {
DEBUG:refactor.py:277:format_first_block_in_file():754:                                Talk(SAY_SARA_ANGER);
DEBUG:refactor.py:277:format_first_block_in_file():755:                            }
DEBUG:refactor.py:277:format_first_block_in_file():756:                            else if (spell == SPELL_SARAS_FAVOR_TARGET_SELECTOR)
DEBUG:refactor.py:277:format_first_block_in_file():757:                            {
DEBUG:refactor.py:277:format_first_block_in_file():758:                                Talk(SAY_SARA_FERVOR_HIT);
DEBUG:refactor.py:277:format_first_block_in_file():759:                            }
DEBUG:refactor.py:277:format_first_block_in_file():760:                        }
DEBUG:refactor.py:277:format_first_block_in_file():761:
DEBUG:refactor.py:277:format_first_block_in_file():762:                        me->CastCustomSpell(spell, SPELLVALUE_MAX_TARGETS, 1, nullptr, false);
DEBUG:refactor.py:277:format_first_block_in_file():763:                        events.RepeatEvent(me->GetMap()->Is25ManRaid() ? urand(0, 3000) : 4000 + urand(0, 2000));
DEBUG:refactor.py:277:format_first_block_in_file():764:                        break;
DEBUG:refactor.py:277:format_first_block_in_file():765:                    }
DEBUG:refactor.py:277:format_first_block_in_file():766:                case EVENT_SARA_P2_START:
DEBUG:refactor.py:277:format_first_block_in_file():767:                    {
DEBUG:refactor.py:277:format_first_block_in_file():768:                        EntryCheckPredicate pred(NPC_YOGG_SARON);
DEBUG:refactor.py:277:format_first_block_in_file():769:                        summons.DoAction(ACTION_YOGG_SARON_APPEAR, pred);
DEBUG:refactor.py:277:format_first_block_in_file():770:                        events.RescheduleEvent(EVENT_SARA_P2_SPAWN_START_TENTACLES, 500, 0, EVENT_PHASE_TWO);
DEBUG:refactor.py:277:format_first_block_in_file():771:
DEBUG:refactor.py:277:format_first_block_in_file():772:                        // Spawn Brain!
DEBUG:refactor.py:277:format_first_block_in_file():773:                        me->SummonCreature(NPC_BRAIN_OF_YOGG_SARON, 1981.3f, -25.43f, 265);
DEBUG:refactor.py:277:format_first_block_in_file():774:                        break;
DEBUG:refactor.py:277:format_first_block_in_file():775:                    }
DEBUG:refactor.py:277:format_first_block_in_file():776:                case EVENT_SARA_P2_MALADY:
DEBUG:refactor.py:277:format_first_block_in_file():777:                    me->CastCustomSpell(SPELL_MALADY_OF_THE_MIND, SPELLVALUE_MAX_TARGETS, 1, me, false);
DEBUG:refactor.py:277:format_first_block_in_file():778:                    events.Repeat(20s);
DEBUG:refactor.py:277:format_first_block_in_file():779:                    break;
DEBUG:refactor.py:277:format_first_block_in_file():780:                case EVENT_SARA_P2_PSYCHOSIS:
DEBUG:refactor.py:277:format_first_block_in_file():781:                    if ((urand(0, 9)) == 0)  // Rarely said (as it's casted every 3.5s)
DEBUG:refactor.py:277:format_first_block_in_file():782:                    {
DEBUG:refactor.py:277:format_first_block_in_file():783:                        Talk(SAY_SARA_PSYCHOSIS_HIT);
DEBUG:refactor.py:277:format_first_block_in_file():784:                    }
DEBUG:refactor.py:277:format_first_block_in_file():785:                    me->CastCustomSpell(SPELL_PSYCHOSIS, SPELLVALUE_MAX_TARGETS, 1, me, false);
DEBUG:refactor.py:277:format_first_block_in_file():786:                    events.Repeat(3500ms);
DEBUG:refactor.py:277:format_first_block_in_file():787:                    break;
DEBUG:refactor.py:277:format_first_block_in_file():788:                case EVENT_SARA_P2_DEATH_RAY:
DEBUG:refactor.py:277:format_first_block_in_file():789:                    Talk(SAY_SARA_DEATH_RAY);
DEBUG:refactor.py:277:format_first_block_in_file():790:                    SummonDeathOrbs();
DEBUG:refactor.py:277:format_first_block_in_file():791:                    events.Repeat(20s);
DEBUG:refactor.py:277:format_first_block_in_file():792:                    break;
DEBUG:refactor.py:277:format_first_block_in_file():793:                case EVENT_SARA_P2_SUMMON_T1: // CRUSHER
DEBUG:refactor.py:277:format_first_block_in_file():794:                    SpawnTentacle(NPC_CRUSHER_TENTACLE);
DEBUG:refactor.py:277:format_first_block_in_file():795:                    events.RepeatEvent((50000 + urand(0, 10000)) * _summonSpeed);
DEBUG:refactor.py:277:format_first_block_in_file():796:                    break;
DEBUG:refactor.py:277:format_first_block_in_file():797:                case EVENT_SARA_P2_SUMMON_T2: // CONSTRICTOR
DEBUG:refactor.py:277:format_first_block_in_file():798:                    SpawnTentacle(NPC_CONSTRICTOR_TENTACLE);
DEBUG:refactor.py:277:format_first_block_in_file():799:                    events.RepeatEvent((15000 + urand(0, 5000)) * _summonSpeed);
DEBUG:refactor.py:277:format_first_block_in_file():800:                    break;
DEBUG:refactor.py:277:format_first_block_in_file():801:                case EVENT_SARA_P2_SUMMON_T3: // CORRUPTOR
DEBUG:refactor.py:277:format_first_block_in_file():802:                    SpawnTentacle(NPC_CORRUPTOR_TENTACLE);
DEBUG:refactor.py:277:format_first_block_in_file():803:                    events.RepeatEvent((30000 + urand(0, 10000)) * _summonSpeed);
DEBUG:refactor.py:277:format_first_block_in_file():804:                    break;
DEBUG:refactor.py:277:format_first_block_in_file():805:                case EVENT_SARA_P2_BRAIN_LINK:
DEBUG:refactor.py:277:format_first_block_in_file():806:                    me->CastCustomSpell(SPELL_BRAIN_LINK, SPELLVALUE_MAX_TARGETS, 1, me, false);
DEBUG:refactor.py:277:format_first_block_in_file():807:                    events.Repeat(30s);
DEBUG:refactor.py:277:format_first_block_in_file():808:                    break;
DEBUG:refactor.py:277:format_first_block_in_file():809:                case EVENT_SARA_P2_OPEN_PORTALS:
DEBUG:refactor.py:277:format_first_block_in_file():810:                    {
DEBUG:refactor.py:277:format_first_block_in_file():811:                        AddPortals();
DEBUG:refactor.py:277:format_first_block_in_file():812:                        EntryCheckPredicate pred(NPC_YOGG_SARON);
DEBUG:refactor.py:277:format_first_block_in_file():813:                        summons.DoAction(ACTION_YOGG_SARON_OPEN_PORTAL_YELL, pred);
DEBUG:refactor.py:277:format_first_block_in_file():814:                        events.Repeat(80s);
DEBUG:refactor.py:277:format_first_block_in_file():815:                        break;
DEBUG:refactor.py:277:format_first_block_in_file():816:                    }
DEBUG:refactor.py:277:format_first_block_in_file():817:                case EVENT_SARA_P2_REMOVE_STUN:
DEBUG:refactor.py:277:format_first_block_in_file():818:                    {
DEBUG:refactor.py:277:format_first_block_in_file():819:                        me->RemoveAura(SPELL_SHATTERED_ILLUSION);
DEBUG:refactor.py:277:format_first_block_in_file():820:                        summons.DoAction(ACTION_REMOVE_STUN);
DEBUG:refactor.py:277:format_first_block_in_file():821:                        break;
DEBUG:refactor.py:277:format_first_block_in_file():822:                    }
DEBUG:refactor.py:277:format_first_block_in_file():823:                case EVENT_SARA_P2_SPAWN_START_TENTACLES:
DEBUG:refactor.py:277:format_first_block_in_file():824:                    me->SetOrientation(M_PI);
DEBUG:refactor.py:277:format_first_block_in_file():825:                    me->SetDisplayId(SARA_TRANSFORM_MODEL);
DEBUG:refactor.py:277:format_first_block_in_file():826:
DEBUG:refactor.py:277:format_first_block_in_file():827:                    me->NearTeleportTo(me->GetPositionX(), me->GetPositionY(), 355, me->GetOrientation());
DEBUG:refactor.py:277:format_first_block_in_file():828:                    me->SetPosition(me->GetPositionX(), me->GetPositionY(), 355, me->GetOrientation());
DEBUG:refactor.py:277:format_first_block_in_file():829:
DEBUG:refactor.py:277:format_first_block_in_file():830:                    SpawnTentacle(NPC_CRUSHER_TENTACLE);
DEBUG:refactor.py:277:format_first_block_in_file():831:                    SpawnTentacle(NPC_CONSTRICTOR_TENTACLE);
DEBUG:refactor.py:277:format_first_block_in_file():832:                    SpawnTentacle(NPC_CORRUPTOR_TENTACLE);
DEBUG:refactor.py:277:format_first_block_in_file():833:                    SpawnTentacle(NPC_CORRUPTOR_TENTACLE);
DEBUG:refactor.py:277:format_first_block_in_file():834:
DEBUG:refactor.py:277:format_first_block_in_file():835:                    events.ScheduleEvent(EVENT_SARA_P2_MALADY, 7s, 0, EVENT_PHASE_TWO);
DEBUG:refactor.py:277:format_first_block_in_file():836:                    events.ScheduleEvent(EVENT_SARA_P2_PSYCHOSIS, 3s, 0, EVENT_PHASE_TWO);
DEBUG:refactor.py:277:format_first_block_in_file():837:                    events.ScheduleEvent(EVENT_SARA_P2_DEATH_RAY, 15s, 0, EVENT_PHASE_TWO);
DEBUG:refactor.py:277:format_first_block_in_file():838:                    events.ScheduleEvent(EVENT_SARA_P2_SUMMON_T1, 50s, 60s, 0, EVENT_PHASE_TWO);
DEBUG:refactor.py:277:format_first_block_in_file():839:                    events.ScheduleEvent(EVENT_SARA_P2_SUMMON_T2, 15s, 20s, 0, EVENT_PHASE_TWO);
DEBUG:refactor.py:277:format_first_block_in_file():840:                    events.ScheduleEvent(EVENT_SARA_P2_SUMMON_T3, 30000 + urand(0, 10000), 0, EVENT_PHASE_TWO);
DEBUG:refactor.py:277:format_first_block_in_file():841:                    events.ScheduleEvent(EVENT_SARA_P2_BRAIN_LINK, 0, 0, EVENT_PHASE_TWO);
DEBUG:refactor.py:277:format_first_block_in_file():842:                    events.ScheduleEvent(EVENT_SARA_P2_OPEN_PORTALS, 60000, 0, EVENT_PHASE_TWO);
DEBUG:refactor.py:277:format_first_block_in_file():843:                    break;
DEBUG:refactor.py:277:format_first_block_in_file():844:                case EVENT_SARA_P1_BERSERK:
DEBUG:refactor.py:277:format_first_block_in_file():845:                    if (me->GetInstanceScript())
DEBUG:refactor.py:277:format_first_block_in_file():846:                    {
DEBUG:refactor.py:277:format_first_block_in_file():847:                        if (Creature* yogg = ObjectAccessor::GetCreature(*me, me->GetInstanceScript()->GetGuidData(TYPE_YOGGSARON)))
DEBUG:refactor.py:277:format_first_block_in_file():848:                        {
DEBUG:refactor.py:277:format_first_block_in_file():849:                            yogg->AI()->Talk(EMOTE_YOGG_SARON_BERSERK);
DEBUG:refactor.py:277:format_first_block_in_file():850:                        }
DEBUG:refactor.py:277:format_first_block_in_file():851:                    }
DEBUG:refactor.py:277:format_first_block_in_file():852:                    me->CastSpell(me, SPELL_EXTINGUISH_ALL_LIFE, true);
DEBUG:refactor.py:277:format_first_block_in_file():853:                    events.Repeat(5s);
DEBUG:refactor.py:277:format_first_block_in_file():854:                    break;
DEBUG:refactor.py:277:format_first_block_in_file():855:            }
DEBUG:refactor.py:277:format_first_block_in_file():856:        }
DEBUG:refactor.py:277:format_first_block_in_file():857:    };
DEBUG:refactor.py:277:format_first_block_in_file():858:};
DEBUG:refactor.py:277:format_first_block_in_file():859:
DEBUG:refactor.py:277:format_first_block_in_file():860:class boss_yoggsaron_cloud : public CreatureScript
DEBUG:refactor.py:277:format_first_block_in_file():861:{
DEBUG:refactor.py:277:format_first_block_in_file():862:public:
DEBUG:refactor.py:277:format_first_block_in_file():863:    boss_yoggsaron_cloud() : CreatureScript("boss_yoggsaron_cloud") { }
DEBUG:refactor.py:277:format_first_block_in_file():864:
DEBUG:refactor.py:277:format_first_block_in_file():865:    CreatureAI* GetAI(Creature* pCreature) const override
DEBUG:refactor.py:277:format_first_block_in_file():866:    {
DEBUG:refactor.py:277:format_first_block_in_file():867:        return GetUlduarAI<boss_yoggsaron_cloudAI>(pCreature);
DEBUG:refactor.py:277:format_first_block_in_file():868:    }
DEBUG:refactor.py:277:format_first_block_in_file():869:
DEBUG:refactor.py:277:format_first_block_in_file():870:    struct boss_yoggsaron_cloudAI : public npc_escortAI
DEBUG:refactor.py:277:format_first_block_in_file():871:    {
DEBUG:refactor.py:277:format_first_block_in_file():872:        boss_yoggsaron_cloudAI(Creature* pCreature) : npc_escortAI(pCreature)
DEBUG:refactor.py:277:format_first_block_in_file():873:        {
DEBUG:refactor.py:277:format_first_block_in_file():874:            InitWaypoint();
DEBUG:refactor.py:277:format_first_block_in_file():875:            Reset();
DEBUG:refactor.py:277:format_first_block_in_file():876:            Start(false, true, ObjectGuid::Empty, nullptr, false, true);
DEBUG:refactor.py:277:format_first_block_in_file():877:        }
DEBUG:refactor.py:277:format_first_block_in_file():878:
DEBUG:refactor.py:277:format_first_block_in_file():879:        uint32 _checkTimer;
DEBUG:refactor.py:277:format_first_block_in_file():880:        bool _isSummoning;
DEBUG:refactor.py:277:format_first_block_in_file():881:
DEBUG:refactor.py:277:format_first_block_in_file():882:        void JustSummoned(Creature* cr) override
DEBUG:refactor.py:277:format_first_block_in_file():883:        {
DEBUG:refactor.py:277:format_first_block_in_file():884:            cr->ToTempSummon()->SetTempSummonType(TEMPSUMMON_CORPSE_DESPAWN);
DEBUG:refactor.py:277:format_first_block_in_file():885:
DEBUG:refactor.py:277:format_first_block_in_file():886:            _isSummoning = false;
DEBUG:refactor.py:277:format_first_block_in_file():887:            if (me->GetInstanceScript())
DEBUG:refactor.py:277:format_first_block_in_file():888:                if (Creature* sara = ObjectAccessor::GetCreature(*me, me->GetInstanceScript()->GetGuidData(NPC_SARA)))
DEBUG:refactor.py:277:format_first_block_in_file():889:                    sara->AI()->JustSummoned(cr);
DEBUG:refactor.py:277:format_first_block_in_file():890:        }
DEBUG:refactor.py:277:format_first_block_in_file():891:
DEBUG:refactor.py:277:format_first_block_in_file():892:        void MoveInLineOfSight(Unit*  /*who*/) override {}
DEBUG:refactor.py:277:format_first_block_in_file():893:        void AttackStart(Unit*  /*who*/) override {}
DEBUG:refactor.py:277:format_first_block_in_file():894:        void WaypointReached(uint32  /*point*/) override {}
DEBUG:refactor.py:277:format_first_block_in_file():895:
DEBUG:refactor.py:277:format_first_block_in_file():896:        void Reset() override
DEBUG:refactor.py:277:format_first_block_in_file():897:        {
DEBUG:refactor.py:277:format_first_block_in_file():898:            me->CastSpell(me, SPELL_CLOUD_VISUAL, true);
DEBUG:refactor.py:277:format_first_block_in_file():899:            _checkTimer = 0;
DEBUG:refactor.py:277:format_first_block_in_file():900:            _isSummoning = false;
DEBUG:refactor.py:277:format_first_block_in_file():901:        }
DEBUG:refactor.py:277:format_first_block_in_file():902:
DEBUG:refactor.py:277:format_first_block_in_file():903:        void DoAction(int32 param) override
DEBUG:refactor.py:277:format_first_block_in_file():904:        {
DEBUG:refactor.py:277:format_first_block_in_file():905:            if (param == ACTION_UNSUMMON_CLOUDS)
DEBUG:refactor.py:277:format_first_block_in_file():906:            {
DEBUG:refactor.py:277:format_first_block_in_file():907:                me->RemoveAllAuras();
DEBUG:refactor.py:277:format_first_block_in_file():908:            }
DEBUG:refactor.py:277:format_first_block_in_file():909:            else if (param == ACTION_START_SUMMONING)
DEBUG:refactor.py:277:format_first_block_in_file():910:            {
DEBUG:refactor.py:277:format_first_block_in_file():911:                _isSummoning = true;
DEBUG:refactor.py:277:format_first_block_in_file():912:                me->CastSpell(me, SPELL_SUMMON_GUARDIAN_OF_YS, true);
DEBUG:refactor.py:277:format_first_block_in_file():913:            }
DEBUG:refactor.py:277:format_first_block_in_file():914:        }
DEBUG:refactor.py:277:format_first_block_in_file():915:
DEBUG:refactor.py:277:format_first_block_in_file():916:        void InitWaypoint()
DEBUG:refactor.py:277:format_first_block_in_file():917:        {
DEBUG:refactor.py:277:format_first_block_in_file():918:            float dist = Middle.GetExactDist(me);
DEBUG:refactor.py:277:format_first_block_in_file():919:            if (me->GetPositionX() > Middle.GetPositionX())
DEBUG:refactor.py:277:format_first_block_in_file():920:            {
DEBUG:refactor.py:277:format_first_block_in_file():921:                for (uint8 i = 0; i <= dist; ++i)
DEBUG:refactor.py:277:format_first_block_in_file():922:                {
DEBUG:refactor.py:277:format_first_block_in_file():923:                    float angle = M_PI * 2 / dist * i;
DEBUG:refactor.py:277:format_first_block_in_file():924:                    AddWaypoint(i, Middle.GetPositionX() + dist * cos(angle), Middle.GetPositionY() + dist * std::sin(angle), me->GetPositionZ(), 0);
DEBUG:refactor.py:277:format_first_block_in_file():925:                }
DEBUG:refactor.py:277:format_first_block_in_file():926:            }
DEBUG:refactor.py:277:format_first_block_in_file():927:            else
DEBUG:refactor.py:277:format_first_block_in_file():928:            {
DEBUG:refactor.py:277:format_first_block_in_file():929:                for (uint8 i = 0; i <= dist; ++i)
DEBUG:refactor.py:277:format_first_block_in_file():930:                {
DEBUG:refactor.py:277:format_first_block_in_file():931:                    float angle = M_PI * 2 - (M_PI * 2 / dist * i);
DEBUG:refactor.py:277:format_first_block_in_file():932:                    AddWaypoint(i, Middle.GetPositionX() + dist * cos(angle), Middle.GetPositionY() + dist * std::sin(angle), me->GetPositionZ(), 0);
DEBUG:refactor.py:277:format_first_block_in_file():933:                }
DEBUG:refactor.py:277:format_first_block_in_file():934:            }
DEBUG:refactor.py:277:format_first_block_in_file():935:        }
DEBUG:refactor.py:277:format_first_block_in_file():936:
DEBUG:refactor.py:277:format_first_block_in_file():937:        void UpdateEscortAI(uint32 diff) override
DEBUG:refactor.py:277:format_first_block_in_file():938:        {
DEBUG:refactor.py:277:format_first_block_in_file():939:            _checkTimer += diff;
DEBUG:refactor.py:277:format_first_block_in_file():940:            if (_checkTimer >= 500 && !_isSummoning)
DEBUG:refactor.py:277:format_first_block_in_file():941:            {
DEBUG:refactor.py:277:format_first_block_in_file():942:                Unit* who = me->SelectNearbyTarget(nullptr, 6.0f);
DEBUG:refactor.py:277:format_first_block_in_file():943:                if (who && who->IsPlayer() && !me->HasAura(SPELL_SUMMON_GUARDIAN_OF_YS) && !who->HasAura(SPELL_HODIR_FLASH_FREEZE))
DEBUG:refactor.py:277:format_first_block_in_file():944:                {
DEBUG:refactor.py:277:format_first_block_in_file():945:                    _isSummoning = true;
DEBUG:refactor.py:277:format_first_block_in_file():946:                    Talk(0, who);
DEBUG:refactor.py:277:format_first_block_in_file():947:                    me->CastSpell(me, SPELL_SUMMON_GUARDIAN_OF_YS, true);
DEBUG:refactor.py:277:format_first_block_in_file():948:                }
DEBUG:refactor.py:277:format_first_block_in_file():949:
DEBUG:refactor.py:277:format_first_block_in_file():950:                _checkTimer = 0;
DEBUG:refactor.py:277:format_first_block_in_file():951:            }
DEBUG:refactor.py:277:format_first_block_in_file():952:        }
DEBUG:refactor.py:277:format_first_block_in_file():953:    };
DEBUG:refactor.py:277:format_first_block_in_file():954:};
DEBUG:refactor.py:277:format_first_block_in_file():955:
DEBUG:refactor.py:277:format_first_block_in_file():956:class boss_yoggsaron_guardian_of_ys : public CreatureScript
DEBUG:refactor.py:277:format_first_block_in_file():957:{
DEBUG:refactor.py:277:format_first_block_in_file():958:public:
DEBUG:refactor.py:277:format_first_block_in_file():959:    boss_yoggsaron_guardian_of_ys() : CreatureScript("boss_yoggsaron_guardian_of_ys") { }
DEBUG:refactor.py:277:format_first_block_in_file():960:
DEBUG:refactor.py:277:format_first_block_in_file():961:    CreatureAI* GetAI(Creature* pCreature) const override
DEBUG:refactor.py:277:format_first_block_in_file():962:    {
DEBUG:refactor.py:277:format_first_block_in_file():963:        return GetUlduarAI<boss_yoggsaron_guardian_of_ysAI>(pCreature);
DEBUG:refactor.py:277:format_first_block_in_file():964:    }
DEBUG:refactor.py:277:format_first_block_in_file():965:
DEBUG:refactor.py:277:format_first_block_in_file():966:    struct boss_yoggsaron_guardian_of_ysAI : public ScriptedAI
DEBUG:refactor.py:277:format_first_block_in_file():967:    {
DEBUG:refactor.py:277:format_first_block_in_file():968:        boss_yoggsaron_guardian_of_ysAI(Creature* pCreature) : ScriptedAI(pCreature) { }
DEBUG:refactor.py:277:format_first_block_in_file():969:
DEBUG:refactor.py:277:format_first_block_in_file():970:        uint32 _spellTimer;
DEBUG:refactor.py:277:format_first_block_in_file():971:
DEBUG:refactor.py:277:format_first_block_in_file():972:        void Reset() override
DEBUG:refactor.py:277:format_first_block_in_file():973:        {
DEBUG:refactor.py:277:format_first_block_in_file():974:            _spellTimer = 0;
DEBUG:refactor.py:277:format_first_block_in_file():975:            me->SetInCombatWithZone();
DEBUG:refactor.py:277:format_first_block_in_file():976:        }
DEBUG:refactor.py:277:format_first_block_in_file():977:
DEBUG:refactor.py:277:format_first_block_in_file():978:        void JustDied(Unit*) override
DEBUG:refactor.py:277:format_first_block_in_file():979:        {
DEBUG:refactor.py:277:format_first_block_in_file():980:            me->CastSpell((Unit*)nullptr, SPELL_SHADOW_NOVA, true);
DEBUG:refactor.py:277:format_first_block_in_file():981:        }
DEBUG:refactor.py:277:format_first_block_in_file():982:
DEBUG:refactor.py:277:format_first_block_in_file():983:        void UpdateAI(uint32 diff) override
DEBUG:refactor.py:277:format_first_block_in_file():984:        {
DEBUG:refactor.py:277:format_first_block_in_file():985:            if (!UpdateVictim())
DEBUG:refactor.py:277:format_first_block_in_file():986:                return;
DEBUG:refactor.py:277:format_first_block_in_file():987:
DEBUG:refactor.py:277:format_first_block_in_file():988:            _spellTimer += diff;
DEBUG:refactor.py:277:format_first_block_in_file():989:            if (_spellTimer > 8000)
DEBUG:refactor.py:277:format_first_block_in_file():990:            {
DEBUG:refactor.py:277:format_first_block_in_file():991:                me->CastSpell(me, SPELL_DARK_VOLLEY, false);
DEBUG:refactor.py:277:format_first_block_in_file():992:                _spellTimer = 0;
DEBUG:refactor.py:277:format_first_block_in_file():993:            }
DEBUG:refactor.py:277:format_first_block_in_file():994:
DEBUG:refactor.py:277:format_first_block_in_file():995:            DoMeleeAttackIfReady();
DEBUG:refactor.py:277:format_first_block_in_file():996:        }
DEBUG:refactor.py:277:format_first_block_in_file():997:    };
DEBUG:refactor.py:277:format_first_block_in_file():998:};
DEBUG:refactor.py:277:format_first_block_in_file():999:
DEBUG:refactor.py:277:format_first_block_in_file():1000:class boss_yoggsaron : public CreatureScript
DEBUG:refactor.py:277:format_first_block_in_file():1001:{
DEBUG:refactor.py:277:format_first_block_in_file():1002:public:
DEBUG:refactor.py:277:format_first_block_in_file():1003:    boss_yoggsaron() : CreatureScript("boss_yoggsaron") { }
DEBUG:refactor.py:277:format_first_block_in_file():1004:
DEBUG:refactor.py:277:format_first_block_in_file():1005:    CreatureAI* GetAI(Creature* pCreature) const override
DEBUG:refactor.py:277:format_first_block_in_file():1006:    {
DEBUG:refactor.py:277:format_first_block_in_file():1007:        return GetUlduarAI<boss_yoggsaronAI>(pCreature);
DEBUG:refactor.py:277:format_first_block_in_file():1008:    }
DEBUG:refactor.py:277:format_first_block_in_file():1009:
DEBUG:refactor.py:277:format_first_block_in_file():1010:    struct boss_yoggsaronAI : public ScriptedAI
DEBUG:refactor.py:277:format_first_block_in_file():1011:    {
DEBUG:refactor.py:277:format_first_block_in_file():1012:        boss_yoggsaronAI(Creature* pCreature) : ScriptedAI(pCreature), summons(pCreature)
DEBUG:refactor.py:277:format_first_block_in_file():1013:        {
DEBUG:refactor.py:277:format_first_block_in_file():1014:            m_pInstance = me->GetInstanceScript();
DEBUG:refactor.py:277:format_first_block_in_file():1015:            _thirdPhase = false;
DEBUG:refactor.py:277:format_first_block_in_file():1016:            _usedInsane = false;
DEBUG:refactor.py:277:format_first_block_in_file():1017:            summons.DespawnAll();
DEBUG:refactor.py:277:format_first_block_in_file():1018:            events.Reset();
DEBUG:refactor.py:277:format_first_block_in_file():1019:
DEBUG:refactor.py:277:format_first_block_in_file():1020:            uint8 _count = 4;
DEBUG:refactor.py:277:format_first_block_in_file():1021:            me->SetLootMode(31); // 1 + 2 + 4 + 8 + 16, remove with watchers addition
DEBUG:refactor.py:277:format_first_block_in_file():1022:            if (m_pInstance)
DEBUG:refactor.py:277:format_first_block_in_file():1023:            {
DEBUG:refactor.py:277:format_first_block_in_file():1024:                for (uint8 i = 0; i < 4; ++i)
DEBUG:refactor.py:277:format_first_block_in_file():1025:                    if (m_pInstance->GetData(TYPE_WATCHERS) & (1 << i))
DEBUG:refactor.py:277:format_first_block_in_file():1026:                    {
DEBUG:refactor.py:277:format_first_block_in_file():1027:                        me->RemoveLootMode(1 << _count);
DEBUG:refactor.py:277:format_first_block_in_file():1028:                        --_count;
DEBUG:refactor.py:277:format_first_block_in_file():1029:                    }
DEBUG:refactor.py:277:format_first_block_in_file():1030:            }
DEBUG:refactor.py:277:format_first_block_in_file():1031:        }
DEBUG:refactor.py:277:format_first_block_in_file():1032:
DEBUG:refactor.py:277:format_first_block_in_file():1033:        InstanceScript* m_pInstance;
DEBUG:refactor.py:277:format_first_block_in_file():1034:        EventMap events;
DEBUG:refactor.py:277:format_first_block_in_file():1035:        SummonList summons;
DEBUG:refactor.py:277:format_first_block_in_file():1036:        bool _thirdPhase;
DEBUG:refactor.py:277:format_first_block_in_file():1037:        bool _usedInsane;
DEBUG:refactor.py:277:format_first_block_in_file():1038:
DEBUG:refactor.py:277:format_first_block_in_file():1039:        void AttackStart(Unit*) override { }
DEBUG:refactor.py:277:format_first_block_in_file():1040:
DEBUG:refactor.py:277:format_first_block_in_file():1041:        void JustSummoned(Creature* cr) override { summons.Summon(cr); }
DEBUG:refactor.py:277:format_first_block_in_file():1042:
DEBUG:refactor.py:277:format_first_block_in_file():1043:        void SummonImmortalGuardian()
DEBUG:refactor.py:277:format_first_block_in_file():1044:        {
DEBUG:refactor.py:277:format_first_block_in_file():1045:            uint32 dist = urand(38, 48);
DEBUG:refactor.py:277:format_first_block_in_file():1046:            float o = rand_norm() * M_PI * 2;
DEBUG:refactor.py:277:format_first_block_in_file():1047:            float Zplus = (dist - 38) / 6.5f;
DEBUG:refactor.py:277:format_first_block_in_file():1048:            me->SummonCreature(NPC_IMMORTAL_GUARDIAN, me->GetPositionX() + dist * cos(o), me->GetPositionY() + dist * std::sin(o), 327.2 + Zplus, 0, TEMPSUMMON_CORPSE_TIMED_DESPAWN, 5000);
DEBUG:refactor.py:277:format_first_block_in_file():1049:        }
DEBUG:refactor.py:277:format_first_block_in_file():1050:
DEBUG:refactor.py:277:format_first_block_in_file():1051:        void JustDied(Unit*  /*who*/) override
DEBUG:refactor.py:277:format_first_block_in_file():1052:        {
DEBUG:refactor.py:277:format_first_block_in_file():1053:            summons.DespawnAll();
DEBUG:refactor.py:277:format_first_block_in_file():1054:            events.Reset();
DEBUG:refactor.py:277:format_first_block_in_file():1055:
DEBUG:refactor.py:277:format_first_block_in_file():1056:            Talk(SAY_YOGG_SARON_DEATH);
DEBUG:refactor.py:277:format_first_block_in_file():1057:
DEBUG:refactor.py:277:format_first_block_in_file():1058:            if (m_pInstance)
DEBUG:refactor.py:277:format_first_block_in_file():1059:            {
DEBUG:refactor.py:277:format_first_block_in_file():1060:                m_pInstance->SetData(TYPE_YOGGSARON, DONE);
DEBUG:refactor.py:277:format_first_block_in_file():1061:                if (Creature* sara = ObjectAccessor::GetCreature(*me, m_pInstance->GetGuidData(NPC_SARA)))
DEBUG:refactor.py:277:format_first_block_in_file():1062:                    sara->AI()->DoAction(ACTION_YOGG_SARON_DEATH);
DEBUG:refactor.py:277:format_first_block_in_file():1063:                if (GameObject* go = ObjectAccessor::GetGameObject(*me, m_pInstance->GetGuidData(GO_YOGG_SARON_DOORS)))
DEBUG:refactor.py:277:format_first_block_in_file():1064:                    go->SetGoState(GO_STATE_ACTIVE);
DEBUG:refactor.py:277:format_first_block_in_file():1065:            }
DEBUG:refactor.py:277:format_first_block_in_file():1066:
DEBUG:refactor.py:277:format_first_block_in_file():1067:            Map::PlayerList const& pList = me->GetMap()->GetPlayers();
DEBUG:refactor.py:277:format_first_block_in_file():1068:            for(Map::PlayerList::const_iterator itr = pList.begin(); itr != pList.end(); ++itr)
DEBUG:refactor.py:277:format_first_block_in_file():1069:            {
DEBUG:refactor.py:277:format_first_block_in_file():1070:                itr->GetSource()->RemoveAura(SPELL_SANITY);
DEBUG:refactor.py:277:format_first_block_in_file():1071:                itr->GetSource()->RemoveAura(SPELL_INSANE1);
DEBUG:refactor.py:277:format_first_block_in_file():1072:                itr->GetSource()->RemoveAura(SPELL_INSANE2);
DEBUG:refactor.py:277:format_first_block_in_file():1073:            }
DEBUG:refactor.py:277:format_first_block_in_file():1074:        }
DEBUG:refactor.py:277:format_first_block_in_file():1075:
DEBUG:refactor.py:277:format_first_block_in_file():1076:        void DoAction(int32 param) override
DEBUG:refactor.py:277:format_first_block_in_file():1077:        {
DEBUG:refactor.py:277:format_first_block_in_file():1078:            if (param == ACTION_DESPAWN_ADDS)
DEBUG:refactor.py:277:format_first_block_in_file():1079:                summons.DespawnAll();
DEBUG:refactor.py:277:format_first_block_in_file():1080:            else if (param == ACTION_YOGG_SARON_APPEAR)
DEBUG:refactor.py:277:format_first_block_in_file():1081:            {
DEBUG:refactor.py:277:format_first_block_in_file():1082:                me->SetVisible(true);
DEBUG:refactor.py:277:format_first_block_in_file():1083:                me->CastSpell(me, SPELL_SHADOW_BARRIER, true);
DEBUG:refactor.py:277:format_first_block_in_file():1084:                me->CastSpell(me, SPELL_KNOCK_AWAY, true);
DEBUG:refactor.py:277:format_first_block_in_file():1085:                me->HandleEmoteCommand(EMOTE_ONESHOT_EMERGE);
DEBUG:refactor.py:277:format_first_block_in_file():1086:                me->SetInCombatWithZone();
DEBUG:refactor.py:277:format_first_block_in_file():1087:
DEBUG:refactor.py:277:format_first_block_in_file():1088:                me->SetUnitFlag(UNIT_FLAG_DISABLE_MOVE | UNIT_FLAG_PACIFIED);
DEBUG:refactor.py:277:format_first_block_in_file():1089:            }
DEBUG:refactor.py:277:format_first_block_in_file():1090:            else if (param == ACTION_YOGG_SARON_START_YELL)
DEBUG:refactor.py:277:format_first_block_in_file():1091:            {
DEBUG:refactor.py:277:format_first_block_in_file():1092:                Talk(SAY_YOGG_SARON_SPAWN);
DEBUG:refactor.py:277:format_first_block_in_file():1093:            }
DEBUG:refactor.py:277:format_first_block_in_file():1094:            else if (param == ACTION_YOGG_SARON_OPEN_PORTAL_YELL)
DEBUG:refactor.py:277:format_first_block_in_file():1095:            {
DEBUG:refactor.py:277:format_first_block_in_file():1096:                Talk(SAY_YOGG_SARON_MADNESS);
DEBUG:refactor.py:277:format_first_block_in_file():1097:                Talk(EMOTE_YOGG_SARON_MADNESS);
DEBUG:refactor.py:277:format_first_block_in_file():1098:            }
DEBUG:refactor.py:277:format_first_block_in_file():1099:            else if (param == ACTION_YOGG_SARON_START_P3)
DEBUG:refactor.py:277:format_first_block_in_file():1100:            {
DEBUG:refactor.py:277:format_first_block_in_file():1101:                me->SetHealth(me->GetMaxHealth() * 0.3f);
DEBUG:refactor.py:277:format_first_block_in_file():1102:                me->LowerPlayerDamageReq(me->GetMaxHealth() * 0.7f);
DEBUG:refactor.py:277:format_first_block_in_file():1103:
DEBUG:refactor.py:277:format_first_block_in_file():1104:                me->RemoveAura(SPELL_SHADOW_BARRIER);
DEBUG:refactor.py:277:format_first_block_in_file():1105:
DEBUG:refactor.py:277:format_first_block_in_file():1106:                events.ScheduleEvent(EVENT_YS_LUNATIC_GAZE, 7000);
DEBUG:refactor.py:277:format_first_block_in_file():1107:                events.ScheduleEvent(EVENT_YS_SHADOW_BEACON, 20000);
DEBUG:refactor.py:277:format_first_block_in_file():1108:                events.ScheduleEvent(EVENT_YS_SUMMON_GUARDIAN, 0);
DEBUG:refactor.py:277:format_first_block_in_file():1109:                _thirdPhase = true;
DEBUG:refactor.py:277:format_first_block_in_file():1110:
DEBUG:refactor.py:277:format_first_block_in_file():1111:                Talk(SAY_YOGG_SARON_PHASE_3);
DEBUG:refactor.py:277:format_first_block_in_file():1112:            }
DEBUG:refactor.py:277:format_first_block_in_file():1113:            else if (param == ACTION_YOGG_SARON_HARD_MODE)
DEBUG:refactor.py:277:format_first_block_in_file():1114:            {
DEBUG:refactor.py:277:format_first_block_in_file():1115:                events.ScheduleEvent(EVENT_YS_DEAFENING_ROAR, 50000);
DEBUG:refactor.py:277:format_first_block_in_file():1116:            }
DEBUG:refactor.py:277:format_first_block_in_file():1117:            else if (param == ACTION_YOGG_SARON_SHADOW_BEACON)
DEBUG:refactor.py:277:format_first_block_in_file():1118:            {
DEBUG:refactor.py:277:format_first_block_in_file():1119:                events.RescheduleEvent(EVENT_YS_SHADOW_BEACON, 40000);
DEBUG:refactor.py:277:format_first_block_in_file():1120:            }
DEBUG:refactor.py:277:format_first_block_in_file():1121:            else if (param == ACTION_REMOVE_STUN)
DEBUG:refactor.py:277:format_first_block_in_file():1122:            {
DEBUG:refactor.py:277:format_first_block_in_file():1123:                me->RemoveAura(SPELL_SHATTERED_ILLUSION);
DEBUG:refactor.py:277:format_first_block_in_file():1124:                me->SetControlled(true, UNIT_STATE_ROOT);
DEBUG:refactor.py:277:format_first_block_in_file():1125:            }
DEBUG:refactor.py:277:format_first_block_in_file():1126:            else if (param == ACTION_FAILED_DRIVE_ME_CRAZY)
DEBUG:refactor.py:277:format_first_block_in_file():1127:                _usedInsane = true;
DEBUG:refactor.py:277:format_first_block_in_file():1128:        }
DEBUG:refactor.py:277:format_first_block_in_file():1129:
DEBUG:refactor.py:277:format_first_block_in_file():1130:        uint32 GetData(uint32 param) const override
DEBUG:refactor.py:277:format_first_block_in_file():1131:        {
DEBUG:refactor.py:277:format_first_block_in_file():1132:            if (param == DATA_GET_DRIVE_ME_CRAZY)
DEBUG:refactor.py:277:format_first_block_in_file():1133:                return !_usedInsane;
DEBUG:refactor.py:277:format_first_block_in_file():1134:
DEBUG:refactor.py:277:format_first_block_in_file():1135:            return 0;
DEBUG:refactor.py:277:format_first_block_in_file():1136:        }
DEBUG:refactor.py:277:format_first_block_in_file():1137:
DEBUG:refactor.py:277:format_first_block_in_file():1138:        void SpellHit(Unit*  /*caster*/, SpellInfo const* spellInfo) override
DEBUG:refactor.py:277:format_first_block_in_file():1139:        {
DEBUG:refactor.py:277:format_first_block_in_file():1140:            if (spellInfo->Id == SPELL_IN_THE_MAWS_OF_THE_OLD_GOD)
DEBUG:refactor.py:277:format_first_block_in_file():1141:                me->AddLootMode(32);
DEBUG:refactor.py:277:format_first_block_in_file():1142:        }
DEBUG:refactor.py:277:format_first_block_in_file():1143:
DEBUG:refactor.py:277:format_first_block_in_file():1144:        void UpdateAI(uint32 diff) override
DEBUG:refactor.py:277:format_first_block_in_file():1145:        {
DEBUG:refactor.py:277:format_first_block_in_file():1146:            if (!_thirdPhase)
DEBUG:refactor.py:277:format_first_block_in_file():1147:                return;
DEBUG:refactor.py:277:format_first_block_in_file():1148:
DEBUG:refactor.py:277:format_first_block_in_file():1149:            events.Update(diff);
DEBUG:refactor.py:277:format_first_block_in_file():1150:            if (me->HasUnitState(UNIT_STATE_CASTING))
DEBUG:refactor.py:277:format_first_block_in_file():1151:                return;
DEBUG:refactor.py:277:format_first_block_in_file():1152:
DEBUG:refactor.py:277:format_first_block_in_file():1153:            switch (events.ExecuteEvent())
DEBUG:refactor.py:277:format_first_block_in_file():1154:            {
DEBUG:refactor.py:277:format_first_block_in_file():1155:                case EVENT_YS_LUNATIC_GAZE:
DEBUG:refactor.py:277:format_first_block_in_file():1156:                    me->PlayDirectSound(YS_P3_LUNATIC_GAZE);
DEBUG:refactor.py:277:format_first_block_in_file():1157:                    me->CastSpell(me, SPELL_LUNATIC_GAZE_YS, true);
DEBUG:refactor.py:277:format_first_block_in_file():1158:                    events.Repeat(12s);
DEBUG:refactor.py:277:format_first_block_in_file():1159:                    break;
DEBUG:refactor.py:277:format_first_block_in_file():1160:                case EVENT_YS_DEAFENING_ROAR:
DEBUG:refactor.py:277:format_first_block_in_file():1161:                    Talk(SAY_YOGG_SARON_DEAFENING_ROAR);
DEBUG:refactor.py:277:format_first_block_in_file():1162:                    Talk(EMOTE_YOGG_SARON_DEAFENING_ROAR);
DEBUG:refactor.py:277:format_first_block_in_file():1163:                    me->CastSpell(me, SPELL_DEAFENING_ROAR, false);
DEBUG:refactor.py:277:format_first_block_in_file():1164:                    events.Repeat(50s);
DEBUG:refactor.py:277:format_first_block_in_file():1165:                    break;
DEBUG:refactor.py:277:format_first_block_in_file():1166:                case EVENT_YS_SHADOW_BEACON:
DEBUG:refactor.py:277:format_first_block_in_file():1167:                    events.Repeat(5s);
DEBUG:refactor.py:277:format_first_block_in_file():1168:                    Talk(EMOTE_YOGG_SARON_EMPOWERING_SHADOWS);
DEBUG:refactor.py:277:format_first_block_in_file():1169:                    me->CastCustomSpell(SPELL_SHADOW_BEACON, SPELLVALUE_MAX_TARGETS, RAID_MODE(1, 3), me, false);
DEBUG:refactor.py:277:format_first_block_in_file():1170:                    break;
DEBUG:refactor.py:277:format_first_block_in_file():1171:                case EVENT_YS_SUMMON_GUARDIAN:
DEBUG:refactor.py:277:format_first_block_in_file():1172:                    SummonImmortalGuardian();
DEBUG:refactor.py:277:format_first_block_in_file():1173:                    events.Repeat(10s);
DEBUG:refactor.py:277:format_first_block_in_file():1174:                    break;
DEBUG:refactor.py:277:format_first_block_in_file():1175:            }
DEBUG:refactor.py:277:format_first_block_in_file():1176:        }
DEBUG:refactor.py:277:format_first_block_in_file():1177:    };
DEBUG:refactor.py:277:format_first_block_in_file():1178:};
DEBUG:refactor.py:277:format_first_block_in_file():1179:
DEBUG:refactor.py:277:format_first_block_in_file():1180:class boss_yoggsaron_brain : public CreatureScript
DEBUG:refactor.py:277:format_first_block_in_file():1181:{
DEBUG:refactor.py:277:format_first_block_in_file():1182:public:
DEBUG:refactor.py:277:format_first_block_in_file():1183:    boss_yoggsaron_brain() : CreatureScript("boss_yoggsaron_brain") { }
DEBUG:refactor.py:277:format_first_block_in_file():1184:
DEBUG:refactor.py:277:format_first_block_in_file():1185:    CreatureAI* GetAI(Creature* pCreature) const override
DEBUG:refactor.py:277:format_first_block_in_file():1186:    {
DEBUG:refactor.py:277:format_first_block_in_file():1187:        return GetUlduarAI<boss_yoggsaron_brainAI>(pCreature);
DEBUG:refactor.py:277:format_first_block_in_file():1188:    }
DEBUG:refactor.py:277:format_first_block_in_file():1189:
DEBUG:refactor.py:277:format_first_block_in_file():1190:    struct boss_yoggsaron_brainAI : public NullCreatureAI
DEBUG:refactor.py:277:format_first_block_in_file():1191:    {
DEBUG:refactor.py:277:format_first_block_in_file():1192:        boss_yoggsaron_brainAI(Creature* pCreature) : NullCreatureAI(pCreature), summons(pCreature)
DEBUG:refactor.py:277:format_first_block_in_file():1193:        {
DEBUG:refactor.py:277:format_first_block_in_file():1194:            me->SetDisableGravity(true);
DEBUG:refactor.py:277:format_first_block_in_file():1195:            _tentacleCount = 0;
DEBUG:refactor.py:277:format_first_block_in_file():1196:            _activeIllusion = 0;
DEBUG:refactor.py:277:format_first_block_in_file():1197:            _induceTimer = 0;
DEBUG:refactor.py:277:format_first_block_in_file():1198:            _brainDamaged = false;
DEBUG:refactor.py:277:format_first_block_in_file():1199:            me->SetRegeneratingHealth(false);
DEBUG:refactor.py:277:format_first_block_in_file():1200:        }
DEBUG:refactor.py:277:format_first_block_in_file():1201:
DEBUG:refactor.py:277:format_first_block_in_file():1202:        bool _brainDamaged;
DEBUG:refactor.py:277:format_first_block_in_file():1203:        uint8 _tentacleCount;
DEBUG:refactor.py:277:format_first_block_in_file():1204:        uint8 _activeIllusion;
DEBUG:refactor.py:277:format_first_block_in_file():1205:        uint32 _induceTimer;
DEBUG:refactor.py:277:format_first_block_in_file():1206:        SummonList summons;
DEBUG:refactor.py:277:format_first_block_in_file():1207:
DEBUG:refactor.py:277:format_first_block_in_file():1208:        void Reset() override { }
DEBUG:refactor.py:277:format_first_block_in_file():1209:        void JustSummoned(Creature* cr) override
DEBUG:refactor.py:277:format_first_block_in_file():1210:        {
DEBUG:refactor.py:277:format_first_block_in_file():1211:            if (cr->GetEntry() == NPC_INFLUENCE_TENTACLE)
DEBUG:refactor.py:277:format_first_block_in_file():1212:            {
DEBUG:refactor.py:277:format_first_block_in_file():1213:                // Dragons Illusion
DEBUG:refactor.py:277:format_first_block_in_file():1214:                if (cr->GetPositionX() > 2000.0f && cr->GetPositionX() < 2150.0f)
DEBUG:refactor.py:277:format_first_block_in_file():1215:                    cr->UpdateEntry(urand(NPC_CONSORT_FIRST, NPC_CONSORT_LAST));
DEBUG:refactor.py:277:format_first_block_in_file():1216:                // Icecrown Illusion
DEBUG:refactor.py:277:format_first_block_in_file():1217:                else if (cr->GetPositionY() > -150.0f && cr->GetPositionY() < -90.0f)
DEBUG:refactor.py:277:format_first_block_in_file():1218:                {
DEBUG:refactor.py:277:format_first_block_in_file():1219:                    cr->SetStandState(UNIT_STAND_STATE_KNEEL);
DEBUG:refactor.py:277:format_first_block_in_file():1220:                    cr->UpdateEntry(NPC_DEATHSWORN_ZEALOT);
DEBUG:refactor.py:277:format_first_block_in_file():1221:                }
DEBUG:refactor.py:277:format_first_block_in_file():1222:                // Stormwind Illusion
DEBUG:refactor.py:277:format_first_block_in_file():1223:                else
DEBUG:refactor.py:277:format_first_block_in_file():1224:                    cr->UpdateEntry(NPC_SUIT_OF_ARMOR);
DEBUG:refactor.py:277:format_first_block_in_file():1225:            }
DEBUG:refactor.py:277:format_first_block_in_file():1226:            else if (cr->GetEntry() == NPC_LICH_KING)
DEBUG:refactor.py:277:format_first_block_in_file():1227:                cr->CastSpell(cr, SPELL_DEATHGRASP, false);
DEBUG:refactor.py:277:format_first_block_in_file():1228:
DEBUG:refactor.py:277:format_first_block_in_file():1229:            summons.Summon(cr);
DEBUG:refactor.py:277:format_first_block_in_file():1230:        }
DEBUG:refactor.py:277:format_first_block_in_file():1231:
DEBUG:refactor.py:277:format_first_block_in_file():1232:        void PrepareChamberIllusion()
DEBUG:refactor.py:277:format_first_block_in_file():1233:        {
DEBUG:refactor.py:277:format_first_block_in_file():1234:            me->SummonCreature(NPC_INFLUENCE_TENTACLE, 2126.13f, -65.488f, 239.721f, 1.99171f);
DEBUG:refactor.py:277:format_first_block_in_file():1235:            me->SummonCreature(NPC_INFLUENCE_TENTACLE, 2141.05f, -50.5146f, 239.751f, 2.72998f);
DEBUG:refactor.py:277:format_first_block_in_file():1236:            me->SummonCreature(NPC_INFLUENCE_TENTACLE, 2148.83f, -23.9568f, 239.721f, 3.04807f);
DEBUG:refactor.py:277:format_first_block_in_file():1237:            me->SummonCreature(NPC_INFLUENCE_TENTACLE, 2064.39f, -42.0691f, 239.719f, 0.0949586f);
DEBUG:refactor.py:277:format_first_block_in_file():1238:            me->SummonCreature(NPC_INFLUENCE_TENTACLE, 2064.29f, -7.13128f, 239.756f, 5.96974f);
DEBUG:refactor.py:277:format_first_block_in_file():1239:            me->SummonCreature(NPC_INFLUENCE_TENTACLE, 2117.31f, 14.897f, 239.731f, 4.32041f);
DEBUG:refactor.py:277:format_first_block_in_file():1240:            me->SummonCreature(NPC_INFLUENCE_TENTACLE, 2136.7f, 2.43262f, 239.72f, 3.90023f);
DEBUG:refactor.py:277:format_first_block_in_file():1241:
DEBUG:refactor.py:277:format_first_block_in_file():1242:            // Laughing Skulls
DEBUG:refactor.py:277:format_first_block_in_file():1243:            if (urand(0, 1))
DEBUG:refactor.py:277:format_first_block_in_file():1244:                me->SummonCreature(NPC_LAUGHING_SKULL, 2139.13f, -59.0848f, 239.728f, 2.2974f);
DEBUG:refactor.py:277:format_first_block_in_file():1245:            else
DEBUG:refactor.py:277:format_first_block_in_file():1246:                me->SummonCreature(NPC_LAUGHING_SKULL, 2083, -25.66f, 244, 0);
DEBUG:refactor.py:277:format_first_block_in_file():1247:            if (urand(0, 1))
DEBUG:refactor.py:277:format_first_block_in_file():1248:                me->SummonCreature(NPC_LAUGHING_SKULL, 2066.67f, -59.8984f, 239.72f, 0.718747f);
DEBUG:refactor.py:277:format_first_block_in_file():1249:            else
DEBUG:refactor.py:277:format_first_block_in_file():1250:                me->SummonCreature(NPC_LAUGHING_SKULL, 2126.22f, -25.86f, 244, 0);
DEBUG:refactor.py:277:format_first_block_in_file():1251:
DEBUG:refactor.py:277:format_first_block_in_file():1252:            me->SummonCreature(NPC_LAUGHING_SKULL, 2133.09f, 15.341f, 239.72f, 4.0724f);
DEBUG:refactor.py:277:format_first_block_in_file():1253:            me->SummonCreature(NPC_LAUGHING_SKULL, 2065.83f, 12.3772f, 239.792f, 5.49789f);
DEBUG:refactor.py:277:format_first_block_in_file():1254:
DEBUG:refactor.py:277:format_first_block_in_file():1255:            // Aspects
DEBUG:refactor.py:277:format_first_block_in_file():1256:            me->SummonCreature(NPC_ALEXTRASZA, 2091.92f, -25.8f, 242.647f, 0);
DEBUG:refactor.py:277:format_first_block_in_file():1257:            me->SummonCreature(NPC_YSERA, 2116, -25.8f, 242.647f, 3.14f);
DEBUG:refactor.py:277:format_first_block_in_file():1258:            me->SummonCreature(NPC_NELTHARION, 2103.6f, -35.8f, 242.64f, 1.5f);
DEBUG:refactor.py:277:format_first_block_in_file():1259:            me->SummonCreature(NPC_MALYGOS, 2103.6f, -15.8f, 242.64f, 4.7f);
DEBUG:refactor.py:277:format_first_block_in_file():1260:
DEBUG:refactor.py:277:format_first_block_in_file():1261:            // Yogg Vision
DEBUG:refactor.py:277:format_first_block_in_file():1262:            me->SummonCreature(NPC_YOGG_SARON_VISION, 2109.695f, -25.09549f, 222.3250f, 0);
DEBUG:refactor.py:277:format_first_block_in_file():1263:        }
DEBUG:refactor.py:277:format_first_block_in_file():1264:
DEBUG:refactor.py:277:format_first_block_in_file():1265:        void PrepareIceCrownIllusion()
DEBUG:refactor.py:277:format_first_block_in_file():1266:        {
DEBUG:refactor.py:277:format_first_block_in_file():1267:            // Laughing Skulls
DEBUG:refactor.py:277:format_first_block_in_file():1268:            me->SummonCreature(NPC_LAUGHING_SKULL, 1931.12f, -92.702f, 239.991f, 5.2819f);
DEBUG:refactor.py:277:format_first_block_in_file():1269:            if (urand(0, 1))
DEBUG:refactor.py:277:format_first_block_in_file():1270:                me->SummonCreature(NPC_LAUGHING_SKULL, 1969.88f, -147.729f, 239.991f, 2.37593f);
DEBUG:refactor.py:277:format_first_block_in_file():1271:            else
DEBUG:refactor.py:277:format_first_block_in_file():1272:                me->SummonCreature(NPC_LAUGHING_SKULL, 1878, -93.3f, 240, 0);
DEBUG:refactor.py:277:format_first_block_in_file():1273:            if (urand(0, 1))
DEBUG:refactor.py:277:format_first_block_in_file():1274:                me->SummonCreature(NPC_LAUGHING_SKULL, 1950.78f, -167.902f, 239.991f, 2.34844f);
DEBUG:refactor.py:277:format_first_block_in_file():1275:            else
DEBUG:refactor.py:277:format_first_block_in_file():1276:                me->SummonCreature(NPC_LAUGHING_SKULL, 1938.45f, -116.5f, 240, 0);
DEBUG:refactor.py:277:format_first_block_in_file():1277:            if (urand(0, 1))
DEBUG:refactor.py:277:format_first_block_in_file():1278:                me->SummonCreature(NPC_LAUGHING_SKULL, 1896.45f, -141.469f, 239.991f, 6.12227f);
DEBUG:refactor.py:277:format_first_block_in_file():1279:            else
DEBUG:refactor.py:277:format_first_block_in_file():1280:                me->SummonCreature(NPC_LAUGHING_SKULL, 1921, -158, 240, 0);
DEBUG:refactor.py:277:format_first_block_in_file():1281:
DEBUG:refactor.py:277:format_first_block_in_file():1282:            // Influence
DEBUG:refactor.py:277:format_first_block_in_file():1283:            me->SummonCreature(NPC_INFLUENCE_TENTACLE, 1958.29f, -128.65f, 239.99f, 3.61293f);
DEBUG:refactor.py:277:format_first_block_in_file():1284:            me->SummonCreature(NPC_INFLUENCE_TENTACLE, 1957.78f, -134.368f, 239.99f, 3.35375f);
DEBUG:refactor.py:277:format_first_block_in_file():1285:            me->SummonCreature(NPC_INFLUENCE_TENTACLE, 1953.04f, -137.843f, 239.99f, 3.55796f);
DEBUG:refactor.py:277:format_first_block_in_file():1286:            me->SummonCreature(NPC_INFLUENCE_TENTACLE, 1900.31f, -93.5241f, 239.99f, 4.50043f);
DEBUG:refactor.py:277:format_first_block_in_file():1287:            me->SummonCreature(NPC_INFLUENCE_TENTACLE, 1895.03f, -98.0773f, 239.99f, 4.88135f);
DEBUG:refactor.py:277:format_first_block_in_file():1288:            me->SummonCreature(NPC_INFLUENCE_TENTACLE, 1895.19f, -104.587f, 239.99f, 5.02271f);
DEBUG:refactor.py:277:format_first_block_in_file():1289:            me->SummonCreature(NPC_INFLUENCE_TENTACLE, 1923.31f, -125.98f, 240, 4.2f);
DEBUG:refactor.py:277:format_first_block_in_file():1290:
DEBUG:refactor.py:277:format_first_block_in_file():1291:            // Others
DEBUG:refactor.py:277:format_first_block_in_file():1292:            me->SummonCreature(NPC_LICH_KING, 1906.98f, -153, 240, 4.2f);
DEBUG:refactor.py:277:format_first_block_in_file():1293:            me->SummonCreature(NPC_IMMOLATED_CHAMPION, 1902.03f, -161.7f, 240, 1.07f);
DEBUG:refactor.py:277:format_first_block_in_file():1294:
DEBUG:refactor.py:277:format_first_block_in_file():1295:            // Yogg Vision
DEBUG:refactor.py:277:format_first_block_in_file():1296:            me->SummonCreature(NPC_YOGG_SARON_VISION, 1906.226f, -155.8941f, 223.4727, 0);
DEBUG:refactor.py:277:format_first_block_in_file():1297:        }
DEBUG:refactor.py:277:format_first_block_in_file():1298:
DEBUG:refactor.py:277:format_first_block_in_file():1299:        void PrepareStormwindIllusion()
DEBUG:refactor.py:277:format_first_block_in_file():1300:        {
DEBUG:refactor.py:277:format_first_block_in_file():1301:            // Laughing Skulls
DEBUG:refactor.py:277:format_first_block_in_file():1302:            if (urand(0, 1))
DEBUG:refactor.py:277:format_first_block_in_file():1303:                me->SummonCreature(NPC_LAUGHING_SKULL, 1916.36f, 28.05f, 239.666f, 1.30238f);
DEBUG:refactor.py:277:format_first_block_in_file():1304:            else
DEBUG:refactor.py:277:format_first_block_in_file():1305:                me->SummonCreature(NPC_LAUGHING_SKULL, 1966.7f, 57.8f, 239.66f, 0);
DEBUG:refactor.py:277:format_first_block_in_file():1306:            if (urand(0, 1))
DEBUG:refactor.py:277:format_first_block_in_file():1307:                me->SummonCreature(NPC_LAUGHING_SKULL, 1902, 75.1362f, 239.666f, 6.06189f);
DEBUG:refactor.py:277:format_first_block_in_file():1308:            else
DEBUG:refactor.py:277:format_first_block_in_file():1309:                me->SummonCreature(NPC_LAUGHING_SKULL, 1933, 91, 240, 0);
DEBUG:refactor.py:277:format_first_block_in_file():1310:            me->SummonCreature(NPC_LAUGHING_SKULL, 1914.42f, 90.8465f, 239.666f, 5.25294f);
DEBUG:refactor.py:277:format_first_block_in_file():1311:            me->SummonCreature(NPC_LAUGHING_SKULL, 1963.68f, 89.7549f, 239.667f, 3.70571f);
DEBUG:refactor.py:277:format_first_block_in_file():1312:
DEBUG:refactor.py:277:format_first_block_in_file():1313:            // Influence
DEBUG:refactor.py:277:format_first_block_in_file():1314:            me->SummonCreature(NPC_INFLUENCE_TENTACLE, 1931.41f, 39.0711f, 239.66f, 1.82467f);
DEBUG:refactor.py:277:format_first_block_in_file():1315:            me->SummonCreature(NPC_INFLUENCE_TENTACLE, 1908.67f, 45.5867f, 239.666f, 0.72119f);
DEBUG:refactor.py:277:format_first_block_in_file():1316:            me->SummonCreature(NPC_INFLUENCE_TENTACLE, 1897.68f, 66.1274f, 239.666f, 6.27395f);
DEBUG:refactor.py:277:format_first_block_in_file():1317:            me->SummonCreature(NPC_INFLUENCE_TENTACLE, 1950.73f, 49.3446f, 239.666f, 2.63756f);
DEBUG:refactor.py:277:format_first_block_in_file():1318:            me->SummonCreature(NPC_INFLUENCE_TENTACLE, 1923.16f, 97.5586f, 239.666f, 4.74635f);
DEBUG:refactor.py:277:format_first_block_in_file():1319:            me->SummonCreature(NPC_INFLUENCE_TENTACLE, 1956.16f, 72.1403f, 239.666f, 3.19518f);
DEBUG:refactor.py:277:format_first_block_in_file():1320:            me->SummonCreature(NPC_INFLUENCE_TENTACLE, 1944.81f, 92.3154f, 239.666f, 4.03556f);
DEBUG:refactor.py:277:format_first_block_in_file():1321:
DEBUG:refactor.py:277:format_first_block_in_file():1322:            // Others
DEBUG:refactor.py:277:format_first_block_in_file():1323:            me->SummonCreature(NPC_GARONA, 1928.58f, 65.64f, 242.37f, 2.1f);
DEBUG:refactor.py:277:format_first_block_in_file():1324:            me->SummonCreature(NPC_KING_LLANE, 1925.14f, 71.74f, 242.37f, 5.17f);
DEBUG:refactor.py:277:format_first_block_in_file():1325:
DEBUG:refactor.py:277:format_first_block_in_file():1326:            // Yogg Vision
DEBUG:refactor.py:277:format_first_block_in_file():1327:            me->SummonCreature(NPC_YOGG_SARON_VISION, 1929.160f, 67.75694f, 221.7322f, 0);
DEBUG:refactor.py:277:format_first_block_in_file():1328:        }
DEBUG:refactor.py:277:format_first_block_in_file():1329:
DEBUG:refactor.py:277:format_first_block_in_file():1330:        void DoAction(int32 param) override
DEBUG:refactor.py:277:format_first_block_in_file():1331:        {
DEBUG:refactor.py:277:format_first_block_in_file():1332:            if (param == ACTION_DESPAWN_ADDS)
DEBUG:refactor.py:277:format_first_block_in_file():1333:            {
DEBUG:refactor.py:277:format_first_block_in_file():1334:                summons.DespawnAll();
DEBUG:refactor.py:277:format_first_block_in_file():1335:                return;
DEBUG:refactor.py:277:format_first_block_in_file():1336:            }
DEBUG:refactor.py:277:format_first_block_in_file():1337:            else if (param == ACTION_INFLUENCE_TENTACLE_DIED)
DEBUG:refactor.py:277:format_first_block_in_file():1338:            {
DEBUG:refactor.py:277:format_first_block_in_file():1339:                _tentacleCount++;
DEBUG:refactor.py:277:format_first_block_in_file():1340:                if (_tentacleCount >= 7 /*TENTACLES COUNT*/)
DEBUG:refactor.py:277:format_first_block_in_file():1341:                {
DEBUG:refactor.py:277:format_first_block_in_file():1342:                    // Stun
DEBUG:refactor.py:277:format_first_block_in_file():1343:                    if (me->GetInstanceScript())
DEBUG:refactor.py:277:format_first_block_in_file():1344:                        if(Creature* sara = ObjectAccessor::GetCreature(*me, me->GetInstanceScript()->GetGuidData(NPC_SARA)))
DEBUG:refactor.py:277:format_first_block_in_file():1345:                            sara->AI()->DoAction(MINUTE * IN_MILLISECONDS - std::min((uint32)MINUTE * IN_MILLISECONDS, _induceTimer));
DEBUG:refactor.py:277:format_first_block_in_file():1346:
DEBUG:refactor.py:277:format_first_block_in_file():1347:                    _induceTimer = 0;
DEBUG:refactor.py:277:format_first_block_in_file():1348:                    summons.DespawnEntry(NPC_LAUGHING_SKULL);
DEBUG:refactor.py:277:format_first_block_in_file():1349:                    if (GameObject* go = me->FindNearestGameObject(GO_CHAMBER_ILLUSION_DOORS + _activeIllusion, 150.0f))
DEBUG:refactor.py:277:format_first_block_in_file():1350:                        go->SetGoState(GO_STATE_ACTIVE);
DEBUG:refactor.py:277:format_first_block_in_file():1351:                }
DEBUG:refactor.py:277:format_first_block_in_file():1352:                return;
DEBUG:refactor.py:277:format_first_block_in_file():1353:            }
DEBUG:refactor.py:277:format_first_block_in_file():1354:            else if (param == ACTION_REMOVE_STUN)
DEBUG:refactor.py:277:format_first_block_in_file():1355:                return;
DEBUG:refactor.py:277:format_first_block_in_file():1356:
DEBUG:refactor.py:277:format_first_block_in_file():1357:            summons.DespawnAll();
DEBUG:refactor.py:277:format_first_block_in_file():1358:            switch(param)
DEBUG:refactor.py:277:format_first_block_in_file():1359:            {
DEBUG:refactor.py:277:format_first_block_in_file():1360:                case ACTION_ILLUSION_STORMWIND:
DEBUG:refactor.py:277:format_first_block_in_file():1361:                    PrepareStormwindIllusion();
DEBUG:refactor.py:277:format_first_block_in_file():1362:                    break;
DEBUG:refactor.py:277:format_first_block_in_file():1363:                case ACTION_ILLUSION_DRAGONS:
DEBUG:refactor.py:277:format_first_block_in_file():1364:                    PrepareChamberIllusion();
DEBUG:refactor.py:277:format_first_block_in_file():1365:                    break;
DEBUG:refactor.py:277:format_first_block_in_file():1366:                case ACTION_ILLUSION_ICECROWN:
DEBUG:refactor.py:277:format_first_block_in_file():1367:                    PrepareIceCrownIllusion();
DEBUG:refactor.py:277:format_first_block_in_file():1368:                    break;
DEBUG:refactor.py:277:format_first_block_in_file():1369:            }
DEBUG:refactor.py:277:format_first_block_in_file():1370:
DEBUG:refactor.py:277:format_first_block_in_file():1371:            for (uint32 i = GO_CHAMBER_ILLUSION_DOORS; i <= GO_STORMWIND_ILLUSION_DOORS; ++i)
DEBUG:refactor.py:277:format_first_block_in_file():1372:                if (GameObject* go = me->FindNearestGameObject(i, 150.0f))
DEBUG:refactor.py:277:format_first_block_in_file():1373:                    go->SetGoState(GO_STATE_READY);
DEBUG:refactor.py:277:format_first_block_in_file():1374:
DEBUG:refactor.py:277:format_first_block_in_file():1375:            _activeIllusion = param - 1;
DEBUG:refactor.py:277:format_first_block_in_file():1376:            _tentacleCount = 0;
DEBUG:refactor.py:277:format_first_block_in_file():1377:            _induceTimer = 1;
DEBUG:refactor.py:277:format_first_block_in_file():1378:
DEBUG:refactor.py:277:format_first_block_in_file():1379:            me->CastSpell(me, SPELL_INDUCE_MADNESS, false);
DEBUG:refactor.py:277:format_first_block_in_file():1380:        }
DEBUG:refactor.py:277:format_first_block_in_file():1381:
DEBUG:refactor.py:277:format_first_block_in_file():1382:        uint32 GetData(uint32 param) const override
DEBUG:refactor.py:277:format_first_block_in_file():1383:        {
DEBUG:refactor.py:277:format_first_block_in_file():1384:            if (param == DATA_GET_CURRENT_ILLUSION)
DEBUG:refactor.py:277:format_first_block_in_file():1385:                return _activeIllusion + 1;
DEBUG:refactor.py:277:format_first_block_in_file():1386:
DEBUG:refactor.py:277:format_first_block_in_file():1387:            return 0;
DEBUG:refactor.py:277:format_first_block_in_file():1388:        }
DEBUG:refactor.py:277:format_first_block_in_file():1389:
DEBUG:refactor.py:277:format_first_block_in_file():1390:        void DamageTaken(Unit* who, uint32& damage, DamageEffectType, SpellSchoolMask) override
DEBUG:refactor.py:277:format_first_block_in_file():1391:        {
DEBUG:refactor.py:277:format_first_block_in_file():1392:            if (_tentacleCount < 7) // if all tentacles aren't killed
DEBUG:refactor.py:277:format_first_block_in_file():1393:            {
DEBUG:refactor.py:277:format_first_block_in_file():1394:                damage = 0;
DEBUG:refactor.py:277:format_first_block_in_file():1395:                if (who)
DEBUG:refactor.py:277:format_first_block_in_file():1396:                    Unit::Kill(who, who);
DEBUG:refactor.py:277:format_first_block_in_file():1397:                return;
DEBUG:refactor.py:277:format_first_block_in_file():1398:            }
DEBUG:refactor.py:277:format_first_block_in_file():1399:
DEBUG:refactor.py:277:format_first_block_in_file():1400:            if (!_brainDamaged)
DEBUG:refactor.py:277:format_first_block_in_file():1401:            {
DEBUG:refactor.py:277:format_first_block_in_file():1402:                // START PHASE 3
DEBUG:refactor.py:277:format_first_block_in_file():1403:                if (me->HealthBelowPctDamaged(30, damage))
DEBUG:refactor.py:277:format_first_block_in_file():1404:                {
DEBUG:refactor.py:277:format_first_block_in_file():1405:                    me->SetRegeneratingHealth(false);
DEBUG:refactor.py:277:format_first_block_in_file():1406:                    _EnterEvadeMode();
DEBUG:refactor.py:277:format_first_block_in_file():1407:                    _brainDamaged = true;
DEBUG:refactor.py:277:format_first_block_in_file():1408:
DEBUG:refactor.py:277:format_first_block_in_file():1409:                    me->CastSpell(me, SPELL_BRAIN_HURT_VISUAL, true);
DEBUG:refactor.py:277:format_first_block_in_file():1410:                    if (me->GetInstanceScript())
DEBUG:refactor.py:277:format_first_block_in_file():1411:                        if(Creature* sara = ObjectAccessor::GetCreature(*me, me->GetInstanceScript()->GetGuidData(NPC_SARA)))
DEBUG:refactor.py:277:format_first_block_in_file():1412:                            sara->AI()->DoAction(ACTION_BRAIN_DAMAGED);
DEBUG:refactor.py:277:format_first_block_in_file():1413:                }
DEBUG:refactor.py:277:format_first_block_in_file():1414:            }
DEBUG:refactor.py:277:format_first_block_in_file():1415:        }
DEBUG:refactor.py:277:format_first_block_in_file():1416:
DEBUG:refactor.py:277:format_first_block_in_file():1417:        void UpdateAI(uint32 diff) override
DEBUG:refactor.py:277:format_first_block_in_file():1418:        {
DEBUG:refactor.py:277:format_first_block_in_file():1419:            if (_induceTimer)
DEBUG:refactor.py:277:format_first_block_in_file():1420:                _induceTimer += diff;
DEBUG:refactor.py:277:format_first_block_in_file():1421:        }
DEBUG:refactor.py:277:format_first_block_in_file():1422:    };
DEBUG:refactor.py:277:format_first_block_in_file():1423:};
DEBUG:refactor.py:277:format_first_block_in_file():1424:
DEBUG:refactor.py:277:format_first_block_in_file():1425:class boss_yoggsaron_death_orb : public CreatureScript
DEBUG:refactor.py:277:format_first_block_in_file():1426:{
DEBUG:refactor.py:277:format_first_block_in_file():1427:public:
DEBUG:refactor.py:277:format_first_block_in_file():1428:    boss_yoggsaron_death_orb() : CreatureScript("boss_yoggsaron_death_orb") { }
DEBUG:refactor.py:277:format_first_block_in_file():1429:
DEBUG:refactor.py:277:format_first_block_in_file():1430:    CreatureAI* GetAI(Creature* pCreature) const override
DEBUG:refactor.py:277:format_first_block_in_file():1431:    {
DEBUG:refactor.py:277:format_first_block_in_file():1432:        return GetUlduarAI<boss_yoggsaron_death_orbAI>(pCreature);
DEBUG:refactor.py:277:format_first_block_in_file():1433:    }
DEBUG:refactor.py:277:format_first_block_in_file():1434:
DEBUG:refactor.py:277:format_first_block_in_file():1435:    struct boss_yoggsaron_death_orbAI : public NullCreatureAI
DEBUG:refactor.py:277:format_first_block_in_file():1436:    {
DEBUG:refactor.py:277:format_first_block_in_file():1437:        boss_yoggsaron_death_orbAI(Creature* pCreature) : NullCreatureAI(pCreature)
DEBUG:refactor.py:277:format_first_block_in_file():1438:        {
DEBUG:refactor.py:277:format_first_block_in_file():1439:            me->CastSpell(me, SPELL_DEATH_RAY_WARNING, true);
DEBUG:refactor.py:277:format_first_block_in_file():1440:            _startTimer = 1;
DEBUG:refactor.py:277:format_first_block_in_file():1441:        }
DEBUG:refactor.py:277:format_first_block_in_file():1442:
DEBUG:refactor.py:277:format_first_block_in_file():1443:        uint32 _startTimer;
DEBUG:refactor.py:277:format_first_block_in_file():1444:
DEBUG:refactor.py:277:format_first_block_in_file():1445:        void UpdateAI(uint32 diff) override
DEBUG:refactor.py:277:format_first_block_in_file():1446:        {
DEBUG:refactor.py:277:format_first_block_in_file():1447:            if (_startTimer)
DEBUG:refactor.py:277:format_first_block_in_file():1448:            {
DEBUG:refactor.py:277:format_first_block_in_file():1449:                _startTimer += diff;
DEBUG:refactor.py:277:format_first_block_in_file():1450:                if (_startTimer > 4000)
DEBUG:refactor.py:277:format_first_block_in_file():1451:                {
DEBUG:refactor.py:277:format_first_block_in_file():1452:                    me->CastSpell(me, SPELL_DEATH_RAY_DAMAGE_VISUAL, true);
DEBUG:refactor.py:277:format_first_block_in_file():1453:                    me->CastSpell(me, SPELL_DEATH_RAY_DAMAGE, true);
DEBUG:refactor.py:277:format_first_block_in_file():1454:
DEBUG:refactor.py:277:format_first_block_in_file():1455:                    _startTimer = 0;
DEBUG:refactor.py:277:format_first_block_in_file():1456:                    me->SetSpeed(MOVE_WALK, 2);
DEBUG:refactor.py:277:format_first_block_in_file():1457:                    me->SetSpeed(MOVE_RUN, 2);
DEBUG:refactor.py:277:format_first_block_in_file():1458:                    me->GetMotionMaster()->MoveRandom(20.0f);
DEBUG:refactor.py:277:format_first_block_in_file():1459:                }
DEBUG:refactor.py:277:format_first_block_in_file():1460:            }
DEBUG:refactor.py:277:format_first_block_in_file():1461:        }
DEBUG:refactor.py:277:format_first_block_in_file():1462:    };
DEBUG:refactor.py:277:format_first_block_in_file():1463:};
DEBUG:refactor.py:277:format_first_block_in_file():1464:
DEBUG:refactor.py:277:format_first_block_in_file():1465:class boss_yoggsaron_crusher_tentacle : public CreatureScript
DEBUG:refactor.py:277:format_first_block_in_file():1466:{
DEBUG:refactor.py:277:format_first_block_in_file():1467:public:
DEBUG:refactor.py:277:format_first_block_in_file():1468:    boss_yoggsaron_crusher_tentacle() : CreatureScript("boss_yoggsaron_crusher_tentacle") { }
DEBUG:refactor.py:277:format_first_block_in_file():1469:
DEBUG:refactor.py:277:format_first_block_in_file():1470:    CreatureAI* GetAI(Creature* pCreature) const override
DEBUG:refactor.py:277:format_first_block_in_file():1471:    {
DEBUG:refactor.py:277:format_first_block_in_file():1472:        return GetUlduarAI<boss_yoggsaron_crusher_tentacleAI>(pCreature);
DEBUG:refactor.py:277:format_first_block_in_file():1473:    }
DEBUG:refactor.py:277:format_first_block_in_file():1474:
DEBUG:refactor.py:277:format_first_block_in_file():1475:    struct boss_yoggsaron_crusher_tentacleAI : public ScriptedAI
DEBUG:refactor.py:277:format_first_block_in_file():1476:    {
DEBUG:refactor.py:277:format_first_block_in_file():1477:        boss_yoggsaron_crusher_tentacleAI(Creature* pCreature) : ScriptedAI(pCreature)
DEBUG:refactor.py:277:format_first_block_in_file():1478:        {
DEBUG:refactor.py:277:format_first_block_in_file():1479:            me->SetCombatMovement(false);
DEBUG:refactor.py:277:format_first_block_in_file():1480:            me->CastSpell(me, SPELL_CRUSH, true);
DEBUG:refactor.py:277:format_first_block_in_file():1481:            me->CastSpell(me, SPELL_FOCUSED_ANGER, true);
DEBUG:refactor.py:277:format_first_block_in_file():1482:            me->CastSpell(me, SPELL_DIMINISH_POWER, false);
DEBUG:refactor.py:277:format_first_block_in_file():1483:        }
DEBUG:refactor.py:277:format_first_block_in_file():1484:
DEBUG:refactor.py:277:format_first_block_in_file():1485:        void Reset() override
DEBUG:refactor.py:277:format_first_block_in_file():1486:        {
DEBUG:refactor.py:277:format_first_block_in_file():1487:            me->SetInCombatWithZone();
DEBUG:refactor.py:277:format_first_block_in_file():1488:        }
DEBUG:refactor.py:277:format_first_block_in_file():1489:
DEBUG:refactor.py:277:format_first_block_in_file():1490:        void DamageTaken(Unit* who, uint32&, DamageEffectType damagetype, SpellSchoolMask) override
DEBUG:refactor.py:277:format_first_block_in_file():1491:        {
DEBUG:refactor.py:277:format_first_block_in_file():1492:            if (who && damagetype == DIRECT_DAMAGE)
DEBUG:refactor.py:277:format_first_block_in_file():1493:            {
DEBUG:refactor.py:277:format_first_block_in_file():1494:                DoResetThreatList();
DEBUG:refactor.py:277:format_first_block_in_file():1495:                me->AddThreat(who, 100000);
DEBUG:refactor.py:277:format_first_block_in_file():1496:                AttackStart(who);
DEBUG:refactor.py:277:format_first_block_in_file():1497:                me->InterruptNonMeleeSpells(false);
DEBUG:refactor.py:277:format_first_block_in_file():1498:            }
DEBUG:refactor.py:277:format_first_block_in_file():1499:        }
DEBUG:refactor.py:277:format_first_block_in_file():1500:
DEBUG:refactor.py:277:format_first_block_in_file():1501:        void DoAction(int32 param) override
DEBUG:refactor.py:277:format_first_block_in_file():1502:        {
DEBUG:refactor.py:277:format_first_block_in_file():1503:            if (param == ACTION_REMOVE_STUN)
DEBUG:refactor.py:277:format_first_block_in_file():1504:                me->RemoveAura(SPELL_SHATTERED_ILLUSION);
DEBUG:refactor.py:277:format_first_block_in_file():1505:        }
DEBUG:refactor.py:277:format_first_block_in_file():1506:
DEBUG:refactor.py:277:format_first_block_in_file():1507:        void UpdateAI(uint32  /*diff*/) override
DEBUG:refactor.py:277:format_first_block_in_file():1508:        {
DEBUG:refactor.py:277:format_first_block_in_file():1509:            if (!UpdateVictim())
DEBUG:refactor.py:277:format_first_block_in_file():1510:                return;
DEBUG:refactor.py:277:format_first_block_in_file():1511:
DEBUG:refactor.py:277:format_first_block_in_file():1512:            if (me->IsWithinMeleeRange(me->GetVictim()))
DEBUG:refactor.py:277:format_first_block_in_file():1513:            {
DEBUG:refactor.py:277:format_first_block_in_file():1514:                DoMeleeAttackIfReady();
DEBUG:refactor.py:277:format_first_block_in_file():1515:                return;
DEBUG:refactor.py:277:format_first_block_in_file():1516:            }
DEBUG:refactor.py:277:format_first_block_in_file():1517:
DEBUG:refactor.py:277:format_first_block_in_file():1518:            if (me->HasUnitState(UNIT_STATE_CASTING))
DEBUG:refactor.py:277:format_first_block_in_file():1519:                return;
DEBUG:refactor.py:277:format_first_block_in_file():1520:
DEBUG:refactor.py:277:format_first_block_in_file():1521:            me->CastSpell(me, SPELL_DIMINISH_POWER, false);
DEBUG:refactor.py:277:format_first_block_in_file():1522:            DoResetThreatList();
DEBUG:refactor.py:277:format_first_block_in_file():1523:        }
DEBUG:refactor.py:277:format_first_block_in_file():1524:    };
DEBUG:refactor.py:277:format_first_block_in_file():1525:};
DEBUG:refactor.py:277:format_first_block_in_file():1526:
DEBUG:refactor.py:277:format_first_block_in_file():1527:class boss_yoggsaron_corruptor_tentacle : public CreatureScript
DEBUG:refactor.py:277:format_first_block_in_file():1528:{
DEBUG:refactor.py:277:format_first_block_in_file():1529:public:
DEBUG:refactor.py:277:format_first_block_in_file():1530:    boss_yoggsaron_corruptor_tentacle() : CreatureScript("boss_yoggsaron_corruptor_tentacle") { }
DEBUG:refactor.py:277:format_first_block_in_file():1531:
DEBUG:refactor.py:277:format_first_block_in_file():1532:    CreatureAI* GetAI(Creature* pCreature) const override
DEBUG:refactor.py:277:format_first_block_in_file():1533:    {
DEBUG:refactor.py:277:format_first_block_in_file():1534:        return GetUlduarAI<boss_yoggsaron_corruptor_tentacleAI>(pCreature);
DEBUG:refactor.py:277:format_first_block_in_file():1535:    }
DEBUG:refactor.py:277:format_first_block_in_file():1536:
DEBUG:refactor.py:277:format_first_block_in_file():1537:    struct boss_yoggsaron_corruptor_tentacleAI : public ScriptedAI
DEBUG:refactor.py:277:format_first_block_in_file():1538:    {
DEBUG:refactor.py:277:format_first_block_in_file():1539:        boss_yoggsaron_corruptor_tentacleAI(Creature* pCreature) : ScriptedAI(pCreature)
DEBUG:refactor.py:277:format_first_block_in_file():1540:        {
DEBUG:refactor.py:277:format_first_block_in_file():1541:            me->SetCombatMovement(false);
DEBUG:refactor.py:277:format_first_block_in_file():1542:        }
DEBUG:refactor.py:277:format_first_block_in_file():1543:
DEBUG:refactor.py:277:format_first_block_in_file():1544:        void DoAction(int32 param) override
DEBUG:refactor.py:277:format_first_block_in_file():1545:        {
DEBUG:refactor.py:277:format_first_block_in_file():1546:            if (param == ACTION_REMOVE_STUN)
DEBUG:refactor.py:277:format_first_block_in_file():1547:                me->RemoveAura(SPELL_SHATTERED_ILLUSION);
DEBUG:refactor.py:277:format_first_block_in_file():1548:        }
DEBUG:refactor.py:277:format_first_block_in_file():1549:
DEBUG:refactor.py:277:format_first_block_in_file():1550:        Unit* SelectCorruptionTarget()
DEBUG:refactor.py:277:format_first_block_in_file():1551:        {
DEBUG:refactor.py:277:format_first_block_in_file():1552:            Player* target = nullptr;
DEBUG:refactor.py:277:format_first_block_in_file():1553:            Map::PlayerList const& pList = me->GetMap()->GetPlayers();
DEBUG:refactor.py:277:format_first_block_in_file():1554:            uint8 num = urand(0, pList.getSize() - 1);
DEBUG:refactor.py:277:format_first_block_in_file():1555:            uint8 count = 0;
DEBUG:refactor.py:277:format_first_block_in_file():1556:            for (Map::PlayerList::const_iterator itr = pList.begin(); itr != pList.end(); ++itr, ++count)
DEBUG:refactor.py:277:format_first_block_in_file():1557:            {
DEBUG:refactor.py:277:format_first_block_in_file():1558:                if (me->GetDistance(itr->GetSource()) > 200 || itr->GetSource()->GetPositionZ() < 300 || !itr->GetSource()->IsAlive() || itr->GetSource()->IsGameMaster())
DEBUG:refactor.py:277:format_first_block_in_file():1559:                    continue;
DEBUG:refactor.py:277:format_first_block_in_file():1560:
DEBUG:refactor.py:277:format_first_block_in_file():1561:                if (count <= num || !target)
DEBUG:refactor.py:277:format_first_block_in_file():1562:                    target = itr->GetSource();
DEBUG:refactor.py:277:format_first_block_in_file():1563:                else
DEBUG:refactor.py:277:format_first_block_in_file():1564:                    break;
DEBUG:refactor.py:277:format_first_block_in_file():1565:            }
DEBUG:refactor.py:277:format_first_block_in_file():1566:
DEBUG:refactor.py:277:format_first_block_in_file():1567:            return target;
DEBUG:refactor.py:277:format_first_block_in_file():1568:        }
DEBUG:refactor.py:277:format_first_block_in_file():1569:
DEBUG:refactor.py:277:format_first_block_in_file():1570:        void UpdateAI(uint32  /*diff*/) override
DEBUG:refactor.py:277:format_first_block_in_file():1571:        {
DEBUG:refactor.py:277:format_first_block_in_file():1572:            if (me->HasUnitState(UNIT_STATE_CASTING))
DEBUG:refactor.py:277:format_first_block_in_file():1573:                return;
DEBUG:refactor.py:277:format_first_block_in_file():1574:
DEBUG:refactor.py:277:format_first_block_in_file():1575:            if (Unit* target = SelectCorruptionTarget())
DEBUG:refactor.py:277:format_first_block_in_file():1576:            {
DEBUG:refactor.py:277:format_first_block_in_file():1577:                uint32 spellid = RAND(SPELL_APATHY, SPELL_BLACK_PLAGUE, SPELL_DRAINING_POISON, SPELL_CURSE_OF_DOOM);
DEBUG:refactor.py:277:format_first_block_in_file():1578:                me->CastSpell(target, spellid, false);
DEBUG:refactor.py:277:format_first_block_in_file():1579:            }
DEBUG:refactor.py:277:format_first_block_in_file():1580:        }
DEBUG:refactor.py:277:format_first_block_in_file():1581:    };
DEBUG:refactor.py:277:format_first_block_in_file():1582:};
DEBUG:refactor.py:277:format_first_block_in_file():1583:
DEBUG:refactor.py:277:format_first_block_in_file():1584:class boss_yoggsaron_constrictor_tentacle : public CreatureScript
DEBUG:refactor.py:277:format_first_block_in_file():1585:{
DEBUG:refactor.py:277:format_first_block_in_file():1586:public:
DEBUG:refactor.py:277:format_first_block_in_file():1587:    boss_yoggsaron_constrictor_tentacle() : CreatureScript("boss_yoggsaron_constrictor_tentacle") { }
DEBUG:refactor.py:277:format_first_block_in_file():1588:
DEBUG:refactor.py:277:format_first_block_in_file():1589:    CreatureAI* GetAI(Creature* pCreature) const override
DEBUG:refactor.py:277:format_first_block_in_file():1590:    {
DEBUG:refactor.py:277:format_first_block_in_file():1591:        return GetUlduarAI<boss_yoggsaron_constrictor_tentacleAI>(pCreature);
DEBUG:refactor.py:277:format_first_block_in_file():1592:    }
DEBUG:refactor.py:277:format_first_block_in_file():1593:
DEBUG:refactor.py:277:format_first_block_in_file():1594:    struct boss_yoggsaron_constrictor_tentacleAI : public ScriptedAI
DEBUG:refactor.py:277:format_first_block_in_file():1595:    {
DEBUG:refactor.py:277:format_first_block_in_file():1596:        boss_yoggsaron_constrictor_tentacleAI(Creature* pCreature) : ScriptedAI(pCreature)
DEBUG:refactor.py:277:format_first_block_in_file():1597:        {
DEBUG:refactor.py:277:format_first_block_in_file():1598:            me->SetCombatMovement(false);
DEBUG:refactor.py:277:format_first_block_in_file():1599:            _checkTimer = 1;
DEBUG:refactor.py:277:format_first_block_in_file():1600:            _playerGUID.Clear();
DEBUG:refactor.py:277:format_first_block_in_file():1601:        }
DEBUG:refactor.py:277:format_first_block_in_file():1602:
DEBUG:refactor.py:277:format_first_block_in_file():1603:        uint32 _checkTimer;
DEBUG:refactor.py:277:format_first_block_in_file():1604:        ObjectGuid _playerGUID;
DEBUG:refactor.py:277:format_first_block_in_file():1605:
DEBUG:refactor.py:277:format_first_block_in_file():1606:        Unit* SelectConstrictTarget()
DEBUG:refactor.py:277:format_first_block_in_file():1607:        {
DEBUG:refactor.py:277:format_first_block_in_file():1608:            Player* target = nullptr;
DEBUG:refactor.py:277:format_first_block_in_file():1609:            Map::PlayerList const& pList = me->GetMap()->GetPlayers();
DEBUG:refactor.py:277:format_first_block_in_file():1610:            uint8 num = urand(0, pList.getSize() - 1);
DEBUG:refactor.py:277:format_first_block_in_file():1611:            uint8 count = 0;
DEBUG:refactor.py:277:format_first_block_in_file():1612:            for(Map::PlayerList::const_iterator itr = pList.begin(); itr != pList.end(); ++itr, ++count)
DEBUG:refactor.py:277:format_first_block_in_file():1613:            {
DEBUG:refactor.py:277:format_first_block_in_file():1614:                if (me->GetDistance(itr->GetSource()) > 10 || !itr->GetSource()->IsAlive() || itr->GetSource()->IsGameMaster())
DEBUG:refactor.py:277:format_first_block_in_file():1615:                    continue;
DEBUG:refactor.py:277:format_first_block_in_file():1616:                if (itr->GetSource()->HasAura(SPELL_SQUEEZE) || itr->GetSource()->HasAura(SPELL_INSANE1))
DEBUG:refactor.py:277:format_first_block_in_file():1617:                    continue;
DEBUG:refactor.py:277:format_first_block_in_file():1618:
DEBUG:refactor.py:277:format_first_block_in_file():1619:                if (count <= num || !target)
DEBUG:refactor.py:277:format_first_block_in_file():1620:                    target = itr->GetSource();
DEBUG:refactor.py:277:format_first_block_in_file():1621:                else
DEBUG:refactor.py:277:format_first_block_in_file():1622:                    break;
DEBUG:refactor.py:277:format_first_block_in_file():1623:            }
DEBUG:refactor.py:277:format_first_block_in_file():1624:
DEBUG:refactor.py:277:format_first_block_in_file():1625:            return target;
DEBUG:refactor.py:277:format_first_block_in_file():1626:        }
DEBUG:refactor.py:277:format_first_block_in_file():1627:
DEBUG:refactor.py:277:format_first_block_in_file():1628:        void UpdateAI(uint32 diff) override
DEBUG:refactor.py:277:format_first_block_in_file():1629:        {
DEBUG:refactor.py:277:format_first_block_in_file():1630:            if (_checkTimer)
DEBUG:refactor.py:277:format_first_block_in_file():1631:            {
DEBUG:refactor.py:277:format_first_block_in_file():1632:                _checkTimer += diff;
DEBUG:refactor.py:277:format_first_block_in_file():1633:                if (_checkTimer >= 1000 && !me->HasUnitState(UNIT_STATE_STUNNED))
DEBUG:refactor.py:277:format_first_block_in_file():1634:                {
DEBUG:refactor.py:277:format_first_block_in_file():1635:                    if (Unit* target = SelectConstrictTarget())
DEBUG:refactor.py:277:format_first_block_in_file():1636:                    {
DEBUG:refactor.py:277:format_first_block_in_file():1637:                        target->CastSpell(me, SPELL_LUNGE, true);
DEBUG:refactor.py:277:format_first_block_in_file():1638:                        target->CastSpell(target, SPELL_SQUEEZE, true);
DEBUG:refactor.py:277:format_first_block_in_file():1639:                        _playerGUID = target->GetGUID();
DEBUG:refactor.py:277:format_first_block_in_file():1640:                        _checkTimer = 0;
DEBUG:refactor.py:277:format_first_block_in_file():1641:                        return;
DEBUG:refactor.py:277:format_first_block_in_file():1642:                    }
DEBUG:refactor.py:277:format_first_block_in_file():1643:
DEBUG:refactor.py:277:format_first_block_in_file():1644:                    _checkTimer = 1;
DEBUG:refactor.py:277:format_first_block_in_file():1645:                }
DEBUG:refactor.py:277:format_first_block_in_file():1646:            }
DEBUG:refactor.py:277:format_first_block_in_file():1647:        }
DEBUG:refactor.py:277:format_first_block_in_file():1648:
DEBUG:refactor.py:277:format_first_block_in_file():1649:        void DoAction(int32 param) override
DEBUG:refactor.py:277:format_first_block_in_file():1650:        {
DEBUG:refactor.py:277:format_first_block_in_file():1651:            if (param == ACTION_REMOVE_STUN)
DEBUG:refactor.py:277:format_first_block_in_file():1652:                me->RemoveAura(SPELL_SHATTERED_ILLUSION);
DEBUG:refactor.py:277:format_first_block_in_file():1653:        }
DEBUG:refactor.py:277:format_first_block_in_file():1654:
DEBUG:refactor.py:277:format_first_block_in_file():1655:        void JustDied(Unit*) override
DEBUG:refactor.py:277:format_first_block_in_file():1656:        {
DEBUG:refactor.py:277:format_first_block_in_file():1657:            if (Unit* player = ObjectAccessor::GetUnit(*me, _playerGUID))
DEBUG:refactor.py:277:format_first_block_in_file():1658:                player->RemoveAura(SPELL_SQUEEZE);
DEBUG:refactor.py:277:format_first_block_in_file():1659:        }
DEBUG:refactor.py:277:format_first_block_in_file():1660:    };
DEBUG:refactor.py:277:format_first_block_in_file():1661:};
DEBUG:refactor.py:277:format_first_block_in_file():1662:
DEBUG:refactor.py:277:format_first_block_in_file():1663:const uint32 TABLE_KEEPER_PASSIVE[4] = {SPELL_FREYA_PASSIVE, SPELL_HODIR_PASSIVE, SPELL_MIMIRON_PASSIVE, SPELL_THORIM_PASSIVE};
DEBUG:refactor.py:277:format_first_block_in_file():1664:
DEBUG:refactor.py:277:format_first_block_in_file():1665:class boss_yoggsaron_keeper : public CreatureScript
DEBUG:refactor.py:277:format_first_block_in_file():1666:{
DEBUG:refactor.py:277:format_first_block_in_file():1667:public:
DEBUG:refactor.py:277:format_first_block_in_file():1668:    boss_yoggsaron_keeper() : CreatureScript("boss_yoggsaron_keeper") { }
DEBUG:refactor.py:277:format_first_block_in_file():1669:
DEBUG:refactor.py:277:format_first_block_in_file():1670:    CreatureAI* GetAI(Creature* pCreature) const override
DEBUG:refactor.py:277:format_first_block_in_file():1671:    {
DEBUG:refactor.py:277:format_first_block_in_file():1672:        return GetUlduarAI<boss_yoggsaron_keeperAI>(pCreature);
DEBUG:refactor.py:277:format_first_block_in_file():1673:    }
DEBUG:refactor.py:277:format_first_block_in_file():1674:
DEBUG:refactor.py:277:format_first_block_in_file():1675:    struct boss_yoggsaron_keeperAI : public NullCreatureAI
DEBUG:refactor.py:277:format_first_block_in_file():1676:    {
DEBUG:refactor.py:277:format_first_block_in_file():1677:        boss_yoggsaron_keeperAI(Creature* pCreature) : NullCreatureAI(pCreature)
DEBUG:refactor.py:277:format_first_block_in_file():1678:        {
DEBUG:refactor.py:277:format_first_block_in_file():1679:            me->ApplySpellImmune(0, IMMUNITY_STATE, SPELL_AURA_MOD_SCALE, true);
DEBUG:refactor.py:277:format_first_block_in_file():1680:            switch (me->GetEntry())
DEBUG:refactor.py:277:format_first_block_in_file():1681:            {
DEBUG:refactor.py:277:format_first_block_in_file():1682:                case NPC_FREYA_KEEPER:
DEBUG:refactor.py:277:format_first_block_in_file():1683:                    _keeperId = KEEPER_FREYA;
DEBUG:refactor.py:277:format_first_block_in_file():1684:                    break;
DEBUG:refactor.py:277:format_first_block_in_file():1685:                case NPC_HODIR_KEEPER:
DEBUG:refactor.py:277:format_first_block_in_file():1686:                    _keeperId = KEEPER_HODIR;
DEBUG:refactor.py:277:format_first_block_in_file():1687:                    break;
DEBUG:refactor.py:277:format_first_block_in_file():1688:                case NPC_MIMIRON_KEEPER:
DEBUG:refactor.py:277:format_first_block_in_file():1689:                    _keeperId = KEEPER_MIMIRON;
DEBUG:refactor.py:277:format_first_block_in_file():1690:                    break;
DEBUG:refactor.py:277:format_first_block_in_file():1691:                case NPC_THORIM_KEEPER:
DEBUG:refactor.py:277:format_first_block_in_file():1692:                    _keeperId = KEEPER_THORIM;
DEBUG:refactor.py:277:format_first_block_in_file():1693:                    break;
DEBUG:refactor.py:277:format_first_block_in_file():1694:                default:
DEBUG:refactor.py:277:format_first_block_in_file():1695:                    return;
DEBUG:refactor.py:277:format_first_block_in_file():1696:            }
DEBUG:refactor.py:277:format_first_block_in_file():1697:            me->RemoveAura(TABLE_KEEPER_PASSIVE[_keeperId]);
DEBUG:refactor.py:277:format_first_block_in_file():1698:
DEBUG:refactor.py:277:format_first_block_in_file():1699:            scheduler.Schedule(1s, [this](TaskContext context)
DEBUG:refactor.py:277:format_first_block_in_file():1700:            {
DEBUG:refactor.py:277:format_first_block_in_file():1701:                if (me->GetInstanceScript())
DEBUG:refactor.py:277:format_first_block_in_file():1702:                {
DEBUG:refactor.py:277:format_first_block_in_file():1703:                    if (me->GetInstanceScript()->GetData(TYPE_YOGGSARON) == IN_PROGRESS && !_isEncounterInProgress)
DEBUG:refactor.py:277:format_first_block_in_file():1704:                    {
DEBUG:refactor.py:277:format_first_block_in_file():1705:                        _isEncounterInProgress = true;
DEBUG:refactor.py:277:format_first_block_in_file():1706:                        if (_keeperId == KEEPER_FREYA)
DEBUG:refactor.py:277:format_first_block_in_file():1707:                            me->CastSpell(me, SPELL_CONJURE_SANITY_WELL, false);
DEBUG:refactor.py:277:format_first_block_in_file():1708:                        if (_keeperId == KEEPER_MIMIRON)
DEBUG:refactor.py:277:format_first_block_in_file():1709:                        {
DEBUG:refactor.py:277:format_first_block_in_file():1710:                            scheduler.Schedule(2s, [this](TaskContext context)
DEBUG:refactor.py:277:format_first_block_in_file():1711:                            {
DEBUG:refactor.py:277:format_first_block_in_file():1712:                                if (!me->HasUnitState(UNIT_STATE_CASTING))
DEBUG:refactor.py:277:format_first_block_in_file():1713:                                    me->CastSpell(me, SPELL_DESTABILIZATION_MATRIX, false);
DEBUG:refactor.py:277:format_first_block_in_file():1714:                                context.Repeat(2s);
DEBUG:refactor.py:277:format_first_block_in_file():1715:                            });
DEBUG:refactor.py:277:format_first_block_in_file():1716:                        }
DEBUG:refactor.py:277:format_first_block_in_file():1717:                        if (!me->HasAura(TABLE_KEEPER_PASSIVE[_keeperId]))
DEBUG:refactor.py:277:format_first_block_in_file():1718:                            me->AddAura(TABLE_KEEPER_PASSIVE[_keeperId], me);
DEBUG:refactor.py:277:format_first_block_in_file():1719:                    }
DEBUG:refactor.py:277:format_first_block_in_file():1720:                    else if (me->GetInstanceScript()->GetData(TYPE_YOGGSARON) != IN_PROGRESS && _isEncounterInProgress)
DEBUG:refactor.py:277:format_first_block_in_file():1721:                    {
DEBUG:refactor.py:277:format_first_block_in_file():1722:                        _isEncounterInProgress = false;
DEBUG:refactor.py:277:format_first_block_in_file():1723:                        scheduler.CancelAll();
DEBUG:refactor.py:277:format_first_block_in_file():1724:                        me->RemoveAura(TABLE_KEEPER_PASSIVE[_keeperId]);
DEBUG:refactor.py:277:format_first_block_in_file():1725:                    }
DEBUG:refactor.py:277:format_first_block_in_file():1726:                }
DEBUG:refactor.py:277:format_first_block_in_file():1727:                context.Repeat(1s);
DEBUG:refactor.py:277:format_first_block_in_file():1728:            });
DEBUG:refactor.py:277:format_first_block_in_file():1729:        }
DEBUG:refactor.py:277:format_first_block_in_file():1730:
DEBUG:refactor.py:277:format_first_block_in_file():1731:        void UpdateAI(uint32 diff) override
DEBUG:refactor.py:277:format_first_block_in_file():1732:        {
DEBUG:refactor.py:277:format_first_block_in_file():1733:            scheduler.Update(diff);
DEBUG:refactor.py:277:format_first_block_in_file():1734:        }
DEBUG:refactor.py:277:format_first_block_in_file():1735:
DEBUG:refactor.py:277:format_first_block_in_file():1736:    private:
DEBUG:refactor.py:277:format_first_block_in_file():1737:        bool _isEncounterInProgress;
DEBUG:refactor.py:277:format_first_block_in_file():1738:        uint8 _keeperId;
DEBUG:refactor.py:277:format_first_block_in_file():1739:    };
DEBUG:refactor.py:277:format_first_block_in_file():1740:};
DEBUG:refactor.py:277:format_first_block_in_file():1741:
DEBUG:refactor.py:277:format_first_block_in_file():1742:class boss_yoggsaron_descend_portal : public CreatureScript
DEBUG:refactor.py:277:format_first_block_in_file():1743:{
DEBUG:refactor.py:277:format_first_block_in_file():1744:public:
DEBUG:refactor.py:277:format_first_block_in_file():1745:    boss_yoggsaron_descend_portal() : CreatureScript("boss_yoggsaron_descend_portal") { }
DEBUG:refactor.py:277:format_first_block_in_file():1746:
DEBUG:refactor.py:277:format_first_block_in_file():1747:    struct boss_yoggsaron_descend_portalAI : public PassiveAI
DEBUG:refactor.py:277:format_first_block_in_file():1748:    {
DEBUG:refactor.py:277:format_first_block_in_file():1749:        boss_yoggsaron_descend_portalAI(Creature* creature) : PassiveAI(creature), _instance(creature->GetInstanceScript()) {}
DEBUG:refactor.py:277:format_first_block_in_file():1750:
DEBUG:refactor.py:277:format_first_block_in_file():1751:        void OnSpellClick(Unit* clicker, bool& spellClickHandled) override
DEBUG:refactor.py:277:format_first_block_in_file():1752:        {
DEBUG:refactor.py:277:format_first_block_in_file():1753:            if (!spellClickHandled)
DEBUG:refactor.py:277:format_first_block_in_file():1754:                return;
DEBUG:refactor.py:277:format_first_block_in_file():1755:
DEBUG:refactor.py:277:format_first_block_in_file():1756:            if (!me->GetUInt32Value(UNIT_NPC_FLAGS))
DEBUG:refactor.py:277:format_first_block_in_file():1757:                return;
DEBUG:refactor.py:277:format_first_block_in_file():1758:
DEBUG:refactor.py:277:format_first_block_in_file():1759:            switch (me->GetArmor())
DEBUG:refactor.py:277:format_first_block_in_file():1760:            {
DEBUG:refactor.py:277:format_first_block_in_file():1761:                case ACTION_ILLUSION_DRAGONS:
DEBUG:refactor.py:277:format_first_block_in_file():1762:                    clicker->CastSpell(clicker, SPELL_TELEPORT_TO_CHAMBER, true);
DEBUG:refactor.py:277:format_first_block_in_file():1763:                    break;
DEBUG:refactor.py:277:format_first_block_in_file():1764:                case ACTION_ILLUSION_ICECROWN:
DEBUG:refactor.py:277:format_first_block_in_file():1765:                    clicker->CastSpell(clicker, SPELL_TELEPORT_TO_ICECROWN, true);
DEBUG:refactor.py:277:format_first_block_in_file():1766:                    break;
DEBUG:refactor.py:277:format_first_block_in_file():1767:                case ACTION_ILLUSION_STORMWIND:
DEBUG:refactor.py:277:format_first_block_in_file():1768:                    clicker->CastSpell(clicker, SPELL_TELEPORT_TO_STORMWIND, true);
DEBUG:refactor.py:277:format_first_block_in_file():1769:                    break;
DEBUG:refactor.py:277:format_first_block_in_file():1770:            }
DEBUG:refactor.py:277:format_first_block_in_file():1771:
DEBUG:refactor.py:277:format_first_block_in_file():1772:            me->SetUInt32Value(UNIT_NPC_FLAGS, 0);
DEBUG:refactor.py:277:format_first_block_in_file():1773:            me->DespawnOrUnsummon(1000);
DEBUG:refactor.py:277:format_first_block_in_file():1774:        }
DEBUG:refactor.py:277:format_first_block_in_file():1775:
DEBUG:refactor.py:277:format_first_block_in_file():1776:    private:
DEBUG:refactor.py:277:format_first_block_in_file():1777:        InstanceScript* _instance;
DEBUG:refactor.py:277:format_first_block_in_file():1778:    };
DEBUG:refactor.py:277:format_first_block_in_file():1779:
DEBUG:refactor.py:277:format_first_block_in_file():1780:    CreatureAI* GetAI(Creature* creature) const override
DEBUG:refactor.py:277:format_first_block_in_file():1781:    {
DEBUG:refactor.py:277:format_first_block_in_file():1782:        return GetUlduarAI<boss_yoggsaron_descend_portalAI>(creature);
DEBUG:refactor.py:277:format_first_block_in_file():1783:    }
DEBUG:refactor.py:277:format_first_block_in_file():1784:};
DEBUG:refactor.py:277:format_first_block_in_file():1785:
DEBUG:refactor.py:277:format_first_block_in_file():1786:class boss_yoggsaron_influence_tentacle : public CreatureScript
DEBUG:refactor.py:277:format_first_block_in_file():1787:{
DEBUG:refactor.py:277:format_first_block_in_file():1788:public:
DEBUG:refactor.py:277:format_first_block_in_file():1789:    boss_yoggsaron_influence_tentacle() : CreatureScript("boss_yoggsaron_influence_tentacle") { }
DEBUG:refactor.py:277:format_first_block_in_file():1790:
DEBUG:refactor.py:277:format_first_block_in_file():1791:    CreatureAI* GetAI(Creature* pCreature) const override
DEBUG:refactor.py:277:format_first_block_in_file():1792:    {
DEBUG:refactor.py:277:format_first_block_in_file():1793:        return GetUlduarAI<boss_yoggsaron_influence_tentacleAI>(pCreature);
DEBUG:refactor.py:277:format_first_block_in_file():1794:    }
DEBUG:refactor.py:277:format_first_block_in_file():1795:
DEBUG:refactor.py:277:format_first_block_in_file():1796:    struct boss_yoggsaron_influence_tentacleAI : public NullCreatureAI
DEBUG:refactor.py:277:format_first_block_in_file():1797:    {
DEBUG:refactor.py:277:format_first_block_in_file():1798:        boss_yoggsaron_influence_tentacleAI(Creature* pCreature) : NullCreatureAI(pCreature)
DEBUG:refactor.py:277:format_first_block_in_file():1799:        {
DEBUG:refactor.py:277:format_first_block_in_file():1800:            me->CastSpell(me, SPELL_GRIM_REPRISAL, true);
DEBUG:refactor.py:277:format_first_block_in_file():1801:        }
DEBUG:refactor.py:277:format_first_block_in_file():1802:
DEBUG:refactor.py:277:format_first_block_in_file():1803:        void DamageTaken(Unit*, uint32&, DamageEffectType, SpellSchoolMask) override
DEBUG:refactor.py:277:format_first_block_in_file():1804:        {
DEBUG:refactor.py:277:format_first_block_in_file():1805:            if (me->GetEntry() != NPC_INFLUENCE_TENTACLE)
DEBUG:refactor.py:277:format_first_block_in_file():1806:                me->UpdateEntry(NPC_INFLUENCE_TENTACLE, 0, false);
DEBUG:refactor.py:277:format_first_block_in_file():1807:        }
DEBUG:refactor.py:277:format_first_block_in_file():1808:
DEBUG:refactor.py:277:format_first_block_in_file():1809:        void JustDied(Unit*) override
DEBUG:refactor.py:277:format_first_block_in_file():1810:        {
DEBUG:refactor.py:277:format_first_block_in_file():1811:            if (me->IsSummon())
DEBUG:refactor.py:277:format_first_block_in_file():1812:                if (Unit* sara = me->ToTempSummon()->GetSummonerUnit())
DEBUG:refactor.py:277:format_first_block_in_file():1813:                    sara->GetAI()->DoAction(ACTION_INFLUENCE_TENTACLE_DIED);
DEBUG:refactor.py:277:format_first_block_in_file():1814:        }
DEBUG:refactor.py:277:format_first_block_in_file():1815:    };
DEBUG:refactor.py:277:format_first_block_in_file():1816:};
DEBUG:refactor.py:277:format_first_block_in_file():1817:
DEBUG:refactor.py:277:format_first_block_in_file():1818:class boss_yoggsaron_immortal_guardian : public CreatureScript
DEBUG:refactor.py:277:format_first_block_in_file():1819:{
DEBUG:refactor.py:277:format_first_block_in_file():1820:public:
DEBUG:refactor.py:277:format_first_block_in_file():1821:    boss_yoggsaron_immortal_guardian() : CreatureScript("boss_yoggsaron_immortal_guardian") { }
DEBUG:refactor.py:277:format_first_block_in_file():1822:
DEBUG:refactor.py:277:format_first_block_in_file():1823:    CreatureAI* GetAI(Creature* pCreature) const override
DEBUG:refactor.py:277:format_first_block_in_file():1824:    {
DEBUG:refactor.py:277:format_first_block_in_file():1825:        return GetUlduarAI<boss_yoggsaron_immortal_guardianAI>(pCreature);
DEBUG:refactor.py:277:format_first_block_in_file():1826:    }
DEBUG:refactor.py:277:format_first_block_in_file():1827:
DEBUG:refactor.py:277:format_first_block_in_file():1828:    struct boss_yoggsaron_immortal_guardianAI : public ScriptedAI
DEBUG:refactor.py:277:format_first_block_in_file():1829:    {
DEBUG:refactor.py:277:format_first_block_in_file():1830:        boss_yoggsaron_immortal_guardianAI(Creature* pCreature) : ScriptedAI(pCreature)
DEBUG:refactor.py:277:format_first_block_in_file():1831:        {
DEBUG:refactor.py:277:format_first_block_in_file():1832:            Reset();
DEBUG:refactor.py:277:format_first_block_in_file():1833:        }
DEBUG:refactor.py:277:format_first_block_in_file():1834:
DEBUG:refactor.py:277:format_first_block_in_file():1835:        uint32 _visualTimer;
DEBUG:refactor.py:277:format_first_block_in_file():1836:        uint32 _spellTimer;
DEBUG:refactor.py:277:format_first_block_in_file():1837:
DEBUG:refactor.py:277:format_first_block_in_file():1838:        void Reset() override
DEBUG:refactor.py:277:format_first_block_in_file():1839:        {
DEBUG:refactor.py:277:format_first_block_in_file():1840:            me->CastSpell(me, SPELL_RECENTLY_SPAWNED, true);
DEBUG:refactor.py:277:format_first_block_in_file():1841:            //me->CastSpell(me, SPELL_EMPOWERED_PASSIVE, true);
DEBUG:refactor.py:277:format_first_block_in_file():1842:            if (Aura* aur = me->AddAura(SPELL_EMPOWERED_PASSIVE, me))
DEBUG:refactor.py:277:format_first_block_in_file():1843:                aur->SetStackAmount(9);
DEBUG:refactor.py:277:format_first_block_in_file():1844:
DEBUG:refactor.py:277:format_first_block_in_file():1845:            _spellTimer = 0;
DEBUG:refactor.py:277:format_first_block_in_file():1846:            _visualTimer = 1;
DEBUG:refactor.py:277:format_first_block_in_file():1847:            me->SetControlled(true, UNIT_STATE_ROOT);
DEBUG:refactor.py:277:format_first_block_in_file():1848:            me->SetInCombatWithZone();
DEBUG:refactor.py:277:format_first_block_in_file():1849:        }
DEBUG:refactor.py:277:format_first_block_in_file():1850:
DEBUG:refactor.py:277:format_first_block_in_file():1851:        void DamageTaken(Unit*, uint32& damage, DamageEffectType, SpellSchoolMask) override
DEBUG:refactor.py:277:format_first_block_in_file():1852:        {
DEBUG:refactor.py:277:format_first_block_in_file():1853:            if (damage >= me->GetHealth())
DEBUG:refactor.py:277:format_first_block_in_file():1854:                damage = me->GetHealth() - 1;
DEBUG:refactor.py:277:format_first_block_in_file():1855:        }
DEBUG:refactor.py:277:format_first_block_in_file():1856:
DEBUG:refactor.py:277:format_first_block_in_file():1857:        void SpellHit(Unit* caster, SpellInfo const* spellInfo) override
DEBUG:refactor.py:277:format_first_block_in_file():1858:        {
DEBUG:refactor.py:277:format_first_block_in_file():1859:            if (spellInfo->Id == SPELL_SHADOW_BEACON)
DEBUG:refactor.py:277:format_first_block_in_file():1860:                caster->GetAI()->DoAction(ACTION_YOGG_SARON_SHADOW_BEACON);
DEBUG:refactor.py:277:format_first_block_in_file():1861:        }
DEBUG:refactor.py:277:format_first_block_in_file():1862:
DEBUG:refactor.py:277:format_first_block_in_file():1863:        void UpdateAI(uint32 diff) override
DEBUG:refactor.py:277:format_first_block_in_file():1864:        {
DEBUG:refactor.py:277:format_first_block_in_file():1865:            if (!UpdateVictim())
DEBUG:refactor.py:277:format_first_block_in_file():1866:                return;
DEBUG:refactor.py:277:format_first_block_in_file():1867:
DEBUG:refactor.py:277:format_first_block_in_file():1868:            if (_visualTimer)
DEBUG:refactor.py:277:format_first_block_in_file():1869:            {
DEBUG:refactor.py:277:format_first_block_in_file():1870:                _visualTimer += diff;
DEBUG:refactor.py:277:format_first_block_in_file():1871:                if (_visualTimer >= 100 && _visualTimer < 10000 )
DEBUG:refactor.py:277:format_first_block_in_file():1872:                {
DEBUG:refactor.py:277:format_first_block_in_file():1873:                    me->CastSpell(me, SPELL_SIMPLE_TELEPORT, false);
DEBUG:refactor.py:277:format_first_block_in_file():1874:                    _visualTimer = 10000;
DEBUG:refactor.py:277:format_first_block_in_file():1875:                }
DEBUG:refactor.py:277:format_first_block_in_file():1876:                else if (_visualTimer >= 11000)
DEBUG:refactor.py:277:format_first_block_in_file():1877:                {
DEBUG:refactor.py:277:format_first_block_in_file():1878:                    me->SetControlled(false, UNIT_STATE_ROOT);
DEBUG:refactor.py:277:format_first_block_in_file():1879:                    _visualTimer = 0;
DEBUG:refactor.py:277:format_first_block_in_file():1880:                }
DEBUG:refactor.py:277:format_first_block_in_file():1881:            }
DEBUG:refactor.py:277:format_first_block_in_file():1882:
DEBUG:refactor.py:277:format_first_block_in_file():1883:            if (me->HasUnitState(UNIT_STATE_CASTING))
DEBUG:refactor.py:277:format_first_block_in_file():1884:                return;
DEBUG:refactor.py:277:format_first_block_in_file():1885:
DEBUG:refactor.py:277:format_first_block_in_file():1886:            _spellTimer += diff;
DEBUG:refactor.py:277:format_first_block_in_file():1887:            if (_spellTimer >= 9500)
DEBUG:refactor.py:277:format_first_block_in_file():1888:            {
DEBUG:refactor.py:277:format_first_block_in_file():1889:                if (me->HealthBelowPct(85))
DEBUG:refactor.py:277:format_first_block_in_file():1890:                {
DEBUG:refactor.py:277:format_first_block_in_file():1891:                    if (Unit* target = SelectTargetFromPlayerList(40.0f))
DEBUG:refactor.py:277:format_first_block_in_file():1892:                    {
DEBUG:refactor.py:277:format_first_block_in_file():1893:                        me->CastSpell(target, SPELL_DRAIN_LIFE, false);
DEBUG:refactor.py:277:format_first_block_in_file():1894:                        _spellTimer = 0;
DEBUG:refactor.py:277:format_first_block_in_file():1895:                    }
DEBUG:refactor.py:277:format_first_block_in_file():1896:                }
DEBUG:refactor.py:277:format_first_block_in_file():1897:                else
DEBUG:refactor.py:277:format_first_block_in_file():1898:                    _spellTimer = 7500;
DEBUG:refactor.py:277:format_first_block_in_file():1899:            }
DEBUG:refactor.py:277:format_first_block_in_file():1900:
DEBUG:refactor.py:277:format_first_block_in_file():1901:            DoMeleeAttackIfReady();
DEBUG:refactor.py:277:format_first_block_in_file():1902:        }
DEBUG:refactor.py:277:format_first_block_in_file():1903:    };
DEBUG:refactor.py:277:format_first_block_in_file():1904:};
DEBUG:refactor.py:277:format_first_block_in_file():1905:
DEBUG:refactor.py:277:format_first_block_in_file():1906:class boss_yoggsaron_lich_king : public CreatureScript
DEBUG:refactor.py:277:format_first_block_in_file():1907:{
DEBUG:refactor.py:277:format_first_block_in_file():1908:public:
DEBUG:refactor.py:277:format_first_block_in_file():1909:    boss_yoggsaron_lich_king() : CreatureScript("boss_yoggsaron_lich_king") { }
DEBUG:refactor.py:277:format_first_block_in_file():1910:
DEBUG:refactor.py:277:format_first_block_in_file():1911:    CreatureAI* GetAI(Creature* pCreature) const override
DEBUG:refactor.py:277:format_first_block_in_file():1912:    {
DEBUG:refactor.py:277:format_first_block_in_file():1913:        return GetUlduarAI<boss_yoggsaron_lich_kingAI>(pCreature);
DEBUG:refactor.py:277:format_first_block_in_file():1914:    }
DEBUG:refactor.py:277:format_first_block_in_file():1915:
DEBUG:refactor.py:277:format_first_block_in_file():1916:    struct boss_yoggsaron_lich_kingAI : public NullCreatureAI
DEBUG:refactor.py:277:format_first_block_in_file():1917:    {
DEBUG:refactor.py:277:format_first_block_in_file():1918:        boss_yoggsaron_lich_kingAI(Creature* c) : NullCreatureAI(c) { }
DEBUG:refactor.py:277:format_first_block_in_file():1919:
DEBUG:refactor.py:277:format_first_block_in_file():1920:        bool _running;
DEBUG:refactor.py:277:format_first_block_in_file():1921:        int32 _checkTimer;
DEBUG:refactor.py:277:format_first_block_in_file():1922:        uint8 _step;
DEBUG:refactor.py:277:format_first_block_in_file():1923:
DEBUG:refactor.py:277:format_first_block_in_file():1924:        void Reset() override
DEBUG:refactor.py:277:format_first_block_in_file():1925:        {
DEBUG:refactor.py:277:format_first_block_in_file():1926:            _running = true;
DEBUG:refactor.py:277:format_first_block_in_file():1927:            _checkTimer = 0;
DEBUG:refactor.py:277:format_first_block_in_file():1928:            _step = 0;
DEBUG:refactor.py:277:format_first_block_in_file():1929:        }
DEBUG:refactor.py:277:format_first_block_in_file():1930:
DEBUG:refactor.py:277:format_first_block_in_file():1931:        void NextStep(const uint32 time)
DEBUG:refactor.py:277:format_first_block_in_file():1932:        {
DEBUG:refactor.py:277:format_first_block_in_file():1933:            _step++;
DEBUG:refactor.py:277:format_first_block_in_file():1934:            _checkTimer = time;
DEBUG:refactor.py:277:format_first_block_in_file():1935:        }
DEBUG:refactor.py:277:format_first_block_in_file():1936:
DEBUG:refactor.py:277:format_first_block_in_file():1937:        void Say(uint8 text, uint32 id)
DEBUG:refactor.py:277:format_first_block_in_file():1938:        {
DEBUG:refactor.py:277:format_first_block_in_file():1939:            Creature* creature = me->FindNearestCreature(id, 50);
DEBUG:refactor.py:277:format_first_block_in_file():1940:            if (!creature)
DEBUG:refactor.py:277:format_first_block_in_file():1941:                return;
DEBUG:refactor.py:277:format_first_block_in_file():1942:
DEBUG:refactor.py:277:format_first_block_in_file():1943:            creature->AI()->Talk(text);
DEBUG:refactor.py:277:format_first_block_in_file():1944:                return;
DEBUG:refactor.py:277:format_first_block_in_file():1945:        }
DEBUG:refactor.py:277:format_first_block_in_file():1946:
DEBUG:refactor.py:277:format_first_block_in_file():1947:        void UpdateAI(uint32 diff) override
DEBUG:refactor.py:277:format_first_block_in_file():1948:        {
DEBUG:refactor.py:277:format_first_block_in_file():1949:            if (!_running)
DEBUG:refactor.py:277:format_first_block_in_file():1950:                return;
DEBUG:refactor.py:277:format_first_block_in_file():1951:
DEBUG:refactor.py:277:format_first_block_in_file():1952:            if (_checkTimer != 0)
DEBUG:refactor.py:277:format_first_block_in_file():1953:            {
DEBUG:refactor.py:277:format_first_block_in_file():1954:                _checkTimer -= diff;
DEBUG:refactor.py:277:format_first_block_in_file():1955:                if (_checkTimer < 0 )
DEBUG:refactor.py:277:format_first_block_in_file():1956:                    _checkTimer = 0;
DEBUG:refactor.py:277:format_first_block_in_file():1957:            }
DEBUG:refactor.py:277:format_first_block_in_file():1958:            else
DEBUG:refactor.py:277:format_first_block_in_file():1959:                switch (_step)
DEBUG:refactor.py:277:format_first_block_in_file():1960:                {
DEBUG:refactor.py:277:format_first_block_in_file():1961:                    case 0:
DEBUG:refactor.py:277:format_first_block_in_file():1962:                        NextStep(5000);
DEBUG:refactor.py:277:format_first_block_in_file():1963:                        break;
DEBUG:refactor.py:277:format_first_block_in_file():1964:                    case 1:
DEBUG:refactor.py:277:format_first_block_in_file():1965:                        Say(SAY_LK_1, NPC_LICH_KING);
DEBUG:refactor.py:277:format_first_block_in_file():1966:                        NextStep(7000);
DEBUG:refactor.py:277:format_first_block_in_file():1967:                        break;
DEBUG:refactor.py:277:format_first_block_in_file():1968:                    case 2:
DEBUG:refactor.py:277:format_first_block_in_file():1969:                        Say(SAY_IC_1, NPC_IMMOLATED_CHAMPION);
DEBUG:refactor.py:277:format_first_block_in_file():1970:                        NextStep(6000);
DEBUG:refactor.py:277:format_first_block_in_file():1971:                        break;
DEBUG:refactor.py:277:format_first_block_in_file():1972:                    case 3:
DEBUG:refactor.py:277:format_first_block_in_file():1973:                        Say(SAY_IC_2, NPC_IMMOLATED_CHAMPION);
DEBUG:refactor.py:277:format_first_block_in_file():1974:                        NextStep(6500);
DEBUG:refactor.py:277:format_first_block_in_file():1975:                        break;
DEBUG:refactor.py:277:format_first_block_in_file():1976:                    case 4:
DEBUG:refactor.py:277:format_first_block_in_file():1977:                        Say(SAY_LK_2, NPC_LICH_KING);
DEBUG:refactor.py:277:format_first_block_in_file():1978:                        NextStep(7500);
DEBUG:refactor.py:277:format_first_block_in_file():1979:                        break;
DEBUG:refactor.py:277:format_first_block_in_file():1980:                    case 5:
DEBUG:refactor.py:277:format_first_block_in_file():1981:                        Say(SAY_YOGG_5, NPC_YOGG_SARON_VISION);
DEBUG:refactor.py:277:format_first_block_in_file():1982:                        NextStep(5000);
DEBUG:refactor.py:277:format_first_block_in_file():1983:                        break;
DEBUG:refactor.py:277:format_first_block_in_file():1984:                    case 6:
DEBUG:refactor.py:277:format_first_block_in_file():1985:                        Say(SAY_YOGG_6, NPC_YOGG_SARON_VISION);
DEBUG:refactor.py:277:format_first_block_in_file():1986:                        _running = false;
DEBUG:refactor.py:277:format_first_block_in_file():1987:                        break;
DEBUG:refactor.py:277:format_first_block_in_file():1988:                }
DEBUG:refactor.py:277:format_first_block_in_file():1989:        }
DEBUG:refactor.py:277:format_first_block_in_file():1990:    };
DEBUG:refactor.py:277:format_first_block_in_file():1991:};
DEBUG:refactor.py:277:format_first_block_in_file():1992:
DEBUG:refactor.py:277:format_first_block_in_file():1993:class boss_yoggsaron_llane : public CreatureScript
DEBUG:refactor.py:277:format_first_block_in_file():1994:{
DEBUG:refactor.py:277:format_first_block_in_file():1995:public:
DEBUG:refactor.py:277:format_first_block_in_file():1996:    boss_yoggsaron_llane() : CreatureScript("boss_yoggsaron_llane") { }
DEBUG:refactor.py:277:format_first_block_in_file():1997:
DEBUG:refactor.py:277:format_first_block_in_file():1998:    CreatureAI* GetAI(Creature* pCreature) const override
DEBUG:refactor.py:277:format_first_block_in_file():1999:    {
DEBUG:refactor.py:277:format_first_block_in_file():2000:        return GetUlduarAI<boss_yoggsaron_llaneAI>(pCreature);
DEBUG:refactor.py:277:format_first_block_in_file():2001:    }
DEBUG:refactor.py:277:format_first_block_in_file():2002:
DEBUG:refactor.py:277:format_first_block_in_file():2003:    struct boss_yoggsaron_llaneAI : public NullCreatureAI
DEBUG:refactor.py:277:format_first_block_in_file():2004:    {
DEBUG:refactor.py:277:format_first_block_in_file():2005:        boss_yoggsaron_llaneAI(Creature* c) : NullCreatureAI(c) { }
DEBUG:refactor.py:277:format_first_block_in_file():2006:
DEBUG:refactor.py:277:format_first_block_in_file():2007:        bool _running;
DEBUG:refactor.py:277:format_first_block_in_file():2008:        int32 _checkTimer;
DEBUG:refactor.py:277:format_first_block_in_file():2009:        uint8 _step;
DEBUG:refactor.py:277:format_first_block_in_file():2010:
DEBUG:refactor.py:277:format_first_block_in_file():2011:        void Reset() override
DEBUG:refactor.py:277:format_first_block_in_file():2012:        {
DEBUG:refactor.py:277:format_first_block_in_file():2013:            _running = true;
DEBUG:refactor.py:277:format_first_block_in_file():2014:            _checkTimer = 0;
DEBUG:refactor.py:277:format_first_block_in_file():2015:            _step = 0;
DEBUG:refactor.py:277:format_first_block_in_file():2016:        }
DEBUG:refactor.py:277:format_first_block_in_file():2017:
DEBUG:refactor.py:277:format_first_block_in_file():2018:        void NextStep(const uint32 time)
DEBUG:refactor.py:277:format_first_block_in_file():2019:        {
DEBUG:refactor.py:277:format_first_block_in_file():2020:            _step++;
DEBUG:refactor.py:277:format_first_block_in_file():2021:            _checkTimer = time;
DEBUG:refactor.py:277:format_first_block_in_file():2022:        }
DEBUG:refactor.py:277:format_first_block_in_file():2023:
DEBUG:refactor.py:277:format_first_block_in_file():2024:        void Say(uint8 text, uint32 id)
DEBUG:refactor.py:277:format_first_block_in_file():2025:        {
DEBUG:refactor.py:277:format_first_block_in_file():2026:            Creature* creature = me->FindNearestCreature(id, 50);
DEBUG:refactor.py:277:format_first_block_in_file():2027:            if (!creature)
DEBUG:refactor.py:277:format_first_block_in_file():2028:                return;
DEBUG:refactor.py:277:format_first_block_in_file():2029:
DEBUG:refactor.py:277:format_first_block_in_file():2030:            creature->AI()->Talk(text);
DEBUG:refactor.py:277:format_first_block_in_file():2031:                return;
DEBUG:refactor.py:277:format_first_block_in_file():2032:        }
DEBUG:refactor.py:277:format_first_block_in_file():2033:
DEBUG:refactor.py:277:format_first_block_in_file():2034:        void UpdateAI(uint32 diff) override
DEBUG:refactor.py:277:format_first_block_in_file():2035:        {
DEBUG:refactor.py:277:format_first_block_in_file():2036:            if (!_running)
DEBUG:refactor.py:277:format_first_block_in_file():2037:                return;
DEBUG:refactor.py:277:format_first_block_in_file():2038:
DEBUG:refactor.py:277:format_first_block_in_file():2039:            if (_checkTimer != 0)
DEBUG:refactor.py:277:format_first_block_in_file():2040:            {
DEBUG:refactor.py:277:format_first_block_in_file():2041:                _checkTimer -= diff;
DEBUG:refactor.py:277:format_first_block_in_file():2042:                if (_checkTimer < 0 )
DEBUG:refactor.py:277:format_first_block_in_file():2043:                    _checkTimer = 0;
DEBUG:refactor.py:277:format_first_block_in_file():2044:            }
DEBUG:refactor.py:277:format_first_block_in_file():2045:            else
DEBUG:refactor.py:277:format_first_block_in_file():2046:                switch (_step)
DEBUG:refactor.py:277:format_first_block_in_file():2047:                {
DEBUG:refactor.py:277:format_first_block_in_file():2048:                    case 0:
DEBUG:refactor.py:277:format_first_block_in_file():2049:                        NextStep(5000);
DEBUG:refactor.py:277:format_first_block_in_file():2050:                        break;
DEBUG:refactor.py:277:format_first_block_in_file():2051:                    case 1:
DEBUG:refactor.py:277:format_first_block_in_file():2052:                        Say(SAY_GARONA_1, NPC_GARONA);
DEBUG:refactor.py:277:format_first_block_in_file():2053:                        NextStep(2000);
DEBUG:refactor.py:277:format_first_block_in_file():2054:                        break;
DEBUG:refactor.py:277:format_first_block_in_file():2055:                    case 2:
DEBUG:refactor.py:277:format_first_block_in_file():2056:                        Say(SAY_GARONA_2, NPC_GARONA);
DEBUG:refactor.py:277:format_first_block_in_file():2057:                        NextStep(6500);
DEBUG:refactor.py:277:format_first_block_in_file():2058:                        break;
DEBUG:refactor.py:277:format_first_block_in_file():2059:                    case 3:
DEBUG:refactor.py:277:format_first_block_in_file():2060:                        Say(SAY_GARONA_3, NPC_GARONA);
DEBUG:refactor.py:277:format_first_block_in_file():2061:                        NextStep(11000);
DEBUG:refactor.py:277:format_first_block_in_file():2062:                        break;
DEBUG:refactor.py:277:format_first_block_in_file():2063:                    case 4:
DEBUG:refactor.py:277:format_first_block_in_file():2064:                        Say(SAY_YOGG_1, NPC_YOGG_SARON_VISION);
DEBUG:refactor.py:277:format_first_block_in_file():2065:                        NextStep(2500);
DEBUG:refactor.py:277:format_first_block_in_file():2066:                        break;
DEBUG:refactor.py:277:format_first_block_in_file():2067:                    case 5:
DEBUG:refactor.py:277:format_first_block_in_file():2068:                        Say(SAY_YOGG_2, NPC_YOGG_SARON_VISION);
DEBUG:refactor.py:277:format_first_block_in_file():2069:                        NextStep(2500);
DEBUG:refactor.py:277:format_first_block_in_file():2070:                        break;
DEBUG:refactor.py:277:format_first_block_in_file():2071:                    case 6:
DEBUG:refactor.py:277:format_first_block_in_file():2072:                        Say(SAY_LLANE_1, NPC_KING_LLANE);
DEBUG:refactor.py:277:format_first_block_in_file():2073:                        NextStep(10000);
DEBUG:refactor.py:277:format_first_block_in_file():2074:                        break;
DEBUG:refactor.py:277:format_first_block_in_file():2075:                    case 7:
DEBUG:refactor.py:277:format_first_block_in_file():2076:                        Say(SAY_GARONA_4, NPC_GARONA);
DEBUG:refactor.py:277:format_first_block_in_file():2077:                        NextStep(5000);
DEBUG:refactor.py:277:format_first_block_in_file():2078:                        break;
DEBUG:refactor.py:277:format_first_block_in_file():2079:                    case 8:
DEBUG:refactor.py:277:format_first_block_in_file():2080:                        Say(SAY_YOGG_3, NPC_YOGG_SARON_VISION);
DEBUG:refactor.py:277:format_first_block_in_file():2081:                        _running = false;
DEBUG:refactor.py:277:format_first_block_in_file():2082:                        break;
DEBUG:refactor.py:277:format_first_block_in_file():2083:                }
DEBUG:refactor.py:277:format_first_block_in_file():2084:        }
DEBUG:refactor.py:277:format_first_block_in_file():2085:    };
DEBUG:refactor.py:277:format_first_block_in_file():2086:};
DEBUG:refactor.py:277:format_first_block_in_file():2087:
DEBUG:refactor.py:277:format_first_block_in_file():2088:class boss_yoggsaron_neltharion : public CreatureScript
DEBUG:refactor.py:277:format_first_block_in_file():2089:{
DEBUG:refactor.py:277:format_first_block_in_file():2090:public:
DEBUG:refactor.py:277:format_first_block_in_file():2091:    boss_yoggsaron_neltharion() : CreatureScript("boss_yoggsaron_neltharion") { }
DEBUG:refactor.py:277:format_first_block_in_file():2092:
DEBUG:refactor.py:277:format_first_block_in_file():2093:    CreatureAI* GetAI(Creature* pCreature) const override
DEBUG:refactor.py:277:format_first_block_in_file():2094:    {
DEBUG:refactor.py:277:format_first_block_in_file():2095:        return GetUlduarAI<boss_yoggsaron_neltharionAI>(pCreature);
DEBUG:refactor.py:277:format_first_block_in_file():2096:    }
DEBUG:refactor.py:277:format_first_block_in_file():2097:
DEBUG:refactor.py:277:format_first_block_in_file():2098:    struct boss_yoggsaron_neltharionAI : public ScriptedAI
DEBUG:refactor.py:277:format_first_block_in_file():2099:    {
DEBUG:refactor.py:277:format_first_block_in_file():2100:        boss_yoggsaron_neltharionAI(Creature* c) : ScriptedAI(c) { }
DEBUG:refactor.py:277:format_first_block_in_file():2101:
DEBUG:refactor.py:277:format_first_block_in_file():2102:        bool _running;
DEBUG:refactor.py:277:format_first_block_in_file():2103:        int32 _checkTimer;
DEBUG:refactor.py:277:format_first_block_in_file():2104:        uint8 _step;
DEBUG:refactor.py:277:format_first_block_in_file():2105:
DEBUG:refactor.py:277:format_first_block_in_file():2106:        void Reset() override
DEBUG:refactor.py:277:format_first_block_in_file():2107:        {
DEBUG:refactor.py:277:format_first_block_in_file():2108:            _running = true;
DEBUG:refactor.py:277:format_first_block_in_file():2109:            _checkTimer = 0;
DEBUG:refactor.py:277:format_first_block_in_file():2110:            _step = 0;
DEBUG:refactor.py:277:format_first_block_in_file():2111:        }
DEBUG:refactor.py:277:format_first_block_in_file():2112:
DEBUG:refactor.py:277:format_first_block_in_file():2113:        void NextStep(const uint32 time)
DEBUG:refactor.py:277:format_first_block_in_file():2114:        {
DEBUG:refactor.py:277:format_first_block_in_file():2115:            _step++;
DEBUG:refactor.py:277:format_first_block_in_file():2116:            _checkTimer = time;
DEBUG:refactor.py:277:format_first_block_in_file():2117:        }
DEBUG:refactor.py:277:format_first_block_in_file():2118:
DEBUG:refactor.py:277:format_first_block_in_file():2119:        void Say(uint8 text, uint32 id)
DEBUG:refactor.py:277:format_first_block_in_file():2120:        {
DEBUG:refactor.py:277:format_first_block_in_file():2121:            Creature* creature = me->FindNearestCreature(id, 50);
DEBUG:refactor.py:277:format_first_block_in_file():2122:            if (!creature)
DEBUG:refactor.py:277:format_first_block_in_file():2123:                return;
DEBUG:refactor.py:277:format_first_block_in_file():2124:
DEBUG:refactor.py:277:format_first_block_in_file():2125:            creature->AI()->Talk(text);
DEBUG:refactor.py:277:format_first_block_in_file():2126:                return;
DEBUG:refactor.py:277:format_first_block_in_file():2127:        }
DEBUG:refactor.py:277:format_first_block_in_file():2128:
DEBUG:refactor.py:277:format_first_block_in_file():2129:        void UpdateAI(uint32 diff) override
DEBUG:refactor.py:277:format_first_block_in_file():2130:        {
DEBUG:refactor.py:277:format_first_block_in_file():2131:            if (!_running)
DEBUG:refactor.py:277:format_first_block_in_file():2132:                return;
DEBUG:refactor.py:277:format_first_block_in_file():2133:
DEBUG:refactor.py:277:format_first_block_in_file():2134:            if (_checkTimer != 0)
DEBUG:refactor.py:277:format_first_block_in_file():2135:            {
DEBUG:refactor.py:277:format_first_block_in_file():2136:                _checkTimer -= diff;
DEBUG:refactor.py:277:format_first_block_in_file():2137:                if (_checkTimer < 0 )
DEBUG:refactor.py:277:format_first_block_in_file():2138:                    _checkTimer = 0;
DEBUG:refactor.py:277:format_first_block_in_file():2139:            }
DEBUG:refactor.py:277:format_first_block_in_file():2140:            else
DEBUG:refactor.py:277:format_first_block_in_file():2141:                switch (_step)
DEBUG:refactor.py:277:format_first_block_in_file():2142:                {
DEBUG:refactor.py:277:format_first_block_in_file():2143:                    case 0:
DEBUG:refactor.py:277:format_first_block_in_file():2144:                        NextStep(5000);
DEBUG:refactor.py:277:format_first_block_in_file():2145:                        break;
DEBUG:refactor.py:277:format_first_block_in_file():2146:                    case 1:
DEBUG:refactor.py:277:format_first_block_in_file():2147:                        Say(SAY_NEL_1, NPC_NELTHARION);
DEBUG:refactor.py:277:format_first_block_in_file():2148:                        NextStep(10000);
DEBUG:refactor.py:277:format_first_block_in_file():2149:                        break;
DEBUG:refactor.py:277:format_first_block_in_file():2150:                    case 2:
DEBUG:refactor.py:277:format_first_block_in_file():2151:                        Say(SAY_YAS_1, NPC_YSERA);
DEBUG:refactor.py:277:format_first_block_in_file():2152:                        NextStep(4000);
DEBUG:refactor.py:277:format_first_block_in_file():2153:                        break;
DEBUG:refactor.py:277:format_first_block_in_file():2154:                    case 3:
DEBUG:refactor.py:277:format_first_block_in_file():2155:                        Say(SAY_NEL_2, NPC_NELTHARION);
DEBUG:refactor.py:277:format_first_block_in_file():2156:                        NextStep(4000);
DEBUG:refactor.py:277:format_first_block_in_file():2157:                        break;
DEBUG:refactor.py:277:format_first_block_in_file():2158:                    case 4:
DEBUG:refactor.py:277:format_first_block_in_file():2159:                        Say(SAY_MAL_1, NPC_MALYGOS);
DEBUG:refactor.py:277:format_first_block_in_file():2160:                        NextStep(8000);
DEBUG:refactor.py:277:format_first_block_in_file():2161:                        break;
DEBUG:refactor.py:277:format_first_block_in_file():2162:                    case 5:
DEBUG:refactor.py:277:format_first_block_in_file():2163:                        Say(SAY_YOGG_4, NPC_YOGG_SARON_VISION);
DEBUG:refactor.py:277:format_first_block_in_file():2164:                        _running = false;
DEBUG:refactor.py:277:format_first_block_in_file():2165:                        break;
DEBUG:refactor.py:277:format_first_block_in_file():2166:                }
DEBUG:refactor.py:277:format_first_block_in_file():2167:        }
DEBUG:refactor.py:277:format_first_block_in_file():2168:    };
DEBUG:refactor.py:277:format_first_block_in_file():2169:};
DEBUG:refactor.py:277:format_first_block_in_file():2170:
DEBUG:refactor.py:277:format_first_block_in_file():2171:class boss_yoggsaron_voice : public CreatureScript
DEBUG:refactor.py:277:format_first_block_in_file():2172:{
DEBUG:refactor.py:277:format_first_block_in_file():2173:public:
DEBUG:refactor.py:277:format_first_block_in_file():2174:    boss_yoggsaron_voice() : CreatureScript("boss_yoggsaron_voice") { }
DEBUG:refactor.py:277:format_first_block_in_file():2175:
DEBUG:refactor.py:277:format_first_block_in_file():2176:    CreatureAI* GetAI(Creature* pCreature) const override
DEBUG:refactor.py:277:format_first_block_in_file():2177:    {
DEBUG:refactor.py:277:format_first_block_in_file():2178:        return GetUlduarAI<boss_yoggsaron_voiceAI>(pCreature);
DEBUG:refactor.py:277:format_first_block_in_file():2179:    }
DEBUG:refactor.py:277:format_first_block_in_file():2180:
DEBUG:refactor.py:277:format_first_block_in_file():2181:    struct boss_yoggsaron_voiceAI : public NullCreatureAI
DEBUG:refactor.py:277:format_first_block_in_file():2182:    {
DEBUG:refactor.py:277:format_first_block_in_file():2183:        boss_yoggsaron_voiceAI(Creature* pCreature) : NullCreatureAI(pCreature)
DEBUG:refactor.py:277:format_first_block_in_file():2184:        {
DEBUG:refactor.py:277:format_first_block_in_file():2185:            _targets.clear();
DEBUG:refactor.py:277:format_first_block_in_file():2186:            _current = 0;
DEBUG:refactor.py:277:format_first_block_in_file():2187:        }
DEBUG:refactor.py:277:format_first_block_in_file():2188:
DEBUG:refactor.py:277:format_first_block_in_file():2189:        EventMap events;
DEBUG:refactor.py:277:format_first_block_in_file():2190:        GuidVector _targets;
DEBUG:refactor.py:277:format_first_block_in_file():2191:        uint32 _current;
DEBUG:refactor.py:277:format_first_block_in_file():2192:
DEBUG:refactor.py:277:format_first_block_in_file():2193:        void Reset() override
DEBUG:refactor.py:277:format_first_block_in_file():2194:        {
DEBUG:refactor.py:277:format_first_block_in_file():2195:            me->CastSpell(me, SPELL_INSANE_PERIODIC, true);
DEBUG:refactor.py:277:format_first_block_in_file():2196:        }
DEBUG:refactor.py:277:format_first_block_in_file():2197:
DEBUG:refactor.py:277:format_first_block_in_file():2198:        void SpellHitTarget(Unit* target, SpellInfo const* spellInfo) override
DEBUG:refactor.py:277:format_first_block_in_file():2199:        {
DEBUG:refactor.py:277:format_first_block_in_file():2200:            if (spellInfo->Id == SPELL_INSANE1)
DEBUG:refactor.py:277:format_first_block_in_file():2201:            {
DEBUG:refactor.py:277:format_first_block_in_file():2202:                // Drive Me Crazy achievement failed
DEBUG:refactor.py:277:format_first_block_in_file():2203:                if (me->GetInstanceScript())
DEBUG:refactor.py:277:format_first_block_in_file():2204:                    if (Creature* yogg = ObjectAccessor::GetCreature(*me, me->GetInstanceScript()->GetGuidData(TYPE_YOGGSARON)))
DEBUG:refactor.py:277:format_first_block_in_file():2205:                        yogg->AI()->DoAction(ACTION_FAILED_DRIVE_ME_CRAZY);
DEBUG:refactor.py:277:format_first_block_in_file():2206:
DEBUG:refactor.py:277:format_first_block_in_file():2207:                events.ScheduleEvent(40, 2s);
DEBUG:refactor.py:277:format_first_block_in_file():2208:                _targets.push_back(target->GetGUID());
DEBUG:refactor.py:277:format_first_block_in_file():2209:            }
DEBUG:refactor.py:277:format_first_block_in_file():2210:        }
DEBUG:refactor.py:277:format_first_block_in_file():2211:
DEBUG:refactor.py:277:format_first_block_in_file():2212:        void UpdateAI(uint32 diff) override
DEBUG:refactor.py:277:format_first_block_in_file():2213:        {
DEBUG:refactor.py:277:format_first_block_in_file():2214:            events.Update(diff);
DEBUG:refactor.py:277:format_first_block_in_file():2215:            switch (events.ExecuteEvent())
DEBUG:refactor.py:277:format_first_block_in_file():2216:            {
DEBUG:refactor.py:277:format_first_block_in_file():2217:                case 40:
DEBUG:refactor.py:277:format_first_block_in_file():2218:                    {
DEBUG:refactor.py:277:format_first_block_in_file():2219:                        ObjectGuid _guid = _targets.at(_current);
DEBUG:refactor.py:277:format_first_block_in_file():2220:                        ++_current;
DEBUG:refactor.py:277:format_first_block_in_file():2221:
DEBUG:refactor.py:277:format_first_block_in_file():2222:                        if (Player* player = ObjectAccessor::GetPlayer(*me, _guid))
DEBUG:refactor.py:277:format_first_block_in_file():2223:                        {
DEBUG:refactor.py:277:format_first_block_in_file():2224:                            Talk(WHISPER_VOICE_INSANE, player);
DEBUG:refactor.py:277:format_first_block_in_file():2225:                        }
DEBUG:refactor.py:277:format_first_block_in_file():2226:                        break;
DEBUG:refactor.py:277:format_first_block_in_file():2227:                    }
DEBUG:refactor.py:277:format_first_block_in_file():2228:            }
DEBUG:refactor.py:277:format_first_block_in_file():2229:        }
DEBUG:refactor.py:277:format_first_block_in_file():2230:    };
DEBUG:refactor.py:277:format_first_block_in_file():2231:};
DEBUG:refactor.py:277:format_first_block_in_file():2232:
DEBUG:refactor.py:277:format_first_block_in_file():2233:// 63830, 63881 - Malady of the Mind
DEBUG:refactor.py:277:format_first_block_in_file():2234:class spell_yogg_saron_malady_of_the_mind_aura : public AuraScript
DEBUG:refactor.py:277:format_first_block_in_file():2235:{
DEBUG:refactor.py:277:format_first_block_in_file():2236:    PrepareAuraScript(spell_yogg_saron_malady_of_the_mind_aura);
DEBUG:refactor.py:277:format_first_block_in_file():2237:
DEBUG:refactor.py:277:format_first_block_in_file():2238:    void OnApply(AuraEffect const* /*aurEff*/, AuraEffectHandleModes /*mode*/)
DEBUG:refactor.py:277:format_first_block_in_file():2239:    {
DEBUG:refactor.py:277:format_first_block_in_file():2240:        GetUnitOwner()->ApplySpellImmune(SPELL_DEATH_RAY_DAMAGE_REAL, IMMUNITY_ID, SPELL_DEATH_RAY_DAMAGE_REAL, true);
DEBUG:refactor.py:277:format_first_block_in_file():2241:    }
DEBUG:refactor.py:277:format_first_block_in_file():2242:
DEBUG:refactor.py:277:format_first_block_in_file():2243:    void OnRemove(AuraEffect const* /*aurEff*/, AuraEffectHandleModes /*mode*/)
DEBUG:refactor.py:277:format_first_block_in_file():2244:    {
DEBUG:refactor.py:277:format_first_block_in_file():2245:        GetUnitOwner()->ApplySpellImmune(SPELL_DEATH_RAY_DAMAGE_REAL, IMMUNITY_ID, SPELL_DEATH_RAY_DAMAGE_REAL, false);
DEBUG:refactor.py:277:format_first_block_in_file():2246:        GetUnitOwner()->CastCustomSpell(SPELL_MALADY_OF_THE_MIND_TRIGGER, SPELLVALUE_MAX_TARGETS, 1, GetUnitOwner(), true);
DEBUG:refactor.py:277:format_first_block_in_file():2247:    }
DEBUG:refactor.py:277:format_first_block_in_file():2248:
DEBUG:refactor.py:277:format_first_block_in_file():2249:    void Register() override
DEBUG:refactor.py:277:format_first_block_in_file():2250:    {
DEBUG:refactor.py:277:format_first_block_in_file():2251:        OnEffectApply += AuraEffectApplyFn(spell_yogg_saron_malady_of_the_mind_aura::OnApply, EFFECT_1, SPELL_AURA_MOD_FEAR, AURA_EFFECT_HANDLE_REAL);
DEBUG:refactor.py:277:format_first_block_in_file():2252:        OnEffectRemove += AuraEffectRemoveFn(spell_yogg_saron_malady_of_the_mind_aura::OnRemove, EFFECT_1, SPELL_AURA_MOD_FEAR, AURA_EFFECT_HANDLE_REAL);
DEBUG:refactor.py:277:format_first_block_in_file():2253:    }
DEBUG:refactor.py:277:format_first_block_in_file():2254:};
DEBUG:refactor.py:277:format_first_block_in_file():2255:
DEBUG:refactor.py:277:format_first_block_in_file():2256:// 63802 - Brain Link
DEBUG:refactor.py:277:format_first_block_in_file():2257:class spell_yogg_saron_brain_link : public SpellScriptLoader
DEBUG:refactor.py:277:format_first_block_in_file():2258:{
DEBUG:refactor.py:277:format_first_block_in_file():2259:public:
DEBUG:refactor.py:277:format_first_block_in_file():2260:    spell_yogg_saron_brain_link() : SpellScriptLoader("spell_yogg_saron_brain_link") { }
DEBUG:refactor.py:277:format_first_block_in_file():2261:
DEBUG:refactor.py:277:format_first_block_in_file():2262:    class spell_yogg_saron_brain_link_AuraScript : public AuraScript
DEBUG:refactor.py:277:format_first_block_in_file():2263:    {
DEBUG:refactor.py:277:format_first_block_in_file():2264:        PrepareAuraScript(spell_yogg_saron_brain_link_AuraScript);
DEBUG:refactor.py:277:format_first_block_in_file():2265:
DEBUG:refactor.py:277:format_first_block_in_file():2266:        void HandleOnEffectApply(AuraEffect const* /*aurEff*/, AuraEffectHandleModes /*mode*/)
DEBUG:refactor.py:277:format_first_block_in_file():2267:        {
DEBUG:refactor.py:277:format_first_block_in_file():2268:            PreventDefaultAction();
DEBUG:refactor.py:277:format_first_block_in_file():2269:            Player* target = nullptr;
DEBUG:refactor.py:277:format_first_block_in_file():2270:            Map::PlayerList const& pList = GetUnitOwner()->GetMap()->GetPlayers();
DEBUG:refactor.py:277:format_first_block_in_file():2271:            uint8 _offset = urand(0, pList.getSize() - 1);
DEBUG:refactor.py:277:format_first_block_in_file():2272:            uint8 _counter = 0;
DEBUG:refactor.py:277:format_first_block_in_file():2273:            for(Map::PlayerList::const_iterator itr = pList.begin(); itr != pList.end(); ++itr, ++_counter)
DEBUG:refactor.py:277:format_first_block_in_file():2274:            {
DEBUG:refactor.py:277:format_first_block_in_file():2275:                if (itr->GetSource() == GetUnitOwner() || GetUnitOwner()->GetDistance(itr->GetSource()) > 50.0f || !itr->GetSource()->IsAlive() || itr->GetSource()->IsGameMaster())
DEBUG:refactor.py:277:format_first_block_in_file():2276:                    continue;
DEBUG:refactor.py:277:format_first_block_in_file():2277:
DEBUG:refactor.py:277:format_first_block_in_file():2278:                if (_counter <= _offset || !target)
DEBUG:refactor.py:277:format_first_block_in_file():2279:                    target = itr->GetSource();
DEBUG:refactor.py:277:format_first_block_in_file():2280:                else
DEBUG:refactor.py:277:format_first_block_in_file():2281:                    break;
DEBUG:refactor.py:277:format_first_block_in_file():2282:            }
DEBUG:refactor.py:277:format_first_block_in_file():2283:
DEBUG:refactor.py:277:format_first_block_in_file():2284:            if (!target)
DEBUG:refactor.py:277:format_first_block_in_file():2285:                SetDuration(0);
DEBUG:refactor.py:277:format_first_block_in_file():2286:            else
DEBUG:refactor.py:277:format_first_block_in_file():2287:                _targetGUID = target->GetGUID();
DEBUG:refactor.py:277:format_first_block_in_file():2288:        }
DEBUG:refactor.py:277:format_first_block_in_file():2289:
DEBUG:refactor.py:277:format_first_block_in_file():2290:        void OnPeriodic(AuraEffect const*  /*aurEff*/)
DEBUG:refactor.py:277:format_first_block_in_file():2291:        {
DEBUG:refactor.py:277:format_first_block_in_file():2292:            Unit* owner = GetUnitOwner();
DEBUG:refactor.py:277:format_first_block_in_file():2293:            if (!owner)
DEBUG:refactor.py:277:format_first_block_in_file():2294:            {
DEBUG:refactor.py:277:format_first_block_in_file():2295:                SetDuration(0);
DEBUG:refactor.py:277:format_first_block_in_file():2296:                return;
DEBUG:refactor.py:277:format_first_block_in_file():2297:            }
DEBUG:refactor.py:277:format_first_block_in_file():2298:
DEBUG:refactor.py:277:format_first_block_in_file():2299:            Unit* _target = ObjectAccessor::GetUnit(*owner, _targetGUID);
DEBUG:refactor.py:277:format_first_block_in_file():2300:            if (!_target || !_target->IsAlive() || std::fabs(owner->GetPositionZ() - _target->GetPositionZ()) > 10.0f) // Target or owner underground
DEBUG:refactor.py:277:format_first_block_in_file():2301:            {
DEBUG:refactor.py:277:format_first_block_in_file():2302:                SetDuration(0);
DEBUG:refactor.py:277:format_first_block_in_file():2303:                return;
DEBUG:refactor.py:277:format_first_block_in_file():2304:            }
DEBUG:refactor.py:277:format_first_block_in_file():2305:
DEBUG:refactor.py:277:format_first_block_in_file():2306:            if (owner->GetDistance(_target) > 20.0f)
DEBUG:refactor.py:277:format_first_block_in_file():2307:            {
DEBUG:refactor.py:277:format_first_block_in_file():2308:                owner->CastSpell(_target, SPELL_BRAIN_LINK_DAMAGE, true);
DEBUG:refactor.py:277:format_first_block_in_file():2309:                owner->CastSpell(owner, SPELL_BRAIN_LINK_DAMAGE, true);
DEBUG:refactor.py:277:format_first_block_in_file():2310:            }
DEBUG:refactor.py:277:format_first_block_in_file():2311:            else
DEBUG:refactor.py:277:format_first_block_in_file():2312:                owner->CastSpell(_target, SPELL_BRAIN_LINK_OK, true);
DEBUG:refactor.py:277:format_first_block_in_file():2313:        }
DEBUG:refactor.py:277:format_first_block_in_file():2314:
DEBUG:refactor.py:277:format_first_block_in_file():2315:        void Register() override
DEBUG:refactor.py:277:format_first_block_in_file():2316:        {
DEBUG:refactor.py:277:format_first_block_in_file():2317:            OnEffectApply += AuraEffectApplyFn(spell_yogg_saron_brain_link_AuraScript::HandleOnEffectApply, EFFECT_0, SPELL_AURA_PERIODIC_DUMMY, AURA_EFFECT_HANDLE_REAL);
DEBUG:refactor.py:277:format_first_block_in_file():2318:            OnEffectPeriodic += AuraEffectPeriodicFn(spell_yogg_saron_brain_link_AuraScript::OnPeriodic, EFFECT_0, SPELL_AURA_PERIODIC_DUMMY);
DEBUG:refactor.py:277:format_first_block_in_file():2319:        }
DEBUG:refactor.py:277:format_first_block_in_file():2320:
DEBUG:refactor.py:277:format_first_block_in_file():2321:    protected:
DEBUG:refactor.py:277:format_first_block_in_file():2322:        ObjectGuid _targetGUID;
DEBUG:refactor.py:277:format_first_block_in_file():2323:    };
DEBUG:refactor.py:277:format_first_block_in_file():2324:
DEBUG:refactor.py:277:format_first_block_in_file():2325:    AuraScript* GetAuraScript() const override
DEBUG:refactor.py:277:format_first_block_in_file():2326:    {
DEBUG:refactor.py:277:format_first_block_in_file():2327:        return new spell_yogg_saron_brain_link_AuraScript();
DEBUG:refactor.py:277:format_first_block_in_file():2328:    }
DEBUG:refactor.py:277:format_first_block_in_file():2329:
DEBUG:refactor.py:277:format_first_block_in_file():2330:    class spell_yogg_saron_brain_link_SpellScript : public SpellScript
DEBUG:refactor.py:277:format_first_block_in_file():2331:    {
DEBUG:refactor.py:277:format_first_block_in_file():2332:        PrepareSpellScript(spell_yogg_saron_brain_link_SpellScript);
DEBUG:refactor.py:277:format_first_block_in_file():2333:
DEBUG:refactor.py:277:format_first_block_in_file():2334:        void FilterTargets(std::list<WorldObject*>& targets)
DEBUG:refactor.py:277:format_first_block_in_file():2335:        {
DEBUG:refactor.py:277:format_first_block_in_file():2336:            std::list<WorldObject*> tempList;
DEBUG:refactor.py:277:format_first_block_in_file():2337:            for (std::list<WorldObject*>::iterator itr = targets.begin(); itr != targets.end(); ++itr)
DEBUG:refactor.py:277:format_first_block_in_file():2338:                if ((*itr)->GetPositionZ() > 300.0f)
DEBUG:refactor.py:277:format_first_block_in_file():2339:                    tempList.push_back(*itr);
DEBUG:refactor.py:277:format_first_block_in_file():2340:
DEBUG:refactor.py:277:format_first_block_in_file():2341:            targets.clear();
DEBUG:refactor.py:277:format_first_block_in_file():2342:            for (std::list<WorldObject*>::iterator itr = tempList.begin(); itr != tempList.end(); ++itr)
DEBUG:refactor.py:277:format_first_block_in_file():2343:                targets.push_back(*itr);
DEBUG:refactor.py:277:format_first_block_in_file():2344:        }
DEBUG:refactor.py:277:format_first_block_in_file():2345:
DEBUG:refactor.py:277:format_first_block_in_file():2346:        void Register() override
DEBUG:refactor.py:277:format_first_block_in_file():2347:        {
DEBUG:refactor.py:277:format_first_block_in_file():2348:            OnObjectAreaTargetSelect += SpellObjectAreaTargetSelectFn(spell_yogg_saron_brain_link_SpellScript::FilterTargets, EFFECT_0, TARGET_UNIT_SRC_AREA_ENEMY);
DEBUG:refactor.py:277:format_first_block_in_file():2349:        }
DEBUG:refactor.py:277:format_first_block_in_file():2350:    };
DEBUG:refactor.py:277:format_first_block_in_file():2351:
DEBUG:refactor.py:277:format_first_block_in_file():2352:    SpellScript* GetSpellScript() const override
DEBUG:refactor.py:277:format_first_block_in_file():2353:    {
DEBUG:refactor.py:277:format_first_block_in_file():2354:        return new spell_yogg_saron_brain_link_SpellScript();
DEBUG:refactor.py:277:format_first_block_in_file():2355:    }
DEBUG:refactor.py:277:format_first_block_in_file():2356:};
DEBUG:refactor.py:277:format_first_block_in_file():2357:
DEBUG:refactor.py:277:format_first_block_in_file():2358:// 64465 - Shadow Beacon
DEBUG:refactor.py:277:format_first_block_in_file():2359:class spell_yogg_saron_shadow_beacon : public SpellScriptLoader
DEBUG:refactor.py:277:format_first_block_in_file():2360:{
DEBUG:refactor.py:277:format_first_block_in_file():2361:    public:
DEBUG:refactor.py:277:format_first_block_in_file():2362:        spell_yogg_saron_shadow_beacon() : SpellScriptLoader("spell_yogg_saron_shadow_beacon") { }
DEBUG:refactor.py:277:format_first_block_in_file():2363:
DEBUG:refactor.py:277:format_first_block_in_file():2364:        class spell_yogg_saron_shadow_beacon_AuraScript : public AuraScript
DEBUG:refactor.py:277:format_first_block_in_file():2365:        {
DEBUG:refactor.py:277:format_first_block_in_file():2366:            PrepareAuraScript(spell_yogg_saron_shadow_beacon_AuraScript);
DEBUG:refactor.py:277:format_first_block_in_file():2367:
DEBUG:refactor.py:277:format_first_block_in_file():2368:            void OnApply(AuraEffect const* /*aurEff*/, AuraEffectHandleModes /*mode*/)
DEBUG:refactor.py:277:format_first_block_in_file():2369:            {
DEBUG:refactor.py:277:format_first_block_in_file():2370:                if (Creature* target = GetTarget()->ToCreature())
DEBUG:refactor.py:277:format_first_block_in_file():2371:                {
DEBUG:refactor.py:277:format_first_block_in_file():2372:                    target->SetEntry(NPC_MARKED_IMMORTAL_GUARDIAN);
DEBUG:refactor.py:277:format_first_block_in_file():2373:                }
DEBUG:refactor.py:277:format_first_block_in_file():2374:            }
DEBUG:refactor.py:277:format_first_block_in_file():2375:
DEBUG:refactor.py:277:format_first_block_in_file():2376:            void OnRemove(AuraEffect const* /*aurEff*/, AuraEffectHandleModes /*mode*/)
DEBUG:refactor.py:277:format_first_block_in_file():2377:            {
DEBUG:refactor.py:277:format_first_block_in_file():2378:                if (Creature* target = GetTarget()->ToCreature())
DEBUG:refactor.py:277:format_first_block_in_file():2379:                {
DEBUG:refactor.py:277:format_first_block_in_file():2380:                    target->SetEntry(NPC_IMMORTAL_GUARDIAN);
DEBUG:refactor.py:277:format_first_block_in_file():2381:                }
DEBUG:refactor.py:277:format_first_block_in_file():2382:            }
DEBUG:refactor.py:277:format_first_block_in_file():2383:
DEBUG:refactor.py:277:format_first_block_in_file():2384:            void Register() override
DEBUG:refactor.py:277:format_first_block_in_file():2385:            {
DEBUG:refactor.py:277:format_first_block_in_file():2386:                AfterEffectApply += AuraEffectApplyFn(spell_yogg_saron_shadow_beacon_AuraScript::OnApply, EFFECT_0, SPELL_AURA_PERIODIC_TRIGGER_SPELL, AURA_EFFECT_HANDLE_REAL);
DEBUG:refactor.py:277:format_first_block_in_file():2387:                AfterEffectRemove += AuraEffectRemoveFn(spell_yogg_saron_shadow_beacon_AuraScript::OnRemove, EFFECT_0, SPELL_AURA_PERIODIC_TRIGGER_SPELL, AURA_EFFECT_HANDLE_REAL);
DEBUG:refactor.py:277:format_first_block_in_file():2388:            }
DEBUG:refactor.py:277:format_first_block_in_file():2389:        };
DEBUG:refactor.py:277:format_first_block_in_file():2390:
DEBUG:refactor.py:277:format_first_block_in_file():2391:        AuraScript* GetAuraScript() const override
DEBUG:refactor.py:277:format_first_block_in_file():2392:        {
DEBUG:refactor.py:277:format_first_block_in_file():2393:            return new spell_yogg_saron_shadow_beacon_AuraScript();
DEBUG:refactor.py:277:format_first_block_in_file():2394:        }
DEBUG:refactor.py:277:format_first_block_in_file():2395:};
DEBUG:refactor.py:277:format_first_block_in_file():2396:
DEBUG:refactor.py:277:format_first_block_in_file():2397:// 65206 - Destabilization Matrix
DEBUG:refactor.py:277:format_first_block_in_file():2398:class spell_yogg_saron_destabilization_matrix : public SpellScriptLoader
DEBUG:refactor.py:277:format_first_block_in_file():2399:{
DEBUG:refactor.py:277:format_first_block_in_file():2400:public:
DEBUG:refactor.py:277:format_first_block_in_file():2401:    spell_yogg_saron_destabilization_matrix() : SpellScriptLoader("spell_yogg_saron_destabilization_matrix") { }
DEBUG:refactor.py:277:format_first_block_in_file():2402:
DEBUG:refactor.py:277:format_first_block_in_file():2403:    class spell_yogg_saron_destabilization_matrix_SpellScript : public SpellScript
DEBUG:refactor.py:277:format_first_block_in_file():2404:    {
DEBUG:refactor.py:277:format_first_block_in_file():2405:        PrepareSpellScript(spell_yogg_saron_destabilization_matrix_SpellScript);
DEBUG:refactor.py:277:format_first_block_in_file():2406:
DEBUG:refactor.py:277:format_first_block_in_file():2407:        void HandleDummyEffect(SpellEffIndex effIndex)
DEBUG:refactor.py:277:format_first_block_in_file():2408:        {
DEBUG:refactor.py:277:format_first_block_in_file():2409:            PreventHitDefaultEffect(effIndex);
DEBUG:refactor.py:277:format_first_block_in_file():2410:            if (Unit* target = GetHitUnit())
DEBUG:refactor.py:277:format_first_block_in_file():2411:                GetCaster()->CastSpell(target, SPELL_DESTABILIZATION_MATRIX_ATTACK, false);
DEBUG:refactor.py:277:format_first_block_in_file():2412:        }
DEBUG:refactor.py:277:format_first_block_in_file():2413:
DEBUG:refactor.py:277:format_first_block_in_file():2414:        void FilterTargets(std::list<WorldObject*>& targets)
DEBUG:refactor.py:277:format_first_block_in_file():2415:        {
DEBUG:refactor.py:277:format_first_block_in_file():2416:            WorldObject* target = nullptr;
DEBUG:refactor.py:277:format_first_block_in_file():2417:            for (std::list<WorldObject*>::iterator itr = targets.begin(); itr != targets.end(); ++itr)
DEBUG:refactor.py:277:format_first_block_in_file():2418:                if (!(*itr)->ToUnit()->HasAura(SPELL_DESTABILIZATION_MATRIX_ATTACK))
DEBUG:refactor.py:277:format_first_block_in_file():2419:                {
DEBUG:refactor.py:277:format_first_block_in_file():2420:                    target = *itr;
DEBUG:refactor.py:277:format_first_block_in_file():2421:                    break;
DEBUG:refactor.py:277:format_first_block_in_file():2422:                }
DEBUG:refactor.py:277:format_first_block_in_file():2423:
DEBUG:refactor.py:277:format_first_block_in_file():2424:            targets.clear();
DEBUG:refactor.py:277:format_first_block_in_file():2425:            if (target)
DEBUG:refactor.py:277:format_first_block_in_file():2426:                targets.push_back(target);
DEBUG:refactor.py:277:format_first_block_in_file():2427:        }
DEBUG:refactor.py:277:format_first_block_in_file():2428:
DEBUG:refactor.py:277:format_first_block_in_file():2429:        void Register() override
DEBUG:refactor.py:277:format_first_block_in_file():2430:        {
DEBUG:refactor.py:277:format_first_block_in_file():2431:            OnEffectHitTarget += SpellEffectFn(spell_yogg_saron_destabilization_matrix_SpellScript::HandleDummyEffect, EFFECT_0, SPELL_EFFECT_DUMMY);
DEBUG:refactor.py:277:format_first_block_in_file():2432:            OnObjectAreaTargetSelect += SpellObjectAreaTargetSelectFn(spell_yogg_saron_destabilization_matrix_SpellScript::FilterTargets, EFFECT_0, TARGET_UNIT_SRC_AREA_ENTRY);
DEBUG:refactor.py:277:format_first_block_in_file():2433:        }
DEBUG:refactor.py:277:format_first_block_in_file():2434:    };
DEBUG:refactor.py:277:format_first_block_in_file():2435:
DEBUG:refactor.py:277:format_first_block_in_file():2436:    SpellScript* GetSpellScript() const override
DEBUG:refactor.py:277:format_first_block_in_file():2437:    {
DEBUG:refactor.py:277:format_first_block_in_file():2438:        return new spell_yogg_saron_destabilization_matrix_SpellScript();
DEBUG:refactor.py:277:format_first_block_in_file():2439:    }
DEBUG:refactor.py:277:format_first_block_in_file():2440:};
DEBUG:refactor.py:277:format_first_block_in_file():2441:
DEBUG:refactor.py:277:format_first_block_in_file():2442:// 64172 - Titanic Storm
DEBUG:refactor.py:277:format_first_block_in_file():2443:class spell_yogg_saron_titanic_storm : public SpellScriptLoader
DEBUG:refactor.py:277:format_first_block_in_file():2444:{
DEBUG:refactor.py:277:format_first_block_in_file():2445:public:
DEBUG:refactor.py:277:format_first_block_in_file():2446:    spell_yogg_saron_titanic_storm() : SpellScriptLoader("spell_yogg_saron_titanic_storm") { }
DEBUG:refactor.py:277:format_first_block_in_file():2447:
DEBUG:refactor.py:277:format_first_block_in_file():2448:    class spell_yogg_saron_titanic_storm_SpellScript : public SpellScript
DEBUG:refactor.py:277:format_first_block_in_file():2449:    {
DEBUG:refactor.py:277:format_first_block_in_file():2450:        PrepareSpellScript(spell_yogg_saron_titanic_storm_SpellScript);
DEBUG:refactor.py:277:format_first_block_in_file():2451:
DEBUG:refactor.py:277:format_first_block_in_file():2452:        void HandleDummyEffect(SpellEffIndex effIndex)
DEBUG:refactor.py:277:format_first_block_in_file():2453:        {
DEBUG:refactor.py:277:format_first_block_in_file():2454:            PreventHitDefaultEffect(effIndex);
DEBUG:refactor.py:277:format_first_block_in_file():2455:            if (Unit* target = GetHitUnit())
DEBUG:refactor.py:277:format_first_block_in_file():2456:                Unit::Kill(GetCaster(), target);
DEBUG:refactor.py:277:format_first_block_in_file():2457:        }
DEBUG:refactor.py:277:format_first_block_in_file():2458:
DEBUG:refactor.py:277:format_first_block_in_file():2459:        void FilterTargets(std::list<WorldObject*>& targets)
DEBUG:refactor.py:277:format_first_block_in_file():2460:        {
DEBUG:refactor.py:277:format_first_block_in_file():2461:            WorldObject* target = nullptr;
DEBUG:refactor.py:277:format_first_block_in_file():2462:            for (std::list<WorldObject*>::iterator itr = targets.begin(); itr != targets.end(); ++itr)
DEBUG:refactor.py:277:format_first_block_in_file():2463:                if ((*itr)->ToUnit()->HasAura(SPELL_WEAKENED))
DEBUG:refactor.py:277:format_first_block_in_file():2464:                {
DEBUG:refactor.py:277:format_first_block_in_file():2465:                    target = *itr;
DEBUG:refactor.py:277:format_first_block_in_file():2466:                    break;
DEBUG:refactor.py:277:format_first_block_in_file():2467:                }
DEBUG:refactor.py:277:format_first_block_in_file():2468:
DEBUG:refactor.py:277:format_first_block_in_file():2469:            targets.clear();
DEBUG:refactor.py:277:format_first_block_in_file():2470:            if (target)
DEBUG:refactor.py:277:format_first_block_in_file():2471:                targets.push_back(target);
DEBUG:refactor.py:277:format_first_block_in_file():2472:        }
DEBUG:refactor.py:277:format_first_block_in_file():2473:
DEBUG:refactor.py:277:format_first_block_in_file():2474:        void Register() override
DEBUG:refactor.py:277:format_first_block_in_file():2475:        {
DEBUG:refactor.py:277:format_first_block_in_file():2476:            OnEffectHitTarget += SpellEffectFn(spell_yogg_saron_titanic_storm_SpellScript::HandleDummyEffect, EFFECT_0, SPELL_EFFECT_DUMMY);
DEBUG:refactor.py:277:format_first_block_in_file():2477:            OnObjectAreaTargetSelect += SpellObjectAreaTargetSelectFn(spell_yogg_saron_titanic_storm_SpellScript::FilterTargets, EFFECT_0, TARGET_UNIT_SRC_AREA_ENTRY);
DEBUG:refactor.py:277:format_first_block_in_file():2478:        }
DEBUG:refactor.py:277:format_first_block_in_file():2479:    };
DEBUG:refactor.py:277:format_first_block_in_file():2480:
DEBUG:refactor.py:277:format_first_block_in_file():2481:    SpellScript* GetSpellScript() const override
DEBUG:refactor.py:277:format_first_block_in_file():2482:    {
DEBUG:refactor.py:277:format_first_block_in_file():2483:        return new spell_yogg_saron_titanic_storm_SpellScript();
DEBUG:refactor.py:277:format_first_block_in_file():2484:    }
DEBUG:refactor.py:277:format_first_block_in_file():2485:};
DEBUG:refactor.py:277:format_first_block_in_file():2486:
DEBUG:refactor.py:277:format_first_block_in_file():2487:// 64164, 64168 - Lunatic Gaze
DEBUG:refactor.py:277:format_first_block_in_file():2488:class spell_yogg_saron_lunatic_gaze : public SpellScriptLoader
DEBUG:refactor.py:277:format_first_block_in_file():2489:{
DEBUG:refactor.py:277:format_first_block_in_file():2490:public:
DEBUG:refactor.py:277:format_first_block_in_file():2491:    spell_yogg_saron_lunatic_gaze() : SpellScriptLoader("spell_yogg_saron_lunatic_gaze") { }
DEBUG:refactor.py:277:format_first_block_in_file():2492:
DEBUG:refactor.py:277:format_first_block_in_file():2493:    class spell_yogg_saron_lunatic_gaze_SpellScript : public SpellScript
DEBUG:refactor.py:277:format_first_block_in_file():2494:    {
DEBUG:refactor.py:277:format_first_block_in_file():2495:        PrepareSpellScript(spell_yogg_saron_lunatic_gaze_SpellScript);
DEBUG:refactor.py:277:format_first_block_in_file():2496:
DEBUG:refactor.py:277:format_first_block_in_file():2497:        void FilterTargets(std::list<WorldObject*>& targets)
DEBUG:refactor.py:277:format_first_block_in_file():2498:        {
DEBUG:refactor.py:277:format_first_block_in_file():2499:            std::list<WorldObject*> tmplist;
DEBUG:refactor.py:277:format_first_block_in_file():2500:            for (std::list<WorldObject*>::iterator itr = targets.begin(); itr != targets.end(); ++itr)
DEBUG:refactor.py:277:format_first_block_in_file():2501:                if ((*itr)->HasInArc(M_PI, GetCaster()))
DEBUG:refactor.py:277:format_first_block_in_file():2502:                    tmplist.push_back(*itr);
DEBUG:refactor.py:277:format_first_block_in_file():2503:
DEBUG:refactor.py:277:format_first_block_in_file():2504:            targets.clear();
DEBUG:refactor.py:277:format_first_block_in_file():2505:            for (std::list<WorldObject*>::iterator itr = tmplist.begin(); itr != tmplist.end(); ++itr)
DEBUG:refactor.py:277:format_first_block_in_file():2506:                targets.push_back(*itr);
DEBUG:refactor.py:277:format_first_block_in_file():2507:        }
DEBUG:refactor.py:277:format_first_block_in_file():2508:
DEBUG:refactor.py:277:format_first_block_in_file():2509:        void Register() override
DEBUG:refactor.py:277:format_first_block_in_file():2510:        {
DEBUG:refactor.py:277:format_first_block_in_file():2511:            OnObjectAreaTargetSelect += SpellObjectAreaTargetSelectFn(spell_yogg_saron_lunatic_gaze_SpellScript::FilterTargets, EFFECT_ALL, TARGET_UNIT_SRC_AREA_ENEMY);
DEBUG:refactor.py:277:format_first_block_in_file():2512:        }
DEBUG:refactor.py:277:format_first_block_in_file():2513:    };
DEBUG:refactor.py:277:format_first_block_in_file():2514:
DEBUG:refactor.py:277:format_first_block_in_file():2515:    SpellScript* GetSpellScript() const override
DEBUG:refactor.py:277:format_first_block_in_file():2516:    {
DEBUG:refactor.py:277:format_first_block_in_file():2517:        return new spell_yogg_saron_lunatic_gaze_SpellScript();
DEBUG:refactor.py:277:format_first_block_in_file():2518:    }
DEBUG:refactor.py:277:format_first_block_in_file():2519:};
DEBUG:refactor.py:277:format_first_block_in_file():2520:
DEBUG:refactor.py:277:format_first_block_in_file():2521:// 64174 - Protective Gaze
DEBUG:refactor.py:277:format_first_block_in_file():2522:class spell_yogg_saron_protective_gaze : public SpellScriptLoader
DEBUG:refactor.py:277:format_first_block_in_file():2523:{
DEBUG:refactor.py:277:format_first_block_in_file():2524:public:
DEBUG:refactor.py:277:format_first_block_in_file():2525:    spell_yogg_saron_protective_gaze() : SpellScriptLoader("spell_yogg_saron_protective_gaze") { }
DEBUG:refactor.py:277:format_first_block_in_file():2526:
DEBUG:refactor.py:277:format_first_block_in_file():2527:    class spell_yogg_saron_protective_gaze_AuraScript : public AuraScript
DEBUG:refactor.py:277:format_first_block_in_file():2528:    {
DEBUG:refactor.py:277:format_first_block_in_file():2529:        PrepareAuraScript(spell_yogg_saron_protective_gaze_AuraScript);
DEBUG:refactor.py:277:format_first_block_in_file():2530:
DEBUG:refactor.py:277:format_first_block_in_file():2531:        void CalculateAmount(AuraEffect const* /*aurEff*/, int32& amount, bool& /*canBeRecalculated*/)
DEBUG:refactor.py:277:format_first_block_in_file():2532:        {
DEBUG:refactor.py:277:format_first_block_in_file():2533:            // Set absorbtion amount to unlimited
DEBUG:refactor.py:277:format_first_block_in_file():2534:            amount = -1;
DEBUG:refactor.py:277:format_first_block_in_file():2535:        }
DEBUG:refactor.py:277:format_first_block_in_file():2536:
DEBUG:refactor.py:277:format_first_block_in_file():2537:        void Absorb(AuraEffect* /*aurEff*/, DamageInfo& dmgInfo, uint32& absorbAmount)
DEBUG:refactor.py:277:format_first_block_in_file():2538:        {
DEBUG:refactor.py:277:format_first_block_in_file():2539:            Unit* target = GetTarget();
DEBUG:refactor.py:277:format_first_block_in_file():2540:            if (dmgInfo.GetDamage() < target->GetHealth() || !GetCaster() || GetCaster()->ToCreature()->HasSpellCooldown(SPELL_HODIR_FLASH_FREEZE))
DEBUG:refactor.py:277:format_first_block_in_file():2541:                return;
DEBUG:refactor.py:277:format_first_block_in_file():2542:
DEBUG:refactor.py:277:format_first_block_in_file():2543:            target->CastSpell(target, SPELL_HODIR_FLASH_FREEZE, true);
DEBUG:refactor.py:277:format_first_block_in_file():2544:            GetCaster()->AddSpellCooldown(SPELL_HODIR_FLASH_FREEZE, 0, 0);
DEBUG:refactor.py:277:format_first_block_in_file():2545:            absorbAmount = dmgInfo.GetDamage();
DEBUG:refactor.py:277:format_first_block_in_file():2546:        }
DEBUG:refactor.py:277:format_first_block_in_file():2547:
DEBUG:refactor.py:277:format_first_block_in_file():2548:        void Register() override
DEBUG:refactor.py:277:format_first_block_in_file():2549:        {
DEBUG:refactor.py:277:format_first_block_in_file():2550:            DoEffectCalcAmount += AuraEffectCalcAmountFn(spell_yogg_saron_protective_gaze_AuraScript::CalculateAmount, EFFECT_0, SPELL_AURA_SCHOOL_ABSORB);
DEBUG:refactor.py:277:format_first_block_in_file():2551:            OnEffectAbsorb += AuraEffectAbsorbFn(spell_yogg_saron_protective_gaze_AuraScript::Absorb, EFFECT_0);
DEBUG:refactor.py:277:format_first_block_in_file():2552:        }
DEBUG:refactor.py:277:format_first_block_in_file():2553:    };
DEBUG:refactor.py:277:format_first_block_in_file():2554:
DEBUG:refactor.py:277:format_first_block_in_file():2555:    AuraScript* GetAuraScript() const override
DEBUG:refactor.py:277:format_first_block_in_file():2556:    {
DEBUG:refactor.py:277:format_first_block_in_file():2557:        return new spell_yogg_saron_protective_gaze_AuraScript();
DEBUG:refactor.py:277:format_first_block_in_file():2558:    }
DEBUG:refactor.py:277:format_first_block_in_file():2559:};
DEBUG:refactor.py:277:format_first_block_in_file():2560:
DEBUG:refactor.py:277:format_first_block_in_file():2561:// 64161 - Empowered
DEBUG:refactor.py:277:format_first_block_in_file():2562:class spell_yogg_saron_empowered : public SpellScriptLoader
DEBUG:refactor.py:277:format_first_block_in_file():2563:{
DEBUG:refactor.py:277:format_first_block_in_file():2564:public:
DEBUG:refactor.py:277:format_first_block_in_file():2565:    spell_yogg_saron_empowered() : SpellScriptLoader("spell_yogg_saron_empowered") { }
DEBUG:refactor.py:277:format_first_block_in_file():2566:
DEBUG:refactor.py:277:format_first_block_in_file():2567:    class spell_yogg_saron_empowered_AuraScript : public AuraScript
DEBUG:refactor.py:277:format_first_block_in_file():2568:    {
DEBUG:refactor.py:277:format_first_block_in_file():2569:        PrepareAuraScript(spell_yogg_saron_empowered_AuraScript);
DEBUG:refactor.py:277:format_first_block_in_file():2570:
DEBUG:refactor.py:277:format_first_block_in_file():2571:        void OnPeriodic(AuraEffect const*  /*aurEff*/)
DEBUG:refactor.py:277:format_first_block_in_file():2572:        {
DEBUG:refactor.py:277:format_first_block_in_file():2573:            Unit* target = GetUnitOwner();
DEBUG:refactor.py:277:format_first_block_in_file():2574:            uint8 stack = std::min(uint8(target->GetHealthPct() / 10), (uint8)9);
DEBUG:refactor.py:277:format_first_block_in_file():2575:
DEBUG:refactor.py:277:format_first_block_in_file():2576:            if (!stack)
DEBUG:refactor.py:277:format_first_block_in_file():2577:            {
DEBUG:refactor.py:277:format_first_block_in_file():2578:                target->RemoveAura(SPELL_EMPOWERED);
DEBUG:refactor.py:277:format_first_block_in_file():2579:                target->CastSpell(target, SPELL_WEAKENED, true);
DEBUG:refactor.py:277:format_first_block_in_file():2580:            }
DEBUG:refactor.py:277:format_first_block_in_file():2581:            else if (Aura* aur = target->AddAura(SPELL_EMPOWERED, target))
DEBUG:refactor.py:277:format_first_block_in_file():2582:            {
DEBUG:refactor.py:277:format_first_block_in_file():2583:                aur->SetStackAmount(stack);
DEBUG:refactor.py:277:format_first_block_in_file():2584:                target->RemoveAurasDueToSpell(SPELL_WEAKENED);
DEBUG:refactor.py:277:format_first_block_in_file():2585:            }
DEBUG:refactor.py:277:format_first_block_in_file():2586:        }
DEBUG:refactor.py:277:format_first_block_in_file():2587:
DEBUG:refactor.py:277:format_first_block_in_file():2588:        void Register() override
DEBUG:refactor.py:277:format_first_block_in_file():2589:        {
DEBUG:refactor.py:277:format_first_block_in_file():2590:            OnEffectPeriodic += AuraEffectPeriodicFn(spell_yogg_saron_empowered_AuraScript::OnPeriodic, EFFECT_0, SPELL_AURA_PERIODIC_DUMMY);
DEBUG:refactor.py:277:format_first_block_in_file():2591:        }
DEBUG:refactor.py:277:format_first_block_in_file():2592:    };
DEBUG:refactor.py:277:format_first_block_in_file():2593:
DEBUG:refactor.py:277:format_first_block_in_file():2594:    AuraScript* GetAuraScript() const override
DEBUG:refactor.py:277:format_first_block_in_file():2595:    {
DEBUG:refactor.py:277:format_first_block_in_file():2596:        return new spell_yogg_saron_empowered_AuraScript();
DEBUG:refactor.py:277:format_first_block_in_file():2597:    }
DEBUG:refactor.py:277:format_first_block_in_file():2598:};
DEBUG:refactor.py:277:format_first_block_in_file():2599:
DEBUG:refactor.py:277:format_first_block_in_file():2600:// 64555 - Insane Periodic
DEBUG:refactor.py:277:format_first_block_in_file():2601:class spell_yogg_saron_insane_periodic_trigger : public SpellScriptLoader
DEBUG:refactor.py:277:format_first_block_in_file():2602:{
DEBUG:refactor.py:277:format_first_block_in_file():2603:public:
DEBUG:refactor.py:277:format_first_block_in_file():2604:    spell_yogg_saron_insane_periodic_trigger() : SpellScriptLoader("spell_yogg_saron_insane_periodic_trigger") { }
DEBUG:refactor.py:277:format_first_block_in_file():2605:
DEBUG:refactor.py:277:format_first_block_in_file():2606:    class spell_yogg_saron_insane_periodic_trigger_SpellScript : public SpellScript
DEBUG:refactor.py:277:format_first_block_in_file():2607:    {
DEBUG:refactor.py:277:format_first_block_in_file():2608:        PrepareSpellScript(spell_yogg_saron_insane_periodic_trigger_SpellScript);
DEBUG:refactor.py:277:format_first_block_in_file():2609:
DEBUG:refactor.py:277:format_first_block_in_file():2610:        void HandleDummyEffect(SpellEffIndex effIndex)
DEBUG:refactor.py:277:format_first_block_in_file():2611:        {
DEBUG:refactor.py:277:format_first_block_in_file():2612:            PreventHitDefaultEffect(effIndex);
DEBUG:refactor.py:277:format_first_block_in_file():2613:            Player* target = GetHitPlayer();
DEBUG:refactor.py:277:format_first_block_in_file():2614:            if (!target)
DEBUG:refactor.py:277:format_first_block_in_file():2615:                return;
DEBUG:refactor.py:277:format_first_block_in_file():2616:
DEBUG:refactor.py:277:format_first_block_in_file():2617:            Unit* caster = GetCaster();
DEBUG:refactor.py:277:format_first_block_in_file():2618:            caster->CastSpell(target, SPELL_INSANE1, true);
DEBUG:refactor.py:277:format_first_block_in_file():2619:            target->CastSpell(target, SPELL_INSANE2, true);
DEBUG:refactor.py:277:format_first_block_in_file():2620:        }
DEBUG:refactor.py:277:format_first_block_in_file():2621:
DEBUG:refactor.py:277:format_first_block_in_file():2622:        void FilterTargets(std::list<WorldObject*>& targets)
DEBUG:refactor.py:277:format_first_block_in_file():2623:        {
DEBUG:refactor.py:277:format_first_block_in_file():2624:            std::list<WorldObject*> tmplist;
DEBUG:refactor.py:277:format_first_block_in_file():2625:            for (std::list<WorldObject*>::iterator itr = targets.begin(); itr != targets.end(); ++itr)
DEBUG:refactor.py:277:format_first_block_in_file():2626:                if ((*itr)->IsPlayer() && !(*itr)->ToPlayer()->HasAuraType(SPELL_AURA_AOE_CHARM) && !(*itr)->ToPlayer()->HasAura(SPELL_SANITY))
DEBUG:refactor.py:277:format_first_block_in_file():2627:                    tmplist.push_back(*itr);
DEBUG:refactor.py:277:format_first_block_in_file():2628:
DEBUG:refactor.py:277:format_first_block_in_file():2629:            targets.clear();
DEBUG:refactor.py:277:format_first_block_in_file():2630:            for (std::list<WorldObject*>::iterator itr = tmplist.begin(); itr != tmplist.end(); ++itr)
DEBUG:refactor.py:277:format_first_block_in_file():2631:                targets.push_back(*itr);
DEBUG:refactor.py:277:format_first_block_in_file():2632:        }
DEBUG:refactor.py:277:format_first_block_in_file():2633:
DEBUG:refactor.py:277:format_first_block_in_file():2634:        void Register() override
DEBUG:refactor.py:277:format_first_block_in_file():2635:        {
DEBUG:refactor.py:277:format_first_block_in_file():2636:            OnEffectHitTarget += SpellEffectFn(spell_yogg_saron_insane_periodic_trigger_SpellScript::HandleDummyEffect, EFFECT_0, SPELL_EFFECT_DUMMY);
DEBUG:refactor.py:277:format_first_block_in_file():2637:            OnObjectAreaTargetSelect += SpellObjectAreaTargetSelectFn(spell_yogg_saron_insane_periodic_trigger_SpellScript::FilterTargets, EFFECT_0, TARGET_UNIT_SRC_AREA_ENEMY);
DEBUG:refactor.py:277:format_first_block_in_file():2638:        }
DEBUG:refactor.py:277:format_first_block_in_file():2639:    };
DEBUG:refactor.py:277:format_first_block_in_file():2640:
DEBUG:refactor.py:277:format_first_block_in_file():2641:    SpellScript* GetSpellScript() const override
DEBUG:refactor.py:277:format_first_block_in_file():2642:    {
DEBUG:refactor.py:277:format_first_block_in_file():2643:        return new spell_yogg_saron_insane_periodic_trigger_SpellScript();
DEBUG:refactor.py:277:format_first_block_in_file():2644:    }
DEBUG:refactor.py:277:format_first_block_in_file():2645:};
DEBUG:refactor.py:277:format_first_block_in_file():2646:
DEBUG:refactor.py:277:format_first_block_in_file():2647:// 63120 - Insane
DEBUG:refactor.py:277:format_first_block_in_file():2648:class spell_yogg_saron_insane : public SpellScriptLoader
DEBUG:refactor.py:277:format_first_block_in_file():2649:{
DEBUG:refactor.py:277:format_first_block_in_file():2650:public:
DEBUG:refactor.py:277:format_first_block_in_file():2651:    spell_yogg_saron_insane() : SpellScriptLoader("spell_yogg_saron_insane") { }
DEBUG:refactor.py:277:format_first_block_in_file():2652:
DEBUG:refactor.py:277:format_first_block_in_file():2653:    class spell_yogg_saron_insane_AuraScript : public AuraScript
DEBUG:refactor.py:277:format_first_block_in_file():2654:    {
DEBUG:refactor.py:277:format_first_block_in_file():2655:        PrepareAuraScript(spell_yogg_saron_insane_AuraScript);
DEBUG:refactor.py:277:format_first_block_in_file():2656:
DEBUG:refactor.py:277:format_first_block_in_file():2657:        void OnRemove(AuraEffect const* /*aurEff*/, AuraEffectHandleModes /*mode*/)
DEBUG:refactor.py:277:format_first_block_in_file():2658:        {
DEBUG:refactor.py:277:format_first_block_in_file():2659:            Unit::Kill(GetUnitOwner(), GetUnitOwner());
DEBUG:refactor.py:277:format_first_block_in_file():2660:        }
DEBUG:refactor.py:277:format_first_block_in_file():2661:
DEBUG:refactor.py:277:format_first_block_in_file():2662:        void Register() override
DEBUG:refactor.py:277:format_first_block_in_file():2663:        {
DEBUG:refactor.py:277:format_first_block_in_file():2664:            OnEffectRemove += AuraEffectRemoveFn(spell_yogg_saron_insane_AuraScript::OnRemove, EFFECT_0, SPELL_AURA_AOE_CHARM, AURA_EFFECT_HANDLE_REAL);
DEBUG:refactor.py:277:format_first_block_in_file():2665:        }
DEBUG:refactor.py:277:format_first_block_in_file():2666:    };
DEBUG:refactor.py:277:format_first_block_in_file():2667:
DEBUG:refactor.py:277:format_first_block_in_file():2668:    AuraScript* GetAuraScript() const override
DEBUG:refactor.py:277:format_first_block_in_file():2669:    {
DEBUG:refactor.py:277:format_first_block_in_file():2670:        return new spell_yogg_saron_insane_AuraScript();
DEBUG:refactor.py:277:format_first_block_in_file():2671:    }
DEBUG:refactor.py:277:format_first_block_in_file():2672:};
DEBUG:refactor.py:277:format_first_block_in_file():2673:
DEBUG:refactor.py:277:format_first_block_in_file():2674:// 64169 - Sanity Well
DEBUG:refactor.py:277:format_first_block_in_file():2675:class spell_yogg_saron_sanity_well : public SpellScriptLoader
DEBUG:refactor.py:277:format_first_block_in_file():2676:{
DEBUG:refactor.py:277:format_first_block_in_file():2677:public:
DEBUG:refactor.py:277:format_first_block_in_file():2678:    spell_yogg_saron_sanity_well() : SpellScriptLoader("spell_yogg_saron_sanity_well") { }
DEBUG:refactor.py:277:format_first_block_in_file():2679:
DEBUG:refactor.py:277:format_first_block_in_file():2680:    class spell_yogg_saron_sanity_well_AuraScript : public AuraScript
DEBUG:refactor.py:277:format_first_block_in_file():2681:    {
DEBUG:refactor.py:277:format_first_block_in_file():2682:        PrepareAuraScript(spell_yogg_saron_sanity_well_AuraScript);
DEBUG:refactor.py:277:format_first_block_in_file():2683:
DEBUG:refactor.py:277:format_first_block_in_file():2684:        void HandleEffectCalcPeriodic(AuraEffect const* /*aurEff*/, bool& isPeriodic, int32& amplitude)
DEBUG:refactor.py:277:format_first_block_in_file():2685:        {
DEBUG:refactor.py:277:format_first_block_in_file():2686:            isPeriodic = true;
DEBUG:refactor.py:277:format_first_block_in_file():2687:            amplitude = 2 * IN_MILLISECONDS;
DEBUG:refactor.py:277:format_first_block_in_file():2688:        }
DEBUG:refactor.py:277:format_first_block_in_file():2689:
DEBUG:refactor.py:277:format_first_block_in_file():2690:        void HandleEffectPeriodic(AuraEffect const*   /*aurEff*/)
DEBUG:refactor.py:277:format_first_block_in_file():2691:        {
DEBUG:refactor.py:277:format_first_block_in_file():2692:            Unit* target = GetTarget();
DEBUG:refactor.py:277:format_first_block_in_file():2693:            if (!target || !target->IsPlayer())
DEBUG:refactor.py:277:format_first_block_in_file():2694:                return;
DEBUG:refactor.py:277:format_first_block_in_file():2695:
DEBUG:refactor.py:277:format_first_block_in_file():2696:            if (Aura* aur = target->GetAura(SPELL_SANITY))
DEBUG:refactor.py:277:format_first_block_in_file():2697:                aur->SetStackAmount(std::min(100, aur->GetStackAmount() + 20));
DEBUG:refactor.py:277:format_first_block_in_file():2698:        }
DEBUG:refactor.py:277:format_first_block_in_file():2699:
DEBUG:refactor.py:277:format_first_block_in_file():2700:        void Register() override
DEBUG:refactor.py:277:format_first_block_in_file():2701:        {
DEBUG:refactor.py:277:format_first_block_in_file():2702:            DoEffectCalcPeriodic += AuraEffectCalcPeriodicFn(spell_yogg_saron_sanity_well_AuraScript::HandleEffectCalcPeriodic, EFFECT_0, SPELL_AURA_MOD_DAMAGE_PERCENT_DONE);
DEBUG:refactor.py:277:format_first_block_in_file():2703:            OnEffectPeriodic += AuraEffectPeriodicFn(spell_yogg_saron_sanity_well_AuraScript::HandleEffectPeriodic, EFFECT_0, SPELL_AURA_MOD_DAMAGE_PERCENT_DONE);
DEBUG:refactor.py:277:format_first_block_in_file():2704:        }
DEBUG:refactor.py:277:format_first_block_in_file():2705:    };
DEBUG:refactor.py:277:format_first_block_in_file():2706:
DEBUG:refactor.py:277:format_first_block_in_file():2707:    AuraScript* GetAuraScript() const override
DEBUG:refactor.py:277:format_first_block_in_file():2708:    {
DEBUG:refactor.py:277:format_first_block_in_file():2709:        return new spell_yogg_saron_sanity_well_AuraScript();
DEBUG:refactor.py:277:format_first_block_in_file():2710:    }
DEBUG:refactor.py:277:format_first_block_in_file():2711:};
DEBUG:refactor.py:277:format_first_block_in_file():2712:
DEBUG:refactor.py:277:format_first_block_in_file():2713:// 64170 - Sanity Well
DEBUG:refactor.py:277:format_first_block_in_file():2714:class spell_keeper_freya_summon_sanity_well : public SpellScript
DEBUG:refactor.py:277:format_first_block_in_file():2715:{
DEBUG:refactor.py:277:format_first_block_in_file():2716:    PrepareSpellScript(spell_keeper_freya_summon_sanity_well);
DEBUG:refactor.py:277:format_first_block_in_file():2717:
DEBUG:refactor.py:277:format_first_block_in_file():2718:    void OnEffect(SpellEffIndex /*effIndex*/)
DEBUG:refactor.py:277:format_first_block_in_file():2719:    {
DEBUG:refactor.py:277:format_first_block_in_file():2720:        if (Unit* caster = GetCaster())
DEBUG:refactor.py:277:format_first_block_in_file():2721:            if (InstanceScript* instance = caster->GetInstanceScript())
DEBUG:refactor.py:277:format_first_block_in_file():2722:                if (Creature* sara = ObjectAccessor::GetCreature(*caster, caster->GetInstanceScript()->GetGuidData(NPC_SARA)))
DEBUG:refactor.py:277:format_first_block_in_file():2723:                {
DEBUG:refactor.py:277:format_first_block_in_file():2724:                    sara->SummonCreature(NPC_SANITY_WELL, 2042.56f, -40.3667f, 329.274f, 0.0f);
DEBUG:refactor.py:277:format_first_block_in_file():2725:                    sara->SummonCreature(NPC_SANITY_WELL, 1975.89f, 40.0216f, 331.1f, 0.0f);
DEBUG:refactor.py:277:format_first_block_in_file():2726:                    sara->SummonCreature(NPC_SANITY_WELL, 1987.12f, -91.2702f, 330.186f, 0.0f);
DEBUG:refactor.py:277:format_first_block_in_file():2727:                    sara->SummonCreature(NPC_SANITY_WELL, 1900.48f, -51.2386f, 332.13f, 0.0f);
DEBUG:refactor.py:277:format_first_block_in_file():2728:                    sara->SummonCreature(NPC_SANITY_WELL, 1899.94f, 0.330621f, 332.296f, 0.0f);
DEBUG:refactor.py:277:format_first_block_in_file():2729:                }
DEBUG:refactor.py:277:format_first_block_in_file():2730:    }
DEBUG:refactor.py:277:format_first_block_in_file():2731:
DEBUG:refactor.py:277:format_first_block_in_file():2732:    void Register() override
DEBUG:refactor.py:277:format_first_block_in_file():2733:    {
DEBUG:refactor.py:277:format_first_block_in_file():2734:        OnEffectLaunch += SpellEffectFn(spell_keeper_freya_summon_sanity_well::OnEffect, EFFECT_0, SPELL_EFFECT_SEND_EVENT);
DEBUG:refactor.py:277:format_first_block_in_file():2735:    }
DEBUG:refactor.py:277:format_first_block_in_file():2736:};
DEBUG:refactor.py:277:format_first_block_in_file():2737:
DEBUG:refactor.py:277:format_first_block_in_file():2738:/* 63881 - Malady of the Mind
DEBUG:refactor.py:277:format_first_block_in_file():2739:   63795 - Psychosis
DEBUG:refactor.py:277:format_first_block_in_file():2740:   63830 - Malady of the Mind
DEBUG:refactor.py:277:format_first_block_in_file():2741:   64164 - Lunatic Gaze
DEBUG:refactor.py:277:format_first_block_in_file():2742:   64059 - Induce Madness
DEBUG:refactor.py:277:format_first_block_in_file():2743:   63803 - Brain Link
DEBUG:refactor.py:277:format_first_block_in_file():2744:   65301 - Psychosis
DEBUG:refactor.py:277:format_first_block_in_file():2745:   64168 - Lunatic Gaze */
DEBUG:refactor.py:277:format_first_block_in_file():2746:class spell_yogg_saron_sanity_reduce : public SpellScriptLoader
DEBUG:refactor.py:277:format_first_block_in_file():2747:{
DEBUG:refactor.py:277:format_first_block_in_file():2748:public:
DEBUG:refactor.py:277:format_first_block_in_file():2749:    spell_yogg_saron_sanity_reduce() : SpellScriptLoader("spell_yogg_saron_sanity_reduce") { }
DEBUG:refactor.py:277:format_first_block_in_file():2750:
DEBUG:refactor.py:277:format_first_block_in_file():2751:    class spell_yogg_saron_sanity_reduce_SpellScript : public SpellScript
DEBUG:refactor.py:277:format_first_block_in_file():2752:    {
DEBUG:refactor.py:277:format_first_block_in_file():2753:        PrepareSpellScript(spell_yogg_saron_sanity_reduce_SpellScript);
DEBUG:refactor.py:277:format_first_block_in_file():2754:
DEBUG:refactor.py:277:format_first_block_in_file():2755:        void HandleScriptEffect(SpellEffIndex effIndex)
DEBUG:refactor.py:277:format_first_block_in_file():2756:        {
DEBUG:refactor.py:277:format_first_block_in_file():2757:            PreventHitDefaultEffect(effIndex);
DEBUG:refactor.py:277:format_first_block_in_file():2758:            Player* target = GetHitPlayer();
DEBUG:refactor.py:277:format_first_block_in_file():2759:            if (!target)
DEBUG:refactor.py:277:format_first_block_in_file():2760:                return;
DEBUG:refactor.py:277:format_first_block_in_file():2761:
DEBUG:refactor.py:277:format_first_block_in_file():2762:            uint8 _reduceAmount = 0;
DEBUG:refactor.py:277:format_first_block_in_file():2763:            switch (GetSpellInfo()->Id)
DEBUG:refactor.py:277:format_first_block_in_file():2764:            {
DEBUG:refactor.py:277:format_first_block_in_file():2765:                case SPELL_SARA_PSYCHOSIS_10:
DEBUG:refactor.py:277:format_first_block_in_file():2766:                    _reduceAmount = 9;
DEBUG:refactor.py:277:format_first_block_in_file():2767:                    break;
DEBUG:refactor.py:277:format_first_block_in_file():2768:                case SPELL_SARA_PSYCHOSIS_25:
DEBUG:refactor.py:277:format_first_block_in_file():2769:                    _reduceAmount = 12;
DEBUG:refactor.py:277:format_first_block_in_file():2770:                    break;
DEBUG:refactor.py:277:format_first_block_in_file():2771:                case SPELL_MALADY_OF_THE_MIND:
DEBUG:refactor.py:277:format_first_block_in_file():2772:                    _reduceAmount = 3;
DEBUG:refactor.py:277:format_first_block_in_file():2773:                    break;
DEBUG:refactor.py:277:format_first_block_in_file():2774:                case SPELL_MALADY_OF_THE_MIND_TRIGGER:
DEBUG:refactor.py:277:format_first_block_in_file():2775:                    _reduceAmount = 3;
DEBUG:refactor.py:277:format_first_block_in_file():2776:                    break;
DEBUG:refactor.py:277:format_first_block_in_file():2777:                case SPELL_BRAIN_LINK_DAMAGE:
DEBUG:refactor.py:277:format_first_block_in_file():2778:                    _reduceAmount = 2;
DEBUG:refactor.py:277:format_first_block_in_file():2779:                    break;
DEBUG:refactor.py:277:format_first_block_in_file():2780:                case 64168 /*SPELL_LUNATIC_GAZE*/:
DEBUG:refactor.py:277:format_first_block_in_file():2781:                    _reduceAmount = 2;
DEBUG:refactor.py:277:format_first_block_in_file():2782:                    break;
DEBUG:refactor.py:277:format_first_block_in_file():2783:                case 64164 /*SPELL_YS_LUNATIC_GAZE*/:
DEBUG:refactor.py:277:format_first_block_in_file():2784:                    _reduceAmount = 4;
DEBUG:refactor.py:277:format_first_block_in_file():2785:                    break;
DEBUG:refactor.py:277:format_first_block_in_file():2786:                case SPELL_INDUCE_MADNESS:
DEBUG:refactor.py:277:format_first_block_in_file():2787:                    // Teleported out of brain
DEBUG:refactor.py:277:format_first_block_in_file():2788:                    if (target->GetPositionZ() > 300.0f)
DEBUG:refactor.py:277:format_first_block_in_file():2789:                        return;
DEBUG:refactor.py:277:format_first_block_in_file():2790:                    else
DEBUG:refactor.py:277:format_first_block_in_file():2791:                        target->CastSpell(target, SPELL_CANCEL_ILLUSION_AURA, true); // else we are underground, remove illusion aura and teleport outside
DEBUG:refactor.py:277:format_first_block_in_file():2792:                    _reduceAmount = 100;
DEBUG:refactor.py:277:format_first_block_in_file():2793:                    break;
DEBUG:refactor.py:277:format_first_block_in_file():2794:            }
DEBUG:refactor.py:277:format_first_block_in_file():2795:
DEBUG:refactor.py:277:format_first_block_in_file():2796:            if (Aura* aur = target->GetAura(SPELL_SANITY))
DEBUG:refactor.py:277:format_first_block_in_file():2797:            {
DEBUG:refactor.py:277:format_first_block_in_file():2798:                if ((aur->GetStackAmount() - _reduceAmount) <= 20)
DEBUG:refactor.py:277:format_first_block_in_file():2799:                    target->CastSpell(target, 63752 /*SANITY_SCREEN_EFFECT*/, true);
DEBUG:refactor.py:277:format_first_block_in_file():2800:                aur->ModStackAmount(-_reduceAmount);
DEBUG:refactor.py:277:format_first_block_in_file():2801:            }
DEBUG:refactor.py:277:format_first_block_in_file():2802:        }
DEBUG:refactor.py:277:format_first_block_in_file():2803:
DEBUG:refactor.py:277:format_first_block_in_file():2804:        void Register() override
DEBUG:refactor.py:277:format_first_block_in_file():2805:        {
DEBUG:refactor.py:277:format_first_block_in_file():2806:            OnEffectHitTarget += SpellEffectFn(spell_yogg_saron_sanity_reduce_SpellScript::HandleScriptEffect, EFFECT_FIRST_FOUND, SPELL_EFFECT_SCRIPT_EFFECT);
DEBUG:refactor.py:277:format_first_block_in_file():2807:        }
DEBUG:refactor.py:277:format_first_block_in_file():2808:    };
DEBUG:refactor.py:277:format_first_block_in_file():2809:
DEBUG:refactor.py:277:format_first_block_in_file():2810:    SpellScript* GetSpellScript() const override
DEBUG:refactor.py:277:format_first_block_in_file():2811:    {
DEBUG:refactor.py:277:format_first_block_in_file():2812:        return new spell_yogg_saron_sanity_reduce_SpellScript();
DEBUG:refactor.py:277:format_first_block_in_file():2813:    }
DEBUG:refactor.py:277:format_first_block_in_file():2814:};
DEBUG:refactor.py:277:format_first_block_in_file():2815:
DEBUG:refactor.py:277:format_first_block_in_file():2816:// 64467 - Empowering Shadows
DEBUG:refactor.py:277:format_first_block_in_file():2817:class spell_yogg_saron_empowering_shadows : public SpellScriptLoader
DEBUG:refactor.py:277:format_first_block_in_file():2818:{
DEBUG:refactor.py:277:format_first_block_in_file():2819:public:
DEBUG:refactor.py:277:format_first_block_in_file():2820:    spell_yogg_saron_empowering_shadows() : SpellScriptLoader("spell_yogg_saron_empowering_shadows") { }
DEBUG:refactor.py:277:format_first_block_in_file():2821:
DEBUG:refactor.py:277:format_first_block_in_file():2822:    class spell_yogg_saron_empowering_shadows_SpellScript : public SpellScript
DEBUG:refactor.py:277:format_first_block_in_file():2823:    {
DEBUG:refactor.py:277:format_first_block_in_file():2824:        PrepareSpellScript(spell_yogg_saron_empowering_shadows_SpellScript);
DEBUG:refactor.py:277:format_first_block_in_file():2825:
DEBUG:refactor.py:277:format_first_block_in_file():2826:        void HandleScriptEffect(SpellEffIndex effIndex)
DEBUG:refactor.py:277:format_first_block_in_file():2827:        {
DEBUG:refactor.py:277:format_first_block_in_file():2828:            PreventHitDefaultEffect(effIndex);
DEBUG:refactor.py:277:format_first_block_in_file():2829:            if (Unit* target = GetHitUnit())
DEBUG:refactor.py:277:format_first_block_in_file():2830:                target->CastSpell(target, target->GetMap()->Is25ManRaid() ? 64486 : 64468, true); // SPELL_EMPOWERING_SHADOWS_HEAL
DEBUG:refactor.py:277:format_first_block_in_file():2831:        }
DEBUG:refactor.py:277:format_first_block_in_file():2832:
DEBUG:refactor.py:277:format_first_block_in_file():2833:        void Register() override
DEBUG:refactor.py:277:format_first_block_in_file():2834:        {
DEBUG:refactor.py:277:format_first_block_in_file():2835:            OnEffectHitTarget += SpellEffectFn(spell_yogg_saron_empowering_shadows_SpellScript::HandleScriptEffect, EFFECT_0, SPELL_EFFECT_SCRIPT_EFFECT);
DEBUG:refactor.py:277:format_first_block_in_file():2836:        }
DEBUG:refactor.py:277:format_first_block_in_file():2837:    };
DEBUG:refactor.py:277:format_first_block_in_file():2838:
DEBUG:refactor.py:277:format_first_block_in_file():2839:    SpellScript* GetSpellScript() const override
DEBUG:refactor.py:277:format_first_block_in_file():2840:    {
DEBUG:refactor.py:277:format_first_block_in_file():2841:        return new spell_yogg_saron_empowering_shadows_SpellScript();
DEBUG:refactor.py:277:format_first_block_in_file():2842:    }
DEBUG:refactor.py:277:format_first_block_in_file():2843:};
DEBUG:refactor.py:277:format_first_block_in_file():2844:
DEBUG:refactor.py:277:format_first_block_in_file():2845:// 64184 - In the Maws of the Old God
DEBUG:refactor.py:277:format_first_block_in_file():2846:class spell_yogg_saron_in_the_maws_of_the_old_god : public SpellScriptLoader
DEBUG:refactor.py:277:format_first_block_in_file():2847:{
DEBUG:refactor.py:277:format_first_block_in_file():2848:public:
DEBUG:refactor.py:277:format_first_block_in_file():2849:    spell_yogg_saron_in_the_maws_of_the_old_god() : SpellScriptLoader("spell_yogg_saron_in_the_maws_of_the_old_god") {}
DEBUG:refactor.py:277:format_first_block_in_file():2850:
DEBUG:refactor.py:277:format_first_block_in_file():2851:    class spell_yogg_saron_in_the_maws_of_the_old_god_SpellScript : public SpellScript
DEBUG:refactor.py:277:format_first_block_in_file():2852:    {
DEBUG:refactor.py:277:format_first_block_in_file():2853:        PrepareSpellScript(spell_yogg_saron_in_the_maws_of_the_old_god_SpellScript);
DEBUG:refactor.py:277:format_first_block_in_file():2854:
DEBUG:refactor.py:277:format_first_block_in_file():2855:        SpellCastResult CheckCast()
DEBUG:refactor.py:277:format_first_block_in_file():2856:        {
DEBUG:refactor.py:277:format_first_block_in_file():2857:            if (!GetCaster()->IsPlayer())
DEBUG:refactor.py:277:format_first_block_in_file():2858:                return SPELL_FAILED_BAD_TARGETS;
DEBUG:refactor.py:277:format_first_block_in_file():2859:
DEBUG:refactor.py:277:format_first_block_in_file():2860:            Unit* target = GetCaster()->ToPlayer()->GetSelectedUnit();
DEBUG:refactor.py:277:format_first_block_in_file():2861:            if (!target || target->GetEntry() != NPC_YOGG_SARON)
DEBUG:refactor.py:277:format_first_block_in_file():2862:                return SPELL_FAILED_BAD_TARGETS;
DEBUG:refactor.py:277:format_first_block_in_file():2863:
DEBUG:refactor.py:277:format_first_block_in_file():2864:            Spell* spell = target->GetCurrentSpell(CURRENT_GENERIC_SPELL);
DEBUG:refactor.py:277:format_first_block_in_file():2865:            if (!spell || spell->GetSpellInfo()->Id != SPELL_DEAFENING_ROAR)
DEBUG:refactor.py:277:format_first_block_in_file():2866:                return SPELL_FAILED_TARGET_AURASTATE;
DEBUG:refactor.py:277:format_first_block_in_file():2867:
DEBUG:refactor.py:277:format_first_block_in_file():2868:            return SPELL_CAST_OK;
DEBUG:refactor.py:277:format_first_block_in_file():2869:        }
DEBUG:refactor.py:277:format_first_block_in_file():2870:
DEBUG:refactor.py:277:format_first_block_in_file():2871:        void Register() override
DEBUG:refactor.py:277:format_first_block_in_file():2872:        {
DEBUG:refactor.py:277:format_first_block_in_file():2873:            OnCheckCast += SpellCheckCastFn(spell_yogg_saron_in_the_maws_of_the_old_god_SpellScript::CheckCast);
DEBUG:refactor.py:277:format_first_block_in_file():2874:        }
DEBUG:refactor.py:277:format_first_block_in_file():2875:    };
DEBUG:refactor.py:277:format_first_block_in_file():2876:
DEBUG:refactor.py:277:format_first_block_in_file():2877:    SpellScript* GetSpellScript() const override
DEBUG:refactor.py:277:format_first_block_in_file():2878:    {
DEBUG:refactor.py:277:format_first_block_in_file():2879:        return new spell_yogg_saron_in_the_maws_of_the_old_god_SpellScript();
DEBUG:refactor.py:277:format_first_block_in_file():2880:    }
DEBUG:refactor.py:277:format_first_block_in_file():2881:};
DEBUG:refactor.py:277:format_first_block_in_file():2882:
DEBUG:refactor.py:277:format_first_block_in_file():2883:/* 63744 - Sara's Anger
DEBUG:refactor.py:277:format_first_block_in_file():2884:   63747 - Sara's Fervor
DEBUG:refactor.py:277:format_first_block_in_file():2885:   63745 - Sara's Blessing */
DEBUG:refactor.py:277:format_first_block_in_file():2886:class spell_yogg_saron_target_selectors : public SpellScriptLoader
DEBUG:refactor.py:277:format_first_block_in_file():2887:{
DEBUG:refactor.py:277:format_first_block_in_file():2888:public:
DEBUG:refactor.py:277:format_first_block_in_file():2889:    spell_yogg_saron_target_selectors() : SpellScriptLoader("spell_yogg_saron_target_selectors") { }
DEBUG:refactor.py:277:format_first_block_in_file():2890:
DEBUG:refactor.py:277:format_first_block_in_file():2891:    class spell_yogg_saron_target_selectors_SpellScript : public SpellScript
DEBUG:refactor.py:277:format_first_block_in_file():2892:    {
DEBUG:refactor.py:277:format_first_block_in_file():2893:        PrepareSpellScript(spell_yogg_saron_target_selectors_SpellScript);
DEBUG:refactor.py:277:format_first_block_in_file():2894:
DEBUG:refactor.py:277:format_first_block_in_file():2895:        void HandleScript(SpellEffIndex /*effIndex*/)
DEBUG:refactor.py:277:format_first_block_in_file():2896:        {
DEBUG:refactor.py:277:format_first_block_in_file():2897:            if (Unit* target = GetHitUnit())
DEBUG:refactor.py:277:format_first_block_in_file():2898:            {
DEBUG:refactor.py:277:format_first_block_in_file():2899:                GetCaster()->SetFacingToObject(target);
DEBUG:refactor.py:277:format_first_block_in_file():2900:                GetCaster()->CastSpell(target, uint32(GetEffectValue()));
DEBUG:refactor.py:277:format_first_block_in_file():2901:            }
DEBUG:refactor.py:277:format_first_block_in_file():2902:        }
DEBUG:refactor.py:277:format_first_block_in_file():2903:
DEBUG:refactor.py:277:format_first_block_in_file():2904:        void Register() override
DEBUG:refactor.py:277:format_first_block_in_file():2905:        {
DEBUG:refactor.py:277:format_first_block_in_file():2906:            OnEffectHitTarget += SpellEffectFn(spell_yogg_saron_target_selectors_SpellScript::HandleScript, EFFECT_0, SPELL_EFFECT_DUMMY);
DEBUG:refactor.py:277:format_first_block_in_file():2907:        }
DEBUG:refactor.py:277:format_first_block_in_file():2908:    };
DEBUG:refactor.py:277:format_first_block_in_file():2909:
DEBUG:refactor.py:277:format_first_block_in_file():2910:    SpellScript* GetSpellScript() const override
DEBUG:refactor.py:277:format_first_block_in_file():2911:    {
DEBUG:refactor.py:277:format_first_block_in_file():2912:        return new spell_yogg_saron_target_selectors_SpellScript();
DEBUG:refactor.py:277:format_first_block_in_file():2913:    }
DEBUG:refactor.py:277:format_first_block_in_file():2914:};
DEBUG:refactor.py:277:format_first_block_in_file():2915:
DEBUG:refactor.py:277:format_first_block_in_file():2916:// 63305 - Grim Reprisal
DEBUG:refactor.py:277:format_first_block_in_file():2917:class spell_yogg_saron_grim_reprisal : public SpellScriptLoader
DEBUG:refactor.py:277:format_first_block_in_file():2918:{
DEBUG:refactor.py:277:format_first_block_in_file():2919:public:
DEBUG:refactor.py:277:format_first_block_in_file():2920:    spell_yogg_saron_grim_reprisal() : SpellScriptLoader("spell_yogg_saron_grim_reprisal") { }
DEBUG:refactor.py:277:format_first_block_in_file():2921:
DEBUG:refactor.py:277:format_first_block_in_file():2922:    class spell_yogg_saron_grim_reprisal_AuraScript : public AuraScript
DEBUG:refactor.py:277:format_first_block_in_file():2923:    {
DEBUG:refactor.py:277:format_first_block_in_file():2924:        PrepareAuraScript(spell_yogg_saron_grim_reprisal_AuraScript);
DEBUG:refactor.py:277:format_first_block_in_file():2925:
DEBUG:refactor.py:277:format_first_block_in_file():2926:        bool Validate(SpellInfo const* /*spellInfo*/) override
DEBUG:refactor.py:277:format_first_block_in_file():2927:        {
DEBUG:refactor.py:277:format_first_block_in_file():2928:            return ValidateSpellInfo({ SPELL_GRIM_REPRISAL_DAMAGE });
DEBUG:refactor.py:277:format_first_block_in_file():2929:        }
DEBUG:refactor.py:277:format_first_block_in_file():2930:
DEBUG:refactor.py:277:format_first_block_in_file():2931:        void HandleProc(AuraEffect const* aurEff, ProcEventInfo& eventInfo)
DEBUG:refactor.py:277:format_first_block_in_file():2932:        {
DEBUG:refactor.py:277:format_first_block_in_file():2933:            DamageInfo* damageInfo = eventInfo.GetDamageInfo();
DEBUG:refactor.py:277:format_first_block_in_file():2934:
DEBUG:refactor.py:277:format_first_block_in_file():2935:            if (!damageInfo || !damageInfo->GetDamage())
DEBUG:refactor.py:277:format_first_block_in_file():2936:            {
DEBUG:refactor.py:277:format_first_block_in_file():2937:                return;
DEBUG:refactor.py:277:format_first_block_in_file():2938:            }
DEBUG:refactor.py:277:format_first_block_in_file():2939:
DEBUG:refactor.py:277:format_first_block_in_file():2940:            int32 damage = CalculatePct(static_cast<int32>(damageInfo->GetDamage()), 60);
DEBUG:refactor.py:277:format_first_block_in_file():2941:            GetTarget()->CastCustomSpell(SPELL_GRIM_REPRISAL_DAMAGE, SPELLVALUE_BASE_POINT0, damage, damageInfo->GetAttacker(), true, nullptr, aurEff);
DEBUG:refactor.py:277:format_first_block_in_file():2942:        }
DEBUG:refactor.py:277:format_first_block_in_file():2943:
DEBUG:refactor.py:277:format_first_block_in_file():2944:        void Register() override
DEBUG:refactor.py:277:format_first_block_in_file():2945:        {
DEBUG:refactor.py:277:format_first_block_in_file():2946:            OnEffectProc += AuraEffectProcFn(spell_yogg_saron_grim_reprisal_AuraScript::HandleProc, EFFECT_0, SPELL_AURA_DUMMY);
DEBUG:refactor.py:277:format_first_block_in_file():2947:        }
DEBUG:refactor.py:277:format_first_block_in_file():2948:    };
DEBUG:refactor.py:277:format_first_block_in_file():2949:
DEBUG:refactor.py:277:format_first_block_in_file():2950:    AuraScript* GetAuraScript() const override
DEBUG:refactor.py:277:format_first_block_in_file():2951:    {
DEBUG:refactor.py:277:format_first_block_in_file():2952:        return new spell_yogg_saron_grim_reprisal_AuraScript();
DEBUG:refactor.py:277:format_first_block_in_file():2953:    }
DEBUG:refactor.py:277:format_first_block_in_file():2954:};
DEBUG:refactor.py:277:format_first_block_in_file():2955:
DEBUG:refactor.py:277:format_first_block_in_file():2956:class achievement_yogg_saron_drive_me_crazy : public AchievementCriteriaScript
DEBUG:refactor.py:277:format_first_block_in_file():2957:{
DEBUG:refactor.py:277:format_first_block_in_file():2958:public:
DEBUG:refactor.py:277:format_first_block_in_file():2959:    achievement_yogg_saron_drive_me_crazy() : AchievementCriteriaScript("achievement_yogg_saron_drive_me_crazy") {}
DEBUG:refactor.py:277:format_first_block_in_file():2960:
DEBUG:refactor.py:277:format_first_block_in_file():2961:    bool OnCheck(Player*  /*player*/, Unit* target, uint32 /*criteria_id*/) override
DEBUG:refactor.py:277:format_first_block_in_file():2962:    {
DEBUG:refactor.py:277:format_first_block_in_file():2963:        return target && target->GetAI()->GetData(DATA_GET_DRIVE_ME_CRAZY); // target = Yogg-Saron
DEBUG:refactor.py:277:format_first_block_in_file():2964:    }
DEBUG:refactor.py:277:format_first_block_in_file():2965:};
DEBUG:refactor.py:277:format_first_block_in_file():2966:
DEBUG:refactor.py:277:format_first_block_in_file():2967:class achievement_yogg_saron_darkness : public AchievementCriteriaScript
DEBUG:refactor.py:277:format_first_block_in_file():2968:{
DEBUG:refactor.py:277:format_first_block_in_file():2969:public:
DEBUG:refactor.py:277:format_first_block_in_file():2970:    achievement_yogg_saron_darkness(char const* name, uint32 count) : AchievementCriteriaScript(name),
DEBUG:refactor.py:277:format_first_block_in_file():2971:        _keepersCount(count)
DEBUG:refactor.py:277:format_first_block_in_file():2972:    {
DEBUG:refactor.py:277:format_first_block_in_file():2973:    }
DEBUG:refactor.py:277:format_first_block_in_file():2974:
DEBUG:refactor.py:277:format_first_block_in_file():2975:    bool OnCheck(Player* player, Unit*  /*target*/ /*Yogg-Saron*/, uint32 /*criteria_id*/) override
DEBUG:refactor.py:277:format_first_block_in_file():2976:    {
DEBUG:refactor.py:277:format_first_block_in_file():2977:        if (player->GetInstanceScript())
DEBUG:refactor.py:277:format_first_block_in_file():2978:            if (Creature* sara = ObjectAccessor::GetCreature(*player, player->GetInstanceScript()->GetGuidData(NPC_SARA)))
DEBUG:refactor.py:277:format_first_block_in_file():2979:                return sara->GetAI()->GetData(DATA_GET_KEEPERS_COUNT) <= _keepersCount;
DEBUG:refactor.py:277:format_first_block_in_file():2980:
DEBUG:refactor.py:277:format_first_block_in_file():2981:        return false;
DEBUG:refactor.py:277:format_first_block_in_file():2982:    }
DEBUG:refactor.py:277:format_first_block_in_file():2983:
DEBUG:refactor.py:277:format_first_block_in_file():2984:private:
DEBUG:refactor.py:277:format_first_block_in_file():2985:    uint32 const _keepersCount;
DEBUG:refactor.py:277:format_first_block_in_file():2986:};
DEBUG:refactor.py:277:format_first_block_in_file():2987:
DEBUG:refactor.py:277:format_first_block_in_file():2988:class achievement_yogg_saron_he_waits_dreaming : public AchievementCriteriaScript
DEBUG:refactor.py:277:format_first_block_in_file():2989:{
DEBUG:refactor.py:277:format_first_block_in_file():2990:public:
DEBUG:refactor.py:277:format_first_block_in_file():2991:    achievement_yogg_saron_he_waits_dreaming(char const* name, uint8 illusion) : AchievementCriteriaScript(name),
DEBUG:refactor.py:277:format_first_block_in_file():2992:        _requiredIllusion(illusion)
DEBUG:refactor.py:277:format_first_block_in_file():2993:    {
DEBUG:refactor.py:277:format_first_block_in_file():2994:    }
DEBUG:refactor.py:277:format_first_block_in_file():2995:
DEBUG:refactor.py:277:format_first_block_in_file():2996:    bool OnCheck(Player* player, Unit*  /*target*/ /*Yogg-Saron*/, uint32 /*criteria_id*/) override
DEBUG:refactor.py:277:format_first_block_in_file():2997:    {
DEBUG:refactor.py:277:format_first_block_in_file():2998:        if (player->GetInstanceScript())
DEBUG:refactor.py:277:format_first_block_in_file():2999:            if (Creature* sara = ObjectAccessor::GetCreature(*player, player->GetInstanceScript()->GetGuidData(NPC_BRAIN_OF_YOGG_SARON)))
DEBUG:refactor.py:277:format_first_block_in_file():3000:                return sara->GetAI()->GetData(DATA_GET_CURRENT_ILLUSION) == _requiredIllusion;
DEBUG:refactor.py:277:format_first_block_in_file():3001:
DEBUG:refactor.py:277:format_first_block_in_file():3002:        return false;
DEBUG:refactor.py:277:format_first_block_in_file():3003:    }
DEBUG:refactor.py:277:format_first_block_in_file():3004:
DEBUG:refactor.py:277:format_first_block_in_file():3005:private:
DEBUG:refactor.py:277:format_first_block_in_file():3006:    uint8 const _requiredIllusion;
DEBUG:refactor.py:277:format_first_block_in_file():3007:};
DEBUG:refactor.py:277:format_first_block_in_file():3008:
DEBUG:refactor.py:277:format_first_block_in_file():3009:class achievement_yogg_saron_kiss_and_make_up : public AchievementCriteriaScript
DEBUG:refactor.py:277:format_first_block_in_file():3010:{
DEBUG:refactor.py:277:format_first_block_in_file():3011:public:
DEBUG:refactor.py:277:format_first_block_in_file():3012:    achievement_yogg_saron_kiss_and_make_up() : AchievementCriteriaScript("achievement_yogg_saron_kiss_and_make_up") {}
DEBUG:refactor.py:277:format_first_block_in_file():3013:
DEBUG:refactor.py:277:format_first_block_in_file():3014:    bool OnCheck(Player*  /*player*/, Unit* target /*Sara*/, uint32 /*criteria_id*/) override
DEBUG:refactor.py:277:format_first_block_in_file():3015:    {
DEBUG:refactor.py:277:format_first_block_in_file():3016:        return target && target->GetEntry() == NPC_SARA && target->GetAI() && target->GetAI()->GetData(DATA_GET_SARA_PHASE);
DEBUG:refactor.py:277:format_first_block_in_file():3017:    }
DEBUG:refactor.py:277:format_first_block_in_file():3018:};
DEBUG:refactor.py:277:format_first_block_in_file():3019:
DEBUG:refactor.py:277:format_first_block_in_file():3020:void AddSC_boss_yoggsaron()
DEBUG:refactor.py:277:format_first_block_in_file():3021:{
DEBUG:refactor.py:277:format_first_block_in_file():3022:    new boss_yoggsaron();
DEBUG:refactor.py:277:format_first_block_in_file():3023:    new boss_yoggsaron_sara();
DEBUG:refactor.py:277:format_first_block_in_file():3024:    new boss_yoggsaron_cloud();
DEBUG:refactor.py:277:format_first_block_in_file():3025:    new boss_yoggsaron_guardian_of_ys();
DEBUG:refactor.py:277:format_first_block_in_file():3026:    new boss_yoggsaron_brain();
DEBUG:refactor.py:277:format_first_block_in_file():3027:    new boss_yoggsaron_death_orb();
DEBUG:refactor.py:277:format_first_block_in_file():3028:    new boss_yoggsaron_crusher_tentacle();
DEBUG:refactor.py:277:format_first_block_in_file():3029:    new boss_yoggsaron_corruptor_tentacle();
DEBUG:refactor.py:277:format_first_block_in_file():3030:    new boss_yoggsaron_constrictor_tentacle();
DEBUG:refactor.py:277:format_first_block_in_file():3031:    new boss_yoggsaron_keeper();
DEBUG:refactor.py:277:format_first_block_in_file():3032:    new boss_yoggsaron_descend_portal();
DEBUG:refactor.py:277:format_first_block_in_file():3033:    new boss_yoggsaron_influence_tentacle();
DEBUG:refactor.py:277:format_first_block_in_file():3034:    new boss_yoggsaron_immortal_guardian();
DEBUG:refactor.py:277:format_first_block_in_file():3035:    new boss_yoggsaron_lich_king();
DEBUG:refactor.py:277:format_first_block_in_file():3036:    new boss_yoggsaron_llane();
DEBUG:refactor.py:277:format_first_block_in_file():3037:    new boss_yoggsaron_neltharion();
DEBUG:refactor.py:277:format_first_block_in_file():3038:    new boss_yoggsaron_voice();
DEBUG:refactor.py:277:format_first_block_in_file():3039:
DEBUG:refactor.py:277:format_first_block_in_file():3040:    // SPELLS
DEBUG:refactor.py:277:format_first_block_in_file():3041:    RegisterSpellScript(spell_yogg_saron_malady_of_the_mind_aura);
DEBUG:refactor.py:277:format_first_block_in_file():3042:    new spell_yogg_saron_brain_link();
DEBUG:refactor.py:277:format_first_block_in_file():3043:    new spell_yogg_saron_shadow_beacon();
DEBUG:refactor.py:277:format_first_block_in_file():3044:    new spell_yogg_saron_destabilization_matrix();
DEBUG:refactor.py:277:format_first_block_in_file():3045:    new spell_yogg_saron_titanic_storm();
DEBUG:refactor.py:277:format_first_block_in_file():3046:    new spell_yogg_saron_lunatic_gaze();
DEBUG:refactor.py:277:format_first_block_in_file():3047:    new spell_yogg_saron_protective_gaze();
DEBUG:refactor.py:277:format_first_block_in_file():3048:    new spell_yogg_saron_empowered();
DEBUG:refactor.py:277:format_first_block_in_file():3049:    new spell_yogg_saron_insane_periodic_trigger();
DEBUG:refactor.py:277:format_first_block_in_file():3050:    new spell_yogg_saron_insane();
DEBUG:refactor.py:277:format_first_block_in_file():3051:    new spell_yogg_saron_sanity_well();
DEBUG:refactor.py:277:format_first_block_in_file():3052:    RegisterSpellScript(spell_keeper_freya_summon_sanity_well);
DEBUG:refactor.py:277:format_first_block_in_file():3053:    new spell_yogg_saron_sanity_reduce();
DEBUG:refactor.py:277:format_first_block_in_file():3054:    new spell_yogg_saron_empowering_shadows();
DEBUG:refactor.py:277:format_first_block_in_file():3055:    new spell_yogg_saron_in_the_maws_of_the_old_god();
DEBUG:refactor.py:277:format_first_block_in_file():3056:    new spell_yogg_saron_target_selectors();
DEBUG:refactor.py:277:format_first_block_in_file():3057:    new spell_yogg_saron_grim_reprisal();
DEBUG:refactor.py:277:format_first_block_in_file():3058:
DEBUG:refactor.py:277:format_first_block_in_file():3059:    // ACHIEVEMENTS
DEBUG:refactor.py:277:format_first_block_in_file():3060:    new achievement_yogg_saron_drive_me_crazy();
DEBUG:refactor.py:277:format_first_block_in_file():3061:    new achievement_yogg_saron_darkness("achievement_yogg_saron_three_lights_in_the_darkness", 3);
DEBUG:refactor.py:277:format_first_block_in_file():3062:    new achievement_yogg_saron_darkness("achievement_yogg_saron_two_lights_in_the_darkness", 2);
DEBUG:refactor.py:277:format_first_block_in_file():3063:    new achievement_yogg_saron_darkness("achievement_yogg_saron_one_light_in_the_darkness", 1);
DEBUG:refactor.py:277:format_first_block_in_file():3064:    new achievement_yogg_saron_darkness("achievement_yogg_saron_alone_in_the_darkness", 0);
DEBUG:refactor.py:277:format_first_block_in_file():3065:    new achievement_yogg_saron_he_waits_dreaming("achievement_yogg_saron_he_waits_dreaming_stormwind", ACTION_ILLUSION_STORMWIND);
DEBUG:refactor.py:277:format_first_block_in_file():3066:    new achievement_yogg_saron_he_waits_dreaming("achievement_yogg_saron_he_waits_dreaming_chamber", ACTION_ILLUSION_DRAGONS);
DEBUG:refactor.py:277:format_first_block_in_file():3067:    new achievement_yogg_saron_he_waits_dreaming("achievement_yogg_saron_he_waits_dreaming_icecrown", ACTION_ILLUSION_ICECROWN);
DEBUG:refactor.py:277:format_first_block_in_file():3068:    new achievement_yogg_saron_kiss_and_make_up();
DEBUG:refactor.py:277:format_first_block_in_file():3069:}
DEBUG:refactor.py:277:format_first_block_in_file():3070:
INFO:refactor.py:263:format_first_block_in_file():path_in='tests/test_with_input_pair_file_skip/boss_yoggsaron_read.cpp'
INFO:refactor.py:264:format_first_block_in_file():path_out='tests/test_with_input_pair_file_skip/boss_yoggsaron_write.cpp'
DEBUG:refactor.py:268:format_first_block_in_file():len(lines)=3082 path_in='tests/test_with_input_pair_file_skip/boss_yoggsaron_read.cpp'
DEBUG:refactor.py:018:find_start_last_index():2 line='class spell_yogg_saron_brain_link : public SpellScriptLoader'
DEBUG:refactor.py:018:find_start_last_index():3 line='{'
DEBUG:refactor.py:018:find_start_last_index():4 line='public:'
DEBUG:refactor.py:018:find_start_last_index():5 line='    spell_yogg_saron_brain_link() : SpellScriptLoader("spell_yogg_saron_brain_link") { }'
DEBUG:refactor.py:018:find_start_last_index():6 line=''
DEBUG:refactor.py:018:find_start_last_index():7 line='    class spell_yogg_saron_brain_link_AuraScript : public AuraScript'
DEBUG:refactor.py:018:find_start_last_index():8 line='    {'
DEBUG:refactor.py:018:find_start_last_index():9 line='        PrepareAuraScript(spell_yogg_saron_brain_link_AuraScript);'
DEBUG:refactor.py:018:find_start_last_index():10 line=''
DEBUG:refactor.py:018:find_start_last_index():11 line='        void HandleOnEffectApply(AuraEffect const* /*aurEff*/, AuraEffectHandleModes /*mode*/)'
DEBUG:refactor.py:018:find_start_last_index():12 line='        {'
DEBUG:refactor.py:018:find_start_last_index():13 line='            PreventDefaultAction();'
DEBUG:refactor.py:018:find_start_last_index():14 line='            Player* target = nullptr;'
DEBUG:refactor.py:018:find_start_last_index():15 line='            Map::PlayerList const& pList = GetUnitOwner()->GetMap()->GetPlayers();'
DEBUG:refactor.py:018:find_start_last_index():16 line='            uint8 _offset = urand(0, pList.getSize() - 1);'
DEBUG:refactor.py:018:find_start_last_index():17 line='            uint8 _counter = 0;'
DEBUG:refactor.py:018:find_start_last_index():18 line='            for(Map::PlayerList::const_iterator itr = pList.begin(); itr != pList.end(); ++itr, ++_counter)'
DEBUG:refactor.py:018:find_start_last_index():19 line='            {'
DEBUG:refactor.py:018:find_start_last_index():20 line='                if (itr->GetSource() == GetUnitOwner() || GetUnitOwner()->GetDistance(itr->GetSource()) > 50.0f || !itr->GetSource()->IsAlive() || itr->GetSource()->IsGameMaster())'
DEBUG:refactor.py:018:find_start_last_index():21 line='                    continue;'
DEBUG:refactor.py:018:find_start_last_index():22 line=''
DEBUG:refactor.py:018:find_start_last_index():23 line='                if (_counter <= _offset || !target)'
DEBUG:refactor.py:018:find_start_last_index():24 line='                    target = itr->GetSource();'
DEBUG:refactor.py:018:find_start_last_index():25 line='                else'
DEBUG:refactor.py:018:find_start_last_index():26 line='                    break;'
DEBUG:refactor.py:018:find_start_last_index():27 line='            }'
DEBUG:refactor.py:018:find_start_last_index():28 line=''
DEBUG:refactor.py:018:find_start_last_index():29 line='            if (!target)'
DEBUG:refactor.py:018:find_start_last_index():30 line='                SetDuration(0);'
DEBUG:refactor.py:018:find_start_last_index():31 line='            else'
DEBUG:refactor.py:018:find_start_last_index():32 line='                _targetGUID = target->GetGUID();'
DEBUG:refactor.py:018:find_start_last_index():33 line='        }'
DEBUG:refactor.py:018:find_start_last_index():34 line=''
DEBUG:refactor.py:018:find_start_last_index():35 line='        void OnPeriodic(AuraEffect const*  /*aurEff*/)'
DEBUG:refactor.py:018:find_start_last_index():36 line='        {'
DEBUG:refactor.py:018:find_start_last_index():37 line='            Unit* owner = GetUnitOwner();'
DEBUG:refactor.py:018:find_start_last_index():38 line='            if (!owner)'
DEBUG:refactor.py:018:find_start_last_index():39 line='            {'
DEBUG:refactor.py:018:find_start_last_index():40 line='                SetDuration(0);'
DEBUG:refactor.py:018:find_start_last_index():41 line='                return;'
DEBUG:refactor.py:018:find_start_last_index():42 line='            }'
DEBUG:refactor.py:018:find_start_last_index():43 line=''
DEBUG:refactor.py:018:find_start_last_index():44 line='            Unit* _target = ObjectAccessor::GetUnit(*owner, _targetGUID);'
DEBUG:refactor.py:018:find_start_last_index():45 line='            if (!_target || !_target->IsAlive() || std::fabs(owner->GetPositionZ() - _target->GetPositionZ()) > 10.0f) // Target or owner underground'
DEBUG:refactor.py:018:find_start_last_index():46 line='            {'
DEBUG:refactor.py:018:find_start_last_index():47 line='                SetDuration(0);'
DEBUG:refactor.py:018:find_start_last_index():48 line='                return;'
DEBUG:refactor.py:018:find_start_last_index():49 line='            }'
DEBUG:refactor.py:018:find_start_last_index():50 line=''
DEBUG:refactor.py:018:find_start_last_index():51 line='            if (owner->GetDistance(_target) > 20.0f)'
DEBUG:refactor.py:018:find_start_last_index():52 line='            {'
DEBUG:refactor.py:018:find_start_last_index():53 line='                owner->CastSpell(_target, SPELL_BRAIN_LINK_DAMAGE, true);'
DEBUG:refactor.py:018:find_start_last_index():54 line='                owner->CastSpell(owner, SPELL_BRAIN_LINK_DAMAGE, true);'
DEBUG:refactor.py:018:find_start_last_index():55 line='            }'
DEBUG:refactor.py:018:find_start_last_index():56 line='            else'
DEBUG:refactor.py:018:find_start_last_index():57 line='                owner->CastSpell(_target, SPELL_BRAIN_LINK_OK, true);'
DEBUG:refactor.py:018:find_start_last_index():58 line='        }'
DEBUG:refactor.py:018:find_start_last_index():59 line=''
DEBUG:refactor.py:018:find_start_last_index():60 line='        void Register() override'
DEBUG:refactor.py:018:find_start_last_index():61 line='        {'
DEBUG:refactor.py:018:find_start_last_index():62 line='            OnEffectApply += AuraEffectApplyFn(spell_yogg_saron_brain_link_AuraScript::HandleOnEffectApply, EFFECT_0, SPELL_AURA_PERIODIC_DUMMY, AURA_EFFECT_HANDLE_REAL);'
DEBUG:refactor.py:018:find_start_last_index():63 line='            OnEffectPeriodic += AuraEffectPeriodicFn(spell_yogg_saron_brain_link_AuraScript::OnPeriodic, EFFECT_0, SPELL_AURA_PERIODIC_DUMMY);'
DEBUG:refactor.py:018:find_start_last_index():64 line='        }'
DEBUG:refactor.py:018:find_start_last_index():65 line=''
DEBUG:refactor.py:018:find_start_last_index():66 line='    protected:'
DEBUG:refactor.py:018:find_start_last_index():67 line='        ObjectGuid _targetGUID;'
DEBUG:refactor.py:018:find_start_last_index():68 line='    };'
DEBUG:refactor.py:018:find_start_last_index():69 line=''
DEBUG:refactor.py:018:find_start_last_index():70 line='    AuraScript* GetAuraScript() const override'
DEBUG:refactor.py:018:find_start_last_index():71 line='    {'
DEBUG:refactor.py:018:find_start_last_index():72 line='        return new spell_yogg_saron_brain_link_AuraScript();'
DEBUG:refactor.py:018:find_start_last_index():73 line='    }'
DEBUG:refactor.py:018:find_start_last_index():74 line=''
DEBUG:refactor.py:018:find_start_last_index():75 line='    class spell_yogg_saron_brain_link_SpellScript : public SpellScript'
DEBUG:refactor.py:018:find_start_last_index():76 line='    {'
DEBUG:refactor.py:018:find_start_last_index():77 line='        PrepareSpellScript(spell_yogg_saron_brain_link_SpellScript);'
DEBUG:refactor.py:018:find_start_last_index():78 line=''
DEBUG:refactor.py:018:find_start_last_index():79 line='        void FilterTargets(std::list<WorldObject*>& targets)'
DEBUG:refactor.py:018:find_start_last_index():80 line='        {'
DEBUG:refactor.py:018:find_start_last_index():81 line='            std::list<WorldObject*> tempList;'
DEBUG:refactor.py:018:find_start_last_index():82 line='            for (std::list<WorldObject*>::iterator itr = targets.begin(); itr != targets.end(); ++itr)'
DEBUG:refactor.py:018:find_start_last_index():83 line='                if ((*itr)->GetPositionZ() > 300.0f)'
DEBUG:refactor.py:018:find_start_last_index():84 line='                    tempList.push_back(*itr);'
DEBUG:refactor.py:018:find_start_last_index():85 line=''
DEBUG:refactor.py:018:find_start_last_index():86 line='            targets.clear();'
DEBUG:refactor.py:018:find_start_last_index():87 line='            for (std::list<WorldObject*>::iterator itr = tempList.begin(); itr != tempList.end(); ++itr)'
DEBUG:refactor.py:018:find_start_last_index():88 line='                targets.push_back(*itr);'
DEBUG:refactor.py:018:find_start_last_index():89 line='        }'
DEBUG:refactor.py:018:find_start_last_index():90 line=''
DEBUG:refactor.py:018:find_start_last_index():91 line='        void Register() override'
DEBUG:refactor.py:018:find_start_last_index():92 line='        {'
DEBUG:refactor.py:018:find_start_last_index():93 line='            OnObjectAreaTargetSelect += SpellObjectAreaTargetSelectFn(spell_yogg_saron_brain_link_SpellScript::FilterTargets, EFFECT_0, TARGET_UNIT_SRC_AREA_ENEMY);'
DEBUG:refactor.py:018:find_start_last_index():94 line='        }'
DEBUG:refactor.py:018:find_start_last_index():95 line='    };'
DEBUG:refactor.py:018:find_start_last_index():96 line=''
DEBUG:refactor.py:018:find_start_last_index():97 line='    SpellScript* GetSpellScript() const override'
DEBUG:refactor.py:018:find_start_last_index():98 line='    {'
DEBUG:refactor.py:018:find_start_last_index():99 line='        return new spell_yogg_saron_brain_link_SpellScript();'
DEBUG:refactor.py:018:find_start_last_index():100 line='    }'
DEBUG:refactor.py:018:find_start_last_index():101 line='};'
DEBUG:refactor.py:223:convert_function_block():start_index=2last_index=101
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:036:     get_script_type():AuraScript line='    class spell_yogg_saron_brain_link_AuraScript : public AuraScript'
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:036:     get_script_type():AuraScript line='        PrepareAuraScript(spell_yogg_saron_brain_link_AuraScript);'
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:036:     get_script_type():AuraScript line='            OnEffectApply += AuraEffectApplyFn(spell_yogg_saron_brain_link_AuraScript::HandleOnEffectApply, EFFECT_0, SPELL_AURA_PERIODIC_DUMMY, AURA_EFFECT_HANDLE_REAL);'
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:036:     get_script_type():AuraScript line='            OnEffectPeriodic += AuraEffectPeriodicFn(spell_yogg_saron_brain_link_AuraScript::OnPeriodic, EFFECT_0, SPELL_AURA_PERIODIC_DUMMY);'
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:036:     get_script_type():AuraScript line='    AuraScript* GetAuraScript() const override'
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:036:     get_script_type():AuraScript line='        return new spell_yogg_saron_brain_link_AuraScript();'
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:039:     get_script_type():SpellScript line='    class spell_yogg_saron_brain_link_SpellScript : public SpellScript'
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:039:     get_script_type():SpellScript line='        PrepareSpellScript(spell_yogg_saron_brain_link_SpellScript);'
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:039:     get_script_type():SpellScript line='            OnObjectAreaTargetSelect += SpellObjectAreaTargetSelectFn(spell_yogg_saron_brain_link_SpellScript::FilterTargets, EFFECT_0, TARGET_UNIT_SRC_AREA_ENEMY);'
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:039:     get_script_type():SpellScript line='    SpellScript* GetSpellScript() const override'
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:039:     get_script_type():SpellScript line='        return new spell_yogg_saron_brain_link_SpellScript();'
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:034:     get_script_type():line=
DEBUG:refactor.py:225:convert_function_block():script_type=<ScriptType.PAIR: 3>
DEBUG:refactor.py:027: find_name_of_script():name='spell_yogg_saron_brain_link'
DEBUG:refactor.py:228:convert_function_block():script_name='spell_yogg_saron_brain_link'
DEBUG:refactor.py:207:find_spell_block_in_pair():73 line='    class spell_yogg_saron_brain_link_SpellScript : public SpellScript'
DEBUG:refactor.py:207:find_spell_block_in_pair():74 line='    {'
DEBUG:refactor.py:207:find_spell_block_in_pair():75 line='        PrepareSpellScript(spell_yogg_saron_brain_link_SpellScript);'
DEBUG:refactor.py:207:find_spell_block_in_pair():76 line=''
DEBUG:refactor.py:207:find_spell_block_in_pair():77 line='        void FilterTargets(std::list<WorldObject*>& targets)'
DEBUG:refactor.py:207:find_spell_block_in_pair():78 line='        {'
DEBUG:refactor.py:207:find_spell_block_in_pair():79 line='            std::list<WorldObject*> tempList;'
DEBUG:refactor.py:207:find_spell_block_in_pair():80 line='            for (std::list<WorldObject*>::iterator itr = targets.begin(); itr != targets.end(); ++itr)'
DEBUG:refactor.py:207:find_spell_block_in_pair():81 line='                if ((*itr)->GetPositionZ() > 300.0f)'
DEBUG:refactor.py:207:find_spell_block_in_pair():82 line='                    tempList.push_back(*itr);'
DEBUG:refactor.py:207:find_spell_block_in_pair():83 line=''
DEBUG:refactor.py:207:find_spell_block_in_pair():84 line='            targets.clear();'
DEBUG:refactor.py:207:find_spell_block_in_pair():85 line='            for (std::list<WorldObject*>::iterator itr = tempList.begin(); itr != tempList.end(); ++itr)'
DEBUG:refactor.py:207:find_spell_block_in_pair():86 line='                targets.push_back(*itr);'
DEBUG:refactor.py:207:find_spell_block_in_pair():87 line='        }'
DEBUG:refactor.py:207:find_spell_block_in_pair():88 line=''
DEBUG:refactor.py:207:find_spell_block_in_pair():89 line='        void Register() override'
DEBUG:refactor.py:207:find_spell_block_in_pair():90 line='        {'
DEBUG:refactor.py:207:find_spell_block_in_pair():91 line='            OnObjectAreaTargetSelect += SpellObjectAreaTargetSelectFn(spell_yogg_saron_brain_link_SpellScript::FilterTargets, EFFECT_0, TARGET_UNIT_SRC_AREA_ENEMY);'
DEBUG:refactor.py:207:find_spell_block_in_pair():92 line='        }'
DEBUG:refactor.py:207:find_spell_block_in_pair():93 line='    };'
DEBUG:refactor.py:054:find_register_start_end_index():start_index=0
DEBUG:refactor.py:056:find_register_start_end_index():000;    class spell_yogg_saron_brain_link_SpellScript : public SpellScript
DEBUG:refactor.py:056:find_register_start_end_index():001;    {
DEBUG:refactor.py:056:find_register_start_end_index():002;        PrepareSpellScript(spell_yogg_saron_brain_link_SpellScript);
DEBUG:refactor.py:056:find_register_start_end_index():003;
DEBUG:refactor.py:056:find_register_start_end_index():004;        void FilterTargets(std::list<WorldObject*>& targets)
DEBUG:refactor.py:056:find_register_start_end_index():005;        {
DEBUG:refactor.py:056:find_register_start_end_index():006;            std::list<WorldObject*> tempList;
DEBUG:refactor.py:056:find_register_start_end_index():007;            for (std::list<WorldObject*>::iterator itr = targets.begin(); itr != targets.end(); ++itr)
DEBUG:refactor.py:056:find_register_start_end_index():008;                if ((*itr)->GetPositionZ() > 300.0f)
DEBUG:refactor.py:056:find_register_start_end_index():009;                    tempList.push_back(*itr);
DEBUG:refactor.py:056:find_register_start_end_index():010;
DEBUG:refactor.py:056:find_register_start_end_index():011;            targets.clear();
DEBUG:refactor.py:056:find_register_start_end_index():012;            for (std::list<WorldObject*>::iterator itr = tempList.begin(); itr != tempList.end(); ++itr)
DEBUG:refactor.py:056:find_register_start_end_index():013;                targets.push_back(*itr);
DEBUG:refactor.py:056:find_register_start_end_index():014;        }
DEBUG:refactor.py:056:find_register_start_end_index():015;
DEBUG:refactor.py:056:find_register_start_end_index():016;        void Register() override
DEBUG:refactor.py:056:find_register_start_end_index():017;        {
DEBUG:refactor.py:056:find_register_start_end_index():018;            OnObjectAreaTargetSelect += SpellObjectAreaTargetSelectFn(spell_yogg_saron_brain_link_SpellScript::FilterTargets, EFFECT_0, TARGET_UNIT_SRC_AREA_ENEMY);
DEBUG:refactor.py:056:find_register_start_end_index():019;        }
DEBUG:refactor.py:063:find_register_start_end_index():16;16         void Register() override
DEBUG:refactor.py:064:find_register_start_end_index():19;19         }
DEBUG:refactor.py:072:find_register_statements():16;19
DEBUG:refactor.py:074:find_register_statements():000:            OnObjectAreaTargetSelect += SpellObjectAreaTargetSelectFn(spell_yogg_saron_brain_link_SpellScript::FilterTargets, EFFECT_0, TARGET_UNIT_SRC_AREA_ENEMY);
DEBUG:refactor.py:088:format_register_statements():before:000:            OnObjectAreaTargetSelect += SpellObjectAreaTargetSelectFn(spell_yogg_saron_brain_link_SpellScript::FilterTargets, EFFECT_0, TARGET_UNIT_SRC_AREA_ENEMY);
DEBUG:refactor.py:090:format_register_statements():after :000:        OnObjectAreaTargetSelect += SpellObjectAreaTargetSelectFn(spell_yogg_saron_brain_link::FilterTargets, EFFECT_0, TARGET_UNIT_SRC_AREA_ENEMY);
DEBUG:refactor.py:103:find_content_start_end_index():absolute_start=2,absolute_end=16
DEBUG:refactor.py:145:format_content_statements():before:000:
DEBUG:refactor.py:145:format_content_statements():before:001:        void FilterTargets(std::list<WorldObject*>& targets)
DEBUG:refactor.py:145:format_content_statements():before:002:        {
DEBUG:refactor.py:145:format_content_statements():before:003:            std::list<WorldObject*> tempList;
DEBUG:refactor.py:145:format_content_statements():before:004:            for (std::list<WorldObject*>::iterator itr = targets.begin(); itr != targets.end(); ++itr)
DEBUG:refactor.py:145:format_content_statements():before:005:                if ((*itr)->GetPositionZ() > 300.0f)
DEBUG:refactor.py:145:format_content_statements():before:006:                    tempList.push_back(*itr);
DEBUG:refactor.py:145:format_content_statements():before:007:
DEBUG:refactor.py:145:format_content_statements():before:008:            targets.clear();
DEBUG:refactor.py:145:format_content_statements():before:009:            for (std::list<WorldObject*>::iterator itr = tempList.begin(); itr != tempList.end(); ++itr)
DEBUG:refactor.py:145:format_content_statements():before:010:                targets.push_back(*itr);
DEBUG:refactor.py:145:format_content_statements():before:011:        }
DEBUG:refactor.py:145:format_content_statements():before:012:
DEBUG:refactor.py:147:format_content_statements():after :000:
DEBUG:refactor.py:147:format_content_statements():after :001:    void FilterTargets(std::list<WorldObject*>& targets)
DEBUG:refactor.py:147:format_content_statements():after :002:    {
DEBUG:refactor.py:147:format_content_statements():after :003:        std::list<WorldObject*> tempList;
DEBUG:refactor.py:147:format_content_statements():after :004:        for (std::list<WorldObject*>::iterator itr = targets.begin(); itr != targets.end(); ++itr)
DEBUG:refactor.py:147:format_content_statements():after :005:            if ((*itr)->GetPositionZ() > 300.0f)
DEBUG:refactor.py:147:format_content_statements():after :006:                tempList.push_back(*itr);
DEBUG:refactor.py:147:format_content_statements():after :007:
DEBUG:refactor.py:147:format_content_statements():after :008:        targets.clear();
DEBUG:refactor.py:147:format_content_statements():after :009:        for (std::list<WorldObject*>::iterator itr = tempList.begin(); itr != tempList.end(); ++itr)
DEBUG:refactor.py:147:format_content_statements():after :010:            targets.push_back(*itr);
DEBUG:refactor.py:147:format_content_statements():after :011:    }
DEBUG:refactor.py:147:format_content_statements():after :012:
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:000:    class spell_yogg_saron_brain_link_SpellScript : public SpellScript
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:001:    {
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:002:        PrepareSpellScript(spell_yogg_saron_brain_link_SpellScript);
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:003:
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:004:        void FilterTargets(std::list<WorldObject*>& targets)
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:005:        {
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:006:            std::list<WorldObject*> tempList;
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:007:            for (std::list<WorldObject*>::iterator itr = targets.begin(); itr != targets.end(); ++itr)
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:008:                if ((*itr)->GetPositionZ() > 300.0f)
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:009:                    tempList.push_back(*itr);
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:010:
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:011:            targets.clear();
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:012:            for (std::list<WorldObject*>::iterator itr = tempList.begin(); itr != tempList.end(); ++itr)
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:013:                targets.push_back(*itr);
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:014:        }
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:015:
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:016:        void Register() override
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:017:        {
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:018:            OnObjectAreaTargetSelect += SpellObjectAreaTargetSelectFn(spell_yogg_saron_brain_link_SpellScript::FilterTargets, EFFECT_0, TARGET_UNIT_SRC_AREA_ENEMY);
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:019:        }
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:020:    };
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :000:class spell_yogg_saron_brain_link : public SpellScript
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :001:{
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :002:    PrepareSpellScript(spell_yogg_saron_brain_link);
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :003:
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :004:    void FilterTargets(std::list<WorldObject*>& targets)
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :005:    {
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :006:        std::list<WorldObject*> tempList;
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :007:        for (std::list<WorldObject*>::iterator itr = targets.begin(); itr != targets.end(); ++itr)
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :008:            if ((*itr)->GetPositionZ() > 300.0f)
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :009:                tempList.push_back(*itr);
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :010:
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :011:        targets.clear();
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :012:        for (std::list<WorldObject*>::iterator itr = tempList.begin(); itr != tempList.end(); ++itr)
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :013:            targets.push_back(*itr);
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :014:    }
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :015:
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :016:    void Register() override
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :017:    {
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :018:        OnObjectAreaTargetSelect += SpellObjectAreaTargetSelectFn(spell_yogg_saron_brain_link::FilterTargets, EFFECT_0, TARGET_UNIT_SRC_AREA_ENEMY);
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :019:    }
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :020:};
DEBUG:refactor.py:207:find_spell_block_in_pair():5 line='    class spell_yogg_saron_brain_link_AuraScript : public AuraScript'
DEBUG:refactor.py:207:find_spell_block_in_pair():6 line='    {'
DEBUG:refactor.py:207:find_spell_block_in_pair():7 line='        PrepareAuraScript(spell_yogg_saron_brain_link_AuraScript);'
DEBUG:refactor.py:207:find_spell_block_in_pair():8 line=''
DEBUG:refactor.py:207:find_spell_block_in_pair():9 line='        void HandleOnEffectApply(AuraEffect const* /*aurEff*/, AuraEffectHandleModes /*mode*/)'
DEBUG:refactor.py:207:find_spell_block_in_pair():10 line='        {'
DEBUG:refactor.py:207:find_spell_block_in_pair():11 line='            PreventDefaultAction();'
DEBUG:refactor.py:207:find_spell_block_in_pair():12 line='            Player* target = nullptr;'
DEBUG:refactor.py:207:find_spell_block_in_pair():13 line='            Map::PlayerList const& pList = GetUnitOwner()->GetMap()->GetPlayers();'
DEBUG:refactor.py:207:find_spell_block_in_pair():14 line='            uint8 _offset = urand(0, pList.getSize() - 1);'
DEBUG:refactor.py:207:find_spell_block_in_pair():15 line='            uint8 _counter = 0;'
DEBUG:refactor.py:207:find_spell_block_in_pair():16 line='            for(Map::PlayerList::const_iterator itr = pList.begin(); itr != pList.end(); ++itr, ++_counter)'
DEBUG:refactor.py:207:find_spell_block_in_pair():17 line='            {'
DEBUG:refactor.py:207:find_spell_block_in_pair():18 line='                if (itr->GetSource() == GetUnitOwner() || GetUnitOwner()->GetDistance(itr->GetSource()) > 50.0f || !itr->GetSource()->IsAlive() || itr->GetSource()->IsGameMaster())'
DEBUG:refactor.py:207:find_spell_block_in_pair():19 line='                    continue;'
DEBUG:refactor.py:207:find_spell_block_in_pair():20 line=''
DEBUG:refactor.py:207:find_spell_block_in_pair():21 line='                if (_counter <= _offset || !target)'
DEBUG:refactor.py:207:find_spell_block_in_pair():22 line='                    target = itr->GetSource();'
DEBUG:refactor.py:207:find_spell_block_in_pair():23 line='                else'
DEBUG:refactor.py:207:find_spell_block_in_pair():24 line='                    break;'
DEBUG:refactor.py:207:find_spell_block_in_pair():25 line='            }'
DEBUG:refactor.py:207:find_spell_block_in_pair():26 line=''
DEBUG:refactor.py:207:find_spell_block_in_pair():27 line='            if (!target)'
DEBUG:refactor.py:207:find_spell_block_in_pair():28 line='                SetDuration(0);'
DEBUG:refactor.py:207:find_spell_block_in_pair():29 line='            else'
DEBUG:refactor.py:207:find_spell_block_in_pair():30 line='                _targetGUID = target->GetGUID();'
DEBUG:refactor.py:207:find_spell_block_in_pair():31 line='        }'
DEBUG:refactor.py:207:find_spell_block_in_pair():32 line=''
DEBUG:refactor.py:207:find_spell_block_in_pair():33 line='        void OnPeriodic(AuraEffect const*  /*aurEff*/)'
DEBUG:refactor.py:207:find_spell_block_in_pair():34 line='        {'
DEBUG:refactor.py:207:find_spell_block_in_pair():35 line='            Unit* owner = GetUnitOwner();'
DEBUG:refactor.py:207:find_spell_block_in_pair():36 line='            if (!owner)'
DEBUG:refactor.py:207:find_spell_block_in_pair():37 line='            {'
DEBUG:refactor.py:207:find_spell_block_in_pair():38 line='                SetDuration(0);'
DEBUG:refactor.py:207:find_spell_block_in_pair():39 line='                return;'
DEBUG:refactor.py:207:find_spell_block_in_pair():40 line='            }'
DEBUG:refactor.py:207:find_spell_block_in_pair():41 line=''
DEBUG:refactor.py:207:find_spell_block_in_pair():42 line='            Unit* _target = ObjectAccessor::GetUnit(*owner, _targetGUID);'
DEBUG:refactor.py:207:find_spell_block_in_pair():43 line='            if (!_target || !_target->IsAlive() || std::fabs(owner->GetPositionZ() - _target->GetPositionZ()) > 10.0f) // Target or owner underground'
DEBUG:refactor.py:207:find_spell_block_in_pair():44 line='            {'
DEBUG:refactor.py:207:find_spell_block_in_pair():45 line='                SetDuration(0);'
DEBUG:refactor.py:207:find_spell_block_in_pair():46 line='                return;'
DEBUG:refactor.py:207:find_spell_block_in_pair():47 line='            }'
DEBUG:refactor.py:207:find_spell_block_in_pair():48 line=''
DEBUG:refactor.py:207:find_spell_block_in_pair():49 line='            if (owner->GetDistance(_target) > 20.0f)'
DEBUG:refactor.py:207:find_spell_block_in_pair():50 line='            {'
DEBUG:refactor.py:207:find_spell_block_in_pair():51 line='                owner->CastSpell(_target, SPELL_BRAIN_LINK_DAMAGE, true);'
DEBUG:refactor.py:207:find_spell_block_in_pair():52 line='                owner->CastSpell(owner, SPELL_BRAIN_LINK_DAMAGE, true);'
DEBUG:refactor.py:207:find_spell_block_in_pair():53 line='            }'
DEBUG:refactor.py:207:find_spell_block_in_pair():54 line='            else'
DEBUG:refactor.py:207:find_spell_block_in_pair():55 line='                owner->CastSpell(_target, SPELL_BRAIN_LINK_OK, true);'
DEBUG:refactor.py:207:find_spell_block_in_pair():56 line='        }'
DEBUG:refactor.py:207:find_spell_block_in_pair():57 line=''
DEBUG:refactor.py:207:find_spell_block_in_pair():58 line='        void Register() override'
DEBUG:refactor.py:207:find_spell_block_in_pair():59 line='        {'
DEBUG:refactor.py:207:find_spell_block_in_pair():60 line='            OnEffectApply += AuraEffectApplyFn(spell_yogg_saron_brain_link_AuraScript::HandleOnEffectApply, EFFECT_0, SPELL_AURA_PERIODIC_DUMMY, AURA_EFFECT_HANDLE_REAL);'
DEBUG:refactor.py:207:find_spell_block_in_pair():61 line='            OnEffectPeriodic += AuraEffectPeriodicFn(spell_yogg_saron_brain_link_AuraScript::OnPeriodic, EFFECT_0, SPELL_AURA_PERIODIC_DUMMY);'
DEBUG:refactor.py:207:find_spell_block_in_pair():62 line='        }'
DEBUG:refactor.py:207:find_spell_block_in_pair():63 line=''
DEBUG:refactor.py:207:find_spell_block_in_pair():64 line='    protected:'
DEBUG:refactor.py:207:find_spell_block_in_pair():65 line='        ObjectGuid _targetGUID;'
DEBUG:refactor.py:207:find_spell_block_in_pair():66 line='    };'
DEBUG:refactor.py:054:find_register_start_end_index():start_index=0
DEBUG:refactor.py:056:find_register_start_end_index():000;    class spell_yogg_saron_brain_link_AuraScript : public AuraScript
DEBUG:refactor.py:056:find_register_start_end_index():001;    {
DEBUG:refactor.py:056:find_register_start_end_index():002;        PrepareAuraScript(spell_yogg_saron_brain_link_AuraScript);
DEBUG:refactor.py:056:find_register_start_end_index():003;
DEBUG:refactor.py:056:find_register_start_end_index():004;        void HandleOnEffectApply(AuraEffect const* /*aurEff*/, AuraEffectHandleModes /*mode*/)
DEBUG:refactor.py:056:find_register_start_end_index():005;        {
DEBUG:refactor.py:056:find_register_start_end_index():006;            PreventDefaultAction();
DEBUG:refactor.py:056:find_register_start_end_index():007;            Player* target = nullptr;
DEBUG:refactor.py:056:find_register_start_end_index():008;            Map::PlayerList const& pList = GetUnitOwner()->GetMap()->GetPlayers();
DEBUG:refactor.py:056:find_register_start_end_index():009;            uint8 _offset = urand(0, pList.getSize() - 1);
DEBUG:refactor.py:056:find_register_start_end_index():010;            uint8 _counter = 0;
DEBUG:refactor.py:056:find_register_start_end_index():011;            for(Map::PlayerList::const_iterator itr = pList.begin(); itr != pList.end(); ++itr, ++_counter)
DEBUG:refactor.py:056:find_register_start_end_index():012;            {
DEBUG:refactor.py:056:find_register_start_end_index():013;                if (itr->GetSource() == GetUnitOwner() || GetUnitOwner()->GetDistance(itr->GetSource()) > 50.0f || !itr->GetSource()->IsAlive() || itr->GetSource()->IsGameMaster())
DEBUG:refactor.py:056:find_register_start_end_index():014;                    continue;
DEBUG:refactor.py:056:find_register_start_end_index():015;
DEBUG:refactor.py:056:find_register_start_end_index():016;                if (_counter <= _offset || !target)
DEBUG:refactor.py:056:find_register_start_end_index():017;                    target = itr->GetSource();
DEBUG:refactor.py:056:find_register_start_end_index():018;                else
DEBUG:refactor.py:056:find_register_start_end_index():019;                    break;
DEBUG:refactor.py:056:find_register_start_end_index():020;            }
DEBUG:refactor.py:056:find_register_start_end_index():021;
DEBUG:refactor.py:056:find_register_start_end_index():022;            if (!target)
DEBUG:refactor.py:056:find_register_start_end_index():023;                SetDuration(0);
DEBUG:refactor.py:056:find_register_start_end_index():024;            else
DEBUG:refactor.py:056:find_register_start_end_index():025;                _targetGUID = target->GetGUID();
DEBUG:refactor.py:056:find_register_start_end_index():026;        }
DEBUG:refactor.py:056:find_register_start_end_index():027;
DEBUG:refactor.py:056:find_register_start_end_index():028;        void OnPeriodic(AuraEffect const*  /*aurEff*/)
DEBUG:refactor.py:056:find_register_start_end_index():029;        {
DEBUG:refactor.py:056:find_register_start_end_index():030;            Unit* owner = GetUnitOwner();
DEBUG:refactor.py:056:find_register_start_end_index():031;            if (!owner)
DEBUG:refactor.py:056:find_register_start_end_index():032;            {
DEBUG:refactor.py:056:find_register_start_end_index():033;                SetDuration(0);
DEBUG:refactor.py:056:find_register_start_end_index():034;                return;
DEBUG:refactor.py:056:find_register_start_end_index():035;            }
DEBUG:refactor.py:056:find_register_start_end_index():036;
DEBUG:refactor.py:056:find_register_start_end_index():037;            Unit* _target = ObjectAccessor::GetUnit(*owner, _targetGUID);
DEBUG:refactor.py:056:find_register_start_end_index():038;            if (!_target || !_target->IsAlive() || std::fabs(owner->GetPositionZ() - _target->GetPositionZ()) > 10.0f) // Target or owner underground
DEBUG:refactor.py:056:find_register_start_end_index():039;            {
DEBUG:refactor.py:056:find_register_start_end_index():040;                SetDuration(0);
DEBUG:refactor.py:056:find_register_start_end_index():041;                return;
DEBUG:refactor.py:056:find_register_start_end_index():042;            }
DEBUG:refactor.py:056:find_register_start_end_index():043;
DEBUG:refactor.py:056:find_register_start_end_index():044;            if (owner->GetDistance(_target) > 20.0f)
DEBUG:refactor.py:056:find_register_start_end_index():045;            {
DEBUG:refactor.py:056:find_register_start_end_index():046;                owner->CastSpell(_target, SPELL_BRAIN_LINK_DAMAGE, true);
DEBUG:refactor.py:056:find_register_start_end_index():047;                owner->CastSpell(owner, SPELL_BRAIN_LINK_DAMAGE, true);
DEBUG:refactor.py:056:find_register_start_end_index():048;            }
DEBUG:refactor.py:056:find_register_start_end_index():049;            else
DEBUG:refactor.py:056:find_register_start_end_index():050;                owner->CastSpell(_target, SPELL_BRAIN_LINK_OK, true);
DEBUG:refactor.py:056:find_register_start_end_index():051;        }
DEBUG:refactor.py:056:find_register_start_end_index():052;
DEBUG:refactor.py:056:find_register_start_end_index():053;        void Register() override
DEBUG:refactor.py:056:find_register_start_end_index():054;        {
DEBUG:refactor.py:056:find_register_start_end_index():055;            OnEffectApply += AuraEffectApplyFn(spell_yogg_saron_brain_link_AuraScript::HandleOnEffectApply, EFFECT_0, SPELL_AURA_PERIODIC_DUMMY, AURA_EFFECT_HANDLE_REAL);
DEBUG:refactor.py:056:find_register_start_end_index():056;            OnEffectPeriodic += AuraEffectPeriodicFn(spell_yogg_saron_brain_link_AuraScript::OnPeriodic, EFFECT_0, SPELL_AURA_PERIODIC_DUMMY);
DEBUG:refactor.py:056:find_register_start_end_index():057;        }
DEBUG:refactor.py:063:find_register_start_end_index():53;53         void Register() override
DEBUG:refactor.py:064:find_register_start_end_index():57;57         }
DEBUG:refactor.py:072:find_register_statements():53;57
DEBUG:refactor.py:074:find_register_statements():000:            OnEffectApply += AuraEffectApplyFn(spell_yogg_saron_brain_link_AuraScript::HandleOnEffectApply, EFFECT_0, SPELL_AURA_PERIODIC_DUMMY, AURA_EFFECT_HANDLE_REAL);
DEBUG:refactor.py:074:find_register_statements():001:            OnEffectPeriodic += AuraEffectPeriodicFn(spell_yogg_saron_brain_link_AuraScript::OnPeriodic, EFFECT_0, SPELL_AURA_PERIODIC_DUMMY);
DEBUG:refactor.py:088:format_register_statements():before:000:            OnEffectApply += AuraEffectApplyFn(spell_yogg_saron_brain_link_AuraScript::HandleOnEffectApply, EFFECT_0, SPELL_AURA_PERIODIC_DUMMY, AURA_EFFECT_HANDLE_REAL);
DEBUG:refactor.py:088:format_register_statements():before:001:            OnEffectPeriodic += AuraEffectPeriodicFn(spell_yogg_saron_brain_link_AuraScript::OnPeriodic, EFFECT_0, SPELL_AURA_PERIODIC_DUMMY);
DEBUG:refactor.py:090:format_register_statements():after :000:        OnEffectApply += AuraEffectApplyFn(spell_yogg_saron_brain_link_aura::HandleOnEffectApply, EFFECT_0, SPELL_AURA_PERIODIC_DUMMY, AURA_EFFECT_HANDLE_REAL);
DEBUG:refactor.py:090:format_register_statements():after :001:        OnEffectPeriodic += AuraEffectPeriodicFn(spell_yogg_saron_brain_link_aura::OnPeriodic, EFFECT_0, SPELL_AURA_PERIODIC_DUMMY);
DEBUG:refactor.py:103:find_content_start_end_index():absolute_start=2,absolute_end=53
DEBUG:refactor.py:145:format_content_statements():before:000:
DEBUG:refactor.py:145:format_content_statements():before:001:        void HandleOnEffectApply(AuraEffect const* /*aurEff*/, AuraEffectHandleModes /*mode*/)
DEBUG:refactor.py:145:format_content_statements():before:002:        {
DEBUG:refactor.py:145:format_content_statements():before:003:            PreventDefaultAction();
DEBUG:refactor.py:145:format_content_statements():before:004:            Player* target = nullptr;
DEBUG:refactor.py:145:format_content_statements():before:005:            Map::PlayerList const& pList = GetUnitOwner()->GetMap()->GetPlayers();
DEBUG:refactor.py:145:format_content_statements():before:006:            uint8 _offset = urand(0, pList.getSize() - 1);
DEBUG:refactor.py:145:format_content_statements():before:007:            uint8 _counter = 0;
DEBUG:refactor.py:145:format_content_statements():before:008:            for(Map::PlayerList::const_iterator itr = pList.begin(); itr != pList.end(); ++itr, ++_counter)
DEBUG:refactor.py:145:format_content_statements():before:009:            {
DEBUG:refactor.py:145:format_content_statements():before:010:                if (itr->GetSource() == GetUnitOwner() || GetUnitOwner()->GetDistance(itr->GetSource()) > 50.0f || !itr->GetSource()->IsAlive() || itr->GetSource()->IsGameMaster())
DEBUG:refactor.py:145:format_content_statements():before:011:                    continue;
DEBUG:refactor.py:145:format_content_statements():before:012:
DEBUG:refactor.py:145:format_content_statements():before:013:                if (_counter <= _offset || !target)
DEBUG:refactor.py:145:format_content_statements():before:014:                    target = itr->GetSource();
DEBUG:refactor.py:145:format_content_statements():before:015:                else
DEBUG:refactor.py:145:format_content_statements():before:016:                    break;
DEBUG:refactor.py:145:format_content_statements():before:017:            }
DEBUG:refactor.py:145:format_content_statements():before:018:
DEBUG:refactor.py:145:format_content_statements():before:019:            if (!target)
DEBUG:refactor.py:145:format_content_statements():before:020:                SetDuration(0);
DEBUG:refactor.py:145:format_content_statements():before:021:            else
DEBUG:refactor.py:145:format_content_statements():before:022:                _targetGUID = target->GetGUID();
DEBUG:refactor.py:145:format_content_statements():before:023:        }
DEBUG:refactor.py:145:format_content_statements():before:024:
DEBUG:refactor.py:145:format_content_statements():before:025:        void OnPeriodic(AuraEffect const*  /*aurEff*/)
DEBUG:refactor.py:145:format_content_statements():before:026:        {
DEBUG:refactor.py:145:format_content_statements():before:027:            Unit* owner = GetUnitOwner();
DEBUG:refactor.py:145:format_content_statements():before:028:            if (!owner)
DEBUG:refactor.py:145:format_content_statements():before:029:            {
DEBUG:refactor.py:145:format_content_statements():before:030:                SetDuration(0);
DEBUG:refactor.py:145:format_content_statements():before:031:                return;
DEBUG:refactor.py:145:format_content_statements():before:032:            }
DEBUG:refactor.py:145:format_content_statements():before:033:
DEBUG:refactor.py:145:format_content_statements():before:034:            Unit* _target = ObjectAccessor::GetUnit(*owner, _targetGUID);
DEBUG:refactor.py:145:format_content_statements():before:035:            if (!_target || !_target->IsAlive() || std::fabs(owner->GetPositionZ() - _target->GetPositionZ()) > 10.0f) // Target or owner underground
DEBUG:refactor.py:145:format_content_statements():before:036:            {
DEBUG:refactor.py:145:format_content_statements():before:037:                SetDuration(0);
DEBUG:refactor.py:145:format_content_statements():before:038:                return;
DEBUG:refactor.py:145:format_content_statements():before:039:            }
DEBUG:refactor.py:145:format_content_statements():before:040:
DEBUG:refactor.py:145:format_content_statements():before:041:            if (owner->GetDistance(_target) > 20.0f)
DEBUG:refactor.py:145:format_content_statements():before:042:            {
DEBUG:refactor.py:145:format_content_statements():before:043:                owner->CastSpell(_target, SPELL_BRAIN_LINK_DAMAGE, true);
DEBUG:refactor.py:145:format_content_statements():before:044:                owner->CastSpell(owner, SPELL_BRAIN_LINK_DAMAGE, true);
DEBUG:refactor.py:145:format_content_statements():before:045:            }
DEBUG:refactor.py:145:format_content_statements():before:046:            else
DEBUG:refactor.py:145:format_content_statements():before:047:                owner->CastSpell(_target, SPELL_BRAIN_LINK_OK, true);
DEBUG:refactor.py:145:format_content_statements():before:048:        }
DEBUG:refactor.py:145:format_content_statements():before:049:
DEBUG:refactor.py:147:format_content_statements():after :000:
DEBUG:refactor.py:147:format_content_statements():after :001:    void HandleOnEffectApply(AuraEffect const* /*aurEff*/, AuraEffectHandleModes /*mode*/)
DEBUG:refactor.py:147:format_content_statements():after :002:    {
DEBUG:refactor.py:147:format_content_statements():after :003:        PreventDefaultAction();
DEBUG:refactor.py:147:format_content_statements():after :004:        Player* target = nullptr;
DEBUG:refactor.py:147:format_content_statements():after :005:        Map::PlayerList const& pList = GetUnitOwner()->GetMap()->GetPlayers();
DEBUG:refactor.py:147:format_content_statements():after :006:        uint8 _offset = urand(0, pList.getSize() - 1);
DEBUG:refactor.py:147:format_content_statements():after :007:        uint8 _counter = 0;
DEBUG:refactor.py:147:format_content_statements():after :008:        for(Map::PlayerList::const_iterator itr = pList.begin(); itr != pList.end(); ++itr, ++_counter)
DEBUG:refactor.py:147:format_content_statements():after :009:        {
DEBUG:refactor.py:147:format_content_statements():after :010:            if (itr->GetSource() == GetUnitOwner() || GetUnitOwner()->GetDistance(itr->GetSource()) > 50.0f || !itr->GetSource()->IsAlive() || itr->GetSource()->IsGameMaster())
DEBUG:refactor.py:147:format_content_statements():after :011:                continue;
DEBUG:refactor.py:147:format_content_statements():after :012:
DEBUG:refactor.py:147:format_content_statements():after :013:            if (_counter <= _offset || !target)
DEBUG:refactor.py:147:format_content_statements():after :014:                target = itr->GetSource();
DEBUG:refactor.py:147:format_content_statements():after :015:            else
DEBUG:refactor.py:147:format_content_statements():after :016:                break;
DEBUG:refactor.py:147:format_content_statements():after :017:        }
DEBUG:refactor.py:147:format_content_statements():after :018:
DEBUG:refactor.py:147:format_content_statements():after :019:        if (!target)
DEBUG:refactor.py:147:format_content_statements():after :020:            SetDuration(0);
DEBUG:refactor.py:147:format_content_statements():after :021:        else
DEBUG:refactor.py:147:format_content_statements():after :022:            _targetGUID = target->GetGUID();
DEBUG:refactor.py:147:format_content_statements():after :023:    }
DEBUG:refactor.py:147:format_content_statements():after :024:
DEBUG:refactor.py:147:format_content_statements():after :025:    void OnPeriodic(AuraEffect const*  /*aurEff*/)
DEBUG:refactor.py:147:format_content_statements():after :026:    {
DEBUG:refactor.py:147:format_content_statements():after :027:        Unit* owner = GetUnitOwner();
DEBUG:refactor.py:147:format_content_statements():after :028:        if (!owner)
DEBUG:refactor.py:147:format_content_statements():after :029:        {
DEBUG:refactor.py:147:format_content_statements():after :030:            SetDuration(0);
DEBUG:refactor.py:147:format_content_statements():after :031:            return;
DEBUG:refactor.py:147:format_content_statements():after :032:        }
DEBUG:refactor.py:147:format_content_statements():after :033:
DEBUG:refactor.py:147:format_content_statements():after :034:        Unit* _target = ObjectAccessor::GetUnit(*owner, _targetGUID);
DEBUG:refactor.py:147:format_content_statements():after :035:        if (!_target || !_target->IsAlive() || std::fabs(owner->GetPositionZ() - _target->GetPositionZ()) > 10.0f) // Target or owner underground
DEBUG:refactor.py:147:format_content_statements():after :036:        {
DEBUG:refactor.py:147:format_content_statements():after :037:            SetDuration(0);
DEBUG:refactor.py:147:format_content_statements():after :038:            return;
DEBUG:refactor.py:147:format_content_statements():after :039:        }
DEBUG:refactor.py:147:format_content_statements():after :040:
DEBUG:refactor.py:147:format_content_statements():after :041:        if (owner->GetDistance(_target) > 20.0f)
DEBUG:refactor.py:147:format_content_statements():after :042:        {
DEBUG:refactor.py:147:format_content_statements():after :043:            owner->CastSpell(_target, SPELL_BRAIN_LINK_DAMAGE, true);
DEBUG:refactor.py:147:format_content_statements():after :044:            owner->CastSpell(owner, SPELL_BRAIN_LINK_DAMAGE, true);
DEBUG:refactor.py:147:format_content_statements():after :045:        }
DEBUG:refactor.py:147:format_content_statements():after :046:        else
DEBUG:refactor.py:147:format_content_statements():after :047:            owner->CastSpell(_target, SPELL_BRAIN_LINK_OK, true);
DEBUG:refactor.py:147:format_content_statements():after :048:    }
DEBUG:refactor.py:147:format_content_statements():after :049:
DEBUG:refactor.py:119:      find_variables():HERE 59
DEBUG:refactor.py:120:      find_variables():    protected:
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:000:    class spell_yogg_saron_brain_link_AuraScript : public AuraScript
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:001:    {
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:002:        PrepareAuraScript(spell_yogg_saron_brain_link_AuraScript);
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:003:
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:004:        void HandleOnEffectApply(AuraEffect const* /*aurEff*/, AuraEffectHandleModes /*mode*/)
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:005:        {
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:006:            PreventDefaultAction();
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:007:            Player* target = nullptr;
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:008:            Map::PlayerList const& pList = GetUnitOwner()->GetMap()->GetPlayers();
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:009:            uint8 _offset = urand(0, pList.getSize() - 1);
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:010:            uint8 _counter = 0;
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:011:            for(Map::PlayerList::const_iterator itr = pList.begin(); itr != pList.end(); ++itr, ++_counter)
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:012:            {
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:013:                if (itr->GetSource() == GetUnitOwner() || GetUnitOwner()->GetDistance(itr->GetSource()) > 50.0f || !itr->GetSource()->IsAlive() || itr->GetSource()->IsGameMaster())
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:014:                    continue;
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:015:
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:016:                if (_counter <= _offset || !target)
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:017:                    target = itr->GetSource();
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:018:                else
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:019:                    break;
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:020:            }
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:021:
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:022:            if (!target)
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:023:                SetDuration(0);
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:024:            else
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:025:                _targetGUID = target->GetGUID();
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:026:        }
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:027:
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:028:        void OnPeriodic(AuraEffect const*  /*aurEff*/)
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:029:        {
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:030:            Unit* owner = GetUnitOwner();
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:031:            if (!owner)
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:032:            {
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:033:                SetDuration(0);
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:034:                return;
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:035:            }
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:036:
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:037:            Unit* _target = ObjectAccessor::GetUnit(*owner, _targetGUID);
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:038:            if (!_target || !_target->IsAlive() || std::fabs(owner->GetPositionZ() - _target->GetPositionZ()) > 10.0f) // Target or owner underground
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:039:            {
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:040:                SetDuration(0);
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:041:                return;
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:042:            }
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:043:
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:044:            if (owner->GetDistance(_target) > 20.0f)
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:045:            {
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:046:                owner->CastSpell(_target, SPELL_BRAIN_LINK_DAMAGE, true);
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:047:                owner->CastSpell(owner, SPELL_BRAIN_LINK_DAMAGE, true);
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:048:            }
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:049:            else
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:050:                owner->CastSpell(_target, SPELL_BRAIN_LINK_OK, true);
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:051:        }
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:052:
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:053:        void Register() override
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:054:        {
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:055:            OnEffectApply += AuraEffectApplyFn(spell_yogg_saron_brain_link_AuraScript::HandleOnEffectApply, EFFECT_0, SPELL_AURA_PERIODIC_DUMMY, AURA_EFFECT_HANDLE_REAL);
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:056:            OnEffectPeriodic += AuraEffectPeriodicFn(spell_yogg_saron_brain_link_AuraScript::OnPeriodic, EFFECT_0, SPELL_AURA_PERIODIC_DUMMY);
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:057:        }
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:058:
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:059:    protected:
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:060:        ObjectGuid _targetGUID;
DEBUG:refactor.py:186:convert_aura_or_spell_script():before:061:    };
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :000:class spell_yogg_saron_brain_link_aura : public AuraScript
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :001:{
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :002:    PrepareAuraScript(spell_yogg_saron_brain_link_aura);
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :003:
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :004:    void HandleOnEffectApply(AuraEffect const* /*aurEff*/, AuraEffectHandleModes /*mode*/)
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :005:    {
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :006:        PreventDefaultAction();
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :007:        Player* target = nullptr;
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :008:        Map::PlayerList const& pList = GetUnitOwner()->GetMap()->GetPlayers();
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :009:        uint8 _offset = urand(0, pList.getSize() - 1);
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :010:        uint8 _counter = 0;
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :011:        for(Map::PlayerList::const_iterator itr = pList.begin(); itr != pList.end(); ++itr, ++_counter)
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :012:        {
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :013:            if (itr->GetSource() == GetUnitOwner() || GetUnitOwner()->GetDistance(itr->GetSource()) > 50.0f || !itr->GetSource()->IsAlive() || itr->GetSource()->IsGameMaster())
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :014:                continue;
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :015:
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :016:            if (_counter <= _offset || !target)
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :017:                target = itr->GetSource();
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :018:            else
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :019:                break;
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :020:        }
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :021:
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :022:        if (!target)
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :023:            SetDuration(0);
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :024:        else
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :025:            _targetGUID = target->GetGUID();
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :026:    }
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :027:
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :028:    void OnPeriodic(AuraEffect const*  /*aurEff*/)
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :029:    {
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :030:        Unit* owner = GetUnitOwner();
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :031:        if (!owner)
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :032:        {
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :033:            SetDuration(0);
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :034:            return;
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :035:        }
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :036:
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :037:        Unit* _target = ObjectAccessor::GetUnit(*owner, _targetGUID);
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :038:        if (!_target || !_target->IsAlive() || std::fabs(owner->GetPositionZ() - _target->GetPositionZ()) > 10.0f) // Target or owner underground
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :039:        {
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :040:            SetDuration(0);
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :041:            return;
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :042:        }
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :043:
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :044:        if (owner->GetDistance(_target) > 20.0f)
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :045:        {
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :046:            owner->CastSpell(_target, SPELL_BRAIN_LINK_DAMAGE, true);
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :047:            owner->CastSpell(owner, SPELL_BRAIN_LINK_DAMAGE, true);
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :048:        }
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :049:        else
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :050:            owner->CastSpell(_target, SPELL_BRAIN_LINK_OK, true);
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :051:    }
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :052:
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :053:    void Register() override
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :054:    {
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :055:        OnEffectApply += AuraEffectApplyFn(spell_yogg_saron_brain_link_aura::HandleOnEffectApply, EFFECT_0, SPELL_AURA_PERIODIC_DUMMY, AURA_EFFECT_HANDLE_REAL);
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :056:        OnEffectPeriodic += AuraEffectPeriodicFn(spell_yogg_saron_brain_link_aura::OnPeriodic, EFFECT_0, SPELL_AURA_PERIODIC_DUMMY);
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :057:    }
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :058:
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :059:protected:
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :060:    ObjectGuid _targetGUID;
DEBUG:refactor.py:188:convert_aura_or_spell_script():after :061:};
DEBUG:refactor.py:246:format_RegisterSpellScript():register_statement='    RegisterSpellAndAuraScriptPair(spell_yogg_saron_brain_link, spell_yogg_saron_brain_link_aura);'
DEBUG:refactor.py:255:replace_new_with_RegisterSpellScript():script_name_search='new spell_yogg_saron_brain_link'
DEBUG:refactor.py:256:replace_new_with_RegisterSpellScript():script_name='spell_yogg_saron_brain_link'
DEBUG:refactor.py:257:replace_new_with_RegisterSpellScript():before:    RegisterSpellAndAuraScriptPair(spell_yogg_saron_brain_link, spell_yogg_saron_brain_link_aura);
DEBUG:refactor.py:258:replace_new_with_RegisterSpellScript():after :    RegisterSpellAndAuraScriptPair(spell_yogg_saron_brain_link, spell_yogg_saron_brain_link_aura);
DEBUG:refactor.py:277:format_first_block_in_file():000:/*
DEBUG:refactor.py:277:format_first_block_in_file():001: * This file is part of the AzerothCore Project. See AUTHORS file for Copyright information
DEBUG:refactor.py:277:format_first_block_in_file():002: *
DEBUG:refactor.py:277:format_first_block_in_file():003: * This program is free software; you can redistribute it and/or modify it
DEBUG:refactor.py:277:format_first_block_in_file():004: * under the terms of the GNU Affero General Public License as published by the
DEBUG:refactor.py:277:format_first_block_in_file():005: * Free Software Foundation; either version 3 of the License, or (at your
DEBUG:refactor.py:277:format_first_block_in_file():006: * option) any later version.
DEBUG:refactor.py:277:format_first_block_in_file():007: *
DEBUG:refactor.py:277:format_first_block_in_file():008: * This program is distributed in the hope that it will be useful, but WITHOUT
DEBUG:refactor.py:277:format_first_block_in_file():009: * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
DEBUG:refactor.py:277:format_first_block_in_file():010: * FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero General Public License for
DEBUG:refactor.py:277:format_first_block_in_file():011: * more details.
DEBUG:refactor.py:277:format_first_block_in_file():012: *
DEBUG:refactor.py:277:format_first_block_in_file():013: * You should have received a copy of the GNU General Public License along
DEBUG:refactor.py:277:format_first_block_in_file():014: * with this program. If not, see <http://www.gnu.org/licenses/>.
DEBUG:refactor.py:277:format_first_block_in_file():015: */
DEBUG:refactor.py:277:format_first_block_in_file():016:
DEBUG:refactor.py:277:format_first_block_in_file():017:#include "AchievementCriteriaScript.h"
DEBUG:refactor.py:277:format_first_block_in_file():018:#include "CreatureAI.h"
DEBUG:refactor.py:277:format_first_block_in_file():019:#include "CreatureScript.h"
DEBUG:refactor.py:277:format_first_block_in_file():020:#include "Object.h"
DEBUG:refactor.py:277:format_first_block_in_file():021:#include "Opcodes.h"
DEBUG:refactor.py:277:format_first_block_in_file():022:#include "PassiveAI.h"
DEBUG:refactor.py:277:format_first_block_in_file():023:#include "Player.h"
DEBUG:refactor.py:277:format_first_block_in_file():024:#include "ScriptedCreature.h"
DEBUG:refactor.py:277:format_first_block_in_file():025:#include "ScriptedEscortAI.h"
DEBUG:refactor.py:277:format_first_block_in_file():026:#include "SpellAuras.h"
DEBUG:refactor.py:277:format_first_block_in_file():027:#include "SpellScript.h"
DEBUG:refactor.py:277:format_first_block_in_file():028:#include "SpellScriptLoader.h"
DEBUG:refactor.py:277:format_first_block_in_file():029:#include "ulduar.h"
DEBUG:refactor.py:277:format_first_block_in_file():030:
DEBUG:refactor.py:277:format_first_block_in_file():031:enum YoggSpells
DEBUG:refactor.py:277:format_first_block_in_file():032:{
DEBUG:refactor.py:277:format_first_block_in_file():033:    // KEEPERS
DEBUG:refactor.py:277:format_first_block_in_file():034:    SPELL_KEEPER_ACTIVE                 = 62647,
DEBUG:refactor.py:277:format_first_block_in_file():035:    SPELL_MIMIRON_PASSIVE               = 62671,
DEBUG:refactor.py:277:format_first_block_in_file():036:    SPELL_THORIM_PASSIVE                = 62702,
DEBUG:refactor.py:277:format_first_block_in_file():037:    SPELL_HODIR_PASSIVE                 = 62650,
DEBUG:refactor.py:277:format_first_block_in_file():038:    SPELL_FREYA_PASSIVE                 = 62670,
DEBUG:refactor.py:277:format_first_block_in_file():039:
DEBUG:refactor.py:277:format_first_block_in_file():040:    SPELL_DESTABILIZATION_MATRIX        = 65206,
DEBUG:refactor.py:277:format_first_block_in_file():041:    SPELL_DESTABILIZATION_MATRIX_ATTACK = 65210,
DEBUG:refactor.py:277:format_first_block_in_file():042:    SPELL_SANITY_WELL_VISUAL            = 63288,
DEBUG:refactor.py:277:format_first_block_in_file():043:    SPELL_SANITY_WELL_BUFF              = 64169,
DEBUG:refactor.py:277:format_first_block_in_file():044:    SPELL_PROTECTIVE_GAZE               = 64174, // COOLDOWN 25 SECS BEFORE NEXT USE
DEBUG:refactor.py:277:format_first_block_in_file():045:    SPELL_HODIR_FLASH_FREEZE            = 64175,
DEBUG:refactor.py:277:format_first_block_in_file():046:    SPELL_CONJURE_SANITY_WELL           = 64170,
DEBUG:refactor.py:277:format_first_block_in_file():047:
DEBUG:refactor.py:277:format_first_block_in_file():048:    SPELL_TITANIC_STORM_PASSIVE         = 64171,
DEBUG:refactor.py:277:format_first_block_in_file():049:    SPELL_WEAKENED                      = 64162,
DEBUG:refactor.py:277:format_first_block_in_file():050:
DEBUG:refactor.py:277:format_first_block_in_file():051:    // GLOBAL
DEBUG:refactor.py:277:format_first_block_in_file():052:    SPELL_SANITY_BASE                   = 63786,
DEBUG:refactor.py:277:format_first_block_in_file():053:    SPELL_SANITY                        = 63050,
DEBUG:refactor.py:277:format_first_block_in_file():054:    SPELL_EXTINGUISH_ALL_LIFE           = 64166,
DEBUG:refactor.py:277:format_first_block_in_file():055:    SPELL_CLOUD_VISUAL                  = 63084,
DEBUG:refactor.py:277:format_first_block_in_file():056:    SPELL_SUMMON_GUARDIAN_OF_YS         = 63031,
DEBUG:refactor.py:277:format_first_block_in_file():057:    SPELL_INSANE1                       = 63120,
DEBUG:refactor.py:277:format_first_block_in_file():058:    SPELL_INSANE2                       = 64464,
DEBUG:refactor.py:277:format_first_block_in_file():059:    SPELL_INSANE_PERIODIC               = 64554, // this checks if player dc'ed and insanes him instantly after logging in
DEBUG:refactor.py:277:format_first_block_in_file():060:
DEBUG:refactor.py:277:format_first_block_in_file():061:    // SARA P1
DEBUG:refactor.py:277:format_first_block_in_file():062:    SPELL_SARAS_FAVOR                       = 63138,
DEBUG:refactor.py:277:format_first_block_in_file():063:    SPELL_SARAS_FAVOR_TARGET_SELECTOR       = 63747,
DEBUG:refactor.py:277:format_first_block_in_file():064:    SPELL_SARAS_BLESSING                    = 63134,
DEBUG:refactor.py:277:format_first_block_in_file():065:    SPELL_SARAS_BLESSING_TARGET_SELECTOR    = 63745,
DEBUG:refactor.py:277:format_first_block_in_file():066:    SPELL_SARAS_ANGER                       = 63147,
DEBUG:refactor.py:277:format_first_block_in_file():067:    SPELL_SARAS_ANGER_TARGET_SELECTOR       = 63744,
DEBUG:refactor.py:277:format_first_block_in_file():068:    SPELL_SHADOWY_BARRIER                   = 64775,
DEBUG:refactor.py:277:format_first_block_in_file():069:
DEBUG:refactor.py:277:format_first_block_in_file():070:    // GUARDIANS OF YOGG-SARON
DEBUG:refactor.py:277:format_first_block_in_file():071:    SPELL_SHADOW_NOVA                   = 62714,
DEBUG:refactor.py:277:format_first_block_in_file():072:    SPELL_DARK_VOLLEY                   = 63038,
DEBUG:refactor.py:277:format_first_block_in_file():073:
DEBUG:refactor.py:277:format_first_block_in_file():074:    // SARA P2
DEBUG:refactor.py:277:format_first_block_in_file():075:    SPELL_SARA_PSYCHOSIS_10             = 63795,
DEBUG:refactor.py:277:format_first_block_in_file():076:    SPELL_SARA_PSYCHOSIS_25             = 65301,
DEBUG:refactor.py:277:format_first_block_in_file():077:    SPELL_MALADY_OF_THE_MIND            = 63830,
DEBUG:refactor.py:277:format_first_block_in_file():078:    SPELL_MALADY_OF_THE_MIND_TRIGGER    = 63881,
DEBUG:refactor.py:277:format_first_block_in_file():079:    SPELL_BRAIN_LINK                    = 63802,
DEBUG:refactor.py:277:format_first_block_in_file():080:    SPELL_BRAIN_LINK_DAMAGE             = 63803,
DEBUG:refactor.py:277:format_first_block_in_file():081:    SPELL_BRAIN_LINK_OK                 = 63804,
DEBUG:refactor.py:277:format_first_block_in_file():082:
DEBUG:refactor.py:277:format_first_block_in_file():083:    SPELL_DEATH_RAY_DAMAGE_VISUAL       = 63886,
DEBUG:refactor.py:277:format_first_block_in_file():084:    SPELL_DEATH_RAY_ORIGIN_VISUAL       = 63893,
DEBUG:refactor.py:277:format_first_block_in_file():085:    SPELL_DEATH_RAY_WARNING             = 63882,
DEBUG:refactor.py:277:format_first_block_in_file():086:    SPELL_DEATH_RAY_DAMAGE              = 63883,
DEBUG:refactor.py:277:format_first_block_in_file():087:    SPELL_DEATH_RAY_DAMAGE_REAL         = 63884,
DEBUG:refactor.py:277:format_first_block_in_file():088:
DEBUG:refactor.py:277:format_first_block_in_file():089:    // YOGG-SARON P2
DEBUG:refactor.py:277:format_first_block_in_file():090:    SPELL_SHADOW_BARRIER                = 63894,
DEBUG:refactor.py:277:format_first_block_in_file():091:    SPELL_KNOCK_AWAY                    = 64022,
DEBUG:refactor.py:277:format_first_block_in_file():092:
DEBUG:refactor.py:277:format_first_block_in_file():093:    // TENTACLES
DEBUG:refactor.py:277:format_first_block_in_file():094:    SPELL_VOID_ZONE_SMALL               = 64384,
DEBUG:refactor.py:277:format_first_block_in_file():095:    SPELL_VOID_ZONE_LARGE               = 64017,
DEBUG:refactor.py:277:format_first_block_in_file():096:    SPELL_TENTACLE_ERUPT                = 64144,
DEBUG:refactor.py:277:format_first_block_in_file():097:
DEBUG:refactor.py:277:format_first_block_in_file():098:    // CRUSHER TENTACLE
DEBUG:refactor.py:277:format_first_block_in_file():099:    SPELL_CRUSH                         = 64146,
DEBUG:refactor.py:277:format_first_block_in_file():100:    SPELL_DIMINISH_POWER                = 64145,
DEBUG:refactor.py:277:format_first_block_in_file():101:    SPELL_FOCUSED_ANGER                 = 57688,
DEBUG:refactor.py:277:format_first_block_in_file():102:
DEBUG:refactor.py:277:format_first_block_in_file():103:    // CONSTRICTOR TENTACLE
DEBUG:refactor.py:277:format_first_block_in_file():104:    SPELL_LUNGE                         = 64123,
DEBUG:refactor.py:277:format_first_block_in_file():105:    SPELL_SQUEEZE_10                    = 64125,
DEBUG:refactor.py:277:format_first_block_in_file():106:    SPELL_SQUEEZE_25                    = 64126,
DEBUG:refactor.py:277:format_first_block_in_file():107:
DEBUG:refactor.py:277:format_first_block_in_file():108:    // CORRUPTOR TENTACLE
DEBUG:refactor.py:277:format_first_block_in_file():109:    SPELL_APATHY                        = 64156,
DEBUG:refactor.py:277:format_first_block_in_file():110:    SPELL_BLACK_PLAGUE                  = 64153,
DEBUG:refactor.py:277:format_first_block_in_file():111:    SPELL_CURSE_OF_DOOM                 = 64157,
DEBUG:refactor.py:277:format_first_block_in_file():112:    SPELL_DRAINING_POISON               = 64152,
DEBUG:refactor.py:277:format_first_block_in_file():113:
DEBUG:refactor.py:277:format_first_block_in_file():114:    // MISC
DEBUG:refactor.py:277:format_first_block_in_file():115:    SPELL_REVEALED_TENTACLE             = 64012,
DEBUG:refactor.py:277:format_first_block_in_file():116:    SPELL_IN_THE_MAWS_OF_THE_OLD_GOD    = 64184,
DEBUG:refactor.py:277:format_first_block_in_file():117:
DEBUG:refactor.py:277:format_first_block_in_file():118:    // BRAIN OF YOGG-SARON
DEBUG:refactor.py:277:format_first_block_in_file():119:    SPELL_SHATTERED_ILLUSION            = 64173,
DEBUG:refactor.py:277:format_first_block_in_file():120:    SPELL_INDUCE_MADNESS                = 64059,
DEBUG:refactor.py:277:format_first_block_in_file():121:    SPELL_BRAIN_HURT_VISUAL             = 64361,
DEBUG:refactor.py:277:format_first_block_in_file():122:
DEBUG:refactor.py:277:format_first_block_in_file():123:    // PORTALS
DEBUG:refactor.py:277:format_first_block_in_file():124:    SPELL_TELEPORT_TO_CHAMBER           = 63997,
DEBUG:refactor.py:277:format_first_block_in_file():125:    SPELL_TELEPORT_TO_ICECROWN          = 63998,
DEBUG:refactor.py:277:format_first_block_in_file():126:    SPELL_TELEPORT_TO_STORMWIND         = 63989,
DEBUG:refactor.py:277:format_first_block_in_file():127:    SPELL_TELEPORT_BACK                 = 63992,
DEBUG:refactor.py:277:format_first_block_in_file():128:    SPELL_CANCEL_ILLUSION_AURA          = 63993,
DEBUG:refactor.py:277:format_first_block_in_file():129:
DEBUG:refactor.py:277:format_first_block_in_file():130:    // LAUGHING SKULL AND INFLUENCE TENTACLE AND OTHERS
DEBUG:refactor.py:277:format_first_block_in_file():131:    SPELL_LUNATIC_GAZE                  = 64167,
DEBUG:refactor.py:277:format_first_block_in_file():132:    SPELL_GRIM_REPRISAL                 = 63305,
DEBUG:refactor.py:277:format_first_block_in_file():133:    SPELL_GRIM_REPRISAL_DAMAGE          = 64039,
DEBUG:refactor.py:277:format_first_block_in_file():134:    SPELL_DEATHGRASP                    = 63037,
DEBUG:refactor.py:277:format_first_block_in_file():135:
DEBUG:refactor.py:277:format_first_block_in_file():136:    // YOGG-SARON P3
DEBUG:refactor.py:277:format_first_block_in_file():137:    SPELL_LUNATIC_GAZE_YS               = 64163,
DEBUG:refactor.py:277:format_first_block_in_file():138:    SPELL_DEAFENING_ROAR                = 64189,
DEBUG:refactor.py:277:format_first_block_in_file():139:    SPELL_SHADOW_BEACON                 = 64465,
DEBUG:refactor.py:277:format_first_block_in_file():140:
DEBUG:refactor.py:277:format_first_block_in_file():141:    // IMMORTAL GUARDIAN
DEBUG:refactor.py:277:format_first_block_in_file():142:    SPELL_SIMPLE_TELEPORT               = 64195,
DEBUG:refactor.py:277:format_first_block_in_file():143:    SPELL_EMPOWERED                     = 65294,
DEBUG:refactor.py:277:format_first_block_in_file():144:    SPELL_EMPOWERED_PASSIVE             = 64161,
DEBUG:refactor.py:277:format_first_block_in_file():145:    SPELL_DRAIN_LIFE_10                 = 64159,
DEBUG:refactor.py:277:format_first_block_in_file():146:    SPELL_DRAIN_LIFE_25                 = 64160,
DEBUG:refactor.py:277:format_first_block_in_file():147:    SPELL_RECENTLY_SPAWNED              = 64497,
DEBUG:refactor.py:277:format_first_block_in_file():148:};
DEBUG:refactor.py:277:format_first_block_in_file():149:
DEBUG:refactor.py:277:format_first_block_in_file():150:#define SPELL_PSYCHOSIS         RAID_MODE(SPELL_SARA_PSYCHOSIS_10, SPELL_SARA_PSYCHOSIS_25)
DEBUG:refactor.py:277:format_first_block_in_file():151:#define SPELL_SQUEEZE           RAID_MODE(SPELL_SQUEEZE_10, SPELL_SQUEEZE_25)
DEBUG:refactor.py:277:format_first_block_in_file():152:#define SPELL_DRAIN_LIFE        RAID_MODE(SPELL_DRAIN_LIFE_10, SPELL_DRAIN_LIFE_25)
DEBUG:refactor.py:277:format_first_block_in_file():153:
DEBUG:refactor.py:277:format_first_block_in_file():154:enum YoggEvents
DEBUG:refactor.py:277:format_first_block_in_file():155:{
DEBUG:refactor.py:277:format_first_block_in_file():156:    EVENT_SARA_P1_DOORS_CLOSE           = 1,
DEBUG:refactor.py:277:format_first_block_in_file():157:    EVENT_SARA_P1_SUMMON                = 2,
DEBUG:refactor.py:277:format_first_block_in_file():158:    EVENT_SARA_P1_SPELLS                = 3,
DEBUG:refactor.py:277:format_first_block_in_file():159:    EVENT_SARA_P1_BERSERK               = 4,
DEBUG:refactor.py:277:format_first_block_in_file():160:
DEBUG:refactor.py:277:format_first_block_in_file():161:    EVENT_SARA_P2_START                 = 10,
DEBUG:refactor.py:277:format_first_block_in_file():162:    EVENT_SARA_P2_SUMMON_T1             = 11,
DEBUG:refactor.py:277:format_first_block_in_file():163:    EVENT_SARA_P2_SUMMON_T2             = 12,
DEBUG:refactor.py:277:format_first_block_in_file():164:    EVENT_SARA_P2_SUMMON_T3             = 13,
DEBUG:refactor.py:277:format_first_block_in_file():165:    EVENT_SARA_P2_BRAIN_LINK            = 14,
DEBUG:refactor.py:277:format_first_block_in_file():166:    EVENT_SARA_P2_DEATH_RAY             = 15,
DEBUG:refactor.py:277:format_first_block_in_file():167:    EVENT_SARA_P2_MALADY                = 16,
DEBUG:refactor.py:277:format_first_block_in_file():168:    EVENT_SARA_P2_PSYCHOSIS             = 17,
DEBUG:refactor.py:277:format_first_block_in_file():169:    EVENT_SARA_P2_OPEN_PORTALS          = 18,
DEBUG:refactor.py:277:format_first_block_in_file():170:    EVENT_SARA_P2_REMOVE_STUN           = 19,
DEBUG:refactor.py:277:format_first_block_in_file():171:    EVENT_SARA_P2_SPAWN_START_TENTACLES = 20,
DEBUG:refactor.py:277:format_first_block_in_file():172:
DEBUG:refactor.py:277:format_first_block_in_file():173:    EVENT_YS_LUNATIC_GAZE               = 30,
DEBUG:refactor.py:277:format_first_block_in_file():174:    EVENT_YS_DEAFENING_ROAR             = 31,
DEBUG:refactor.py:277:format_first_block_in_file():175:    EVENT_YS_SUMMON_GUARDIAN            = 32,
DEBUG:refactor.py:277:format_first_block_in_file():176:    EVENT_YS_SHADOW_BEACON              = 33,
DEBUG:refactor.py:277:format_first_block_in_file():177:};
DEBUG:refactor.py:277:format_first_block_in_file():178:
DEBUG:refactor.py:277:format_first_block_in_file():179:enum NPCsGOs
DEBUG:refactor.py:277:format_first_block_in_file():180:{
DEBUG:refactor.py:277:format_first_block_in_file():181:    // NPCs
DEBUG:refactor.py:277:format_first_block_in_file():182:    NPC_OMINOUS_CLOUD                   = 33292,
DEBUG:refactor.py:277:format_first_block_in_file():183:    NPC_GUARDIAN_OF_YS                  = 33136,
DEBUG:refactor.py:277:format_first_block_in_file():184:    NPC_SANITY_WELL                     = 33991,
DEBUG:refactor.py:277:format_first_block_in_file():185:    NPC_YOGG_SARON                      = 33288,
DEBUG:refactor.py:277:format_first_block_in_file():186:    NPC_VOICE_OF_YOGG_SARON             = 33280,
DEBUG:refactor.py:277:format_first_block_in_file():187:    NPC_YOGG_SARON_VISION               = 33552,
DEBUG:refactor.py:277:format_first_block_in_file():188:
DEBUG:refactor.py:277:format_first_block_in_file():189:    NPC_CRUSHER_TENTACLE                = 33966, // 50 secs ?
DEBUG:refactor.py:277:format_first_block_in_file():190:    NPC_CONSTRICTOR_TENTACLE            = 33983, // 15-20 secs ?
DEBUG:refactor.py:277:format_first_block_in_file():191:    NPC_CORRUPTOR_TENTACLE              = 33985, // 30-40 secs ?
DEBUG:refactor.py:277:format_first_block_in_file():192:
DEBUG:refactor.py:277:format_first_block_in_file():193:    NPC_INFLUENCE_TENTACLE              = 33943,
DEBUG:refactor.py:277:format_first_block_in_file():194:    NPC_DEATH_ORB                       = 33882,
DEBUG:refactor.py:277:format_first_block_in_file():195:    NPC_DESCEND_INTO_MADNESS            = 34072,
DEBUG:refactor.py:277:format_first_block_in_file():196:    NPC_LAUGHING_SKULL                  = 33990,
DEBUG:refactor.py:277:format_first_block_in_file():197:
DEBUG:refactor.py:277:format_first_block_in_file():198:    NPC_IMMORTAL_GUARDIAN               = 33988,
DEBUG:refactor.py:277:format_first_block_in_file():199:    NPC_MARKED_IMMORTAL_GUARDIAN        = 36064,
DEBUG:refactor.py:277:format_first_block_in_file():200:
DEBUG:refactor.py:277:format_first_block_in_file():201:    // CHAMBER ILLUSION
DEBUG:refactor.py:277:format_first_block_in_file():202:    NPC_CONSORT_FIRST                   = 33716,
DEBUG:refactor.py:277:format_first_block_in_file():203:    NPC_CONSORT_LAST                    = 33720,
DEBUG:refactor.py:277:format_first_block_in_file():204:    NPC_ALEXTRASZA                      = 33536,
DEBUG:refactor.py:277:format_first_block_in_file():205:    NPC_MALYGOS                         = 33535,
DEBUG:refactor.py:277:format_first_block_in_file():206:    NPC_NELTHARION                      = 33523,
DEBUG:refactor.py:277:format_first_block_in_file():207:    NPC_YSERA                           = 33495,
DEBUG:refactor.py:277:format_first_block_in_file():208:    GO_DRAGON_SOUL                      = 194462,
DEBUG:refactor.py:277:format_first_block_in_file():209:
DEBUG:refactor.py:277:format_first_block_in_file():210:    // ICECROWN ILLUSION
DEBUG:refactor.py:277:format_first_block_in_file():211:    NPC_DEATHSWORN_ZEALOT               = 33567,
DEBUG:refactor.py:277:format_first_block_in_file():212:    NPC_LICH_KING                       = 33441,
DEBUG:refactor.py:277:format_first_block_in_file():213:    NPC_IMMOLATED_CHAMPION              = 33442,
DEBUG:refactor.py:277:format_first_block_in_file():214:
DEBUG:refactor.py:277:format_first_block_in_file():215:    // STORMWIND ILLUSION
DEBUG:refactor.py:277:format_first_block_in_file():216:    NPC_SUIT_OF_ARMOR                   = 33433,
DEBUG:refactor.py:277:format_first_block_in_file():217:    NPC_GARONA                          = 33436,
DEBUG:refactor.py:277:format_first_block_in_file():218:    NPC_KING_LLANE                      = 33437,
DEBUG:refactor.py:277:format_first_block_in_file():219:
DEBUG:refactor.py:277:format_first_block_in_file():220:    // GOs
DEBUG:refactor.py:277:format_first_block_in_file():221:    GO_DOORS                            = 194773,
DEBUG:refactor.py:277:format_first_block_in_file():222:    GO_FLEE_TO_THE_SURFACE_PORTAL       = 194625,
DEBUG:refactor.py:277:format_first_block_in_file():223:    GO_CHAMBER_ILLUSION_DOORS           = 194635,
DEBUG:refactor.py:277:format_first_block_in_file():224:    GO_ICECROWN_ILLUSION_DOORS          = 194636,
DEBUG:refactor.py:277:format_first_block_in_file():225:    GO_STORMWIND_ILLUSION_DOORS         = 194637,
DEBUG:refactor.py:277:format_first_block_in_file():226:
DEBUG:refactor.py:277:format_first_block_in_file():227:    // MODELs
DEBUG:refactor.py:277:format_first_block_in_file():228:    SARA_TRANSFORM_MODEL                = 29182,
DEBUG:refactor.py:277:format_first_block_in_file():229:};
DEBUG:refactor.py:277:format_first_block_in_file():230:
DEBUG:refactor.py:277:format_first_block_in_file():231:enum Misc
DEBUG:refactor.py:277:format_first_block_in_file():232:{
DEBUG:refactor.py:277:format_first_block_in_file():233:    ACTION_UNSUMMON_CLOUDS              = -16,
DEBUG:refactor.py:277:format_first_block_in_file():234:    ACTION_DESPAWN_ADDS                 = -15,
DEBUG:refactor.py:277:format_first_block_in_file():235:    ACTION_START_SUMMONING              = -14,
DEBUG:refactor.py:277:format_first_block_in_file():236:    ACTION_YOGG_SARON_APPEAR            = -13,
DEBUG:refactor.py:277:format_first_block_in_file():237:    ACTION_YOGG_SARON_DEATH             = -12,
DEBUG:refactor.py:277:format_first_block_in_file():238:    ACTION_YOGG_SARON_START_YELL        = -11,
DEBUG:refactor.py:277:format_first_block_in_file():239:    ACTION_YOGG_SARON_OPEN_PORTAL_YELL  = -10,
DEBUG:refactor.py:277:format_first_block_in_file():240:    ACTION_INFLUENCE_TENTACLE_DIED      = -9,
DEBUG:refactor.py:277:format_first_block_in_file():241:    ACTION_BRAIN_DAMAGED                = -8,
DEBUG:refactor.py:277:format_first_block_in_file():242:    ACTION_REMOVE_STUN                  = -7,
DEBUG:refactor.py:277:format_first_block_in_file():243:    ACTION_YOGG_SARON_START_P3          = -6,
DEBUG:refactor.py:277:format_first_block_in_file():244:    ACTION_YOGG_SARON_HARD_MODE         = -5,
DEBUG:refactor.py:277:format_first_block_in_file():245:    ACTION_YOGG_SARON_SHADOW_BEACON     = -4,
DEBUG:refactor.py:277:format_first_block_in_file():246:    ACTION_THORIM_START_STORM           = -3,
DEBUG:refactor.py:277:format_first_block_in_file():247:    ACTION_FAILED_DRIVE_ME_CRAZY        = -2,
DEBUG:refactor.py:277:format_first_block_in_file():248:
DEBUG:refactor.py:277:format_first_block_in_file():249:    ACTION_ILLUSION_DRAGONS             = 1,
DEBUG:refactor.py:277:format_first_block_in_file():250:    ACTION_ILLUSION_ICECROWN            = 2,
DEBUG:refactor.py:277:format_first_block_in_file():251:    ACTION_ILLUSION_STORMWIND           = 3,
DEBUG:refactor.py:277:format_first_block_in_file():252:
DEBUG:refactor.py:277:format_first_block_in_file():253:    EVENT_PHASE_ONE                     = 1,
DEBUG:refactor.py:277:format_first_block_in_file():254:    EVENT_PHASE_TWO                     = 2,
DEBUG:refactor.py:277:format_first_block_in_file():255:    EVENT_PHASE_THREE                   = 3,
DEBUG:refactor.py:277:format_first_block_in_file():256:
DEBUG:refactor.py:277:format_first_block_in_file():257:    CRITERIA_NOT_GETTING_OLDER          = 21001,
DEBUG:refactor.py:277:format_first_block_in_file():258:
DEBUG:refactor.py:277:format_first_block_in_file():259:    // YOGG-SARON (laugh)
DEBUG:refactor.py:277:format_first_block_in_file():260:    YS_P3_LUNATIC_GAZE                  = 15757,
DEBUG:refactor.py:277:format_first_block_in_file():261:
DEBUG:refactor.py:277:format_first_block_in_file():262:    DATA_GET_KEEPERS_COUNT              = 1,
DEBUG:refactor.py:277:format_first_block_in_file():263:    DATA_GET_CURRENT_ILLUSION           = 2,
DEBUG:refactor.py:277:format_first_block_in_file():264:    DATA_GET_SARA_PHASE                 = 3,
DEBUG:refactor.py:277:format_first_block_in_file():265:    DATA_GET_DRIVE_ME_CRAZY             = 4,
DEBUG:refactor.py:277:format_first_block_in_file():266:};
DEBUG:refactor.py:277:format_first_block_in_file():267:
DEBUG:refactor.py:277:format_first_block_in_file():268:struct LocationsXY
DEBUG:refactor.py:277:format_first_block_in_file():269:{
DEBUG:refactor.py:277:format_first_block_in_file():270:    float x, y, z;
DEBUG:refactor.py:277:format_first_block_in_file():271:};
DEBUG:refactor.py:277:format_first_block_in_file():272:
DEBUG:refactor.py:277:format_first_block_in_file():273:static LocationsXY yoggPortalLoc[] =
DEBUG:refactor.py:277:format_first_block_in_file():274:{
DEBUG:refactor.py:277:format_first_block_in_file():275:    {1970.48f, -9.75f, 325.5f},
DEBUG:refactor.py:277:format_first_block_in_file():276:    {1992.76f, -10.21f, 325.5f},
DEBUG:refactor.py:277:format_first_block_in_file():277:    {1995.53f, -39.78f, 325.5f},
DEBUG:refactor.py:277:format_first_block_in_file():278:    {1969.25f, -42.00f, 325.5f},
DEBUG:refactor.py:277:format_first_block_in_file():279:    {1960.62f, -32.00f, 325.5f},
DEBUG:refactor.py:277:format_first_block_in_file():280:    {1981.98f, -5.69f, 325.5f},
DEBUG:refactor.py:277:format_first_block_in_file():281:    {1982.78f, -45.73f, 325.5f},
DEBUG:refactor.py:277:format_first_block_in_file():282:    {2000.66f, -29.68f, 325.5f},
DEBUG:refactor.py:277:format_first_block_in_file():283:    {1999.88f, -19.61f, 325.5f},
DEBUG:refactor.py:277:format_first_block_in_file():284:    {1961.37f, -19.54f, 325.5f}
DEBUG:refactor.py:277:format_first_block_in_file():285:};
DEBUG:refactor.py:277:format_first_block_in_file():286:
DEBUG:refactor.py:277:format_first_block_in_file():287:enum Texts
DEBUG:refactor.py:277:format_first_block_in_file():288:{
DEBUG:refactor.py:277:format_first_block_in_file():289:    // Sara
DEBUG:refactor.py:277:format_first_block_in_file():290:    SAY_SARA_ULDUAR_SCREAM_0            = 0, // Unused
DEBUG:refactor.py:277:format_first_block_in_file():291:    SAY_SARA_ULDUAR_SCREAM_1            = 1, // Unused
DEBUG:refactor.py:277:format_first_block_in_file():292:    SAY_SARA_AGGRO                      = 2,
DEBUG:refactor.py:277:format_first_block_in_file():293:    SAY_SARA_FERVOR_HIT                 = 3,
DEBUG:refactor.py:277:format_first_block_in_file():294:    SAY_SARA_ANGER                      = 4, // Comment in DB is for BLESSING_HIT, but it's wrong.
DEBUG:refactor.py:277:format_first_block_in_file():295:    SAY_SARA_KILL                       = 5,
DEBUG:refactor.py:277:format_first_block_in_file():296:    SAY_SARA_TRANSFORM_1                = 6, // "I am the lucid dream."
DEBUG:refactor.py:277:format_first_block_in_file():297:    SAY_SARA_TRANSFORM_2                = 7, // "The monster in your nightmares."
DEBUG:refactor.py:277:format_first_block_in_file():298:    SAY_SARA_TRANSFORM_3                = 8, // "The fiend of a thousand faces."
DEBUG:refactor.py:277:format_first_block_in_file():299:    SAY_SARA_TRANSFORM_4                = 9, // "Cower before my true form."
DEBUG:refactor.py:277:format_first_block_in_file():300:    SAY_SARA_DEATH_RAY                  = 10,
DEBUG:refactor.py:277:format_first_block_in_file():301:    SAY_SARA_PSYCHOSIS_HIT              = 11,
DEBUG:refactor.py:277:format_first_block_in_file():302:
DEBUG:refactor.py:277:format_first_block_in_file():303:    // Voice of Yogg-Saron
DEBUG:refactor.py:277:format_first_block_in_file():304:    WHISPER_VOICE_PHASE_1_WIPE          = 0,
DEBUG:refactor.py:277:format_first_block_in_file():305:    WHISPER_VOICE_INSANE                = 1,
DEBUG:refactor.py:277:format_first_block_in_file():306:
DEBUG:refactor.py:277:format_first_block_in_file():307:    // Brain of Yogg-Saron
DEBUG:refactor.py:277:format_first_block_in_file():308:    EMOTE_YOGG_SARON_BRAIN_SHATTERED    = 0,
DEBUG:refactor.py:277:format_first_block_in_file():309:
DEBUG:refactor.py:277:format_first_block_in_file():310:    // Yogg-Saron
DEBUG:refactor.py:277:format_first_block_in_file():311:    SAY_YOGG_SARON_SPAWN                = 0,
DEBUG:refactor.py:277:format_first_block_in_file():312:    SAY_YOGG_SARON_MADNESS              = 1, // Open Portals
DEBUG:refactor.py:277:format_first_block_in_file():313:    EMOTE_YOGG_SARON_MADNESS            = 2,
DEBUG:refactor.py:277:format_first_block_in_file():314:    SAY_YOGG_SARON_PHASE_3              = 3,
DEBUG:refactor.py:277:format_first_block_in_file():315:    SAY_YOGG_SARON_DEAFENING_ROAR       = 4,
DEBUG:refactor.py:277:format_first_block_in_file():316:    EMOTE_YOGG_SARON_DEAFENING_ROAR     = 5,
DEBUG:refactor.py:277:format_first_block_in_file():317:    SAY_YOGG_SARON_DEATH                = 6,
DEBUG:refactor.py:277:format_first_block_in_file():318:    EMOTE_YOGG_SARON_EMPOWERING_SHADOWS = 7, // Shadow Beacon
DEBUG:refactor.py:277:format_first_block_in_file():319:    EMOTE_YOGG_SARON_BERSERK            = 8,
DEBUG:refactor.py:277:format_first_block_in_file():320:
DEBUG:refactor.py:277:format_first_block_in_file():321:    // Visions - Text is in order of Roleplay
DEBUG:refactor.py:277:format_first_block_in_file():322:    // The Assassination of King Llane vision
DEBUG:refactor.py:277:format_first_block_in_file():323:    SAY_GARONA_1                        = 0,
DEBUG:refactor.py:277:format_first_block_in_file():324:    SAY_GARONA_2                        = 1,
DEBUG:refactor.py:277:format_first_block_in_file():325:    SAY_GARONA_3                        = 2,
DEBUG:refactor.py:277:format_first_block_in_file():326:    SAY_YOGG_1                          = 0,
DEBUG:refactor.py:277:format_first_block_in_file():327:    SAY_YOGG_2                          = 1,
DEBUG:refactor.py:277:format_first_block_in_file():328:    SAY_LLANE_1                         = 0,
DEBUG:refactor.py:277:format_first_block_in_file():329:    SAY_GARONA_4                        = 3,
DEBUG:refactor.py:277:format_first_block_in_file():330:    SAY_YOGG_3                          = 2,
DEBUG:refactor.py:277:format_first_block_in_file():331:
DEBUG:refactor.py:277:format_first_block_in_file():332:    // The Forging of the Demon Soul vision
DEBUG:refactor.py:277:format_first_block_in_file():333:    SAY_NEL_1                           = 0,
DEBUG:refactor.py:277:format_first_block_in_file():334:    SAY_YAS_1                           = 0,
DEBUG:refactor.py:277:format_first_block_in_file():335:    SAY_NEL_2                           = 1,
DEBUG:refactor.py:277:format_first_block_in_file():336:    SAY_MAL_1                           = 0,
DEBUG:refactor.py:277:format_first_block_in_file():337:    SAY_YOGG_4                          = 5,
DEBUG:refactor.py:277:format_first_block_in_file():338:
DEBUG:refactor.py:277:format_first_block_in_file():339:    // The Tortured Champion vision
DEBUG:refactor.py:277:format_first_block_in_file():340:    SAY_LK_1                            = 0,
DEBUG:refactor.py:277:format_first_block_in_file():341:    SAY_IC_1                            = 0,
DEBUG:refactor.py:277:format_first_block_in_file():342:    SAY_IC_2                            = 1,
DEBUG:refactor.py:277:format_first_block_in_file():343:    SAY_LK_2                            = 1,
DEBUG:refactor.py:277:format_first_block_in_file():344:    SAY_YOGG_5                          = 3,
DEBUG:refactor.py:277:format_first_block_in_file():345:    SAY_YOGG_6                          = 4,
DEBUG:refactor.py:277:format_first_block_in_file():346:
DEBUG:refactor.py:277:format_first_block_in_file():347:};
DEBUG:refactor.py:277:format_first_block_in_file():348:
DEBUG:refactor.py:277:format_first_block_in_file():349:const Position Middle = {1980.28f, -25.5868f, 329.397f, M_PI * 1.5f};
DEBUG:refactor.py:277:format_first_block_in_file():350:
DEBUG:refactor.py:277:format_first_block_in_file():351:class boss_yoggsaron_sara : public CreatureScript
DEBUG:refactor.py:277:format_first_block_in_file():352:{
DEBUG:refactor.py:277:format_first_block_in_file():353:public:
DEBUG:refactor.py:277:format_first_block_in_file():354:    boss_yoggsaron_sara() : CreatureScript("boss_yoggsaron_sara") { }
DEBUG:refactor.py:277:format_first_block_in_file():355:
DEBUG:refactor.py:277:format_first_block_in_file():356:    CreatureAI* GetAI(Creature* pCreature) const override
DEBUG:refactor.py:277:format_first_block_in_file():357:    {
DEBUG:refactor.py:277:format_first_block_in_file():358:        return GetUlduarAI<boss_yoggsaron_saraAI>(pCreature);
DEBUG:refactor.py:277:format_first_block_in_file():359:    }
DEBUG:refactor.py:277:format_first_block_in_file():360:
DEBUG:refactor.py:277:format_first_block_in_file():361:    struct boss_yoggsaron_saraAI : public ScriptedAI
DEBUG:refactor.py:277:format_first_block_in_file():362:    {
DEBUG:refactor.py:277:format_first_block_in_file():363:        boss_yoggsaron_saraAI(Creature* pCreature) : ScriptedAI(pCreature), summons(pCreature)
DEBUG:refactor.py:277:format_first_block_in_file():364:        {
DEBUG:refactor.py:277:format_first_block_in_file():365:            m_pInstance = pCreature->GetInstanceScript();
DEBUG:refactor.py:277:format_first_block_in_file():366:        }
DEBUG:refactor.py:277:format_first_block_in_file():367:
DEBUG:refactor.py:277:format_first_block_in_file():368:        InstanceScript* m_pInstance;
DEBUG:refactor.py:277:format_first_block_in_file():369:        EventMap events;
DEBUG:refactor.py:277:format_first_block_in_file():370:        SummonList summons;
DEBUG:refactor.py:277:format_first_block_in_file():371:
DEBUG:refactor.py:277:format_first_block_in_file():372:        uint32 _initFight;
DEBUG:refactor.py:277:format_first_block_in_file():373:        uint8 _summonedGuardiansCount;
DEBUG:refactor.py:277:format_first_block_in_file():374:        uint32 _p2TalkTimer;
DEBUG:refactor.py:277:format_first_block_in_file():375:        bool _secondPhase;
DEBUG:refactor.py:277:format_first_block_in_file():376:        float _summonSpeed;
DEBUG:refactor.py:277:format_first_block_in_file():377:        uint8 _currentIllusion;
DEBUG:refactor.py:277:format_first_block_in_file():378:        bool _isIllusionReversed;
DEBUG:refactor.py:277:format_first_block_in_file():379:
DEBUG:refactor.py:277:format_first_block_in_file():380:        void AttackStart(Unit*) override { }
DEBUG:refactor.py:277:format_first_block_in_file():381:        void MoveInLineOfSight(Unit*) override { }
DEBUG:refactor.py:277:format_first_block_in_file():382:
DEBUG:refactor.py:277:format_first_block_in_file():383:        void JustSummoned(Creature* cr) override
DEBUG:refactor.py:277:format_first_block_in_file():384:        {
DEBUG:refactor.py:277:format_first_block_in_file():385:            summons.Summon(cr);
DEBUG:refactor.py:277:format_first_block_in_file():386:            if (cr->GetEntry() == NPC_SANITY_WELL)
DEBUG:refactor.py:277:format_first_block_in_file():387:                cr->ApplySpellImmune(0, IMMUNITY_STATE, SPELL_AURA_MOD_SCALE, true);
DEBUG:refactor.py:277:format_first_block_in_file():388:        }
DEBUG:refactor.py:277:format_first_block_in_file():389:
DEBUG:refactor.py:277:format_first_block_in_file():390:        void SpawnClouds()
DEBUG:refactor.py:277:format_first_block_in_file():391:        {
DEBUG:refactor.py:277:format_first_block_in_file():392:            for (uint8 i = 0; i < 6; ++i)
DEBUG:refactor.py:277:format_first_block_in_file():393:            {
DEBUG:refactor.py:277:format_first_block_in_file():394:                float Zplus = i > 2 ? (i - 2) * 1.6f : 0;
DEBUG:refactor.py:277:format_first_block_in_file():395:                if (i % 2)
DEBUG:refactor.py:277:format_first_block_in_file():396:                    me->SummonCreature(NPC_OMINOUS_CLOUD, me->GetPositionX() + 8 + i * 7, me->GetPositionY() + 8 + i * 7, 326 + Zplus, 0);
DEBUG:refactor.py:277:format_first_block_in_file():397:                else
DEBUG:refactor.py:277:format_first_block_in_file():398:                    me->SummonCreature(NPC_OMINOUS_CLOUD, me->GetPositionX() - 8 - i * 7, me->GetPositionY() - 8 - i * 7, 326 + Zplus, 0);
DEBUG:refactor.py:277:format_first_block_in_file():399:            }
DEBUG:refactor.py:277:format_first_block_in_file():400:        }
DEBUG:refactor.py:277:format_first_block_in_file():401:
DEBUG:refactor.py:277:format_first_block_in_file():402:        void EnterEvadeMode(EvadeReason why) override
DEBUG:refactor.py:277:format_first_block_in_file():403:        {
DEBUG:refactor.py:277:format_first_block_in_file():404:            if (!_EnterEvadeMode(why))
DEBUG:refactor.py:277:format_first_block_in_file():405:                return;
DEBUG:refactor.py:277:format_first_block_in_file():406:
DEBUG:refactor.py:277:format_first_block_in_file():407:            Position pos;
DEBUG:refactor.py:277:format_first_block_in_file():408:            pos = me->GetHomePosition();
DEBUG:refactor.py:277:format_first_block_in_file():409:            me->NearTeleportTo(pos.GetPositionX(), pos.GetPositionY(), pos.GetPositionZ(), pos.GetOrientation());
DEBUG:refactor.py:277:format_first_block_in_file():410:            Reset();
DEBUG:refactor.py:277:format_first_block_in_file():411:            me->setActive(false);
DEBUG:refactor.py:277:format_first_block_in_file():412:        }
DEBUG:refactor.py:277:format_first_block_in_file():413:
DEBUG:refactor.py:277:format_first_block_in_file():414:        void EnableSara(bool apply)
DEBUG:refactor.py:277:format_first_block_in_file():415:        {
DEBUG:refactor.py:277:format_first_block_in_file():416:            if (apply)
DEBUG:refactor.py:277:format_first_block_in_file():417:            {
DEBUG:refactor.py:277:format_first_block_in_file():418:                me->RemoveUnitFlag(UNIT_FLAG_DISABLE_MOVE);
DEBUG:refactor.py:277:format_first_block_in_file():419:                me->DisableRotate(false);
DEBUG:refactor.py:277:format_first_block_in_file():420:                me->ClearUnitState(UNIT_STATE_ROOT);
DEBUG:refactor.py:277:format_first_block_in_file():421:            }
DEBUG:refactor.py:277:format_first_block_in_file():422:            else
DEBUG:refactor.py:277:format_first_block_in_file():423:            {
DEBUG:refactor.py:277:format_first_block_in_file():424:                me->SetUnitFlag(UNIT_FLAG_DISABLE_MOVE);
DEBUG:refactor.py:277:format_first_block_in_file():425:                me->DisableRotate(true);
DEBUG:refactor.py:277:format_first_block_in_file():426:                me->AddUnitState(UNIT_STATE_ROOT);
DEBUG:refactor.py:277:format_first_block_in_file():427:            }
DEBUG:refactor.py:277:format_first_block_in_file():428:        }
DEBUG:refactor.py:277:format_first_block_in_file():429:
DEBUG:refactor.py:277:format_first_block_in_file():430:        void Reset() override
DEBUG:refactor.py:277:format_first_block_in_file():431:        {
DEBUG:refactor.py:277:format_first_block_in_file():432:            if (!_secondPhase) // Phase 1 wipe
DEBUG:refactor.py:277:format_first_block_in_file():433:            {
DEBUG:refactor.py:277:format_first_block_in_file():434:                me->GetMap()->DoForAllPlayers([&](Player* player)
DEBUG:refactor.py:277:format_first_block_in_file():435:                {
DEBUG:refactor.py:277:format_first_block_in_file():436:                    if (Creature* voice = me->FindNearestCreature(NPC_VOICE_OF_YOGG_SARON, 10.0f))
DEBUG:refactor.py:277:format_first_block_in_file():437:                    {
DEBUG:refactor.py:277:format_first_block_in_file():438:                        voice->AI()->Talk(WHISPER_VOICE_PHASE_1_WIPE, player);
DEBUG:refactor.py:277:format_first_block_in_file():439:                    }
DEBUG:refactor.py:277:format_first_block_in_file():440:                });
DEBUG:refactor.py:277:format_first_block_in_file():441:            }
DEBUG:refactor.py:277:format_first_block_in_file():442:
DEBUG:refactor.py:277:format_first_block_in_file():443:            summons.DoAction(ACTION_DESPAWN_ADDS);
DEBUG:refactor.py:277:format_first_block_in_file():444:            events.Reset();
DEBUG:refactor.py:277:format_first_block_in_file():445:            summons.DespawnAll();
DEBUG:refactor.py:277:format_first_block_in_file():446:
DEBUG:refactor.py:277:format_first_block_in_file():447:            me->SetVisible(true);
DEBUG:refactor.py:277:format_first_block_in_file():448:            me->SetDisplayId(me->GetNativeDisplayId());
DEBUG:refactor.py:277:format_first_block_in_file():449:            me->SetDisableGravity(true);
DEBUG:refactor.py:277:format_first_block_in_file():450:            EnableSara(false);
DEBUG:refactor.py:277:format_first_block_in_file():451:            SpawnClouds();
DEBUG:refactor.py:277:format_first_block_in_file():452:
DEBUG:refactor.py:277:format_first_block_in_file():453:            _initFight = 1;
DEBUG:refactor.py:277:format_first_block_in_file():454:
DEBUG:refactor.py:277:format_first_block_in_file():455:            _summonedGuardiansCount = 0;
DEBUG:refactor.py:277:format_first_block_in_file():456:            _p2TalkTimer = 0;
DEBUG:refactor.py:277:format_first_block_in_file():457:            _secondPhase = false;
DEBUG:refactor.py:277:format_first_block_in_file():458:            _summonSpeed = 1.0f;
DEBUG:refactor.py:277:format_first_block_in_file():459:            _currentIllusion = urand(1, 3);
DEBUG:refactor.py:277:format_first_block_in_file():460:            _isIllusionReversed = urand(0, 1);
DEBUG:refactor.py:277:format_first_block_in_file():461:
DEBUG:refactor.py:277:format_first_block_in_file():462:            if (m_pInstance)
DEBUG:refactor.py:277:format_first_block_in_file():463:            {
DEBUG:refactor.py:277:format_first_block_in_file():464:                m_pInstance->DoStopTimedAchievement(ACHIEVEMENT_TIMED_TYPE_EVENT, CRITERIA_NOT_GETTING_OLDER);
DEBUG:refactor.py:277:format_first_block_in_file():465:                m_pInstance->DoRemoveAurasDueToSpellOnPlayers(SPELL_SANITY);
DEBUG:refactor.py:277:format_first_block_in_file():466:                m_pInstance->SetData(TYPE_YOGGSARON, NOT_STARTED);
DEBUG:refactor.py:277:format_first_block_in_file():467:                if (GameObject* go = ObjectAccessor::GetGameObject(*me, m_pInstance->GetGuidData(GO_YOGG_SARON_DOORS)))
DEBUG:refactor.py:277:format_first_block_in_file():468:                    go->SetGoState(GO_STATE_ACTIVE);
DEBUG:refactor.py:277:format_first_block_in_file():469:            }
DEBUG:refactor.py:277:format_first_block_in_file():470:        }
DEBUG:refactor.py:277:format_first_block_in_file():471:
DEBUG:refactor.py:277:format_first_block_in_file():472:        void InitFight(Unit* target)
DEBUG:refactor.py:277:format_first_block_in_file():473:        {
DEBUG:refactor.py:277:format_first_block_in_file():474:            if (!m_pInstance)
DEBUG:refactor.py:277:format_first_block_in_file():475:                return;
DEBUG:refactor.py:277:format_first_block_in_file():476:
DEBUG:refactor.py:277:format_first_block_in_file():477:            // some simple hack checks
DEBUG:refactor.py:277:format_first_block_in_file():478:            if (m_pInstance->GetData(TYPE_VEZAX) != DONE || m_pInstance->GetData(TYPE_XT002) != DONE)
DEBUG:refactor.py:277:format_first_block_in_file():479:                return;
DEBUG:refactor.py:277:format_first_block_in_file():480:
DEBUG:refactor.py:277:format_first_block_in_file():481:            m_pInstance->DoStartTimedAchievement(ACHIEVEMENT_TIMED_TYPE_EVENT, CRITERIA_NOT_GETTING_OLDER);
DEBUG:refactor.py:277:format_first_block_in_file():482:            m_pInstance->SetData(TYPE_YOGGSARON, IN_PROGRESS);
DEBUG:refactor.py:277:format_first_block_in_file():483:            me->SetInCombatWithZone();
DEBUG:refactor.py:277:format_first_block_in_file():484:            AttackStart(target);
DEBUG:refactor.py:277:format_first_block_in_file():485:
DEBUG:refactor.py:277:format_first_block_in_file():486:            me->CastSpell(me, SPELL_SANITY_BASE, true);
DEBUG:refactor.py:277:format_first_block_in_file():487:
DEBUG:refactor.py:277:format_first_block_in_file():488:            events.ScheduleEvent(EVENT_SARA_P1_DOORS_CLOSE, 15s, 0, EVENT_PHASE_ONE);
DEBUG:refactor.py:277:format_first_block_in_file():489:            events.ScheduleEvent(EVENT_SARA_P1_BERSERK, 15min, 0, 0);
DEBUG:refactor.py:277:format_first_block_in_file():490:            events.ScheduleEvent(EVENT_SARA_P1_SUMMON, 0ms, 0, EVENT_PHASE_ONE);
DEBUG:refactor.py:277:format_first_block_in_file():491:            events.SetPhase(EVENT_PHASE_ONE);
DEBUG:refactor.py:277:format_first_block_in_file():492:
DEBUG:refactor.py:277:format_first_block_in_file():493:            Talk(SAY_SARA_AGGRO);
DEBUG:refactor.py:277:format_first_block_in_file():494:            me->setActive(true);
DEBUG:refactor.py:277:format_first_block_in_file():495:        }
DEBUG:refactor.py:277:format_first_block_in_file():496:
DEBUG:refactor.py:277:format_first_block_in_file():497:        void InformCloud()
DEBUG:refactor.py:277:format_first_block_in_file():498:        {
DEBUG:refactor.py:277:format_first_block_in_file():499:            Creature* cloud = nullptr;
DEBUG:refactor.py:277:format_first_block_in_file():500:            for (SummonList::const_iterator itr = summons.begin(); itr != summons.end();)
DEBUG:refactor.py:277:format_first_block_in_file():501:            {
DEBUG:refactor.py:277:format_first_block_in_file():502:                Creature* summon = ObjectAccessor::GetCreature(*me, *itr);
DEBUG:refactor.py:277:format_first_block_in_file():503:                ++itr;
DEBUG:refactor.py:277:format_first_block_in_file():504:                if (!summon || summon->GetEntry() != NPC_OMINOUS_CLOUD || me->GetDistance(summon) < 20)
DEBUG:refactor.py:277:format_first_block_in_file():505:                    continue;
DEBUG:refactor.py:277:format_first_block_in_file():506:
DEBUG:refactor.py:277:format_first_block_in_file():507:                if ((!cloud || (urand(0, 1) && !summon->HasAura(SPELL_SUMMON_GUARDIAN_OF_YS))))
DEBUG:refactor.py:277:format_first_block_in_file():508:                    cloud = summon;
DEBUG:refactor.py:277:format_first_block_in_file():509:            }
DEBUG:refactor.py:277:format_first_block_in_file():510:
DEBUG:refactor.py:277:format_first_block_in_file():511:            if (cloud)
DEBUG:refactor.py:277:format_first_block_in_file():512:                cloud->AI()->DoAction(ACTION_START_SUMMONING);
DEBUG:refactor.py:277:format_first_block_in_file():513:        }
DEBUG:refactor.py:277:format_first_block_in_file():514:
DEBUG:refactor.py:277:format_first_block_in_file():515:        void SpawnTentacle(uint32 entry)
DEBUG:refactor.py:277:format_first_block_in_file():516:        {
DEBUG:refactor.py:277:format_first_block_in_file():517:            uint32 dist = urand(38, 48);
DEBUG:refactor.py:277:format_first_block_in_file():518:            float o = rand_norm() * M_PI * 2;
DEBUG:refactor.py:277:format_first_block_in_file():519:            float Zplus = (dist - 38) / 6.5f;
DEBUG:refactor.py:277:format_first_block_in_file():520:            if (Creature* cr = me->SummonCreature(entry, me->GetPositionX() + dist * cos(o), me->GetPositionY() + dist * std::sin(o), 327.2 + Zplus, 0, TEMPSUMMON_CORPSE_TIMED_DESPAWN, 5000))
DEBUG:refactor.py:277:format_first_block_in_file():521:            {
DEBUG:refactor.py:277:format_first_block_in_file():522:                cr->CastSpell(cr, SPELL_TENTACLE_ERUPT, true);
DEBUG:refactor.py:277:format_first_block_in_file():523:                cr->CastSpell(cr, SPELL_VOID_ZONE_SMALL, true);
DEBUG:refactor.py:277:format_first_block_in_file():524:                cr->HandleEmoteCommand(EMOTE_ONESHOT_EMERGE);
DEBUG:refactor.py:277:format_first_block_in_file():525:            }
DEBUG:refactor.py:277:format_first_block_in_file():526:        }
DEBUG:refactor.py:277:format_first_block_in_file():527:
DEBUG:refactor.py:277:format_first_block_in_file():528:        void SummonDeathOrbs()
DEBUG:refactor.py:277:format_first_block_in_file():529:        {
DEBUG:refactor.py:277:format_first_block_in_file():530:            for (uint8 i = 0; i < 4; ++i)
DEBUG:refactor.py:277:format_first_block_in_file():531:            {
DEBUG:refactor.py:277:format_first_block_in_file():532:                uint32 dist = urand(38, 48);
DEBUG:refactor.py:277:format_first_block_in_file():533:                float o = rand_norm() * M_PI * 2;
DEBUG:refactor.py:277:format_first_block_in_file():534:                float Zplus = (dist - 38) / 6.5f;
DEBUG:refactor.py:277:format_first_block_in_file():535:                me->SummonCreature(NPC_DEATH_ORB, me->GetPositionX() + dist * cos(o), me->GetPositionY() + dist * std::sin(o), 327.2 + Zplus, 0, TEMPSUMMON_TIMED_DESPAWN, 20000);
DEBUG:refactor.py:277:format_first_block_in_file():536:            }
DEBUG:refactor.py:277:format_first_block_in_file():537:        }
DEBUG:refactor.py:277:format_first_block_in_file():538:
DEBUG:refactor.py:277:format_first_block_in_file():539:        void AddPortals()
DEBUG:refactor.py:277:format_first_block_in_file():540:        {
DEBUG:refactor.py:277:format_first_block_in_file():541:            _summonSpeed -= 0.1f;
DEBUG:refactor.py:277:format_first_block_in_file():542:            Creature* cr = nullptr;
DEBUG:refactor.py:277:format_first_block_in_file():543:
DEBUG:refactor.py:277:format_first_block_in_file():544:            // Spawn Portals
DEBUG:refactor.py:277:format_first_block_in_file():545:            for (uint8 i = 0; i < RAID_MODE(4, 10); ++i)
DEBUG:refactor.py:277:format_first_block_in_file():546:            {
DEBUG:refactor.py:277:format_first_block_in_file():547:                if ((cr = me->SummonCreature(NPC_DESCEND_INTO_MADNESS, yoggPortalLoc[i].x, yoggPortalLoc[i].y, yoggPortalLoc[i].z, 0, TEMPSUMMON_TIMED_DESPAWN, 25000)))
DEBUG:refactor.py:277:format_first_block_in_file():548:                {
DEBUG:refactor.py:277:format_first_block_in_file():549:                    cr->SetUnitFlag(UNIT_FLAG_DISABLE_MOVE | UNIT_FLAG_NON_ATTACKABLE);
DEBUG:refactor.py:277:format_first_block_in_file():550:                    cr->SetArmor(_currentIllusion);
DEBUG:refactor.py:277:format_first_block_in_file():551:                }
DEBUG:refactor.py:277:format_first_block_in_file():552:            }
DEBUG:refactor.py:277:format_first_block_in_file():553:
DEBUG:refactor.py:277:format_first_block_in_file():554:            EntryCheckPredicate pred(NPC_BRAIN_OF_YOGG_SARON);
DEBUG:refactor.py:277:format_first_block_in_file():555:            summons.DoAction(_currentIllusion, pred);
DEBUG:refactor.py:277:format_first_block_in_file():556:
DEBUG:refactor.py:277:format_first_block_in_file():557:            if (_isIllusionReversed)
DEBUG:refactor.py:277:format_first_block_in_file():558:                _currentIllusion = _currentIllusion == 3 ? 1 : (_currentIllusion + 1);
DEBUG:refactor.py:277:format_first_block_in_file():559:            else
DEBUG:refactor.py:277:format_first_block_in_file():560:                _currentIllusion = _currentIllusion == 1 ? 3 : (_currentIllusion - 1);
DEBUG:refactor.py:277:format_first_block_in_file():561:        }
DEBUG:refactor.py:277:format_first_block_in_file():562:
DEBUG:refactor.py:277:format_first_block_in_file():563:        void KilledUnit(Unit* who) override
DEBUG:refactor.py:277:format_first_block_in_file():564:        {
DEBUG:refactor.py:277:format_first_block_in_file():565:            if (who->IsPlayer())
DEBUG:refactor.py:277:format_first_block_in_file():566:            {
DEBUG:refactor.py:277:format_first_block_in_file():567:                Talk(SAY_SARA_KILL);
DEBUG:refactor.py:277:format_first_block_in_file():568:            }
DEBUG:refactor.py:277:format_first_block_in_file():569:        }
DEBUG:refactor.py:277:format_first_block_in_file():570:
DEBUG:refactor.py:277:format_first_block_in_file():571:        void SpellHitTarget(Unit* target, SpellInfo const* spellInfo) override
DEBUG:refactor.py:277:format_first_block_in_file():572:        {
DEBUG:refactor.py:277:format_first_block_in_file():573:            if (spellInfo->Id == SPELL_SANITY)
DEBUG:refactor.py:277:format_first_block_in_file():574:                if (Aura* aur = target->GetAura(SPELL_SANITY))
DEBUG:refactor.py:277:format_first_block_in_file():575:                    aur->SetStackAmount(100);
DEBUG:refactor.py:277:format_first_block_in_file():576:        }
DEBUG:refactor.py:277:format_first_block_in_file():577:
DEBUG:refactor.py:277:format_first_block_in_file():578:        uint32 GetData(uint32 param) const override
DEBUG:refactor.py:277:format_first_block_in_file():579:        {
DEBUG:refactor.py:277:format_first_block_in_file():580:            if (param == DATA_GET_KEEPERS_COUNT)
DEBUG:refactor.py:277:format_first_block_in_file():581:            {
DEBUG:refactor.py:277:format_first_block_in_file():582:                uint8 _count = 0;
DEBUG:refactor.py:277:format_first_block_in_file():583:                for (uint8 i = 0; i < 4; ++i)
DEBUG:refactor.py:277:format_first_block_in_file():584:                    if (m_pInstance->GetData(TYPE_WATCHERS) & (1 << i))
DEBUG:refactor.py:277:format_first_block_in_file():585:                        ++_count;
DEBUG:refactor.py:277:format_first_block_in_file():586:                return _count;
DEBUG:refactor.py:277:format_first_block_in_file():587:            }
DEBUG:refactor.py:277:format_first_block_in_file():588:            else if (param == DATA_GET_SARA_PHASE)
DEBUG:refactor.py:277:format_first_block_in_file():589:                return _secondPhase;
DEBUG:refactor.py:277:format_first_block_in_file():590:
DEBUG:refactor.py:277:format_first_block_in_file():591:            return 4; // just to be sure, return max numer of keepers
DEBUG:refactor.py:277:format_first_block_in_file():592:        }
DEBUG:refactor.py:277:format_first_block_in_file():593:
DEBUG:refactor.py:277:format_first_block_in_file():594:        void DoAction(int32 param) override
DEBUG:refactor.py:277:format_first_block_in_file():595:        {
DEBUG:refactor.py:277:format_first_block_in_file():596:            if (param == ACTION_BRAIN_DAMAGED)
DEBUG:refactor.py:277:format_first_block_in_file():597:            {
DEBUG:refactor.py:277:format_first_block_in_file():598:                summons.DoAction(ACTION_REMOVE_STUN);
DEBUG:refactor.py:277:format_first_block_in_file():599:
DEBUG:refactor.py:277:format_first_block_in_file():600:                EntryCheckPredicate pred2(NPC_YOGG_SARON);
DEBUG:refactor.py:277:format_first_block_in_file():601:                summons.DoAction(ACTION_YOGG_SARON_START_P3, pred2);
DEBUG:refactor.py:277:format_first_block_in_file():602:
DEBUG:refactor.py:277:format_first_block_in_file():603:                if (Creature* cr = ObjectAccessor::GetCreature(*me, m_pInstance->GetGuidData(NPC_THORIM_KEEPER)))
DEBUG:refactor.py:277:format_first_block_in_file():604:                    cr->CastSpell(cr, SPELL_TITANIC_STORM_PASSIVE, false);
DEBUG:refactor.py:277:format_first_block_in_file():605:
DEBUG:refactor.py:277:format_first_block_in_file():606:                if (me->GetMap()->Is25ManRaid() && (GetData(DATA_GET_KEEPERS_COUNT) > 0))
DEBUG:refactor.py:277:format_first_block_in_file():607:                    summons.DoAction(ACTION_YOGG_SARON_HARD_MODE, pred2);
DEBUG:refactor.py:277:format_first_block_in_file():608:
DEBUG:refactor.py:277:format_first_block_in_file():609:                summons.DespawnEntry(NPC_DEATH_ORB);
DEBUG:refactor.py:277:format_first_block_in_file():610:                events.SetPhase(EVENT_PHASE_THREE);
DEBUG:refactor.py:277:format_first_block_in_file():611:
DEBUG:refactor.py:277:format_first_block_in_file():612:                me->RemoveAllAuras();
DEBUG:refactor.py:277:format_first_block_in_file():613:                me->SetVisible(false);
DEBUG:refactor.py:277:format_first_block_in_file():614:                return;
DEBUG:refactor.py:277:format_first_block_in_file():615:            }
DEBUG:refactor.py:277:format_first_block_in_file():616:            else if (param == ACTION_YOGG_SARON_DEATH)
DEBUG:refactor.py:277:format_first_block_in_file():617:            {
DEBUG:refactor.py:277:format_first_block_in_file():618:                summons.DespawnEntry(NPC_VOICE_OF_YOGG_SARON);
DEBUG:refactor.py:277:format_first_block_in_file():619:                summons.DespawnEntry(NPC_BRAIN_OF_YOGG_SARON);
DEBUG:refactor.py:277:format_first_block_in_file():620:                summons.DespawnEntry(NPC_SANITY_WELL);
DEBUG:refactor.py:277:format_first_block_in_file():621:                me->KillSelf();
DEBUG:refactor.py:277:format_first_block_in_file():622:                return;
DEBUG:refactor.py:277:format_first_block_in_file():623:            }
DEBUG:refactor.py:277:format_first_block_in_file():624:
DEBUG:refactor.py:277:format_first_block_in_file():625:            // Determine shatter duration
DEBUG:refactor.py:277:format_first_block_in_file():626:            if (param <= 0)
DEBUG:refactor.py:277:format_first_block_in_file():627:                return;
DEBUG:refactor.py:277:format_first_block_in_file():628:
DEBUG:refactor.py:277:format_first_block_in_file():629:            // Illusion shatters (param - stun time)
DEBUG:refactor.py:277:format_first_block_in_file():630:            if (Creature* yoggb = ObjectAccessor::GetCreature(*me, me->GetInstanceScript()->GetGuidData(NPC_BRAIN_OF_YOGG_SARON)))
DEBUG:refactor.py:277:format_first_block_in_file():631:            {
DEBUG:refactor.py:277:format_first_block_in_file():632:                yoggb->AI()->Talk(EMOTE_YOGG_SARON_BRAIN_SHATTERED);
DEBUG:refactor.py:277:format_first_block_in_file():633:            }
DEBUG:refactor.py:277:format_first_block_in_file():634:
DEBUG:refactor.py:277:format_first_block_in_file():635:            uint32 timer = events.GetNextEventTime(EVENT_SARA_P2_OPEN_PORTALS);
DEBUG:refactor.py:277:format_first_block_in_file():636:            uint32 portalTime = (timer > events.GetTimer() ? timer - events.GetTimer() : 0);
DEBUG:refactor.py:277:format_first_block_in_file():637:            events.DelayEvents(param + 100);
DEBUG:refactor.py:277:format_first_block_in_file():638:            events.RescheduleEvent(EVENT_SARA_P2_OPEN_PORTALS, portalTime, 0, EVENT_PHASE_TWO);
DEBUG:refactor.py:277:format_first_block_in_file():639:            events.ScheduleEvent(EVENT_SARA_P2_REMOVE_STUN, param, 0, EVENT_PHASE_TWO);
DEBUG:refactor.py:277:format_first_block_in_file():640:            me->CastSpell(me, SPELL_SHATTERED_ILLUSION, true);
DEBUG:refactor.py:277:format_first_block_in_file():641:        }
DEBUG:refactor.py:277:format_first_block_in_file():642:
DEBUG:refactor.py:277:format_first_block_in_file():643:        void DamageTaken(Unit* who, uint32& damage, DamageEffectType, SpellSchoolMask) override
DEBUG:refactor.py:277:format_first_block_in_file():644:        {
DEBUG:refactor.py:277:format_first_block_in_file():645:            if (who && who->GetEntry() == NPC_GUARDIAN_OF_YS && !_secondPhase)
DEBUG:refactor.py:277:format_first_block_in_file():646:            {
DEBUG:refactor.py:277:format_first_block_in_file():647:                damage = 25000;
DEBUG:refactor.py:277:format_first_block_in_file():648:
DEBUG:refactor.py:277:format_first_block_in_file():649:                // START PHASE 2
DEBUG:refactor.py:277:format_first_block_in_file():650:                if (me->GetHealth() <= damage)
DEBUG:refactor.py:277:format_first_block_in_file():651:                {
DEBUG:refactor.py:277:format_first_block_in_file():652:                    _secondPhase = true;
DEBUG:refactor.py:277:format_first_block_in_file():653:                    damage = 0;
DEBUG:refactor.py:277:format_first_block_in_file():654:
DEBUG:refactor.py:277:format_first_block_in_file():655:                    events.SetPhase(EVENT_PHASE_TWO);
DEBUG:refactor.py:277:format_first_block_in_file():656:                    me->SetHealth(me->GetMaxHealth());
DEBUG:refactor.py:277:format_first_block_in_file():657:
DEBUG:refactor.py:277:format_first_block_in_file():658:                    if (Creature* cr = me->SummonCreature(NPC_YOGG_SARON, me->GetPositionX(), me->GetPositionY(), me->GetPositionZ(), M_PI))
DEBUG:refactor.py:277:format_first_block_in_file():659:                        cr->SetVisible(false);
DEBUG:refactor.py:277:format_first_block_in_file():660:
DEBUG:refactor.py:277:format_first_block_in_file():661:                    _p2TalkTimer++;
DEBUG:refactor.py:277:format_first_block_in_file():662:                    Talk(SAY_SARA_TRANSFORM_1);
DEBUG:refactor.py:277:format_first_block_in_file():663:                }
DEBUG:refactor.py:277:format_first_block_in_file():664:                return;
DEBUG:refactor.py:277:format_first_block_in_file():665:            }
DEBUG:refactor.py:277:format_first_block_in_file():666:
DEBUG:refactor.py:277:format_first_block_in_file():667:            damage = 0;
DEBUG:refactor.py:277:format_first_block_in_file():668:        }
DEBUG:refactor.py:277:format_first_block_in_file():669:
DEBUG:refactor.py:277:format_first_block_in_file():670:        void UpdateAI(uint32 diff) override
DEBUG:refactor.py:277:format_first_block_in_file():671:        {
DEBUG:refactor.py:277:format_first_block_in_file():672:            if (_initFight)
DEBUG:refactor.py:277:format_first_block_in_file():673:            {
DEBUG:refactor.py:277:format_first_block_in_file():674:                _initFight += diff;
DEBUG:refactor.py:277:format_first_block_in_file():675:                if (_initFight > 5000)
DEBUG:refactor.py:277:format_first_block_in_file():676:                {
DEBUG:refactor.py:277:format_first_block_in_file():677:                    if (Unit* target = SelectTargetFromPlayerList(90))
DEBUG:refactor.py:277:format_first_block_in_file():678:                    {
DEBUG:refactor.py:277:format_first_block_in_file():679:                        _initFight = 0;
DEBUG:refactor.py:277:format_first_block_in_file():680:                        InitFight(target);
DEBUG:refactor.py:277:format_first_block_in_file():681:                    }
DEBUG:refactor.py:277:format_first_block_in_file():682:                    else
DEBUG:refactor.py:277:format_first_block_in_file():683:                        _initFight = 1;
DEBUG:refactor.py:277:format_first_block_in_file():684:                }
DEBUG:refactor.py:277:format_first_block_in_file():685:                return;
DEBUG:refactor.py:277:format_first_block_in_file():686:            }
DEBUG:refactor.py:277:format_first_block_in_file():687:
DEBUG:refactor.py:277:format_first_block_in_file():688:            if (!SelectTargetFromPlayerList(90, SPELL_INSANE1))
DEBUG:refactor.py:277:format_first_block_in_file():689:            {
DEBUG:refactor.py:277:format_first_block_in_file():690:                m_pInstance->DoRemoveAurasDueToSpellOnPlayers(SPELL_INSANE1);
DEBUG:refactor.py:277:format_first_block_in_file():691:                EnterEvadeMode(EVADE_REASON_OTHER);
DEBUG:refactor.py:277:format_first_block_in_file():692:                return;
DEBUG:refactor.py:277:format_first_block_in_file():693:            }
DEBUG:refactor.py:277:format_first_block_in_file():694:
DEBUG:refactor.py:277:format_first_block_in_file():695:            if (_p2TalkTimer)
DEBUG:refactor.py:277:format_first_block_in_file():696:            {
DEBUG:refactor.py:277:format_first_block_in_file():697:                _p2TalkTimer += diff;
DEBUG:refactor.py:277:format_first_block_in_file():698:                if (_p2TalkTimer >= 4000 && _p2TalkTimer < 20000)
DEBUG:refactor.py:277:format_first_block_in_file():699:                {
DEBUG:refactor.py:277:format_first_block_in_file():700:                    EntryCheckPredicate pred(NPC_OMINOUS_CLOUD);
DEBUG:refactor.py:277:format_first_block_in_file():701:                    summons.DoAction(ACTION_UNSUMMON_CLOUDS, pred);
DEBUG:refactor.py:277:format_first_block_in_file():702:                    Talk(SAY_SARA_TRANSFORM_2);
DEBUG:refactor.py:277:format_first_block_in_file():703:                    _p2TalkTimer = 20000;
DEBUG:refactor.py:277:format_first_block_in_file():704:                }
DEBUG:refactor.py:277:format_first_block_in_file():705:                else if (_p2TalkTimer >= 25000 && _p2TalkTimer < 40000)
DEBUG:refactor.py:277:format_first_block_in_file():706:                {
DEBUG:refactor.py:277:format_first_block_in_file():707:                    summons.DespawnEntry(NPC_OMINOUS_CLOUD);
DEBUG:refactor.py:277:format_first_block_in_file():708:                    Talk(SAY_SARA_TRANSFORM_3);
DEBUG:refactor.py:277:format_first_block_in_file():709:                    _p2TalkTimer = 40000;
DEBUG:refactor.py:277:format_first_block_in_file():710:                }
DEBUG:refactor.py:277:format_first_block_in_file():711:                else if (_p2TalkTimer >= 44500 && _p2TalkTimer < 60000)
DEBUG:refactor.py:277:format_first_block_in_file():712:                {
DEBUG:refactor.py:277:format_first_block_in_file():713:                    Talk(SAY_SARA_TRANSFORM_4);
DEBUG:refactor.py:277:format_first_block_in_file():714:                    _p2TalkTimer = 60000;
DEBUG:refactor.py:277:format_first_block_in_file():715:                }
DEBUG:refactor.py:277:format_first_block_in_file():716:                else if (_p2TalkTimer >= 64000)
DEBUG:refactor.py:277:format_first_block_in_file():717:                {
DEBUG:refactor.py:277:format_first_block_in_file():718:                    EntryCheckPredicate pred(NPC_YOGG_SARON);
DEBUG:refactor.py:277:format_first_block_in_file():719:                    summons.DoAction(ACTION_YOGG_SARON_START_YELL, pred);
DEBUG:refactor.py:277:format_first_block_in_file():720:                    _p2TalkTimer = 0;
DEBUG:refactor.py:277:format_first_block_in_file():721:                    events.ScheduleEvent(EVENT_SARA_P2_START, 500ms, 0, EVENT_PHASE_TWO);
DEBUG:refactor.py:277:format_first_block_in_file():722:                }
DEBUG:refactor.py:277:format_first_block_in_file():723:                return;
DEBUG:refactor.py:277:format_first_block_in_file():724:            }
DEBUG:refactor.py:277:format_first_block_in_file():725:
DEBUG:refactor.py:277:format_first_block_in_file():726:            events.Update(diff);
DEBUG:refactor.py:277:format_first_block_in_file():727:            if (me->HasUnitState(UNIT_STATE_CASTING))
DEBUG:refactor.py:277:format_first_block_in_file():728:                return;
DEBUG:refactor.py:277:format_first_block_in_file():729:
DEBUG:refactor.py:277:format_first_block_in_file():730:            switch(events.ExecuteEvent())
DEBUG:refactor.py:277:format_first_block_in_file():731:            {
DEBUG:refactor.py:277:format_first_block_in_file():732:                case EVENT_SARA_P1_DOORS_CLOSE:
DEBUG:refactor.py:277:format_first_block_in_file():733:                    // Whispers of YS
DEBUG:refactor.py:277:format_first_block_in_file():734:                    me->SummonCreature(NPC_VOICE_OF_YOGG_SARON, me->GetPositionX(), me->GetPositionY(), me->GetPositionZ());
DEBUG:refactor.py:277:format_first_block_in_file():735:
DEBUG:refactor.py:277:format_first_block_in_file():736:                    if (m_pInstance)
DEBUG:refactor.py:277:format_first_block_in_file():737:                        if (GameObject* go = ObjectAccessor::GetGameObject(*me, m_pInstance->GetGuidData(GO_YOGG_SARON_DOORS)))
DEBUG:refactor.py:277:format_first_block_in_file():738:                            go->SetGoState(GO_STATE_READY);
DEBUG:refactor.py:277:format_first_block_in_file():739:
DEBUG:refactor.py:277:format_first_block_in_file():740:                    events.ScheduleEvent(EVENT_SARA_P1_SPELLS, 0ms, 1, EVENT_PHASE_ONE);
DEBUG:refactor.py:277:format_first_block_in_file():741:                    break;
DEBUG:refactor.py:277:format_first_block_in_file():742:                case EVENT_SARA_P1_SUMMON:
DEBUG:refactor.py:277:format_first_block_in_file():743:                    events.RepeatEvent(20000 - (std::min(_summonedGuardiansCount, (uint8)5) * 2000));
DEBUG:refactor.py:277:format_first_block_in_file():744:                    ++_summonedGuardiansCount;
DEBUG:refactor.py:277:format_first_block_in_file():745:                    InformCloud();
DEBUG:refactor.py:277:format_first_block_in_file():746:                    break;
DEBUG:refactor.py:277:format_first_block_in_file():747:                case EVENT_SARA_P1_SPELLS:
DEBUG:refactor.py:277:format_first_block_in_file():748:                    {
DEBUG:refactor.py:277:format_first_block_in_file():749:                        uint32 spell = RAND(SPELL_SARAS_ANGER_TARGET_SELECTOR, SPELL_SARAS_BLESSING_TARGET_SELECTOR, SPELL_SARAS_FAVOR_TARGET_SELECTOR);
DEBUG:refactor.py:277:format_first_block_in_file():750:                        if (urand(0, 2))
DEBUG:refactor.py:277:format_first_block_in_file():751:                        {
DEBUG:refactor.py:277:format_first_block_in_file():752:                            if (spell == SPELL_SARAS_ANGER_TARGET_SELECTOR)
DEBUG:refactor.py:277:format_first_block_in_file():753:                            {
DEBUG:refactor.py:277:format_first_block_in_file():754:                                Talk(SAY_SARA_ANGER);
DEBUG:refactor.py:277:format_first_block_in_file():755:                            }
DEBUG:refactor.py:277:format_first_block_in_file():756:                            else if (spell == SPELL_SARAS_FAVOR_TARGET_SELECTOR)
DEBUG:refactor.py:277:format_first_block_in_file():757:                            {
DEBUG:refactor.py:277:format_first_block_in_file():758:                                Talk(SAY_SARA_FERVOR_HIT);
DEBUG:refactor.py:277:format_first_block_in_file():759:                            }
DEBUG:refactor.py:277:format_first_block_in_file():760:                        }
DEBUG:refactor.py:277:format_first_block_in_file():761:
DEBUG:refactor.py:277:format_first_block_in_file():762:                        me->CastCustomSpell(spell, SPELLVALUE_MAX_TARGETS, 1, nullptr, false);
DEBUG:refactor.py:277:format_first_block_in_file():763:                        events.RepeatEvent(me->GetMap()->Is25ManRaid() ? urand(0, 3000) : 4000 + urand(0, 2000));
DEBUG:refactor.py:277:format_first_block_in_file():764:                        break;
DEBUG:refactor.py:277:format_first_block_in_file():765:                    }
DEBUG:refactor.py:277:format_first_block_in_file():766:                case EVENT_SARA_P2_START:
DEBUG:refactor.py:277:format_first_block_in_file():767:                    {
DEBUG:refactor.py:277:format_first_block_in_file():768:                        EntryCheckPredicate pred(NPC_YOGG_SARON);
DEBUG:refactor.py:277:format_first_block_in_file():769:                        summons.DoAction(ACTION_YOGG_SARON_APPEAR, pred);
DEBUG:refactor.py:277:format_first_block_in_file():770:                        events.RescheduleEvent(EVENT_SARA_P2_SPAWN_START_TENTACLES, 500, 0, EVENT_PHASE_TWO);
DEBUG:refactor.py:277:format_first_block_in_file():771:
DEBUG:refactor.py:277:format_first_block_in_file():772:                        // Spawn Brain!
DEBUG:refactor.py:277:format_first_block_in_file():773:                        me->SummonCreature(NPC_BRAIN_OF_YOGG_SARON, 1981.3f, -25.43f, 265);
DEBUG:refactor.py:277:format_first_block_in_file():774:                        break;
DEBUG:refactor.py:277:format_first_block_in_file():775:                    }
DEBUG:refactor.py:277:format_first_block_in_file():776:                case EVENT_SARA_P2_MALADY:
DEBUG:refactor.py:277:format_first_block_in_file():777:                    me->CastCustomSpell(SPELL_MALADY_OF_THE_MIND, SPELLVALUE_MAX_TARGETS, 1, me, false);
DEBUG:refactor.py:277:format_first_block_in_file():778:                    events.Repeat(20s);
DEBUG:refactor.py:277:format_first_block_in_file():779:                    break;
DEBUG:refactor.py:277:format_first_block_in_file():780:                case EVENT_SARA_P2_PSYCHOSIS:
DEBUG:refactor.py:277:format_first_block_in_file():781:                    if ((urand(0, 9)) == 0)  // Rarely said (as it's casted every 3.5s)
DEBUG:refactor.py:277:format_first_block_in_file():782:                    {
DEBUG:refactor.py:277:format_first_block_in_file():783:                        Talk(SAY_SARA_PSYCHOSIS_HIT);
DEBUG:refactor.py:277:format_first_block_in_file():784:                    }
DEBUG:refactor.py:277:format_first_block_in_file():785:                    me->CastCustomSpell(SPELL_PSYCHOSIS, SPELLVALUE_MAX_TARGETS, 1, me, false);
DEBUG:refactor.py:277:format_first_block_in_file():786:                    events.Repeat(3500ms);
DEBUG:refactor.py:277:format_first_block_in_file():787:                    break;
DEBUG:refactor.py:277:format_first_block_in_file():788:                case EVENT_SARA_P2_DEATH_RAY:
DEBUG:refactor.py:277:format_first_block_in_file():789:                    Talk(SAY_SARA_DEATH_RAY);
DEBUG:refactor.py:277:format_first_block_in_file():790:                    SummonDeathOrbs();
DEBUG:refactor.py:277:format_first_block_in_file():791:                    events.Repeat(20s);
DEBUG:refactor.py:277:format_first_block_in_file():792:                    break;
DEBUG:refactor.py:277:format_first_block_in_file():793:                case EVENT_SARA_P2_SUMMON_T1: // CRUSHER
DEBUG:refactor.py:277:format_first_block_in_file():794:                    SpawnTentacle(NPC_CRUSHER_TENTACLE);
DEBUG:refactor.py:277:format_first_block_in_file():795:                    events.RepeatEvent((50000 + urand(0, 10000)) * _summonSpeed);
DEBUG:refactor.py:277:format_first_block_in_file():796:                    break;
DEBUG:refactor.py:277:format_first_block_in_file():797:                case EVENT_SARA_P2_SUMMON_T2: // CONSTRICTOR
DEBUG:refactor.py:277:format_first_block_in_file():798:                    SpawnTentacle(NPC_CONSTRICTOR_TENTACLE);
DEBUG:refactor.py:277:format_first_block_in_file():799:                    events.RepeatEvent((15000 + urand(0, 5000)) * _summonSpeed);
DEBUG:refactor.py:277:format_first_block_in_file():800:                    break;
DEBUG:refactor.py:277:format_first_block_in_file():801:                case EVENT_SARA_P2_SUMMON_T3: // CORRUPTOR
DEBUG:refactor.py:277:format_first_block_in_file():802:                    SpawnTentacle(NPC_CORRUPTOR_TENTACLE);
DEBUG:refactor.py:277:format_first_block_in_file():803:                    events.RepeatEvent((30000 + urand(0, 10000)) * _summonSpeed);
DEBUG:refactor.py:277:format_first_block_in_file():804:                    break;
DEBUG:refactor.py:277:format_first_block_in_file():805:                case EVENT_SARA_P2_BRAIN_LINK:
DEBUG:refactor.py:277:format_first_block_in_file():806:                    me->CastCustomSpell(SPELL_BRAIN_LINK, SPELLVALUE_MAX_TARGETS, 1, me, false);
DEBUG:refactor.py:277:format_first_block_in_file():807:                    events.Repeat(30s);
DEBUG:refactor.py:277:format_first_block_in_file():808:                    break;
DEBUG:refactor.py:277:format_first_block_in_file():809:                case EVENT_SARA_P2_OPEN_PORTALS:
DEBUG:refactor.py:277:format_first_block_in_file():810:                    {
DEBUG:refactor.py:277:format_first_block_in_file():811:                        AddPortals();
DEBUG:refactor.py:277:format_first_block_in_file():812:                        EntryCheckPredicate pred(NPC_YOGG_SARON);
DEBUG:refactor.py:277:format_first_block_in_file():813:                        summons.DoAction(ACTION_YOGG_SARON_OPEN_PORTAL_YELL, pred);
DEBUG:refactor.py:277:format_first_block_in_file():814:                        events.Repeat(80s);
DEBUG:refactor.py:277:format_first_block_in_file():815:                        break;
DEBUG:refactor.py:277:format_first_block_in_file():816:                    }
DEBUG:refactor.py:277:format_first_block_in_file():817:                case EVENT_SARA_P2_REMOVE_STUN:
DEBUG:refactor.py:277:format_first_block_in_file():818:                    {
DEBUG:refactor.py:277:format_first_block_in_file():819:                        me->RemoveAura(SPELL_SHATTERED_ILLUSION);
DEBUG:refactor.py:277:format_first_block_in_file():820:                        summons.DoAction(ACTION_REMOVE_STUN);
DEBUG:refactor.py:277:format_first_block_in_file():821:                        break;
DEBUG:refactor.py:277:format_first_block_in_file():822:                    }
DEBUG:refactor.py:277:format_first_block_in_file():823:                case EVENT_SARA_P2_SPAWN_START_TENTACLES:
DEBUG:refactor.py:277:format_first_block_in_file():824:                    me->SetOrientation(M_PI);
DEBUG:refactor.py:277:format_first_block_in_file():825:                    me->SetDisplayId(SARA_TRANSFORM_MODEL);
DEBUG:refactor.py:277:format_first_block_in_file():826:
DEBUG:refactor.py:277:format_first_block_in_file():827:                    me->NearTeleportTo(me->GetPositionX(), me->GetPositionY(), 355, me->GetOrientation());
DEBUG:refactor.py:277:format_first_block_in_file():828:                    me->SetPosition(me->GetPositionX(), me->GetPositionY(), 355, me->GetOrientation());
DEBUG:refactor.py:277:format_first_block_in_file():829:
DEBUG:refactor.py:277:format_first_block_in_file():830:                    SpawnTentacle(NPC_CRUSHER_TENTACLE);
DEBUG:refactor.py:277:format_first_block_in_file():831:                    SpawnTentacle(NPC_CONSTRICTOR_TENTACLE);
DEBUG:refactor.py:277:format_first_block_in_file():832:                    SpawnTentacle(NPC_CORRUPTOR_TENTACLE);
DEBUG:refactor.py:277:format_first_block_in_file():833:                    SpawnTentacle(NPC_CORRUPTOR_TENTACLE);
DEBUG:refactor.py:277:format_first_block_in_file():834:
DEBUG:refactor.py:277:format_first_block_in_file():835:                    events.ScheduleEvent(EVENT_SARA_P2_MALADY, 7s, 0, EVENT_PHASE_TWO);
DEBUG:refactor.py:277:format_first_block_in_file():836:                    events.ScheduleEvent(EVENT_SARA_P2_PSYCHOSIS, 3s, 0, EVENT_PHASE_TWO);
DEBUG:refactor.py:277:format_first_block_in_file():837:                    events.ScheduleEvent(EVENT_SARA_P2_DEATH_RAY, 15s, 0, EVENT_PHASE_TWO);
DEBUG:refactor.py:277:format_first_block_in_file():838:                    events.ScheduleEvent(EVENT_SARA_P2_SUMMON_T1, 50s, 60s, 0, EVENT_PHASE_TWO);
DEBUG:refactor.py:277:format_first_block_in_file():839:                    events.ScheduleEvent(EVENT_SARA_P2_SUMMON_T2, 15s, 20s, 0, EVENT_PHASE_TWO);
DEBUG:refactor.py:277:format_first_block_in_file():840:                    events.ScheduleEvent(EVENT_SARA_P2_SUMMON_T3, 30000 + urand(0, 10000), 0, EVENT_PHASE_TWO);
DEBUG:refactor.py:277:format_first_block_in_file():841:                    events.ScheduleEvent(EVENT_SARA_P2_BRAIN_LINK, 0, 0, EVENT_PHASE_TWO);
DEBUG:refactor.py:277:format_first_block_in_file():842:                    events.ScheduleEvent(EVENT_SARA_P2_OPEN_PORTALS, 60000, 0, EVENT_PHASE_TWO);
DEBUG:refactor.py:277:format_first_block_in_file():843:                    break;
DEBUG:refactor.py:277:format_first_block_in_file():844:                case EVENT_SARA_P1_BERSERK:
DEBUG:refactor.py:277:format_first_block_in_file():845:                    if (me->GetInstanceScript())
DEBUG:refactor.py:277:format_first_block_in_file():846:                    {
DEBUG:refactor.py:277:format_first_block_in_file():847:                        if (Creature* yogg = ObjectAccessor::GetCreature(*me, me->GetInstanceScript()->GetGuidData(TYPE_YOGGSARON)))
DEBUG:refactor.py:277:format_first_block_in_file():848:                        {
DEBUG:refactor.py:277:format_first_block_in_file():849:                            yogg->AI()->Talk(EMOTE_YOGG_SARON_BERSERK);
DEBUG:refactor.py:277:format_first_block_in_file():850:                        }
DEBUG:refactor.py:277:format_first_block_in_file():851:                    }
DEBUG:refactor.py:277:format_first_block_in_file():852:                    me->CastSpell(me, SPELL_EXTINGUISH_ALL_LIFE, true);
DEBUG:refactor.py:277:format_first_block_in_file():853:                    events.Repeat(5s);
DEBUG:refactor.py:277:format_first_block_in_file():854:                    break;
DEBUG:refactor.py:277:format_first_block_in_file():855:            }
DEBUG:refactor.py:277:format_first_block_in_file():856:        }
DEBUG:refactor.py:277:format_first_block_in_file():857:    };
DEBUG:refactor.py:277:format_first_block_in_file():858:};
DEBUG:refactor.py:277:format_first_block_in_file():859:
DEBUG:refactor.py:277:format_first_block_in_file():860:class boss_yoggsaron_cloud : public CreatureScript
DEBUG:refactor.py:277:format_first_block_in_file():861:{
DEBUG:refactor.py:277:format_first_block_in_file():862:public:
DEBUG:refactor.py:277:format_first_block_in_file():863:    boss_yoggsaron_cloud() : CreatureScript("boss_yoggsaron_cloud") { }
DEBUG:refactor.py:277:format_first_block_in_file():864:
DEBUG:refactor.py:277:format_first_block_in_file():865:    CreatureAI* GetAI(Creature* pCreature) const override
DEBUG:refactor.py:277:format_first_block_in_file():866:    {
DEBUG:refactor.py:277:format_first_block_in_file():867:        return GetUlduarAI<boss_yoggsaron_cloudAI>(pCreature);
DEBUG:refactor.py:277:format_first_block_in_file():868:    }
DEBUG:refactor.py:277:format_first_block_in_file():869:
DEBUG:refactor.py:277:format_first_block_in_file():870:    struct boss_yoggsaron_cloudAI : public npc_escortAI
DEBUG:refactor.py:277:format_first_block_in_file():871:    {
DEBUG:refactor.py:277:format_first_block_in_file():872:        boss_yoggsaron_cloudAI(Creature* pCreature) : npc_escortAI(pCreature)
DEBUG:refactor.py:277:format_first_block_in_file():873:        {
DEBUG:refactor.py:277:format_first_block_in_file():874:            InitWaypoint();
DEBUG:refactor.py:277:format_first_block_in_file():875:            Reset();
DEBUG:refactor.py:277:format_first_block_in_file():876:            Start(false, true, ObjectGuid::Empty, nullptr, false, true);
DEBUG:refactor.py:277:format_first_block_in_file():877:        }
DEBUG:refactor.py:277:format_first_block_in_file():878:
DEBUG:refactor.py:277:format_first_block_in_file():879:        uint32 _checkTimer;
DEBUG:refactor.py:277:format_first_block_in_file():880:        bool _isSummoning;
DEBUG:refactor.py:277:format_first_block_in_file():881:
DEBUG:refactor.py:277:format_first_block_in_file():882:        void JustSummoned(Creature* cr) override
DEBUG:refactor.py:277:format_first_block_in_file():883:        {
DEBUG:refactor.py:277:format_first_block_in_file():884:            cr->ToTempSummon()->SetTempSummonType(TEMPSUMMON_CORPSE_DESPAWN);
DEBUG:refactor.py:277:format_first_block_in_file():885:
DEBUG:refactor.py:277:format_first_block_in_file():886:            _isSummoning = false;
DEBUG:refactor.py:277:format_first_block_in_file():887:            if (me->GetInstanceScript())
DEBUG:refactor.py:277:format_first_block_in_file():888:                if (Creature* sara = ObjectAccessor::GetCreature(*me, me->GetInstanceScript()->GetGuidData(NPC_SARA)))
DEBUG:refactor.py:277:format_first_block_in_file():889:                    sara->AI()->JustSummoned(cr);
DEBUG:refactor.py:277:format_first_block_in_file():890:        }
DEBUG:refactor.py:277:format_first_block_in_file():891:
DEBUG:refactor.py:277:format_first_block_in_file():892:        void MoveInLineOfSight(Unit*  /*who*/) override {}
DEBUG:refactor.py:277:format_first_block_in_file():893:        void AttackStart(Unit*  /*who*/) override {}
DEBUG:refactor.py:277:format_first_block_in_file():894:        void WaypointReached(uint32  /*point*/) override {}
DEBUG:refactor.py:277:format_first_block_in_file():895:
DEBUG:refactor.py:277:format_first_block_in_file():896:        void Reset() override
DEBUG:refactor.py:277:format_first_block_in_file():897:        {
DEBUG:refactor.py:277:format_first_block_in_file():898:            me->CastSpell(me, SPELL_CLOUD_VISUAL, true);
DEBUG:refactor.py:277:format_first_block_in_file():899:            _checkTimer = 0;
DEBUG:refactor.py:277:format_first_block_in_file():900:            _isSummoning = false;
DEBUG:refactor.py:277:format_first_block_in_file():901:        }
DEBUG:refactor.py:277:format_first_block_in_file():902:
DEBUG:refactor.py:277:format_first_block_in_file():903:        void DoAction(int32 param) override
DEBUG:refactor.py:277:format_first_block_in_file():904:        {
DEBUG:refactor.py:277:format_first_block_in_file():905:            if (param == ACTION_UNSUMMON_CLOUDS)
DEBUG:refactor.py:277:format_first_block_in_file():906:            {
DEBUG:refactor.py:277:format_first_block_in_file():907:                me->RemoveAllAuras();
DEBUG:refactor.py:277:format_first_block_in_file():908:            }
DEBUG:refactor.py:277:format_first_block_in_file():909:            else if (param == ACTION_START_SUMMONING)
DEBUG:refactor.py:277:format_first_block_in_file():910:            {
DEBUG:refactor.py:277:format_first_block_in_file():911:                _isSummoning = true;
DEBUG:refactor.py:277:format_first_block_in_file():912:                me->CastSpell(me, SPELL_SUMMON_GUARDIAN_OF_YS, true);
DEBUG:refactor.py:277:format_first_block_in_file():913:            }
DEBUG:refactor.py:277:format_first_block_in_file():914:        }
DEBUG:refactor.py:277:format_first_block_in_file():915:
DEBUG:refactor.py:277:format_first_block_in_file():916:        void InitWaypoint()
DEBUG:refactor.py:277:format_first_block_in_file():917:        {
DEBUG:refactor.py:277:format_first_block_in_file():918:            float dist = Middle.GetExactDist(me);
DEBUG:refactor.py:277:format_first_block_in_file():919:            if (me->GetPositionX() > Middle.GetPositionX())
DEBUG:refactor.py:277:format_first_block_in_file():920:            {
DEBUG:refactor.py:277:format_first_block_in_file():921:                for (uint8 i = 0; i <= dist; ++i)
DEBUG:refactor.py:277:format_first_block_in_file():922:                {
DEBUG:refactor.py:277:format_first_block_in_file():923:                    float angle = M_PI * 2 / dist * i;
DEBUG:refactor.py:277:format_first_block_in_file():924:                    AddWaypoint(i, Middle.GetPositionX() + dist * cos(angle), Middle.GetPositionY() + dist * std::sin(angle), me->GetPositionZ(), 0);
DEBUG:refactor.py:277:format_first_block_in_file():925:                }
DEBUG:refactor.py:277:format_first_block_in_file():926:            }
DEBUG:refactor.py:277:format_first_block_in_file():927:            else
DEBUG:refactor.py:277:format_first_block_in_file():928:            {
DEBUG:refactor.py:277:format_first_block_in_file():929:                for (uint8 i = 0; i <= dist; ++i)
DEBUG:refactor.py:277:format_first_block_in_file():930:                {
DEBUG:refactor.py:277:format_first_block_in_file():931:                    float angle = M_PI * 2 - (M_PI * 2 / dist * i);
DEBUG:refactor.py:277:format_first_block_in_file():932:                    AddWaypoint(i, Middle.GetPositionX() + dist * cos(angle), Middle.GetPositionY() + dist * std::sin(angle), me->GetPositionZ(), 0);
DEBUG:refactor.py:277:format_first_block_in_file():933:                }
DEBUG:refactor.py:277:format_first_block_in_file():934:            }
DEBUG:refactor.py:277:format_first_block_in_file():935:        }
DEBUG:refactor.py:277:format_first_block_in_file():936:
DEBUG:refactor.py:277:format_first_block_in_file():937:        void UpdateEscortAI(uint32 diff) override
DEBUG:refactor.py:277:format_first_block_in_file():938:        {
DEBUG:refactor.py:277:format_first_block_in_file():939:            _checkTimer += diff;
DEBUG:refactor.py:277:format_first_block_in_file():940:            if (_checkTimer >= 500 && !_isSummoning)
DEBUG:refactor.py:277:format_first_block_in_file():941:            {
DEBUG:refactor.py:277:format_first_block_in_file():942:                Unit* who = me->SelectNearbyTarget(nullptr, 6.0f);
DEBUG:refactor.py:277:format_first_block_in_file():943:                if (who && who->IsPlayer() && !me->HasAura(SPELL_SUMMON_GUARDIAN_OF_YS) && !who->HasAura(SPELL_HODIR_FLASH_FREEZE))
DEBUG:refactor.py:277:format_first_block_in_file():944:                {
DEBUG:refactor.py:277:format_first_block_in_file():945:                    _isSummoning = true;
DEBUG:refactor.py:277:format_first_block_in_file():946:                    Talk(0, who);
DEBUG:refactor.py:277:format_first_block_in_file():947:                    me->CastSpell(me, SPELL_SUMMON_GUARDIAN_OF_YS, true);
DEBUG:refactor.py:277:format_first_block_in_file():948:                }
DEBUG:refactor.py:277:format_first_block_in_file():949:
DEBUG:refactor.py:277:format_first_block_in_file():950:                _checkTimer = 0;
DEBUG:refactor.py:277:format_first_block_in_file():951:            }
DEBUG:refactor.py:277:format_first_block_in_file():952:        }
DEBUG:refactor.py:277:format_first_block_in_file():953:    };
DEBUG:refactor.py:277:format_first_block_in_file():954:};
DEBUG:refactor.py:277:format_first_block_in_file():955:
DEBUG:refactor.py:277:format_first_block_in_file():956:class boss_yoggsaron_guardian_of_ys : public CreatureScript
DEBUG:refactor.py:277:format_first_block_in_file():957:{
DEBUG:refactor.py:277:format_first_block_in_file():958:public:
DEBUG:refactor.py:277:format_first_block_in_file():959:    boss_yoggsaron_guardian_of_ys() : CreatureScript("boss_yoggsaron_guardian_of_ys") { }
DEBUG:refactor.py:277:format_first_block_in_file():960:
DEBUG:refactor.py:277:format_first_block_in_file():961:    CreatureAI* GetAI(Creature* pCreature) const override
DEBUG:refactor.py:277:format_first_block_in_file():962:    {
DEBUG:refactor.py:277:format_first_block_in_file():963:        return GetUlduarAI<boss_yoggsaron_guardian_of_ysAI>(pCreature);
DEBUG:refactor.py:277:format_first_block_in_file():964:    }
DEBUG:refactor.py:277:format_first_block_in_file():965:
DEBUG:refactor.py:277:format_first_block_in_file():966:    struct boss_yoggsaron_guardian_of_ysAI : public ScriptedAI
DEBUG:refactor.py:277:format_first_block_in_file():967:    {
DEBUG:refactor.py:277:format_first_block_in_file():968:        boss_yoggsaron_guardian_of_ysAI(Creature* pCreature) : ScriptedAI(pCreature) { }
DEBUG:refactor.py:277:format_first_block_in_file():969:
DEBUG:refactor.py:277:format_first_block_in_file():970:        uint32 _spellTimer;
DEBUG:refactor.py:277:format_first_block_in_file():971:
DEBUG:refactor.py:277:format_first_block_in_file():972:        void Reset() override
DEBUG:refactor.py:277:format_first_block_in_file():973:        {
DEBUG:refactor.py:277:format_first_block_in_file():974:            _spellTimer = 0;
DEBUG:refactor.py:277:format_first_block_in_file():975:            me->SetInCombatWithZone();
DEBUG:refactor.py:277:format_first_block_in_file():976:        }
DEBUG:refactor.py:277:format_first_block_in_file():977:
DEBUG:refactor.py:277:format_first_block_in_file():978:        void JustDied(Unit*) override
DEBUG:refactor.py:277:format_first_block_in_file():979:        {
DEBUG:refactor.py:277:format_first_block_in_file():980:            me->CastSpell((Unit*)nullptr, SPELL_SHADOW_NOVA, true);
DEBUG:refactor.py:277:format_first_block_in_file():981:        }
DEBUG:refactor.py:277:format_first_block_in_file():982:
DEBUG:refactor.py:277:format_first_block_in_file():983:        void UpdateAI(uint32 diff) override
DEBUG:refactor.py:277:format_first_block_in_file():984:        {
DEBUG:refactor.py:277:format_first_block_in_file():985:            if (!UpdateVictim())
DEBUG:refactor.py:277:format_first_block_in_file():986:                return;
DEBUG:refactor.py:277:format_first_block_in_file():987:
DEBUG:refactor.py:277:format_first_block_in_file():988:            _spellTimer += diff;
DEBUG:refactor.py:277:format_first_block_in_file():989:            if (_spellTimer > 8000)
DEBUG:refactor.py:277:format_first_block_in_file():990:            {
DEBUG:refactor.py:277:format_first_block_in_file():991:                me->CastSpell(me, SPELL_DARK_VOLLEY, false);
DEBUG:refactor.py:277:format_first_block_in_file():992:                _spellTimer = 0;
DEBUG:refactor.py:277:format_first_block_in_file():993:            }
DEBUG:refactor.py:277:format_first_block_in_file():994:
DEBUG:refactor.py:277:format_first_block_in_file():995:            DoMeleeAttackIfReady();
DEBUG:refactor.py:277:format_first_block_in_file():996:        }
DEBUG:refactor.py:277:format_first_block_in_file():997:    };
DEBUG:refactor.py:277:format_first_block_in_file():998:};
DEBUG:refactor.py:277:format_first_block_in_file():999:
DEBUG:refactor.py:277:format_first_block_in_file():1000:class boss_yoggsaron : public CreatureScript
DEBUG:refactor.py:277:format_first_block_in_file():1001:{
DEBUG:refactor.py:277:format_first_block_in_file():1002:public:
DEBUG:refactor.py:277:format_first_block_in_file():1003:    boss_yoggsaron() : CreatureScript("boss_yoggsaron") { }
DEBUG:refactor.py:277:format_first_block_in_file():1004:
DEBUG:refactor.py:277:format_first_block_in_file():1005:    CreatureAI* GetAI(Creature* pCreature) const override
DEBUG:refactor.py:277:format_first_block_in_file():1006:    {
DEBUG:refactor.py:277:format_first_block_in_file():1007:        return GetUlduarAI<boss_yoggsaronAI>(pCreature);
DEBUG:refactor.py:277:format_first_block_in_file():1008:    }
DEBUG:refactor.py:277:format_first_block_in_file():1009:
DEBUG:refactor.py:277:format_first_block_in_file():1010:    struct boss_yoggsaronAI : public ScriptedAI
DEBUG:refactor.py:277:format_first_block_in_file():1011:    {
DEBUG:refactor.py:277:format_first_block_in_file():1012:        boss_yoggsaronAI(Creature* pCreature) : ScriptedAI(pCreature), summons(pCreature)
DEBUG:refactor.py:277:format_first_block_in_file():1013:        {
DEBUG:refactor.py:277:format_first_block_in_file():1014:            m_pInstance = me->GetInstanceScript();
DEBUG:refactor.py:277:format_first_block_in_file():1015:            _thirdPhase = false;
DEBUG:refactor.py:277:format_first_block_in_file():1016:            _usedInsane = false;
DEBUG:refactor.py:277:format_first_block_in_file():1017:            summons.DespawnAll();
DEBUG:refactor.py:277:format_first_block_in_file():1018:            events.Reset();
DEBUG:refactor.py:277:format_first_block_in_file():1019:
DEBUG:refactor.py:277:format_first_block_in_file():1020:            uint8 _count = 4;
DEBUG:refactor.py:277:format_first_block_in_file():1021:            me->SetLootMode(31); // 1 + 2 + 4 + 8 + 16, remove with watchers addition
DEBUG:refactor.py:277:format_first_block_in_file():1022:            if (m_pInstance)
DEBUG:refactor.py:277:format_first_block_in_file():1023:            {
DEBUG:refactor.py:277:format_first_block_in_file():1024:                for (uint8 i = 0; i < 4; ++i)
DEBUG:refactor.py:277:format_first_block_in_file():1025:                    if (m_pInstance->GetData(TYPE_WATCHERS) & (1 << i))
DEBUG:refactor.py:277:format_first_block_in_file():1026:                    {
DEBUG:refactor.py:277:format_first_block_in_file():1027:                        me->RemoveLootMode(1 << _count);
DEBUG:refactor.py:277:format_first_block_in_file():1028:                        --_count;
DEBUG:refactor.py:277:format_first_block_in_file():1029:                    }
DEBUG:refactor.py:277:format_first_block_in_file():1030:            }
DEBUG:refactor.py:277:format_first_block_in_file():1031:        }
DEBUG:refactor.py:277:format_first_block_in_file():1032:
DEBUG:refactor.py:277:format_first_block_in_file():1033:        InstanceScript* m_pInstance;
DEBUG:refactor.py:277:format_first_block_in_file():1034:        EventMap events;
DEBUG:refactor.py:277:format_first_block_in_file():1035:        SummonList summons;
DEBUG:refactor.py:277:format_first_block_in_file():1036:        bool _thirdPhase;
DEBUG:refactor.py:277:format_first_block_in_file():1037:        bool _usedInsane;
DEBUG:refactor.py:277:format_first_block_in_file():1038:
DEBUG:refactor.py:277:format_first_block_in_file():1039:        void AttackStart(Unit*) override { }
DEBUG:refactor.py:277:format_first_block_in_file():1040:
DEBUG:refactor.py:277:format_first_block_in_file():1041:        void JustSummoned(Creature* cr) override { summons.Summon(cr); }
DEBUG:refactor.py:277:format_first_block_in_file():1042:
DEBUG:refactor.py:277:format_first_block_in_file():1043:        void SummonImmortalGuardian()
DEBUG:refactor.py:277:format_first_block_in_file():1044:        {
DEBUG:refactor.py:277:format_first_block_in_file():1045:            uint32 dist = urand(38, 48);
DEBUG:refactor.py:277:format_first_block_in_file():1046:            float o = rand_norm() * M_PI * 2;
DEBUG:refactor.py:277:format_first_block_in_file():1047:            float Zplus = (dist - 38) / 6.5f;
DEBUG:refactor.py:277:format_first_block_in_file():1048:            me->SummonCreature(NPC_IMMORTAL_GUARDIAN, me->GetPositionX() + dist * cos(o), me->GetPositionY() + dist * std::sin(o), 327.2 + Zplus, 0, TEMPSUMMON_CORPSE_TIMED_DESPAWN, 5000);
DEBUG:refactor.py:277:format_first_block_in_file():1049:        }
DEBUG:refactor.py:277:format_first_block_in_file():1050:
DEBUG:refactor.py:277:format_first_block_in_file():1051:        void JustDied(Unit*  /*who*/) override
DEBUG:refactor.py:277:format_first_block_in_file():1052:        {
DEBUG:refactor.py:277:format_first_block_in_file():1053:            summons.DespawnAll();
DEBUG:refactor.py:277:format_first_block_in_file():1054:            events.Reset();
DEBUG:refactor.py:277:format_first_block_in_file():1055:
DEBUG:refactor.py:277:format_first_block_in_file():1056:            Talk(SAY_YOGG_SARON_DEATH);
DEBUG:refactor.py:277:format_first_block_in_file():1057:
DEBUG:refactor.py:277:format_first_block_in_file():1058:            if (m_pInstance)
DEBUG:refactor.py:277:format_first_block_in_file():1059:            {
DEBUG:refactor.py:277:format_first_block_in_file():1060:                m_pInstance->SetData(TYPE_YOGGSARON, DONE);
DEBUG:refactor.py:277:format_first_block_in_file():1061:                if (Creature* sara = ObjectAccessor::GetCreature(*me, m_pInstance->GetGuidData(NPC_SARA)))
DEBUG:refactor.py:277:format_first_block_in_file():1062:                    sara->AI()->DoAction(ACTION_YOGG_SARON_DEATH);
DEBUG:refactor.py:277:format_first_block_in_file():1063:                if (GameObject* go = ObjectAccessor::GetGameObject(*me, m_pInstance->GetGuidData(GO_YOGG_SARON_DOORS)))
DEBUG:refactor.py:277:format_first_block_in_file():1064:                    go->SetGoState(GO_STATE_ACTIVE);
DEBUG:refactor.py:277:format_first_block_in_file():1065:            }
DEBUG:refactor.py:277:format_first_block_in_file():1066:
DEBUG:refactor.py:277:format_first_block_in_file():1067:            Map::PlayerList const& pList = me->GetMap()->GetPlayers();
DEBUG:refactor.py:277:format_first_block_in_file():1068:            for(Map::PlayerList::const_iterator itr = pList.begin(); itr != pList.end(); ++itr)
DEBUG:refactor.py:277:format_first_block_in_file():1069:            {
DEBUG:refactor.py:277:format_first_block_in_file():1070:                itr->GetSource()->RemoveAura(SPELL_SANITY);
DEBUG:refactor.py:277:format_first_block_in_file():1071:                itr->GetSource()->RemoveAura(SPELL_INSANE1);
DEBUG:refactor.py:277:format_first_block_in_file():1072:                itr->GetSource()->RemoveAura(SPELL_INSANE2);
DEBUG:refactor.py:277:format_first_block_in_file():1073:            }
DEBUG:refactor.py:277:format_first_block_in_file():1074:        }
DEBUG:refactor.py:277:format_first_block_in_file():1075:
DEBUG:refactor.py:277:format_first_block_in_file():1076:        void DoAction(int32 param) override
DEBUG:refactor.py:277:format_first_block_in_file():1077:        {
DEBUG:refactor.py:277:format_first_block_in_file():1078:            if (param == ACTION_DESPAWN_ADDS)
DEBUG:refactor.py:277:format_first_block_in_file():1079:                summons.DespawnAll();
DEBUG:refactor.py:277:format_first_block_in_file():1080:            else if (param == ACTION_YOGG_SARON_APPEAR)
DEBUG:refactor.py:277:format_first_block_in_file():1081:            {
DEBUG:refactor.py:277:format_first_block_in_file():1082:                me->SetVisible(true);
DEBUG:refactor.py:277:format_first_block_in_file():1083:                me->CastSpell(me, SPELL_SHADOW_BARRIER, true);
DEBUG:refactor.py:277:format_first_block_in_file():1084:                me->CastSpell(me, SPELL_KNOCK_AWAY, true);
DEBUG:refactor.py:277:format_first_block_in_file():1085:                me->HandleEmoteCommand(EMOTE_ONESHOT_EMERGE);
DEBUG:refactor.py:277:format_first_block_in_file():1086:                me->SetInCombatWithZone();
DEBUG:refactor.py:277:format_first_block_in_file():1087:
DEBUG:refactor.py:277:format_first_block_in_file():1088:                me->SetUnitFlag(UNIT_FLAG_DISABLE_MOVE | UNIT_FLAG_PACIFIED);
DEBUG:refactor.py:277:format_first_block_in_file():1089:            }
DEBUG:refactor.py:277:format_first_block_in_file():1090:            else if (param == ACTION_YOGG_SARON_START_YELL)
DEBUG:refactor.py:277:format_first_block_in_file():1091:            {
DEBUG:refactor.py:277:format_first_block_in_file():1092:                Talk(SAY_YOGG_SARON_SPAWN);
DEBUG:refactor.py:277:format_first_block_in_file():1093:            }
DEBUG:refactor.py:277:format_first_block_in_file():1094:            else if (param == ACTION_YOGG_SARON_OPEN_PORTAL_YELL)
DEBUG:refactor.py:277:format_first_block_in_file():1095:            {
DEBUG:refactor.py:277:format_first_block_in_file():1096:                Talk(SAY_YOGG_SARON_MADNESS);
DEBUG:refactor.py:277:format_first_block_in_file():1097:                Talk(EMOTE_YOGG_SARON_MADNESS);
DEBUG:refactor.py:277:format_first_block_in_file():1098:            }
DEBUG:refactor.py:277:format_first_block_in_file():1099:            else if (param == ACTION_YOGG_SARON_START_P3)
DEBUG:refactor.py:277:format_first_block_in_file():1100:            {
DEBUG:refactor.py:277:format_first_block_in_file():1101:                me->SetHealth(me->GetMaxHealth() * 0.3f);
DEBUG:refactor.py:277:format_first_block_in_file():1102:                me->LowerPlayerDamageReq(me->GetMaxHealth() * 0.7f);
DEBUG:refactor.py:277:format_first_block_in_file():1103:
DEBUG:refactor.py:277:format_first_block_in_file():1104:                me->RemoveAura(SPELL_SHADOW_BARRIER);
DEBUG:refactor.py:277:format_first_block_in_file():1105:
DEBUG:refactor.py:277:format_first_block_in_file():1106:                events.ScheduleEvent(EVENT_YS_LUNATIC_GAZE, 7000);
DEBUG:refactor.py:277:format_first_block_in_file():1107:                events.ScheduleEvent(EVENT_YS_SHADOW_BEACON, 20000);
DEBUG:refactor.py:277:format_first_block_in_file():1108:                events.ScheduleEvent(EVENT_YS_SUMMON_GUARDIAN, 0);
DEBUG:refactor.py:277:format_first_block_in_file():1109:                _thirdPhase = true;
DEBUG:refactor.py:277:format_first_block_in_file():1110:
DEBUG:refactor.py:277:format_first_block_in_file():1111:                Talk(SAY_YOGG_SARON_PHASE_3);
DEBUG:refactor.py:277:format_first_block_in_file():1112:            }
DEBUG:refactor.py:277:format_first_block_in_file():1113:            else if (param == ACTION_YOGG_SARON_HARD_MODE)
DEBUG:refactor.py:277:format_first_block_in_file():1114:            {
DEBUG:refactor.py:277:format_first_block_in_file():1115:                events.ScheduleEvent(EVENT_YS_DEAFENING_ROAR, 50000);
DEBUG:refactor.py:277:format_first_block_in_file():1116:            }
DEBUG:refactor.py:277:format_first_block_in_file():1117:            else if (param == ACTION_YOGG_SARON_SHADOW_BEACON)
DEBUG:refactor.py:277:format_first_block_in_file():1118:            {
DEBUG:refactor.py:277:format_first_block_in_file():1119:                events.RescheduleEvent(EVENT_YS_SHADOW_BEACON, 40000);
DEBUG:refactor.py:277:format_first_block_in_file():1120:            }
DEBUG:refactor.py:277:format_first_block_in_file():1121:            else if (param == ACTION_REMOVE_STUN)
DEBUG:refactor.py:277:format_first_block_in_file():1122:            {
DEBUG:refactor.py:277:format_first_block_in_file():1123:                me->RemoveAura(SPELL_SHATTERED_ILLUSION);
DEBUG:refactor.py:277:format_first_block_in_file():1124:                me->SetControlled(true, UNIT_STATE_ROOT);
DEBUG:refactor.py:277:format_first_block_in_file():1125:            }
DEBUG:refactor.py:277:format_first_block_in_file():1126:            else if (param == ACTION_FAILED_DRIVE_ME_CRAZY)
DEBUG:refactor.py:277:format_first_block_in_file():1127:                _usedInsane = true;
DEBUG:refactor.py:277:format_first_block_in_file():1128:        }
DEBUG:refactor.py:277:format_first_block_in_file():1129:
DEBUG:refactor.py:277:format_first_block_in_file():1130:        uint32 GetData(uint32 param) const override
DEBUG:refactor.py:277:format_first_block_in_file():1131:        {
DEBUG:refactor.py:277:format_first_block_in_file():1132:            if (param == DATA_GET_DRIVE_ME_CRAZY)
DEBUG:refactor.py:277:format_first_block_in_file():1133:                return !_usedInsane;
DEBUG:refactor.py:277:format_first_block_in_file():1134:
DEBUG:refactor.py:277:format_first_block_in_file():1135:            return 0;
DEBUG:refactor.py:277:format_first_block_in_file():1136:        }
DEBUG:refactor.py:277:format_first_block_in_file():1137:
DEBUG:refactor.py:277:format_first_block_in_file():1138:        void SpellHit(Unit*  /*caster*/, SpellInfo const* spellInfo) override
DEBUG:refactor.py:277:format_first_block_in_file():1139:        {
DEBUG:refactor.py:277:format_first_block_in_file():1140:            if (spellInfo->Id == SPELL_IN_THE_MAWS_OF_THE_OLD_GOD)
DEBUG:refactor.py:277:format_first_block_in_file():1141:                me->AddLootMode(32);
DEBUG:refactor.py:277:format_first_block_in_file():1142:        }
DEBUG:refactor.py:277:format_first_block_in_file():1143:
DEBUG:refactor.py:277:format_first_block_in_file():1144:        void UpdateAI(uint32 diff) override
DEBUG:refactor.py:277:format_first_block_in_file():1145:        {
DEBUG:refactor.py:277:format_first_block_in_file():1146:            if (!_thirdPhase)
DEBUG:refactor.py:277:format_first_block_in_file():1147:                return;
DEBUG:refactor.py:277:format_first_block_in_file():1148:
DEBUG:refactor.py:277:format_first_block_in_file():1149:            events.Update(diff);
DEBUG:refactor.py:277:format_first_block_in_file():1150:            if (me->HasUnitState(UNIT_STATE_CASTING))
DEBUG:refactor.py:277:format_first_block_in_file():1151:                return;
DEBUG:refactor.py:277:format_first_block_in_file():1152:
DEBUG:refactor.py:277:format_first_block_in_file():1153:            switch (events.ExecuteEvent())
DEBUG:refactor.py:277:format_first_block_in_file():1154:            {
DEBUG:refactor.py:277:format_first_block_in_file():1155:                case EVENT_YS_LUNATIC_GAZE:
DEBUG:refactor.py:277:format_first_block_in_file():1156:                    me->PlayDirectSound(YS_P3_LUNATIC_GAZE);
DEBUG:refactor.py:277:format_first_block_in_file():1157:                    me->CastSpell(me, SPELL_LUNATIC_GAZE_YS, true);
DEBUG:refactor.py:277:format_first_block_in_file():1158:                    events.Repeat(12s);
DEBUG:refactor.py:277:format_first_block_in_file():1159:                    break;
DEBUG:refactor.py:277:format_first_block_in_file():1160:                case EVENT_YS_DEAFENING_ROAR:
DEBUG:refactor.py:277:format_first_block_in_file():1161:                    Talk(SAY_YOGG_SARON_DEAFENING_ROAR);
DEBUG:refactor.py:277:format_first_block_in_file():1162:                    Talk(EMOTE_YOGG_SARON_DEAFENING_ROAR);
DEBUG:refactor.py:277:format_first_block_in_file():1163:                    me->CastSpell(me, SPELL_DEAFENING_ROAR, false);
DEBUG:refactor.py:277:format_first_block_in_file():1164:                    events.Repeat(50s);
DEBUG:refactor.py:277:format_first_block_in_file():1165:                    break;
DEBUG:refactor.py:277:format_first_block_in_file():1166:                case EVENT_YS_SHADOW_BEACON:
DEBUG:refactor.py:277:format_first_block_in_file():1167:                    events.Repeat(5s);
DEBUG:refactor.py:277:format_first_block_in_file():1168:                    Talk(EMOTE_YOGG_SARON_EMPOWERING_SHADOWS);
DEBUG:refactor.py:277:format_first_block_in_file():1169:                    me->CastCustomSpell(SPELL_SHADOW_BEACON, SPELLVALUE_MAX_TARGETS, RAID_MODE(1, 3), me, false);
DEBUG:refactor.py:277:format_first_block_in_file():1170:                    break;
DEBUG:refactor.py:277:format_first_block_in_file():1171:                case EVENT_YS_SUMMON_GUARDIAN:
DEBUG:refactor.py:277:format_first_block_in_file():1172:                    SummonImmortalGuardian();
DEBUG:refactor.py:277:format_first_block_in_file():1173:                    events.Repeat(10s);
DEBUG:refactor.py:277:format_first_block_in_file():1174:                    break;
DEBUG:refactor.py:277:format_first_block_in_file():1175:            }
DEBUG:refactor.py:277:format_first_block_in_file():1176:        }
DEBUG:refactor.py:277:format_first_block_in_file():1177:    };
DEBUG:refactor.py:277:format_first_block_in_file():1178:};
DEBUG:refactor.py:277:format_first_block_in_file():1179:
DEBUG:refactor.py:277:format_first_block_in_file():1180:class boss_yoggsaron_brain : public CreatureScript
DEBUG:refactor.py:277:format_first_block_in_file():1181:{
DEBUG:refactor.py:277:format_first_block_in_file():1182:public:
DEBUG:refactor.py:277:format_first_block_in_file():1183:    boss_yoggsaron_brain() : CreatureScript("boss_yoggsaron_brain") { }
DEBUG:refactor.py:277:format_first_block_in_file():1184:
DEBUG:refactor.py:277:format_first_block_in_file():1185:    CreatureAI* GetAI(Creature* pCreature) const override
DEBUG:refactor.py:277:format_first_block_in_file():1186:    {
DEBUG:refactor.py:277:format_first_block_in_file():1187:        return GetUlduarAI<boss_yoggsaron_brainAI>(pCreature);
DEBUG:refactor.py:277:format_first_block_in_file():1188:    }
DEBUG:refactor.py:277:format_first_block_in_file():1189:
DEBUG:refactor.py:277:format_first_block_in_file():1190:    struct boss_yoggsaron_brainAI : public NullCreatureAI
DEBUG:refactor.py:277:format_first_block_in_file():1191:    {
DEBUG:refactor.py:277:format_first_block_in_file():1192:        boss_yoggsaron_brainAI(Creature* pCreature) : NullCreatureAI(pCreature), summons(pCreature)
DEBUG:refactor.py:277:format_first_block_in_file():1193:        {
DEBUG:refactor.py:277:format_first_block_in_file():1194:            me->SetDisableGravity(true);
DEBUG:refactor.py:277:format_first_block_in_file():1195:            _tentacleCount = 0;
DEBUG:refactor.py:277:format_first_block_in_file():1196:            _activeIllusion = 0;
DEBUG:refactor.py:277:format_first_block_in_file():1197:            _induceTimer = 0;
DEBUG:refactor.py:277:format_first_block_in_file():1198:            _brainDamaged = false;
DEBUG:refactor.py:277:format_first_block_in_file():1199:            me->SetRegeneratingHealth(false);
DEBUG:refactor.py:277:format_first_block_in_file():1200:        }
DEBUG:refactor.py:277:format_first_block_in_file():1201:
DEBUG:refactor.py:277:format_first_block_in_file():1202:        bool _brainDamaged;
DEBUG:refactor.py:277:format_first_block_in_file():1203:        uint8 _tentacleCount;
DEBUG:refactor.py:277:format_first_block_in_file():1204:        uint8 _activeIllusion;
DEBUG:refactor.py:277:format_first_block_in_file():1205:        uint32 _induceTimer;
DEBUG:refactor.py:277:format_first_block_in_file():1206:        SummonList summons;
DEBUG:refactor.py:277:format_first_block_in_file():1207:
DEBUG:refactor.py:277:format_first_block_in_file():1208:        void Reset() override { }
DEBUG:refactor.py:277:format_first_block_in_file():1209:        void JustSummoned(Creature* cr) override
DEBUG:refactor.py:277:format_first_block_in_file():1210:        {
DEBUG:refactor.py:277:format_first_block_in_file():1211:            if (cr->GetEntry() == NPC_INFLUENCE_TENTACLE)
DEBUG:refactor.py:277:format_first_block_in_file():1212:            {
DEBUG:refactor.py:277:format_first_block_in_file():1213:                // Dragons Illusion
DEBUG:refactor.py:277:format_first_block_in_file():1214:                if (cr->GetPositionX() > 2000.0f && cr->GetPositionX() < 2150.0f)
DEBUG:refactor.py:277:format_first_block_in_file():1215:                    cr->UpdateEntry(urand(NPC_CONSORT_FIRST, NPC_CONSORT_LAST));
DEBUG:refactor.py:277:format_first_block_in_file():1216:                // Icecrown Illusion
DEBUG:refactor.py:277:format_first_block_in_file():1217:                else if (cr->GetPositionY() > -150.0f && cr->GetPositionY() < -90.0f)
DEBUG:refactor.py:277:format_first_block_in_file():1218:                {
DEBUG:refactor.py:277:format_first_block_in_file():1219:                    cr->SetStandState(UNIT_STAND_STATE_KNEEL);
DEBUG:refactor.py:277:format_first_block_in_file():1220:                    cr->UpdateEntry(NPC_DEATHSWORN_ZEALOT);
DEBUG:refactor.py:277:format_first_block_in_file():1221:                }
DEBUG:refactor.py:277:format_first_block_in_file():1222:                // Stormwind Illusion
DEBUG:refactor.py:277:format_first_block_in_file():1223:                else
DEBUG:refactor.py:277:format_first_block_in_file():1224:                    cr->UpdateEntry(NPC_SUIT_OF_ARMOR);
DEBUG:refactor.py:277:format_first_block_in_file():1225:            }
DEBUG:refactor.py:277:format_first_block_in_file():1226:            else if (cr->GetEntry() == NPC_LICH_KING)
DEBUG:refactor.py:277:format_first_block_in_file():1227:                cr->CastSpell(cr, SPELL_DEATHGRASP, false);
DEBUG:refactor.py:277:format_first_block_in_file():1228:
DEBUG:refactor.py:277:format_first_block_in_file():1229:            summons.Summon(cr);
DEBUG:refactor.py:277:format_first_block_in_file():1230:        }
DEBUG:refactor.py:277:format_first_block_in_file():1231:
DEBUG:refactor.py:277:format_first_block_in_file():1232:        void PrepareChamberIllusion()
DEBUG:refactor.py:277:format_first_block_in_file():1233:        {
DEBUG:refactor.py:277:format_first_block_in_file():1234:            me->SummonCreature(NPC_INFLUENCE_TENTACLE, 2126.13f, -65.488f, 239.721f, 1.99171f);
DEBUG:refactor.py:277:format_first_block_in_file():1235:            me->SummonCreature(NPC_INFLUENCE_TENTACLE, 2141.05f, -50.5146f, 239.751f, 2.72998f);
DEBUG:refactor.py:277:format_first_block_in_file():1236:            me->SummonCreature(NPC_INFLUENCE_TENTACLE, 2148.83f, -23.9568f, 239.721f, 3.04807f);
DEBUG:refactor.py:277:format_first_block_in_file():1237:            me->SummonCreature(NPC_INFLUENCE_TENTACLE, 2064.39f, -42.0691f, 239.719f, 0.0949586f);
DEBUG:refactor.py:277:format_first_block_in_file():1238:            me->SummonCreature(NPC_INFLUENCE_TENTACLE, 2064.29f, -7.13128f, 239.756f, 5.96974f);
DEBUG:refactor.py:277:format_first_block_in_file():1239:            me->SummonCreature(NPC_INFLUENCE_TENTACLE, 2117.31f, 14.897f, 239.731f, 4.32041f);
DEBUG:refactor.py:277:format_first_block_in_file():1240:            me->SummonCreature(NPC_INFLUENCE_TENTACLE, 2136.7f, 2.43262f, 239.72f, 3.90023f);
DEBUG:refactor.py:277:format_first_block_in_file():1241:
DEBUG:refactor.py:277:format_first_block_in_file():1242:            // Laughing Skulls
DEBUG:refactor.py:277:format_first_block_in_file():1243:            if (urand(0, 1))
DEBUG:refactor.py:277:format_first_block_in_file():1244:                me->SummonCreature(NPC_LAUGHING_SKULL, 2139.13f, -59.0848f, 239.728f, 2.2974f);
DEBUG:refactor.py:277:format_first_block_in_file():1245:            else
DEBUG:refactor.py:277:format_first_block_in_file():1246:                me->SummonCreature(NPC_LAUGHING_SKULL, 2083, -25.66f, 244, 0);
DEBUG:refactor.py:277:format_first_block_in_file():1247:            if (urand(0, 1))
DEBUG:refactor.py:277:format_first_block_in_file():1248:                me->SummonCreature(NPC_LAUGHING_SKULL, 2066.67f, -59.8984f, 239.72f, 0.718747f);
DEBUG:refactor.py:277:format_first_block_in_file():1249:            else
DEBUG:refactor.py:277:format_first_block_in_file():1250:                me->SummonCreature(NPC_LAUGHING_SKULL, 2126.22f, -25.86f, 244, 0);
DEBUG:refactor.py:277:format_first_block_in_file():1251:
DEBUG:refactor.py:277:format_first_block_in_file():1252:            me->SummonCreature(NPC_LAUGHING_SKULL, 2133.09f, 15.341f, 239.72f, 4.0724f);
DEBUG:refactor.py:277:format_first_block_in_file():1253:            me->SummonCreature(NPC_LAUGHING_SKULL, 2065.83f, 12.3772f, 239.792f, 5.49789f);
DEBUG:refactor.py:277:format_first_block_in_file():1254:
DEBUG:refactor.py:277:format_first_block_in_file():1255:            // Aspects
DEBUG:refactor.py:277:format_first_block_in_file():1256:            me->SummonCreature(NPC_ALEXTRASZA, 2091.92f, -25.8f, 242.647f, 0);
DEBUG:refactor.py:277:format_first_block_in_file():1257:            me->SummonCreature(NPC_YSERA, 2116, -25.8f, 242.647f, 3.14f);
DEBUG:refactor.py:277:format_first_block_in_file():1258:            me->SummonCreature(NPC_NELTHARION, 2103.6f, -35.8f, 242.64f, 1.5f);
DEBUG:refactor.py:277:format_first_block_in_file():1259:            me->SummonCreature(NPC_MALYGOS, 2103.6f, -15.8f, 242.64f, 4.7f);
DEBUG:refactor.py:277:format_first_block_in_file():1260:
DEBUG:refactor.py:277:format_first_block_in_file():1261:            // Yogg Vision
DEBUG:refactor.py:277:format_first_block_in_file():1262:            me->SummonCreature(NPC_YOGG_SARON_VISION, 2109.695f, -25.09549f, 222.3250f, 0);
DEBUG:refactor.py:277:format_first_block_in_file():1263:        }
DEBUG:refactor.py:277:format_first_block_in_file():1264:
DEBUG:refactor.py:277:format_first_block_in_file():1265:        void PrepareIceCrownIllusion()
DEBUG:refactor.py:277:format_first_block_in_file():1266:        {
DEBUG:refactor.py:277:format_first_block_in_file():1267:            // Laughing Skulls
DEBUG:refactor.py:277:format_first_block_in_file():1268:            me->SummonCreature(NPC_LAUGHING_SKULL, 1931.12f, -92.702f, 239.991f, 5.2819f);
DEBUG:refactor.py:277:format_first_block_in_file():1269:            if (urand(0, 1))
DEBUG:refactor.py:277:format_first_block_in_file():1270:                me->SummonCreature(NPC_LAUGHING_SKULL, 1969.88f, -147.729f, 239.991f, 2.37593f);
DEBUG:refactor.py:277:format_first_block_in_file():1271:            else
DEBUG:refactor.py:277:format_first_block_in_file():1272:                me->SummonCreature(NPC_LAUGHING_SKULL, 1878, -93.3f, 240, 0);
DEBUG:refactor.py:277:format_first_block_in_file():1273:            if (urand(0, 1))
DEBUG:refactor.py:277:format_first_block_in_file():1274:                me->SummonCreature(NPC_LAUGHING_SKULL, 1950.78f, -167.902f, 239.991f, 2.34844f);
DEBUG:refactor.py:277:format_first_block_in_file():1275:            else
DEBUG:refactor.py:277:format_first_block_in_file():1276:                me->SummonCreature(NPC_LAUGHING_SKULL, 1938.45f, -116.5f, 240, 0);
DEBUG:refactor.py:277:format_first_block_in_file():1277:            if (urand(0, 1))
DEBUG:refactor.py:277:format_first_block_in_file():1278:                me->SummonCreature(NPC_LAUGHING_SKULL, 1896.45f, -141.469f, 239.991f, 6.12227f);
DEBUG:refactor.py:277:format_first_block_in_file():1279:            else
DEBUG:refactor.py:277:format_first_block_in_file():1280:                me->SummonCreature(NPC_LAUGHING_SKULL, 1921, -158, 240, 0);
DEBUG:refactor.py:277:format_first_block_in_file():1281:
DEBUG:refactor.py:277:format_first_block_in_file():1282:            // Influence
DEBUG:refactor.py:277:format_first_block_in_file():1283:            me->SummonCreature(NPC_INFLUENCE_TENTACLE, 1958.29f, -128.65f, 239.99f, 3.61293f);
DEBUG:refactor.py:277:format_first_block_in_file():1284:            me->SummonCreature(NPC_INFLUENCE_TENTACLE, 1957.78f, -134.368f, 239.99f, 3.35375f);
DEBUG:refactor.py:277:format_first_block_in_file():1285:            me->SummonCreature(NPC_INFLUENCE_TENTACLE, 1953.04f, -137.843f, 239.99f, 3.55796f);
DEBUG:refactor.py:277:format_first_block_in_file():1286:            me->SummonCreature(NPC_INFLUENCE_TENTACLE, 1900.31f, -93.5241f, 239.99f, 4.50043f);
DEBUG:refactor.py:277:format_first_block_in_file():1287:            me->SummonCreature(NPC_INFLUENCE_TENTACLE, 1895.03f, -98.0773f, 239.99f, 4.88135f);
DEBUG:refactor.py:277:format_first_block_in_file():1288:            me->SummonCreature(NPC_INFLUENCE_TENTACLE, 1895.19f, -104.587f, 239.99f, 5.02271f);
DEBUG:refactor.py:277:format_first_block_in_file():1289:            me->SummonCreature(NPC_INFLUENCE_TENTACLE, 1923.31f, -125.98f, 240, 4.2f);
DEBUG:refactor.py:277:format_first_block_in_file():1290:
DEBUG:refactor.py:277:format_first_block_in_file():1291:            // Others
DEBUG:refactor.py:277:format_first_block_in_file():1292:            me->SummonCreature(NPC_LICH_KING, 1906.98f, -153, 240, 4.2f);
DEBUG:refactor.py:277:format_first_block_in_file():1293:            me->SummonCreature(NPC_IMMOLATED_CHAMPION, 1902.03f, -161.7f, 240, 1.07f);
DEBUG:refactor.py:277:format_first_block_in_file():1294:
DEBUG:refactor.py:277:format_first_block_in_file():1295:            // Yogg Vision
DEBUG:refactor.py:277:format_first_block_in_file():1296:            me->SummonCreature(NPC_YOGG_SARON_VISION, 1906.226f, -155.8941f, 223.4727, 0);
DEBUG:refactor.py:277:format_first_block_in_file():1297:        }
DEBUG:refactor.py:277:format_first_block_in_file():1298:
DEBUG:refactor.py:277:format_first_block_in_file():1299:        void PrepareStormwindIllusion()
DEBUG:refactor.py:277:format_first_block_in_file():1300:        {
DEBUG:refactor.py:277:format_first_block_in_file():1301:            // Laughing Skulls
DEBUG:refactor.py:277:format_first_block_in_file():1302:            if (urand(0, 1))
DEBUG:refactor.py:277:format_first_block_in_file():1303:                me->SummonCreature(NPC_LAUGHING_SKULL, 1916.36f, 28.05f, 239.666f, 1.30238f);
DEBUG:refactor.py:277:format_first_block_in_file():1304:            else
DEBUG:refactor.py:277:format_first_block_in_file():1305:                me->SummonCreature(NPC_LAUGHING_SKULL, 1966.7f, 57.8f, 239.66f, 0);
DEBUG:refactor.py:277:format_first_block_in_file():1306:            if (urand(0, 1))
DEBUG:refactor.py:277:format_first_block_in_file():1307:                me->SummonCreature(NPC_LAUGHING_SKULL, 1902, 75.1362f, 239.666f, 6.06189f);
DEBUG:refactor.py:277:format_first_block_in_file():1308:            else
DEBUG:refactor.py:277:format_first_block_in_file():1309:                me->SummonCreature(NPC_LAUGHING_SKULL, 1933, 91, 240, 0);
DEBUG:refactor.py:277:format_first_block_in_file():1310:            me->SummonCreature(NPC_LAUGHING_SKULL, 1914.42f, 90.8465f, 239.666f, 5.25294f);
DEBUG:refactor.py:277:format_first_block_in_file():1311:            me->SummonCreature(NPC_LAUGHING_SKULL, 1963.68f, 89.7549f, 239.667f, 3.70571f);
DEBUG:refactor.py:277:format_first_block_in_file():1312:
DEBUG:refactor.py:277:format_first_block_in_file():1313:            // Influence
DEBUG:refactor.py:277:format_first_block_in_file():1314:            me->SummonCreature(NPC_INFLUENCE_TENTACLE, 1931.41f, 39.0711f, 239.66f, 1.82467f);
DEBUG:refactor.py:277:format_first_block_in_file():1315:            me->SummonCreature(NPC_INFLUENCE_TENTACLE, 1908.67f, 45.5867f, 239.666f, 0.72119f);
DEBUG:refactor.py:277:format_first_block_in_file():1316:            me->SummonCreature(NPC_INFLUENCE_TENTACLE, 1897.68f, 66.1274f, 239.666f, 6.27395f);
DEBUG:refactor.py:277:format_first_block_in_file():1317:            me->SummonCreature(NPC_INFLUENCE_TENTACLE, 1950.73f, 49.3446f, 239.666f, 2.63756f);
DEBUG:refactor.py:277:format_first_block_in_file():1318:            me->SummonCreature(NPC_INFLUENCE_TENTACLE, 1923.16f, 97.5586f, 239.666f, 4.74635f);
DEBUG:refactor.py:277:format_first_block_in_file():1319:            me->SummonCreature(NPC_INFLUENCE_TENTACLE, 1956.16f, 72.1403f, 239.666f, 3.19518f);
DEBUG:refactor.py:277:format_first_block_in_file():1320:            me->SummonCreature(NPC_INFLUENCE_TENTACLE, 1944.81f, 92.3154f, 239.666f, 4.03556f);
DEBUG:refactor.py:277:format_first_block_in_file():1321:
DEBUG:refactor.py:277:format_first_block_in_file():1322:            // Others
DEBUG:refactor.py:277:format_first_block_in_file():1323:            me->SummonCreature(NPC_GARONA, 1928.58f, 65.64f, 242.37f, 2.1f);
DEBUG:refactor.py:277:format_first_block_in_file():1324:            me->SummonCreature(NPC_KING_LLANE, 1925.14f, 71.74f, 242.37f, 5.17f);
DEBUG:refactor.py:277:format_first_block_in_file():1325:
DEBUG:refactor.py:277:format_first_block_in_file():1326:            // Yogg Vision
DEBUG:refactor.py:277:format_first_block_in_file():1327:            me->SummonCreature(NPC_YOGG_SARON_VISION, 1929.160f, 67.75694f, 221.7322f, 0);
DEBUG:refactor.py:277:format_first_block_in_file():1328:        }
DEBUG:refactor.py:277:format_first_block_in_file():1329:
DEBUG:refactor.py:277:format_first_block_in_file():1330:        void DoAction(int32 param) override
DEBUG:refactor.py:277:format_first_block_in_file():1331:        {
DEBUG:refactor.py:277:format_first_block_in_file():1332:            if (param == ACTION_DESPAWN_ADDS)
DEBUG:refactor.py:277:format_first_block_in_file():1333:            {
DEBUG:refactor.py:277:format_first_block_in_file():1334:                summons.DespawnAll();
DEBUG:refactor.py:277:format_first_block_in_file():1335:                return;
DEBUG:refactor.py:277:format_first_block_in_file():1336:            }
DEBUG:refactor.py:277:format_first_block_in_file():1337:            else if (param == ACTION_INFLUENCE_TENTACLE_DIED)
DEBUG:refactor.py:277:format_first_block_in_file():1338:            {
DEBUG:refactor.py:277:format_first_block_in_file():1339:                _tentacleCount++;
DEBUG:refactor.py:277:format_first_block_in_file():1340:                if (_tentacleCount >= 7 /*TENTACLES COUNT*/)
DEBUG:refactor.py:277:format_first_block_in_file():1341:                {
DEBUG:refactor.py:277:format_first_block_in_file():1342:                    // Stun
DEBUG:refactor.py:277:format_first_block_in_file():1343:                    if (me->GetInstanceScript())
DEBUG:refactor.py:277:format_first_block_in_file():1344:                        if(Creature* sara = ObjectAccessor::GetCreature(*me, me->GetInstanceScript()->GetGuidData(NPC_SARA)))
DEBUG:refactor.py:277:format_first_block_in_file():1345:                            sara->AI()->DoAction(MINUTE * IN_MILLISECONDS - std::min((uint32)MINUTE * IN_MILLISECONDS, _induceTimer));
DEBUG:refactor.py:277:format_first_block_in_file():1346:
DEBUG:refactor.py:277:format_first_block_in_file():1347:                    _induceTimer = 0;
DEBUG:refactor.py:277:format_first_block_in_file():1348:                    summons.DespawnEntry(NPC_LAUGHING_SKULL);
DEBUG:refactor.py:277:format_first_block_in_file():1349:                    if (GameObject* go = me->FindNearestGameObject(GO_CHAMBER_ILLUSION_DOORS + _activeIllusion, 150.0f))
DEBUG:refactor.py:277:format_first_block_in_file():1350:                        go->SetGoState(GO_STATE_ACTIVE);
DEBUG:refactor.py:277:format_first_block_in_file():1351:                }
DEBUG:refactor.py:277:format_first_block_in_file():1352:                return;
DEBUG:refactor.py:277:format_first_block_in_file():1353:            }
DEBUG:refactor.py:277:format_first_block_in_file():1354:            else if (param == ACTION_REMOVE_STUN)
DEBUG:refactor.py:277:format_first_block_in_file():1355:                return;
DEBUG:refactor.py:277:format_first_block_in_file():1356:
DEBUG:refactor.py:277:format_first_block_in_file():1357:            summons.DespawnAll();
DEBUG:refactor.py:277:format_first_block_in_file():1358:            switch(param)
DEBUG:refactor.py:277:format_first_block_in_file():1359:            {
DEBUG:refactor.py:277:format_first_block_in_file():1360:                case ACTION_ILLUSION_STORMWIND:
DEBUG:refactor.py:277:format_first_block_in_file():1361:                    PrepareStormwindIllusion();
DEBUG:refactor.py:277:format_first_block_in_file():1362:                    break;
DEBUG:refactor.py:277:format_first_block_in_file():1363:                case ACTION_ILLUSION_DRAGONS:
DEBUG:refactor.py:277:format_first_block_in_file():1364:                    PrepareChamberIllusion();
DEBUG:refactor.py:277:format_first_block_in_file():1365:                    break;
DEBUG:refactor.py:277:format_first_block_in_file():1366:                case ACTION_ILLUSION_ICECROWN:
DEBUG:refactor.py:277:format_first_block_in_file():1367:                    PrepareIceCrownIllusion();
DEBUG:refactor.py:277:format_first_block_in_file():1368:                    break;
DEBUG:refactor.py:277:format_first_block_in_file():1369:            }
DEBUG:refactor.py:277:format_first_block_in_file():1370:
DEBUG:refactor.py:277:format_first_block_in_file():1371:            for (uint32 i = GO_CHAMBER_ILLUSION_DOORS; i <= GO_STORMWIND_ILLUSION_DOORS; ++i)
DEBUG:refactor.py:277:format_first_block_in_file():1372:                if (GameObject* go = me->FindNearestGameObject(i, 150.0f))
DEBUG:refactor.py:277:format_first_block_in_file():1373:                    go->SetGoState(GO_STATE_READY);
DEBUG:refactor.py:277:format_first_block_in_file():1374:
DEBUG:refactor.py:277:format_first_block_in_file():1375:            _activeIllusion = param - 1;
DEBUG:refactor.py:277:format_first_block_in_file():1376:            _tentacleCount = 0;
DEBUG:refactor.py:277:format_first_block_in_file():1377:            _induceTimer = 1;
DEBUG:refactor.py:277:format_first_block_in_file():1378:
DEBUG:refactor.py:277:format_first_block_in_file():1379:            me->CastSpell(me, SPELL_INDUCE_MADNESS, false);
DEBUG:refactor.py:277:format_first_block_in_file():1380:        }
DEBUG:refactor.py:277:format_first_block_in_file():1381:
DEBUG:refactor.py:277:format_first_block_in_file():1382:        uint32 GetData(uint32 param) const override
DEBUG:refactor.py:277:format_first_block_in_file():1383:        {
DEBUG:refactor.py:277:format_first_block_in_file():1384:            if (param == DATA_GET_CURRENT_ILLUSION)
DEBUG:refactor.py:277:format_first_block_in_file():1385:                return _activeIllusion + 1;
DEBUG:refactor.py:277:format_first_block_in_file():1386:
DEBUG:refactor.py:277:format_first_block_in_file():1387:            return 0;
DEBUG:refactor.py:277:format_first_block_in_file():1388:        }
DEBUG:refactor.py:277:format_first_block_in_file():1389:
DEBUG:refactor.py:277:format_first_block_in_file():1390:        void DamageTaken(Unit* who, uint32& damage, DamageEffectType, SpellSchoolMask) override
DEBUG:refactor.py:277:format_first_block_in_file():1391:        {
DEBUG:refactor.py:277:format_first_block_in_file():1392:            if (_tentacleCount < 7) // if all tentacles aren't killed
DEBUG:refactor.py:277:format_first_block_in_file():1393:            {
DEBUG:refactor.py:277:format_first_block_in_file():1394:                damage = 0;
DEBUG:refactor.py:277:format_first_block_in_file():1395:                if (who)
DEBUG:refactor.py:277:format_first_block_in_file():1396:                    Unit::Kill(who, who);
DEBUG:refactor.py:277:format_first_block_in_file():1397:                return;
DEBUG:refactor.py:277:format_first_block_in_file():1398:            }
DEBUG:refactor.py:277:format_first_block_in_file():1399:
DEBUG:refactor.py:277:format_first_block_in_file():1400:            if (!_brainDamaged)
DEBUG:refactor.py:277:format_first_block_in_file():1401:            {
DEBUG:refactor.py:277:format_first_block_in_file():1402:                // START PHASE 3
DEBUG:refactor.py:277:format_first_block_in_file():1403:                if (me->HealthBelowPctDamaged(30, damage))
DEBUG:refactor.py:277:format_first_block_in_file():1404:                {
DEBUG:refactor.py:277:format_first_block_in_file():1405:                    me->SetRegeneratingHealth(false);
DEBUG:refactor.py:277:format_first_block_in_file():1406:                    _EnterEvadeMode();
DEBUG:refactor.py:277:format_first_block_in_file():1407:                    _brainDamaged = true;
DEBUG:refactor.py:277:format_first_block_in_file():1408:
DEBUG:refactor.py:277:format_first_block_in_file():1409:                    me->CastSpell(me, SPELL_BRAIN_HURT_VISUAL, true);
DEBUG:refactor.py:277:format_first_block_in_file():1410:                    if (me->GetInstanceScript())
DEBUG:refactor.py:277:format_first_block_in_file():1411:                        if(Creature* sara = ObjectAccessor::GetCreature(*me, me->GetInstanceScript()->GetGuidData(NPC_SARA)))
DEBUG:refactor.py:277:format_first_block_in_file():1412:                            sara->AI()->DoAction(ACTION_BRAIN_DAMAGED);
DEBUG:refactor.py:277:format_first_block_in_file():1413:                }
DEBUG:refactor.py:277:format_first_block_in_file():1414:            }
DEBUG:refactor.py:277:format_first_block_in_file():1415:        }
DEBUG:refactor.py:277:format_first_block_in_file():1416:
DEBUG:refactor.py:277:format_first_block_in_file():1417:        void UpdateAI(uint32 diff) override
DEBUG:refactor.py:277:format_first_block_in_file():1418:        {
DEBUG:refactor.py:277:format_first_block_in_file():1419:            if (_induceTimer)
DEBUG:refactor.py:277:format_first_block_in_file():1420:                _induceTimer += diff;
DEBUG:refactor.py:277:format_first_block_in_file():1421:        }
DEBUG:refactor.py:277:format_first_block_in_file():1422:    };
DEBUG:refactor.py:277:format_first_block_in_file():1423:};
DEBUG:refactor.py:277:format_first_block_in_file():1424:
DEBUG:refactor.py:277:format_first_block_in_file():1425:class boss_yoggsaron_death_orb : public CreatureScript
DEBUG:refactor.py:277:format_first_block_in_file():1426:{
DEBUG:refactor.py:277:format_first_block_in_file():1427:public:
DEBUG:refactor.py:277:format_first_block_in_file():1428:    boss_yoggsaron_death_orb() : CreatureScript("boss_yoggsaron_death_orb") { }
DEBUG:refactor.py:277:format_first_block_in_file():1429:
DEBUG:refactor.py:277:format_first_block_in_file():1430:    CreatureAI* GetAI(Creature* pCreature) const override
DEBUG:refactor.py:277:format_first_block_in_file():1431:    {
DEBUG:refactor.py:277:format_first_block_in_file():1432:        return GetUlduarAI<boss_yoggsaron_death_orbAI>(pCreature);
DEBUG:refactor.py:277:format_first_block_in_file():1433:    }
DEBUG:refactor.py:277:format_first_block_in_file():1434:
DEBUG:refactor.py:277:format_first_block_in_file():1435:    struct boss_yoggsaron_death_orbAI : public NullCreatureAI
DEBUG:refactor.py:277:format_first_block_in_file():1436:    {
DEBUG:refactor.py:277:format_first_block_in_file():1437:        boss_yoggsaron_death_orbAI(Creature* pCreature) : NullCreatureAI(pCreature)
DEBUG:refactor.py:277:format_first_block_in_file():1438:        {
DEBUG:refactor.py:277:format_first_block_in_file():1439:            me->CastSpell(me, SPELL_DEATH_RAY_WARNING, true);
DEBUG:refactor.py:277:format_first_block_in_file():1440:            _startTimer = 1;
DEBUG:refactor.py:277:format_first_block_in_file():1441:        }
DEBUG:refactor.py:277:format_first_block_in_file():1442:
DEBUG:refactor.py:277:format_first_block_in_file():1443:        uint32 _startTimer;
DEBUG:refactor.py:277:format_first_block_in_file():1444:
DEBUG:refactor.py:277:format_first_block_in_file():1445:        void UpdateAI(uint32 diff) override
DEBUG:refactor.py:277:format_first_block_in_file():1446:        {
DEBUG:refactor.py:277:format_first_block_in_file():1447:            if (_startTimer)
DEBUG:refactor.py:277:format_first_block_in_file():1448:            {
DEBUG:refactor.py:277:format_first_block_in_file():1449:                _startTimer += diff;
DEBUG:refactor.py:277:format_first_block_in_file():1450:                if (_startTimer > 4000)
DEBUG:refactor.py:277:format_first_block_in_file():1451:                {
DEBUG:refactor.py:277:format_first_block_in_file():1452:                    me->CastSpell(me, SPELL_DEATH_RAY_DAMAGE_VISUAL, true);
DEBUG:refactor.py:277:format_first_block_in_file():1453:                    me->CastSpell(me, SPELL_DEATH_RAY_DAMAGE, true);
DEBUG:refactor.py:277:format_first_block_in_file():1454:
DEBUG:refactor.py:277:format_first_block_in_file():1455:                    _startTimer = 0;
DEBUG:refactor.py:277:format_first_block_in_file():1456:                    me->SetSpeed(MOVE_WALK, 2);
DEBUG:refactor.py:277:format_first_block_in_file():1457:                    me->SetSpeed(MOVE_RUN, 2);
DEBUG:refactor.py:277:format_first_block_in_file():1458:                    me->GetMotionMaster()->MoveRandom(20.0f);
DEBUG:refactor.py:277:format_first_block_in_file():1459:                }
DEBUG:refactor.py:277:format_first_block_in_file():1460:            }
DEBUG:refactor.py:277:format_first_block_in_file():1461:        }
DEBUG:refactor.py:277:format_first_block_in_file():1462:    };
DEBUG:refactor.py:277:format_first_block_in_file():1463:};
DEBUG:refactor.py:277:format_first_block_in_file():1464:
DEBUG:refactor.py:277:format_first_block_in_file():1465:class boss_yoggsaron_crusher_tentacle : public CreatureScript
DEBUG:refactor.py:277:format_first_block_in_file():1466:{
DEBUG:refactor.py:277:format_first_block_in_file():1467:public:
DEBUG:refactor.py:277:format_first_block_in_file():1468:    boss_yoggsaron_crusher_tentacle() : CreatureScript("boss_yoggsaron_crusher_tentacle") { }
DEBUG:refactor.py:277:format_first_block_in_file():1469:
DEBUG:refactor.py:277:format_first_block_in_file():1470:    CreatureAI* GetAI(Creature* pCreature) const override
DEBUG:refactor.py:277:format_first_block_in_file():1471:    {
DEBUG:refactor.py:277:format_first_block_in_file():1472:        return GetUlduarAI<boss_yoggsaron_crusher_tentacleAI>(pCreature);
DEBUG:refactor.py:277:format_first_block_in_file():1473:    }
DEBUG:refactor.py:277:format_first_block_in_file():1474:
DEBUG:refactor.py:277:format_first_block_in_file():1475:    struct boss_yoggsaron_crusher_tentacleAI : public ScriptedAI
DEBUG:refactor.py:277:format_first_block_in_file():1476:    {
DEBUG:refactor.py:277:format_first_block_in_file():1477:        boss_yoggsaron_crusher_tentacleAI(Creature* pCreature) : ScriptedAI(pCreature)
DEBUG:refactor.py:277:format_first_block_in_file():1478:        {
DEBUG:refactor.py:277:format_first_block_in_file():1479:            me->SetCombatMovement(false);
DEBUG:refactor.py:277:format_first_block_in_file():1480:            me->CastSpell(me, SPELL_CRUSH, true);
DEBUG:refactor.py:277:format_first_block_in_file():1481:            me->CastSpell(me, SPELL_FOCUSED_ANGER, true);
DEBUG:refactor.py:277:format_first_block_in_file():1482:            me->CastSpell(me, SPELL_DIMINISH_POWER, false);
DEBUG:refactor.py:277:format_first_block_in_file():1483:        }
DEBUG:refactor.py:277:format_first_block_in_file():1484:
DEBUG:refactor.py:277:format_first_block_in_file():1485:        void Reset() override
DEBUG:refactor.py:277:format_first_block_in_file():1486:        {
DEBUG:refactor.py:277:format_first_block_in_file():1487:            me->SetInCombatWithZone();
DEBUG:refactor.py:277:format_first_block_in_file():1488:        }
DEBUG:refactor.py:277:format_first_block_in_file():1489:
DEBUG:refactor.py:277:format_first_block_in_file():1490:        void DamageTaken(Unit* who, uint32&, DamageEffectType damagetype, SpellSchoolMask) override
DEBUG:refactor.py:277:format_first_block_in_file():1491:        {
DEBUG:refactor.py:277:format_first_block_in_file():1492:            if (who && damagetype == DIRECT_DAMAGE)
DEBUG:refactor.py:277:format_first_block_in_file():1493:            {
DEBUG:refactor.py:277:format_first_block_in_file():1494:                DoResetThreatList();
DEBUG:refactor.py:277:format_first_block_in_file():1495:                me->AddThreat(who, 100000);
DEBUG:refactor.py:277:format_first_block_in_file():1496:                AttackStart(who);
DEBUG:refactor.py:277:format_first_block_in_file():1497:                me->InterruptNonMeleeSpells(false);
DEBUG:refactor.py:277:format_first_block_in_file():1498:            }
DEBUG:refactor.py:277:format_first_block_in_file():1499:        }
DEBUG:refactor.py:277:format_first_block_in_file():1500:
DEBUG:refactor.py:277:format_first_block_in_file():1501:        void DoAction(int32 param) override
DEBUG:refactor.py:277:format_first_block_in_file():1502:        {
DEBUG:refactor.py:277:format_first_block_in_file():1503:            if (param == ACTION_REMOVE_STUN)
DEBUG:refactor.py:277:format_first_block_in_file():1504:                me->RemoveAura(SPELL_SHATTERED_ILLUSION);
DEBUG:refactor.py:277:format_first_block_in_file():1505:        }
DEBUG:refactor.py:277:format_first_block_in_file():1506:
DEBUG:refactor.py:277:format_first_block_in_file():1507:        void UpdateAI(uint32  /*diff*/) override
DEBUG:refactor.py:277:format_first_block_in_file():1508:        {
DEBUG:refactor.py:277:format_first_block_in_file():1509:            if (!UpdateVictim())
DEBUG:refactor.py:277:format_first_block_in_file():1510:                return;
DEBUG:refactor.py:277:format_first_block_in_file():1511:
DEBUG:refactor.py:277:format_first_block_in_file():1512:            if (me->IsWithinMeleeRange(me->GetVictim()))
DEBUG:refactor.py:277:format_first_block_in_file():1513:            {
DEBUG:refactor.py:277:format_first_block_in_file():1514:                DoMeleeAttackIfReady();
DEBUG:refactor.py:277:format_first_block_in_file():1515:                return;
DEBUG:refactor.py:277:format_first_block_in_file():1516:            }
DEBUG:refactor.py:277:format_first_block_in_file():1517:
DEBUG:refactor.py:277:format_first_block_in_file():1518:            if (me->HasUnitState(UNIT_STATE_CASTING))
DEBUG:refactor.py:277:format_first_block_in_file():1519:                return;
DEBUG:refactor.py:277:format_first_block_in_file():1520:
DEBUG:refactor.py:277:format_first_block_in_file():1521:            me->CastSpell(me, SPELL_DIMINISH_POWER, false);
DEBUG:refactor.py:277:format_first_block_in_file():1522:            DoResetThreatList();
DEBUG:refactor.py:277:format_first_block_in_file():1523:        }
DEBUG:refactor.py:277:format_first_block_in_file():1524:    };
DEBUG:refactor.py:277:format_first_block_in_file():1525:};
DEBUG:refactor.py:277:format_first_block_in_file():1526:
DEBUG:refactor.py:277:format_first_block_in_file():1527:class boss_yoggsaron_corruptor_tentacle : public CreatureScript
DEBUG:refactor.py:277:format_first_block_in_file():1528:{
DEBUG:refactor.py:277:format_first_block_in_file():1529:public:
DEBUG:refactor.py:277:format_first_block_in_file():1530:    boss_yoggsaron_corruptor_tentacle() : CreatureScript("boss_yoggsaron_corruptor_tentacle") { }
DEBUG:refactor.py:277:format_first_block_in_file():1531:
DEBUG:refactor.py:277:format_first_block_in_file():1532:    CreatureAI* GetAI(Creature* pCreature) const override
DEBUG:refactor.py:277:format_first_block_in_file():1533:    {
DEBUG:refactor.py:277:format_first_block_in_file():1534:        return GetUlduarAI<boss_yoggsaron_corruptor_tentacleAI>(pCreature);
DEBUG:refactor.py:277:format_first_block_in_file():1535:    }
DEBUG:refactor.py:277:format_first_block_in_file():1536:
DEBUG:refactor.py:277:format_first_block_in_file():1537:    struct boss_yoggsaron_corruptor_tentacleAI : public ScriptedAI
DEBUG:refactor.py:277:format_first_block_in_file():1538:    {
DEBUG:refactor.py:277:format_first_block_in_file():1539:        boss_yoggsaron_corruptor_tentacleAI(Creature* pCreature) : ScriptedAI(pCreature)
DEBUG:refactor.py:277:format_first_block_in_file():1540:        {
DEBUG:refactor.py:277:format_first_block_in_file():1541:            me->SetCombatMovement(false);
DEBUG:refactor.py:277:format_first_block_in_file():1542:        }
DEBUG:refactor.py:277:format_first_block_in_file():1543:
DEBUG:refactor.py:277:format_first_block_in_file():1544:        void DoAction(int32 param) override
DEBUG:refactor.py:277:format_first_block_in_file():1545:        {
DEBUG:refactor.py:277:format_first_block_in_file():1546:            if (param == ACTION_REMOVE_STUN)
DEBUG:refactor.py:277:format_first_block_in_file():1547:                me->RemoveAura(SPELL_SHATTERED_ILLUSION);
DEBUG:refactor.py:277:format_first_block_in_file():1548:        }
DEBUG:refactor.py:277:format_first_block_in_file():1549:
DEBUG:refactor.py:277:format_first_block_in_file():1550:        Unit* SelectCorruptionTarget()
DEBUG:refactor.py:277:format_first_block_in_file():1551:        {
DEBUG:refactor.py:277:format_first_block_in_file():1552:            Player* target = nullptr;
DEBUG:refactor.py:277:format_first_block_in_file():1553:            Map::PlayerList const& pList = me->GetMap()->GetPlayers();
DEBUG:refactor.py:277:format_first_block_in_file():1554:            uint8 num = urand(0, pList.getSize() - 1);
DEBUG:refactor.py:277:format_first_block_in_file():1555:            uint8 count = 0;
DEBUG:refactor.py:277:format_first_block_in_file():1556:            for (Map::PlayerList::const_iterator itr = pList.begin(); itr != pList.end(); ++itr, ++count)
DEBUG:refactor.py:277:format_first_block_in_file():1557:            {
DEBUG:refactor.py:277:format_first_block_in_file():1558:                if (me->GetDistance(itr->GetSource()) > 200 || itr->GetSource()->GetPositionZ() < 300 || !itr->GetSource()->IsAlive() || itr->GetSource()->IsGameMaster())
DEBUG:refactor.py:277:format_first_block_in_file():1559:                    continue;
DEBUG:refactor.py:277:format_first_block_in_file():1560:
DEBUG:refactor.py:277:format_first_block_in_file():1561:                if (count <= num || !target)
DEBUG:refactor.py:277:format_first_block_in_file():1562:                    target = itr->GetSource();
DEBUG:refactor.py:277:format_first_block_in_file():1563:                else
DEBUG:refactor.py:277:format_first_block_in_file():1564:                    break;
DEBUG:refactor.py:277:format_first_block_in_file():1565:            }
DEBUG:refactor.py:277:format_first_block_in_file():1566:
DEBUG:refactor.py:277:format_first_block_in_file():1567:            return target;
DEBUG:refactor.py:277:format_first_block_in_file():1568:        }
DEBUG:refactor.py:277:format_first_block_in_file():1569:
DEBUG:refactor.py:277:format_first_block_in_file():1570:        void UpdateAI(uint32  /*diff*/) override
DEBUG:refactor.py:277:format_first_block_in_file():1571:        {
DEBUG:refactor.py:277:format_first_block_in_file():1572:            if (me->HasUnitState(UNIT_STATE_CASTING))
DEBUG:refactor.py:277:format_first_block_in_file():1573:                return;
DEBUG:refactor.py:277:format_first_block_in_file():1574:
DEBUG:refactor.py:277:format_first_block_in_file():1575:            if (Unit* target = SelectCorruptionTarget())
DEBUG:refactor.py:277:format_first_block_in_file():1576:            {
DEBUG:refactor.py:277:format_first_block_in_file():1577:                uint32 spellid = RAND(SPELL_APATHY, SPELL_BLACK_PLAGUE, SPELL_DRAINING_POISON, SPELL_CURSE_OF_DOOM);
DEBUG:refactor.py:277:format_first_block_in_file():1578:                me->CastSpell(target, spellid, false);
DEBUG:refactor.py:277:format_first_block_in_file():1579:            }
DEBUG:refactor.py:277:format_first_block_in_file():1580:        }
DEBUG:refactor.py:277:format_first_block_in_file():1581:    };
DEBUG:refactor.py:277:format_first_block_in_file():1582:};
DEBUG:refactor.py:277:format_first_block_in_file():1583:
DEBUG:refactor.py:277:format_first_block_in_file():1584:class boss_yoggsaron_constrictor_tentacle : public CreatureScript
DEBUG:refactor.py:277:format_first_block_in_file():1585:{
DEBUG:refactor.py:277:format_first_block_in_file():1586:public:
DEBUG:refactor.py:277:format_first_block_in_file():1587:    boss_yoggsaron_constrictor_tentacle() : CreatureScript("boss_yoggsaron_constrictor_tentacle") { }
DEBUG:refactor.py:277:format_first_block_in_file():1588:
DEBUG:refactor.py:277:format_first_block_in_file():1589:    CreatureAI* GetAI(Creature* pCreature) const override
DEBUG:refactor.py:277:format_first_block_in_file():1590:    {
DEBUG:refactor.py:277:format_first_block_in_file():1591:        return GetUlduarAI<boss_yoggsaron_constrictor_tentacleAI>(pCreature);
DEBUG:refactor.py:277:format_first_block_in_file():1592:    }
DEBUG:refactor.py:277:format_first_block_in_file():1593:
DEBUG:refactor.py:277:format_first_block_in_file():1594:    struct boss_yoggsaron_constrictor_tentacleAI : public ScriptedAI
DEBUG:refactor.py:277:format_first_block_in_file():1595:    {
DEBUG:refactor.py:277:format_first_block_in_file():1596:        boss_yoggsaron_constrictor_tentacleAI(Creature* pCreature) : ScriptedAI(pCreature)
DEBUG:refactor.py:277:format_first_block_in_file():1597:        {
DEBUG:refactor.py:277:format_first_block_in_file():1598:            me->SetCombatMovement(false);
DEBUG:refactor.py:277:format_first_block_in_file():1599:            _checkTimer = 1;
DEBUG:refactor.py:277:format_first_block_in_file():1600:            _playerGUID.Clear();
DEBUG:refactor.py:277:format_first_block_in_file():1601:        }
DEBUG:refactor.py:277:format_first_block_in_file():1602:
DEBUG:refactor.py:277:format_first_block_in_file():1603:        uint32 _checkTimer;
DEBUG:refactor.py:277:format_first_block_in_file():1604:        ObjectGuid _playerGUID;
DEBUG:refactor.py:277:format_first_block_in_file():1605:
DEBUG:refactor.py:277:format_first_block_in_file():1606:        Unit* SelectConstrictTarget()
DEBUG:refactor.py:277:format_first_block_in_file():1607:        {
DEBUG:refactor.py:277:format_first_block_in_file():1608:            Player* target = nullptr;
DEBUG:refactor.py:277:format_first_block_in_file():1609:            Map::PlayerList const& pList = me->GetMap()->GetPlayers();
DEBUG:refactor.py:277:format_first_block_in_file():1610:            uint8 num = urand(0, pList.getSize() - 1);
DEBUG:refactor.py:277:format_first_block_in_file():1611:            uint8 count = 0;
DEBUG:refactor.py:277:format_first_block_in_file():1612:            for(Map::PlayerList::const_iterator itr = pList.begin(); itr != pList.end(); ++itr, ++count)
DEBUG:refactor.py:277:format_first_block_in_file():1613:            {
DEBUG:refactor.py:277:format_first_block_in_file():1614:                if (me->GetDistance(itr->GetSource()) > 10 || !itr->GetSource()->IsAlive() || itr->GetSource()->IsGameMaster())
DEBUG:refactor.py:277:format_first_block_in_file():1615:                    continue;
DEBUG:refactor.py:277:format_first_block_in_file():1616:                if (itr->GetSource()->HasAura(SPELL_SQUEEZE) || itr->GetSource()->HasAura(SPELL_INSANE1))
DEBUG:refactor.py:277:format_first_block_in_file():1617:                    continue;
DEBUG:refactor.py:277:format_first_block_in_file():1618:
DEBUG:refactor.py:277:format_first_block_in_file():1619:                if (count <= num || !target)
DEBUG:refactor.py:277:format_first_block_in_file():1620:                    target = itr->GetSource();
DEBUG:refactor.py:277:format_first_block_in_file():1621:                else
DEBUG:refactor.py:277:format_first_block_in_file():1622:                    break;
DEBUG:refactor.py:277:format_first_block_in_file():1623:            }
DEBUG:refactor.py:277:format_first_block_in_file():1624:
DEBUG:refactor.py:277:format_first_block_in_file():1625:            return target;
DEBUG:refactor.py:277:format_first_block_in_file():1626:        }
DEBUG:refactor.py:277:format_first_block_in_file():1627:
DEBUG:refactor.py:277:format_first_block_in_file():1628:        void UpdateAI(uint32 diff) override
DEBUG:refactor.py:277:format_first_block_in_file():1629:        {
DEBUG:refactor.py:277:format_first_block_in_file():1630:            if (_checkTimer)
DEBUG:refactor.py:277:format_first_block_in_file():1631:            {
DEBUG:refactor.py:277:format_first_block_in_file():1632:                _checkTimer += diff;
DEBUG:refactor.py:277:format_first_block_in_file():1633:                if (_checkTimer >= 1000 && !me->HasUnitState(UNIT_STATE_STUNNED))
DEBUG:refactor.py:277:format_first_block_in_file():1634:                {
DEBUG:refactor.py:277:format_first_block_in_file():1635:                    if (Unit* target = SelectConstrictTarget())
DEBUG:refactor.py:277:format_first_block_in_file():1636:                    {
DEBUG:refactor.py:277:format_first_block_in_file():1637:                        target->CastSpell(me, SPELL_LUNGE, true);
DEBUG:refactor.py:277:format_first_block_in_file():1638:                        target->CastSpell(target, SPELL_SQUEEZE, true);
DEBUG:refactor.py:277:format_first_block_in_file():1639:                        _playerGUID = target->GetGUID();
DEBUG:refactor.py:277:format_first_block_in_file():1640:                        _checkTimer = 0;
DEBUG:refactor.py:277:format_first_block_in_file():1641:                        return;
DEBUG:refactor.py:277:format_first_block_in_file():1642:                    }
DEBUG:refactor.py:277:format_first_block_in_file():1643:
DEBUG:refactor.py:277:format_first_block_in_file():1644:                    _checkTimer = 1;
DEBUG:refactor.py:277:format_first_block_in_file():1645:                }
DEBUG:refactor.py:277:format_first_block_in_file():1646:            }
DEBUG:refactor.py:277:format_first_block_in_file():1647:        }
DEBUG:refactor.py:277:format_first_block_in_file():1648:
DEBUG:refactor.py:277:format_first_block_in_file():1649:        void DoAction(int32 param) override
DEBUG:refactor.py:277:format_first_block_in_file():1650:        {
DEBUG:refactor.py:277:format_first_block_in_file():1651:            if (param == ACTION_REMOVE_STUN)
DEBUG:refactor.py:277:format_first_block_in_file():1652:                me->RemoveAura(SPELL_SHATTERED_ILLUSION);
DEBUG:refactor.py:277:format_first_block_in_file():1653:        }
DEBUG:refactor.py:277:format_first_block_in_file():1654:
DEBUG:refactor.py:277:format_first_block_in_file():1655:        void JustDied(Unit*) override
DEBUG:refactor.py:277:format_first_block_in_file():1656:        {
DEBUG:refactor.py:277:format_first_block_in_file():1657:            if (Unit* player = ObjectAccessor::GetUnit(*me, _playerGUID))
DEBUG:refactor.py:277:format_first_block_in_file():1658:                player->RemoveAura(SPELL_SQUEEZE);
DEBUG:refactor.py:277:format_first_block_in_file():1659:        }
DEBUG:refactor.py:277:format_first_block_in_file():1660:    };
DEBUG:refactor.py:277:format_first_block_in_file():1661:};
DEBUG:refactor.py:277:format_first_block_in_file():1662:
DEBUG:refactor.py:277:format_first_block_in_file():1663:const uint32 TABLE_KEEPER_PASSIVE[4] = {SPELL_FREYA_PASSIVE, SPELL_HODIR_PASSIVE, SPELL_MIMIRON_PASSIVE, SPELL_THORIM_PASSIVE};
DEBUG:refactor.py:277:format_first_block_in_file():1664:
DEBUG:refactor.py:277:format_first_block_in_file():1665:class boss_yoggsaron_keeper : public CreatureScript
DEBUG:refactor.py:277:format_first_block_in_file():1666:{
DEBUG:refactor.py:277:format_first_block_in_file():1667:public:
DEBUG:refactor.py:277:format_first_block_in_file():1668:    boss_yoggsaron_keeper() : CreatureScript("boss_yoggsaron_keeper") { }
DEBUG:refactor.py:277:format_first_block_in_file():1669:
DEBUG:refactor.py:277:format_first_block_in_file():1670:    CreatureAI* GetAI(Creature* pCreature) const override
DEBUG:refactor.py:277:format_first_block_in_file():1671:    {
DEBUG:refactor.py:277:format_first_block_in_file():1672:        return GetUlduarAI<boss_yoggsaron_keeperAI>(pCreature);
DEBUG:refactor.py:277:format_first_block_in_file():1673:    }
DEBUG:refactor.py:277:format_first_block_in_file():1674:
DEBUG:refactor.py:277:format_first_block_in_file():1675:    struct boss_yoggsaron_keeperAI : public NullCreatureAI
DEBUG:refactor.py:277:format_first_block_in_file():1676:    {
DEBUG:refactor.py:277:format_first_block_in_file():1677:        boss_yoggsaron_keeperAI(Creature* pCreature) : NullCreatureAI(pCreature)
DEBUG:refactor.py:277:format_first_block_in_file():1678:        {
DEBUG:refactor.py:277:format_first_block_in_file():1679:            me->ApplySpellImmune(0, IMMUNITY_STATE, SPELL_AURA_MOD_SCALE, true);
DEBUG:refactor.py:277:format_first_block_in_file():1680:            switch (me->GetEntry())
DEBUG:refactor.py:277:format_first_block_in_file():1681:            {
DEBUG:refactor.py:277:format_first_block_in_file():1682:                case NPC_FREYA_KEEPER:
DEBUG:refactor.py:277:format_first_block_in_file():1683:                    _keeperId = KEEPER_FREYA;
DEBUG:refactor.py:277:format_first_block_in_file():1684:                    break;
DEBUG:refactor.py:277:format_first_block_in_file():1685:                case NPC_HODIR_KEEPER:
DEBUG:refactor.py:277:format_first_block_in_file():1686:                    _keeperId = KEEPER_HODIR;
DEBUG:refactor.py:277:format_first_block_in_file():1687:                    break;
DEBUG:refactor.py:277:format_first_block_in_file():1688:                case NPC_MIMIRON_KEEPER:
DEBUG:refactor.py:277:format_first_block_in_file():1689:                    _keeperId = KEEPER_MIMIRON;
DEBUG:refactor.py:277:format_first_block_in_file():1690:                    break;
DEBUG:refactor.py:277:format_first_block_in_file():1691:                case NPC_THORIM_KEEPER:
DEBUG:refactor.py:277:format_first_block_in_file():1692:                    _keeperId = KEEPER_THORIM;
DEBUG:refactor.py:277:format_first_block_in_file():1693:                    break;
DEBUG:refactor.py:277:format_first_block_in_file():1694:                default:
DEBUG:refactor.py:277:format_first_block_in_file():1695:                    return;
DEBUG:refactor.py:277:format_first_block_in_file():1696:            }
DEBUG:refactor.py:277:format_first_block_in_file():1697:            me->RemoveAura(TABLE_KEEPER_PASSIVE[_keeperId]);
DEBUG:refactor.py:277:format_first_block_in_file():1698:
DEBUG:refactor.py:277:format_first_block_in_file():1699:            scheduler.Schedule(1s, [this](TaskContext context)
DEBUG:refactor.py:277:format_first_block_in_file():1700:            {
DEBUG:refactor.py:277:format_first_block_in_file():1701:                if (me->GetInstanceScript())
DEBUG:refactor.py:277:format_first_block_in_file():1702:                {
DEBUG:refactor.py:277:format_first_block_in_file():1703:                    if (me->GetInstanceScript()->GetData(TYPE_YOGGSARON) == IN_PROGRESS && !_isEncounterInProgress)
DEBUG:refactor.py:277:format_first_block_in_file():1704:                    {
DEBUG:refactor.py:277:format_first_block_in_file():1705:                        _isEncounterInProgress = true;
DEBUG:refactor.py:277:format_first_block_in_file():1706:                        if (_keeperId == KEEPER_FREYA)
DEBUG:refactor.py:277:format_first_block_in_file():1707:                            me->CastSpell(me, SPELL_CONJURE_SANITY_WELL, false);
DEBUG:refactor.py:277:format_first_block_in_file():1708:                        if (_keeperId == KEEPER_MIMIRON)
DEBUG:refactor.py:277:format_first_block_in_file():1709:                        {
DEBUG:refactor.py:277:format_first_block_in_file():1710:                            scheduler.Schedule(2s, [this](TaskContext context)
DEBUG:refactor.py:277:format_first_block_in_file():1711:                            {
DEBUG:refactor.py:277:format_first_block_in_file():1712:                                if (!me->HasUnitState(UNIT_STATE_CASTING))
DEBUG:refactor.py:277:format_first_block_in_file():1713:                                    me->CastSpell(me, SPELL_DESTABILIZATION_MATRIX, false);
DEBUG:refactor.py:277:format_first_block_in_file():1714:                                context.Repeat(2s);
DEBUG:refactor.py:277:format_first_block_in_file():1715:                            });
DEBUG:refactor.py:277:format_first_block_in_file():1716:                        }
DEBUG:refactor.py:277:format_first_block_in_file():1717:                        if (!me->HasAura(TABLE_KEEPER_PASSIVE[_keeperId]))
DEBUG:refactor.py:277:format_first_block_in_file():1718:                            me->AddAura(TABLE_KEEPER_PASSIVE[_keeperId], me);
DEBUG:refactor.py:277:format_first_block_in_file():1719:                    }
DEBUG:refactor.py:277:format_first_block_in_file():1720:                    else if (me->GetInstanceScript()->GetData(TYPE_YOGGSARON) != IN_PROGRESS && _isEncounterInProgress)
DEBUG:refactor.py:277:format_first_block_in_file():1721:                    {
DEBUG:refactor.py:277:format_first_block_in_file():1722:                        _isEncounterInProgress = false;
DEBUG:refactor.py:277:format_first_block_in_file():1723:                        scheduler.CancelAll();
DEBUG:refactor.py:277:format_first_block_in_file():1724:                        me->RemoveAura(TABLE_KEEPER_PASSIVE[_keeperId]);
DEBUG:refactor.py:277:format_first_block_in_file():1725:                    }
DEBUG:refactor.py:277:format_first_block_in_file():1726:                }
DEBUG:refactor.py:277:format_first_block_in_file():1727:                context.Repeat(1s);
DEBUG:refactor.py:277:format_first_block_in_file():1728:            });
DEBUG:refactor.py:277:format_first_block_in_file():1729:        }
DEBUG:refactor.py:277:format_first_block_in_file():1730:
DEBUG:refactor.py:277:format_first_block_in_file():1731:        void UpdateAI(uint32 diff) override
DEBUG:refactor.py:277:format_first_block_in_file():1732:        {
DEBUG:refactor.py:277:format_first_block_in_file():1733:            scheduler.Update(diff);
DEBUG:refactor.py:277:format_first_block_in_file():1734:        }
DEBUG:refactor.py:277:format_first_block_in_file():1735:
DEBUG:refactor.py:277:format_first_block_in_file():1736:    private:
DEBUG:refactor.py:277:format_first_block_in_file():1737:        bool _isEncounterInProgress;
DEBUG:refactor.py:277:format_first_block_in_file():1738:        uint8 _keeperId;
DEBUG:refactor.py:277:format_first_block_in_file():1739:    };
DEBUG:refactor.py:277:format_first_block_in_file():1740:};
DEBUG:refactor.py:277:format_first_block_in_file():1741:
DEBUG:refactor.py:277:format_first_block_in_file():1742:class boss_yoggsaron_descend_portal : public CreatureScript
DEBUG:refactor.py:277:format_first_block_in_file():1743:{
DEBUG:refactor.py:277:format_first_block_in_file():1744:public:
DEBUG:refactor.py:277:format_first_block_in_file():1745:    boss_yoggsaron_descend_portal() : CreatureScript("boss_yoggsaron_descend_portal") { }
DEBUG:refactor.py:277:format_first_block_in_file():1746:
DEBUG:refactor.py:277:format_first_block_in_file():1747:    struct boss_yoggsaron_descend_portalAI : public PassiveAI
DEBUG:refactor.py:277:format_first_block_in_file():1748:    {
DEBUG:refactor.py:277:format_first_block_in_file():1749:        boss_yoggsaron_descend_portalAI(Creature* creature) : PassiveAI(creature), _instance(creature->GetInstanceScript()) {}
DEBUG:refactor.py:277:format_first_block_in_file():1750:
DEBUG:refactor.py:277:format_first_block_in_file():1751:        void OnSpellClick(Unit* clicker, bool& spellClickHandled) override
DEBUG:refactor.py:277:format_first_block_in_file():1752:        {
DEBUG:refactor.py:277:format_first_block_in_file():1753:            if (!spellClickHandled)
DEBUG:refactor.py:277:format_first_block_in_file():1754:                return;
DEBUG:refactor.py:277:format_first_block_in_file():1755:
DEBUG:refactor.py:277:format_first_block_in_file():1756:            if (!me->GetUInt32Value(UNIT_NPC_FLAGS))
DEBUG:refactor.py:277:format_first_block_in_file():1757:                return;
DEBUG:refactor.py:277:format_first_block_in_file():1758:
DEBUG:refactor.py:277:format_first_block_in_file():1759:            switch (me->GetArmor())
DEBUG:refactor.py:277:format_first_block_in_file():1760:            {
DEBUG:refactor.py:277:format_first_block_in_file():1761:                case ACTION_ILLUSION_DRAGONS:
DEBUG:refactor.py:277:format_first_block_in_file():1762:                    clicker->CastSpell(clicker, SPELL_TELEPORT_TO_CHAMBER, true);
DEBUG:refactor.py:277:format_first_block_in_file():1763:                    break;
DEBUG:refactor.py:277:format_first_block_in_file():1764:                case ACTION_ILLUSION_ICECROWN:
DEBUG:refactor.py:277:format_first_block_in_file():1765:                    clicker->CastSpell(clicker, SPELL_TELEPORT_TO_ICECROWN, true);
DEBUG:refactor.py:277:format_first_block_in_file():1766:                    break;
DEBUG:refactor.py:277:format_first_block_in_file():1767:                case ACTION_ILLUSION_STORMWIND:
DEBUG:refactor.py:277:format_first_block_in_file():1768:                    clicker->CastSpell(clicker, SPELL_TELEPORT_TO_STORMWIND, true);
DEBUG:refactor.py:277:format_first_block_in_file():1769:                    break;
DEBUG:refactor.py:277:format_first_block_in_file():1770:            }
DEBUG:refactor.py:277:format_first_block_in_file():1771:
DEBUG:refactor.py:277:format_first_block_in_file():1772:            me->SetUInt32Value(UNIT_NPC_FLAGS, 0);
DEBUG:refactor.py:277:format_first_block_in_file():1773:            me->DespawnOrUnsummon(1000);
DEBUG:refactor.py:277:format_first_block_in_file():1774:        }
DEBUG:refactor.py:277:format_first_block_in_file():1775:
DEBUG:refactor.py:277:format_first_block_in_file():1776:    private:
DEBUG:refactor.py:277:format_first_block_in_file():1777:        InstanceScript* _instance;
DEBUG:refactor.py:277:format_first_block_in_file():1778:    };
DEBUG:refactor.py:277:format_first_block_in_file():1779:
DEBUG:refactor.py:277:format_first_block_in_file():1780:    CreatureAI* GetAI(Creature* creature) const override
DEBUG:refactor.py:277:format_first_block_in_file():1781:    {
DEBUG:refactor.py:277:format_first_block_in_file():1782:        return GetUlduarAI<boss_yoggsaron_descend_portalAI>(creature);
DEBUG:refactor.py:277:format_first_block_in_file():1783:    }
DEBUG:refactor.py:277:format_first_block_in_file():1784:};
DEBUG:refactor.py:277:format_first_block_in_file():1785:
DEBUG:refactor.py:277:format_first_block_in_file():1786:class boss_yoggsaron_influence_tentacle : public CreatureScript
DEBUG:refactor.py:277:format_first_block_in_file():1787:{
DEBUG:refactor.py:277:format_first_block_in_file():1788:public:
DEBUG:refactor.py:277:format_first_block_in_file():1789:    boss_yoggsaron_influence_tentacle() : CreatureScript("boss_yoggsaron_influence_tentacle") { }
DEBUG:refactor.py:277:format_first_block_in_file():1790:
DEBUG:refactor.py:277:format_first_block_in_file():1791:    CreatureAI* GetAI(Creature* pCreature) const override
DEBUG:refactor.py:277:format_first_block_in_file():1792:    {
DEBUG:refactor.py:277:format_first_block_in_file():1793:        return GetUlduarAI<boss_yoggsaron_influence_tentacleAI>(pCreature);
DEBUG:refactor.py:277:format_first_block_in_file():1794:    }
DEBUG:refactor.py:277:format_first_block_in_file():1795:
DEBUG:refactor.py:277:format_first_block_in_file():1796:    struct boss_yoggsaron_influence_tentacleAI : public NullCreatureAI
DEBUG:refactor.py:277:format_first_block_in_file():1797:    {
DEBUG:refactor.py:277:format_first_block_in_file():1798:        boss_yoggsaron_influence_tentacleAI(Creature* pCreature) : NullCreatureAI(pCreature)
DEBUG:refactor.py:277:format_first_block_in_file():1799:        {
DEBUG:refactor.py:277:format_first_block_in_file():1800:            me->CastSpell(me, SPELL_GRIM_REPRISAL, true);
DEBUG:refactor.py:277:format_first_block_in_file():1801:        }
DEBUG:refactor.py:277:format_first_block_in_file():1802:
DEBUG:refactor.py:277:format_first_block_in_file():1803:        void DamageTaken(Unit*, uint32&, DamageEffectType, SpellSchoolMask) override
DEBUG:refactor.py:277:format_first_block_in_file():1804:        {
DEBUG:refactor.py:277:format_first_block_in_file():1805:            if (me->GetEntry() != NPC_INFLUENCE_TENTACLE)
DEBUG:refactor.py:277:format_first_block_in_file():1806:                me->UpdateEntry(NPC_INFLUENCE_TENTACLE, 0, false);
DEBUG:refactor.py:277:format_first_block_in_file():1807:        }
DEBUG:refactor.py:277:format_first_block_in_file():1808:
DEBUG:refactor.py:277:format_first_block_in_file():1809:        void JustDied(Unit*) override
DEBUG:refactor.py:277:format_first_block_in_file():1810:        {
DEBUG:refactor.py:277:format_first_block_in_file():1811:            if (me->IsSummon())
DEBUG:refactor.py:277:format_first_block_in_file():1812:                if (Unit* sara = me->ToTempSummon()->GetSummonerUnit())
DEBUG:refactor.py:277:format_first_block_in_file():1813:                    sara->GetAI()->DoAction(ACTION_INFLUENCE_TENTACLE_DIED);
DEBUG:refactor.py:277:format_first_block_in_file():1814:        }
DEBUG:refactor.py:277:format_first_block_in_file():1815:    };
DEBUG:refactor.py:277:format_first_block_in_file():1816:};
DEBUG:refactor.py:277:format_first_block_in_file():1817:
DEBUG:refactor.py:277:format_first_block_in_file():1818:class boss_yoggsaron_immortal_guardian : public CreatureScript
DEBUG:refactor.py:277:format_first_block_in_file():1819:{
DEBUG:refactor.py:277:format_first_block_in_file():1820:public:
DEBUG:refactor.py:277:format_first_block_in_file():1821:    boss_yoggsaron_immortal_guardian() : CreatureScript("boss_yoggsaron_immortal_guardian") { }
DEBUG:refactor.py:277:format_first_block_in_file():1822:
DEBUG:refactor.py:277:format_first_block_in_file():1823:    CreatureAI* GetAI(Creature* pCreature) const override
DEBUG:refactor.py:277:format_first_block_in_file():1824:    {
DEBUG:refactor.py:277:format_first_block_in_file():1825:        return GetUlduarAI<boss_yoggsaron_immortal_guardianAI>(pCreature);
DEBUG:refactor.py:277:format_first_block_in_file():1826:    }
DEBUG:refactor.py:277:format_first_block_in_file():1827:
DEBUG:refactor.py:277:format_first_block_in_file():1828:    struct boss_yoggsaron_immortal_guardianAI : public ScriptedAI
DEBUG:refactor.py:277:format_first_block_in_file():1829:    {
DEBUG:refactor.py:277:format_first_block_in_file():1830:        boss_yoggsaron_immortal_guardianAI(Creature* pCreature) : ScriptedAI(pCreature)
DEBUG:refactor.py:277:format_first_block_in_file():1831:        {
DEBUG:refactor.py:277:format_first_block_in_file():1832:            Reset();
DEBUG:refactor.py:277:format_first_block_in_file():1833:        }
DEBUG:refactor.py:277:format_first_block_in_file():1834:
DEBUG:refactor.py:277:format_first_block_in_file():1835:        uint32 _visualTimer;
DEBUG:refactor.py:277:format_first_block_in_file():1836:        uint32 _spellTimer;
DEBUG:refactor.py:277:format_first_block_in_file():1837:
DEBUG:refactor.py:277:format_first_block_in_file():1838:        void Reset() override
DEBUG:refactor.py:277:format_first_block_in_file():1839:        {
DEBUG:refactor.py:277:format_first_block_in_file():1840:            me->CastSpell(me, SPELL_RECENTLY_SPAWNED, true);
DEBUG:refactor.py:277:format_first_block_in_file():1841:            //me->CastSpell(me, SPELL_EMPOWERED_PASSIVE, true);
DEBUG:refactor.py:277:format_first_block_in_file():1842:            if (Aura* aur = me->AddAura(SPELL_EMPOWERED_PASSIVE, me))
DEBUG:refactor.py:277:format_first_block_in_file():1843:                aur->SetStackAmount(9);
DEBUG:refactor.py:277:format_first_block_in_file():1844:
DEBUG:refactor.py:277:format_first_block_in_file():1845:            _spellTimer = 0;
DEBUG:refactor.py:277:format_first_block_in_file():1846:            _visualTimer = 1;
DEBUG:refactor.py:277:format_first_block_in_file():1847:            me->SetControlled(true, UNIT_STATE_ROOT);
DEBUG:refactor.py:277:format_first_block_in_file():1848:            me->SetInCombatWithZone();
DEBUG:refactor.py:277:format_first_block_in_file():1849:        }
DEBUG:refactor.py:277:format_first_block_in_file():1850:
DEBUG:refactor.py:277:format_first_block_in_file():1851:        void DamageTaken(Unit*, uint32& damage, DamageEffectType, SpellSchoolMask) override
DEBUG:refactor.py:277:format_first_block_in_file():1852:        {
DEBUG:refactor.py:277:format_first_block_in_file():1853:            if (damage >= me->GetHealth())
DEBUG:refactor.py:277:format_first_block_in_file():1854:                damage = me->GetHealth() - 1;
DEBUG:refactor.py:277:format_first_block_in_file():1855:        }
DEBUG:refactor.py:277:format_first_block_in_file():1856:
DEBUG:refactor.py:277:format_first_block_in_file():1857:        void SpellHit(Unit* caster, SpellInfo const* spellInfo) override
DEBUG:refactor.py:277:format_first_block_in_file():1858:        {
DEBUG:refactor.py:277:format_first_block_in_file():1859:            if (spellInfo->Id == SPELL_SHADOW_BEACON)
DEBUG:refactor.py:277:format_first_block_in_file():1860:                caster->GetAI()->DoAction(ACTION_YOGG_SARON_SHADOW_BEACON);
DEBUG:refactor.py:277:format_first_block_in_file():1861:        }
DEBUG:refactor.py:277:format_first_block_in_file():1862:
DEBUG:refactor.py:277:format_first_block_in_file():1863:        void UpdateAI(uint32 diff) override
DEBUG:refactor.py:277:format_first_block_in_file():1864:        {
DEBUG:refactor.py:277:format_first_block_in_file():1865:            if (!UpdateVictim())
DEBUG:refactor.py:277:format_first_block_in_file():1866:                return;
DEBUG:refactor.py:277:format_first_block_in_file():1867:
DEBUG:refactor.py:277:format_first_block_in_file():1868:            if (_visualTimer)
DEBUG:refactor.py:277:format_first_block_in_file():1869:            {
DEBUG:refactor.py:277:format_first_block_in_file():1870:                _visualTimer += diff;
DEBUG:refactor.py:277:format_first_block_in_file():1871:                if (_visualTimer >= 100 && _visualTimer < 10000 )
DEBUG:refactor.py:277:format_first_block_in_file():1872:                {
DEBUG:refactor.py:277:format_first_block_in_file():1873:                    me->CastSpell(me, SPELL_SIMPLE_TELEPORT, false);
DEBUG:refactor.py:277:format_first_block_in_file():1874:                    _visualTimer = 10000;
DEBUG:refactor.py:277:format_first_block_in_file():1875:                }
DEBUG:refactor.py:277:format_first_block_in_file():1876:                else if (_visualTimer >= 11000)
DEBUG:refactor.py:277:format_first_block_in_file():1877:                {
DEBUG:refactor.py:277:format_first_block_in_file():1878:                    me->SetControlled(false, UNIT_STATE_ROOT);
DEBUG:refactor.py:277:format_first_block_in_file():1879:                    _visualTimer = 0;
DEBUG:refactor.py:277:format_first_block_in_file():1880:                }
DEBUG:refactor.py:277:format_first_block_in_file():1881:            }
DEBUG:refactor.py:277:format_first_block_in_file():1882:
DEBUG:refactor.py:277:format_first_block_in_file():1883:            if (me->HasUnitState(UNIT_STATE_CASTING))
DEBUG:refactor.py:277:format_first_block_in_file():1884:                return;
DEBUG:refactor.py:277:format_first_block_in_file():1885:
DEBUG:refactor.py:277:format_first_block_in_file():1886:            _spellTimer += diff;
DEBUG:refactor.py:277:format_first_block_in_file():1887:            if (_spellTimer >= 9500)
DEBUG:refactor.py:277:format_first_block_in_file():1888:            {
DEBUG:refactor.py:277:format_first_block_in_file():1889:                if (me->HealthBelowPct(85))
DEBUG:refactor.py:277:format_first_block_in_file():1890:                {
DEBUG:refactor.py:277:format_first_block_in_file():1891:                    if (Unit* target = SelectTargetFromPlayerList(40.0f))
DEBUG:refactor.py:277:format_first_block_in_file():1892:                    {
DEBUG:refactor.py:277:format_first_block_in_file():1893:                        me->CastSpell(target, SPELL_DRAIN_LIFE, false);
DEBUG:refactor.py:277:format_first_block_in_file():1894:                        _spellTimer = 0;
DEBUG:refactor.py:277:format_first_block_in_file():1895:                    }
DEBUG:refactor.py:277:format_first_block_in_file():1896:                }
DEBUG:refactor.py:277:format_first_block_in_file():1897:                else
DEBUG:refactor.py:277:format_first_block_in_file():1898:                    _spellTimer = 7500;
DEBUG:refactor.py:277:format_first_block_in_file():1899:            }
DEBUG:refactor.py:277:format_first_block_in_file():1900:
DEBUG:refactor.py:277:format_first_block_in_file():1901:            DoMeleeAttackIfReady();
DEBUG:refactor.py:277:format_first_block_in_file():1902:        }
DEBUG:refactor.py:277:format_first_block_in_file():1903:    };
DEBUG:refactor.py:277:format_first_block_in_file():1904:};
DEBUG:refactor.py:277:format_first_block_in_file():1905:
DEBUG:refactor.py:277:format_first_block_in_file():1906:class boss_yoggsaron_lich_king : public CreatureScript
DEBUG:refactor.py:277:format_first_block_in_file():1907:{
DEBUG:refactor.py:277:format_first_block_in_file():1908:public:
DEBUG:refactor.py:277:format_first_block_in_file():1909:    boss_yoggsaron_lich_king() : CreatureScript("boss_yoggsaron_lich_king") { }
DEBUG:refactor.py:277:format_first_block_in_file():1910:
DEBUG:refactor.py:277:format_first_block_in_file():1911:    CreatureAI* GetAI(Creature* pCreature) const override
DEBUG:refactor.py:277:format_first_block_in_file():1912:    {
DEBUG:refactor.py:277:format_first_block_in_file():1913:        return GetUlduarAI<boss_yoggsaron_lich_kingAI>(pCreature);
DEBUG:refactor.py:277:format_first_block_in_file():1914:    }
DEBUG:refactor.py:277:format_first_block_in_file():1915:
DEBUG:refactor.py:277:format_first_block_in_file():1916:    struct boss_yoggsaron_lich_kingAI : public NullCreatureAI
DEBUG:refactor.py:277:format_first_block_in_file():1917:    {
DEBUG:refactor.py:277:format_first_block_in_file():1918:        boss_yoggsaron_lich_kingAI(Creature* c) : NullCreatureAI(c) { }
DEBUG:refactor.py:277:format_first_block_in_file():1919:
DEBUG:refactor.py:277:format_first_block_in_file():1920:        bool _running;
DEBUG:refactor.py:277:format_first_block_in_file():1921:        int32 _checkTimer;
DEBUG:refactor.py:277:format_first_block_in_file():1922:        uint8 _step;
DEBUG:refactor.py:277:format_first_block_in_file():1923:
DEBUG:refactor.py:277:format_first_block_in_file():1924:        void Reset() override
DEBUG:refactor.py:277:format_first_block_in_file():1925:        {
DEBUG:refactor.py:277:format_first_block_in_file():1926:            _running = true;
DEBUG:refactor.py:277:format_first_block_in_file():1927:            _checkTimer = 0;
DEBUG:refactor.py:277:format_first_block_in_file():1928:            _step = 0;
DEBUG:refactor.py:277:format_first_block_in_file():1929:        }
DEBUG:refactor.py:277:format_first_block_in_file():1930:
DEBUG:refactor.py:277:format_first_block_in_file():1931:        void NextStep(const uint32 time)
DEBUG:refactor.py:277:format_first_block_in_file():1932:        {
DEBUG:refactor.py:277:format_first_block_in_file():1933:            _step++;
DEBUG:refactor.py:277:format_first_block_in_file():1934:            _checkTimer = time;
DEBUG:refactor.py:277:format_first_block_in_file():1935:        }
DEBUG:refactor.py:277:format_first_block_in_file():1936:
DEBUG:refactor.py:277:format_first_block_in_file():1937:        void Say(uint8 text, uint32 id)
DEBUG:refactor.py:277:format_first_block_in_file():1938:        {
DEBUG:refactor.py:277:format_first_block_in_file():1939:            Creature* creature = me->FindNearestCreature(id, 50);
DEBUG:refactor.py:277:format_first_block_in_file():1940:            if (!creature)
DEBUG:refactor.py:277:format_first_block_in_file():1941:                return;
DEBUG:refactor.py:277:format_first_block_in_file():1942:
DEBUG:refactor.py:277:format_first_block_in_file():1943:            creature->AI()->Talk(text);
DEBUG:refactor.py:277:format_first_block_in_file():1944:                return;
DEBUG:refactor.py:277:format_first_block_in_file():1945:        }
DEBUG:refactor.py:277:format_first_block_in_file():1946:
DEBUG:refactor.py:277:format_first_block_in_file():1947:        void UpdateAI(uint32 diff) override
DEBUG:refactor.py:277:format_first_block_in_file():1948:        {
DEBUG:refactor.py:277:format_first_block_in_file():1949:            if (!_running)
DEBUG:refactor.py:277:format_first_block_in_file():1950:                return;
DEBUG:refactor.py:277:format_first_block_in_file():1951:
DEBUG:refactor.py:277:format_first_block_in_file():1952:            if (_checkTimer != 0)
DEBUG:refactor.py:277:format_first_block_in_file():1953:            {
DEBUG:refactor.py:277:format_first_block_in_file():1954:                _checkTimer -= diff;
DEBUG:refactor.py:277:format_first_block_in_file():1955:                if (_checkTimer < 0 )
DEBUG:refactor.py:277:format_first_block_in_file():1956:                    _checkTimer = 0;
DEBUG:refactor.py:277:format_first_block_in_file():1957:            }
DEBUG:refactor.py:277:format_first_block_in_file():1958:            else
DEBUG:refactor.py:277:format_first_block_in_file():1959:                switch (_step)
DEBUG:refactor.py:277:format_first_block_in_file():1960:                {
DEBUG:refactor.py:277:format_first_block_in_file():1961:                    case 0:
DEBUG:refactor.py:277:format_first_block_in_file():1962:                        NextStep(5000);
DEBUG:refactor.py:277:format_first_block_in_file():1963:                        break;
DEBUG:refactor.py:277:format_first_block_in_file():1964:                    case 1:
DEBUG:refactor.py:277:format_first_block_in_file():1965:                        Say(SAY_LK_1, NPC_LICH_KING);
DEBUG:refactor.py:277:format_first_block_in_file():1966:                        NextStep(7000);
DEBUG:refactor.py:277:format_first_block_in_file():1967:                        break;
DEBUG:refactor.py:277:format_first_block_in_file():1968:                    case 2:
DEBUG:refactor.py:277:format_first_block_in_file():1969:                        Say(SAY_IC_1, NPC_IMMOLATED_CHAMPION);
DEBUG:refactor.py:277:format_first_block_in_file():1970:                        NextStep(6000);
DEBUG:refactor.py:277:format_first_block_in_file():1971:                        break;
DEBUG:refactor.py:277:format_first_block_in_file():1972:                    case 3:
DEBUG:refactor.py:277:format_first_block_in_file():1973:                        Say(SAY_IC_2, NPC_IMMOLATED_CHAMPION);
DEBUG:refactor.py:277:format_first_block_in_file():1974:                        NextStep(6500);
DEBUG:refactor.py:277:format_first_block_in_file():1975:                        break;
DEBUG:refactor.py:277:format_first_block_in_file():1976:                    case 4:
DEBUG:refactor.py:277:format_first_block_in_file():1977:                        Say(SAY_LK_2, NPC_LICH_KING);
DEBUG:refactor.py:277:format_first_block_in_file():1978:                        NextStep(7500);
DEBUG:refactor.py:277:format_first_block_in_file():1979:                        break;
DEBUG:refactor.py:277:format_first_block_in_file():1980:                    case 5:
DEBUG:refactor.py:277:format_first_block_in_file():1981:                        Say(SAY_YOGG_5, NPC_YOGG_SARON_VISION);
DEBUG:refactor.py:277:format_first_block_in_file():1982:                        NextStep(5000);
DEBUG:refactor.py:277:format_first_block_in_file():1983:                        break;
DEBUG:refactor.py:277:format_first_block_in_file():1984:                    case 6:
DEBUG:refactor.py:277:format_first_block_in_file():1985:                        Say(SAY_YOGG_6, NPC_YOGG_SARON_VISION);
DEBUG:refactor.py:277:format_first_block_in_file():1986:                        _running = false;
DEBUG:refactor.py:277:format_first_block_in_file():1987:                        break;
DEBUG:refactor.py:277:format_first_block_in_file():1988:                }
DEBUG:refactor.py:277:format_first_block_in_file():1989:        }
DEBUG:refactor.py:277:format_first_block_in_file():1990:    };
DEBUG:refactor.py:277:format_first_block_in_file():1991:};
DEBUG:refactor.py:277:format_first_block_in_file():1992:
DEBUG:refactor.py:277:format_first_block_in_file():1993:class boss_yoggsaron_llane : public CreatureScript
DEBUG:refactor.py:277:format_first_block_in_file():1994:{
DEBUG:refactor.py:277:format_first_block_in_file():1995:public:
DEBUG:refactor.py:277:format_first_block_in_file():1996:    boss_yoggsaron_llane() : CreatureScript("boss_yoggsaron_llane") { }
DEBUG:refactor.py:277:format_first_block_in_file():1997:
DEBUG:refactor.py:277:format_first_block_in_file():1998:    CreatureAI* GetAI(Creature* pCreature) const override
DEBUG:refactor.py:277:format_first_block_in_file():1999:    {
DEBUG:refactor.py:277:format_first_block_in_file():2000:        return GetUlduarAI<boss_yoggsaron_llaneAI>(pCreature);
DEBUG:refactor.py:277:format_first_block_in_file():2001:    }
DEBUG:refactor.py:277:format_first_block_in_file():2002:
DEBUG:refactor.py:277:format_first_block_in_file():2003:    struct boss_yoggsaron_llaneAI : public NullCreatureAI
DEBUG:refactor.py:277:format_first_block_in_file():2004:    {
DEBUG:refactor.py:277:format_first_block_in_file():2005:        boss_yoggsaron_llaneAI(Creature* c) : NullCreatureAI(c) { }
DEBUG:refactor.py:277:format_first_block_in_file():2006:
DEBUG:refactor.py:277:format_first_block_in_file():2007:        bool _running;
DEBUG:refactor.py:277:format_first_block_in_file():2008:        int32 _checkTimer;
DEBUG:refactor.py:277:format_first_block_in_file():2009:        uint8 _step;
DEBUG:refactor.py:277:format_first_block_in_file():2010:
DEBUG:refactor.py:277:format_first_block_in_file():2011:        void Reset() override
DEBUG:refactor.py:277:format_first_block_in_file():2012:        {
DEBUG:refactor.py:277:format_first_block_in_file():2013:            _running = true;
DEBUG:refactor.py:277:format_first_block_in_file():2014:            _checkTimer = 0;
DEBUG:refactor.py:277:format_first_block_in_file():2015:            _step = 0;
DEBUG:refactor.py:277:format_first_block_in_file():2016:        }
DEBUG:refactor.py:277:format_first_block_in_file():2017:
DEBUG:refactor.py:277:format_first_block_in_file():2018:        void NextStep(const uint32 time)
DEBUG:refactor.py:277:format_first_block_in_file():2019:        {
DEBUG:refactor.py:277:format_first_block_in_file():2020:            _step++;
DEBUG:refactor.py:277:format_first_block_in_file():2021:            _checkTimer = time;
DEBUG:refactor.py:277:format_first_block_in_file():2022:        }
DEBUG:refactor.py:277:format_first_block_in_file():2023:
DEBUG:refactor.py:277:format_first_block_in_file():2024:        void Say(uint8 text, uint32 id)
DEBUG:refactor.py:277:format_first_block_in_file():2025:        {
DEBUG:refactor.py:277:format_first_block_in_file():2026:            Creature* creature = me->FindNearestCreature(id, 50);
DEBUG:refactor.py:277:format_first_block_in_file():2027:            if (!creature)
DEBUG:refactor.py:277:format_first_block_in_file():2028:                return;
DEBUG:refactor.py:277:format_first_block_in_file():2029:
DEBUG:refactor.py:277:format_first_block_in_file():2030:            creature->AI()->Talk(text);
DEBUG:refactor.py:277:format_first_block_in_file():2031:                return;
DEBUG:refactor.py:277:format_first_block_in_file():2032:        }
DEBUG:refactor.py:277:format_first_block_in_file():2033:
DEBUG:refactor.py:277:format_first_block_in_file():2034:        void UpdateAI(uint32 diff) override
DEBUG:refactor.py:277:format_first_block_in_file():2035:        {
DEBUG:refactor.py:277:format_first_block_in_file():2036:            if (!_running)
DEBUG:refactor.py:277:format_first_block_in_file():2037:                return;
DEBUG:refactor.py:277:format_first_block_in_file():2038:
DEBUG:refactor.py:277:format_first_block_in_file():2039:            if (_checkTimer != 0)
DEBUG:refactor.py:277:format_first_block_in_file():2040:            {
DEBUG:refactor.py:277:format_first_block_in_file():2041:                _checkTimer -= diff;
DEBUG:refactor.py:277:format_first_block_in_file():2042:                if (_checkTimer < 0 )
DEBUG:refactor.py:277:format_first_block_in_file():2043:                    _checkTimer = 0;
DEBUG:refactor.py:277:format_first_block_in_file():2044:            }
DEBUG:refactor.py:277:format_first_block_in_file():2045:            else
DEBUG:refactor.py:277:format_first_block_in_file():2046:                switch (_step)
DEBUG:refactor.py:277:format_first_block_in_file():2047:                {
DEBUG:refactor.py:277:format_first_block_in_file():2048:                    case 0:
DEBUG:refactor.py:277:format_first_block_in_file():2049:                        NextStep(5000);
DEBUG:refactor.py:277:format_first_block_in_file():2050:                        break;
DEBUG:refactor.py:277:format_first_block_in_file():2051:                    case 1:
DEBUG:refactor.py:277:format_first_block_in_file():2052:                        Say(SAY_GARONA_1, NPC_GARONA);
DEBUG:refactor.py:277:format_first_block_in_file():2053:                        NextStep(2000);
DEBUG:refactor.py:277:format_first_block_in_file():2054:                        break;
DEBUG:refactor.py:277:format_first_block_in_file():2055:                    case 2:
DEBUG:refactor.py:277:format_first_block_in_file():2056:                        Say(SAY_GARONA_2, NPC_GARONA);
DEBUG:refactor.py:277:format_first_block_in_file():2057:                        NextStep(6500);
DEBUG:refactor.py:277:format_first_block_in_file():2058:                        break;
DEBUG:refactor.py:277:format_first_block_in_file():2059:                    case 3:
DEBUG:refactor.py:277:format_first_block_in_file():2060:                        Say(SAY_GARONA_3, NPC_GARONA);
DEBUG:refactor.py:277:format_first_block_in_file():2061:                        NextStep(11000);
DEBUG:refactor.py:277:format_first_block_in_file():2062:                        break;
DEBUG:refactor.py:277:format_first_block_in_file():2063:                    case 4:
DEBUG:refactor.py:277:format_first_block_in_file():2064:                        Say(SAY_YOGG_1, NPC_YOGG_SARON_VISION);
DEBUG:refactor.py:277:format_first_block_in_file():2065:                        NextStep(2500);
DEBUG:refactor.py:277:format_first_block_in_file():2066:                        break;
DEBUG:refactor.py:277:format_first_block_in_file():2067:                    case 5:
DEBUG:refactor.py:277:format_first_block_in_file():2068:                        Say(SAY_YOGG_2, NPC_YOGG_SARON_VISION);
DEBUG:refactor.py:277:format_first_block_in_file():2069:                        NextStep(2500);
DEBUG:refactor.py:277:format_first_block_in_file():2070:                        break;
DEBUG:refactor.py:277:format_first_block_in_file():2071:                    case 6:
DEBUG:refactor.py:277:format_first_block_in_file():2072:                        Say(SAY_LLANE_1, NPC_KING_LLANE);
DEBUG:refactor.py:277:format_first_block_in_file():2073:                        NextStep(10000);
DEBUG:refactor.py:277:format_first_block_in_file():2074:                        break;
DEBUG:refactor.py:277:format_first_block_in_file():2075:                    case 7:
DEBUG:refactor.py:277:format_first_block_in_file():2076:                        Say(SAY_GARONA_4, NPC_GARONA);
DEBUG:refactor.py:277:format_first_block_in_file():2077:                        NextStep(5000);
DEBUG:refactor.py:277:format_first_block_in_file():2078:                        break;
DEBUG:refactor.py:277:format_first_block_in_file():2079:                    case 8:
DEBUG:refactor.py:277:format_first_block_in_file():2080:                        Say(SAY_YOGG_3, NPC_YOGG_SARON_VISION);
DEBUG:refactor.py:277:format_first_block_in_file():2081:                        _running = false;
DEBUG:refactor.py:277:format_first_block_in_file():2082:                        break;
DEBUG:refactor.py:277:format_first_block_in_file():2083:                }
DEBUG:refactor.py:277:format_first_block_in_file():2084:        }
DEBUG:refactor.py:277:format_first_block_in_file():2085:    };
DEBUG:refactor.py:277:format_first_block_in_file():2086:};
DEBUG:refactor.py:277:format_first_block_in_file():2087:
DEBUG:refactor.py:277:format_first_block_in_file():2088:class boss_yoggsaron_neltharion : public CreatureScript
DEBUG:refactor.py:277:format_first_block_in_file():2089:{
DEBUG:refactor.py:277:format_first_block_in_file():2090:public:
DEBUG:refactor.py:277:format_first_block_in_file():2091:    boss_yoggsaron_neltharion() : CreatureScript("boss_yoggsaron_neltharion") { }
DEBUG:refactor.py:277:format_first_block_in_file():2092:
DEBUG:refactor.py:277:format_first_block_in_file():2093:    CreatureAI* GetAI(Creature* pCreature) const override
DEBUG:refactor.py:277:format_first_block_in_file():2094:    {
DEBUG:refactor.py:277:format_first_block_in_file():2095:        return GetUlduarAI<boss_yoggsaron_neltharionAI>(pCreature);
DEBUG:refactor.py:277:format_first_block_in_file():2096:    }
DEBUG:refactor.py:277:format_first_block_in_file():2097:
DEBUG:refactor.py:277:format_first_block_in_file():2098:    struct boss_yoggsaron_neltharionAI : public ScriptedAI
DEBUG:refactor.py:277:format_first_block_in_file():2099:    {
DEBUG:refactor.py:277:format_first_block_in_file():2100:        boss_yoggsaron_neltharionAI(Creature* c) : ScriptedAI(c) { }
DEBUG:refactor.py:277:format_first_block_in_file():2101:
DEBUG:refactor.py:277:format_first_block_in_file():2102:        bool _running;
DEBUG:refactor.py:277:format_first_block_in_file():2103:        int32 _checkTimer;
DEBUG:refactor.py:277:format_first_block_in_file():2104:        uint8 _step;
DEBUG:refactor.py:277:format_first_block_in_file():2105:
DEBUG:refactor.py:277:format_first_block_in_file():2106:        void Reset() override
DEBUG:refactor.py:277:format_first_block_in_file():2107:        {
DEBUG:refactor.py:277:format_first_block_in_file():2108:            _running = true;
DEBUG:refactor.py:277:format_first_block_in_file():2109:            _checkTimer = 0;
DEBUG:refactor.py:277:format_first_block_in_file():2110:            _step = 0;
DEBUG:refactor.py:277:format_first_block_in_file():2111:        }
DEBUG:refactor.py:277:format_first_block_in_file():2112:
DEBUG:refactor.py:277:format_first_block_in_file():2113:        void NextStep(const uint32 time)
DEBUG:refactor.py:277:format_first_block_in_file():2114:        {
DEBUG:refactor.py:277:format_first_block_in_file():2115:            _step++;
DEBUG:refactor.py:277:format_first_block_in_file():2116:            _checkTimer = time;
DEBUG:refactor.py:277:format_first_block_in_file():2117:        }
DEBUG:refactor.py:277:format_first_block_in_file():2118:
DEBUG:refactor.py:277:format_first_block_in_file():2119:        void Say(uint8 text, uint32 id)
DEBUG:refactor.py:277:format_first_block_in_file():2120:        {
DEBUG:refactor.py:277:format_first_block_in_file():2121:            Creature* creature = me->FindNearestCreature(id, 50);
DEBUG:refactor.py:277:format_first_block_in_file():2122:            if (!creature)
DEBUG:refactor.py:277:format_first_block_in_file():2123:                return;
DEBUG:refactor.py:277:format_first_block_in_file():2124:
DEBUG:refactor.py:277:format_first_block_in_file():2125:            creature->AI()->Talk(text);
DEBUG:refactor.py:277:format_first_block_in_file():2126:                return;
DEBUG:refactor.py:277:format_first_block_in_file():2127:        }
DEBUG:refactor.py:277:format_first_block_in_file():2128:
DEBUG:refactor.py:277:format_first_block_in_file():2129:        void UpdateAI(uint32 diff) override
DEBUG:refactor.py:277:format_first_block_in_file():2130:        {
DEBUG:refactor.py:277:format_first_block_in_file():2131:            if (!_running)
DEBUG:refactor.py:277:format_first_block_in_file():2132:                return;
DEBUG:refactor.py:277:format_first_block_in_file():2133:
DEBUG:refactor.py:277:format_first_block_in_file():2134:            if (_checkTimer != 0)
DEBUG:refactor.py:277:format_first_block_in_file():2135:            {
DEBUG:refactor.py:277:format_first_block_in_file():2136:                _checkTimer -= diff;
DEBUG:refactor.py:277:format_first_block_in_file():2137:                if (_checkTimer < 0 )
DEBUG:refactor.py:277:format_first_block_in_file():2138:                    _checkTimer = 0;
DEBUG:refactor.py:277:format_first_block_in_file():2139:            }
DEBUG:refactor.py:277:format_first_block_in_file():2140:            else
DEBUG:refactor.py:277:format_first_block_in_file():2141:                switch (_step)
DEBUG:refactor.py:277:format_first_block_in_file():2142:                {
DEBUG:refactor.py:277:format_first_block_in_file():2143:                    case 0:
DEBUG:refactor.py:277:format_first_block_in_file():2144:                        NextStep(5000);
DEBUG:refactor.py:277:format_first_block_in_file():2145:                        break;
DEBUG:refactor.py:277:format_first_block_in_file():2146:                    case 1:
DEBUG:refactor.py:277:format_first_block_in_file():2147:                        Say(SAY_NEL_1, NPC_NELTHARION);
DEBUG:refactor.py:277:format_first_block_in_file():2148:                        NextStep(10000);
DEBUG:refactor.py:277:format_first_block_in_file():2149:                        break;
DEBUG:refactor.py:277:format_first_block_in_file():2150:                    case 2:
DEBUG:refactor.py:277:format_first_block_in_file():2151:                        Say(SAY_YAS_1, NPC_YSERA);
DEBUG:refactor.py:277:format_first_block_in_file():2152:                        NextStep(4000);
DEBUG:refactor.py:277:format_first_block_in_file():2153:                        break;
DEBUG:refactor.py:277:format_first_block_in_file():2154:                    case 3:
DEBUG:refactor.py:277:format_first_block_in_file():2155:                        Say(SAY_NEL_2, NPC_NELTHARION);
DEBUG:refactor.py:277:format_first_block_in_file():2156:                        NextStep(4000);
DEBUG:refactor.py:277:format_first_block_in_file():2157:                        break;
DEBUG:refactor.py:277:format_first_block_in_file():2158:                    case 4:
DEBUG:refactor.py:277:format_first_block_in_file():2159:                        Say(SAY_MAL_1, NPC_MALYGOS);
DEBUG:refactor.py:277:format_first_block_in_file():2160:                        NextStep(8000);
DEBUG:refactor.py:277:format_first_block_in_file():2161:                        break;
DEBUG:refactor.py:277:format_first_block_in_file():2162:                    case 5:
DEBUG:refactor.py:277:format_first_block_in_file():2163:                        Say(SAY_YOGG_4, NPC_YOGG_SARON_VISION);
DEBUG:refactor.py:277:format_first_block_in_file():2164:                        _running = false;
DEBUG:refactor.py:277:format_first_block_in_file():2165:                        break;
DEBUG:refactor.py:277:format_first_block_in_file():2166:                }
DEBUG:refactor.py:277:format_first_block_in_file():2167:        }
DEBUG:refactor.py:277:format_first_block_in_file():2168:    };
DEBUG:refactor.py:277:format_first_block_in_file():2169:};
DEBUG:refactor.py:277:format_first_block_in_file():2170:
DEBUG:refactor.py:277:format_first_block_in_file():2171:class boss_yoggsaron_voice : public CreatureScript
DEBUG:refactor.py:277:format_first_block_in_file():2172:{
DEBUG:refactor.py:277:format_first_block_in_file():2173:public:
DEBUG:refactor.py:277:format_first_block_in_file():2174:    boss_yoggsaron_voice() : CreatureScript("boss_yoggsaron_voice") { }
DEBUG:refactor.py:277:format_first_block_in_file():2175:
DEBUG:refactor.py:277:format_first_block_in_file():2176:    CreatureAI* GetAI(Creature* pCreature) const override
DEBUG:refactor.py:277:format_first_block_in_file():2177:    {
DEBUG:refactor.py:277:format_first_block_in_file():2178:        return GetUlduarAI<boss_yoggsaron_voiceAI>(pCreature);
DEBUG:refactor.py:277:format_first_block_in_file():2179:    }
DEBUG:refactor.py:277:format_first_block_in_file():2180:
DEBUG:refactor.py:277:format_first_block_in_file():2181:    struct boss_yoggsaron_voiceAI : public NullCreatureAI
DEBUG:refactor.py:277:format_first_block_in_file():2182:    {
DEBUG:refactor.py:277:format_first_block_in_file():2183:        boss_yoggsaron_voiceAI(Creature* pCreature) : NullCreatureAI(pCreature)
DEBUG:refactor.py:277:format_first_block_in_file():2184:        {
DEBUG:refactor.py:277:format_first_block_in_file():2185:            _targets.clear();
DEBUG:refactor.py:277:format_first_block_in_file():2186:            _current = 0;
DEBUG:refactor.py:277:format_first_block_in_file():2187:        }
DEBUG:refactor.py:277:format_first_block_in_file():2188:
DEBUG:refactor.py:277:format_first_block_in_file():2189:        EventMap events;
DEBUG:refactor.py:277:format_first_block_in_file():2190:        GuidVector _targets;
DEBUG:refactor.py:277:format_first_block_in_file():2191:        uint32 _current;
DEBUG:refactor.py:277:format_first_block_in_file():2192:
DEBUG:refactor.py:277:format_first_block_in_file():2193:        void Reset() override
DEBUG:refactor.py:277:format_first_block_in_file():2194:        {
DEBUG:refactor.py:277:format_first_block_in_file():2195:            me->CastSpell(me, SPELL_INSANE_PERIODIC, true);
DEBUG:refactor.py:277:format_first_block_in_file():2196:        }
DEBUG:refactor.py:277:format_first_block_in_file():2197:
DEBUG:refactor.py:277:format_first_block_in_file():2198:        void SpellHitTarget(Unit* target, SpellInfo const* spellInfo) override
DEBUG:refactor.py:277:format_first_block_in_file():2199:        {
DEBUG:refactor.py:277:format_first_block_in_file():2200:            if (spellInfo->Id == SPELL_INSANE1)
DEBUG:refactor.py:277:format_first_block_in_file():2201:            {
DEBUG:refactor.py:277:format_first_block_in_file():2202:                // Drive Me Crazy achievement failed
DEBUG:refactor.py:277:format_first_block_in_file():2203:                if (me->GetInstanceScript())
DEBUG:refactor.py:277:format_first_block_in_file():2204:                    if (Creature* yogg = ObjectAccessor::GetCreature(*me, me->GetInstanceScript()->GetGuidData(TYPE_YOGGSARON)))
DEBUG:refactor.py:277:format_first_block_in_file():2205:                        yogg->AI()->DoAction(ACTION_FAILED_DRIVE_ME_CRAZY);
DEBUG:refactor.py:277:format_first_block_in_file():2206:
DEBUG:refactor.py:277:format_first_block_in_file():2207:                events.ScheduleEvent(40, 2s);
DEBUG:refactor.py:277:format_first_block_in_file():2208:                _targets.push_back(target->GetGUID());
DEBUG:refactor.py:277:format_first_block_in_file():2209:            }
DEBUG:refactor.py:277:format_first_block_in_file():2210:        }
DEBUG:refactor.py:277:format_first_block_in_file():2211:
DEBUG:refactor.py:277:format_first_block_in_file():2212:        void UpdateAI(uint32 diff) override
DEBUG:refactor.py:277:format_first_block_in_file():2213:        {
DEBUG:refactor.py:277:format_first_block_in_file():2214:            events.Update(diff);
DEBUG:refactor.py:277:format_first_block_in_file():2215:            switch (events.ExecuteEvent())
DEBUG:refactor.py:277:format_first_block_in_file():2216:            {
DEBUG:refactor.py:277:format_first_block_in_file():2217:                case 40:
DEBUG:refactor.py:277:format_first_block_in_file():2218:                    {
DEBUG:refactor.py:277:format_first_block_in_file():2219:                        ObjectGuid _guid = _targets.at(_current);
DEBUG:refactor.py:277:format_first_block_in_file():2220:                        ++_current;
DEBUG:refactor.py:277:format_first_block_in_file():2221:
DEBUG:refactor.py:277:format_first_block_in_file():2222:                        if (Player* player = ObjectAccessor::GetPlayer(*me, _guid))
DEBUG:refactor.py:277:format_first_block_in_file():2223:                        {
DEBUG:refactor.py:277:format_first_block_in_file():2224:                            Talk(WHISPER_VOICE_INSANE, player);
DEBUG:refactor.py:277:format_first_block_in_file():2225:                        }
DEBUG:refactor.py:277:format_first_block_in_file():2226:                        break;
DEBUG:refactor.py:277:format_first_block_in_file():2227:                    }
DEBUG:refactor.py:277:format_first_block_in_file():2228:            }
DEBUG:refactor.py:277:format_first_block_in_file():2229:        }
DEBUG:refactor.py:277:format_first_block_in_file():2230:    };
DEBUG:refactor.py:277:format_first_block_in_file():2231:};
DEBUG:refactor.py:277:format_first_block_in_file():2232:
DEBUG:refactor.py:277:format_first_block_in_file():2233:// 63830, 63881 - Malady of the Mind
DEBUG:refactor.py:277:format_first_block_in_file():2234:class spell_yogg_saron_malady_of_the_mind : public SpellScriptLoader
DEBUG:refactor.py:277:format_first_block_in_file():2235:{
DEBUG:refactor.py:277:format_first_block_in_file():2236:public:
DEBUG:refactor.py:277:format_first_block_in_file():2237:    spell_yogg_saron_malady_of_the_mind() : SpellScriptLoader("spell_yogg_saron_malady_of_the_mind") { }
DEBUG:refactor.py:277:format_first_block_in_file():2238:
DEBUG:refactor.py:277:format_first_block_in_file():2239:    class spell_yogg_saron_malady_of_the_mind_AuraScript : public AuraScript
DEBUG:refactor.py:277:format_first_block_in_file():2240:    {
DEBUG:refactor.py:277:format_first_block_in_file():2241:        PrepareAuraScript(spell_yogg_saron_malady_of_the_mind_AuraScript);
DEBUG:refactor.py:277:format_first_block_in_file():2242:
DEBUG:refactor.py:277:format_first_block_in_file():2243:        void OnApply(AuraEffect const* /*aurEff*/, AuraEffectHandleModes /*mode*/)
DEBUG:refactor.py:277:format_first_block_in_file():2244:        {
DEBUG:refactor.py:277:format_first_block_in_file():2245:            GetUnitOwner()->ApplySpellImmune(SPELL_DEATH_RAY_DAMAGE_REAL, IMMUNITY_ID, SPELL_DEATH_RAY_DAMAGE_REAL, true);
DEBUG:refactor.py:277:format_first_block_in_file():2246:        }
DEBUG:refactor.py:277:format_first_block_in_file():2247:
DEBUG:refactor.py:277:format_first_block_in_file():2248:        void OnRemove(AuraEffect const* /*aurEff*/, AuraEffectHandleModes /*mode*/)
DEBUG:refactor.py:277:format_first_block_in_file():2249:        {
DEBUG:refactor.py:277:format_first_block_in_file():2250:            GetUnitOwner()->ApplySpellImmune(SPELL_DEATH_RAY_DAMAGE_REAL, IMMUNITY_ID, SPELL_DEATH_RAY_DAMAGE_REAL, false);
DEBUG:refactor.py:277:format_first_block_in_file():2251:            GetUnitOwner()->CastCustomSpell(SPELL_MALADY_OF_THE_MIND_TRIGGER, SPELLVALUE_MAX_TARGETS, 1, GetUnitOwner(), true);
DEBUG:refactor.py:277:format_first_block_in_file():2252:        }
DEBUG:refactor.py:277:format_first_block_in_file():2253:
DEBUG:refactor.py:277:format_first_block_in_file():2254:        void Register() override
DEBUG:refactor.py:277:format_first_block_in_file():2255:        {
DEBUG:refactor.py:277:format_first_block_in_file():2256:            OnEffectApply += AuraEffectApplyFn(spell_yogg_saron_malady_of_the_mind_AuraScript::OnApply, EFFECT_1, SPELL_AURA_MOD_FEAR, AURA_EFFECT_HANDLE_REAL);
DEBUG:refactor.py:277:format_first_block_in_file():2257:            OnEffectRemove += AuraEffectRemoveFn(spell_yogg_saron_malady_of_the_mind_AuraScript::OnRemove, EFFECT_1, SPELL_AURA_MOD_FEAR, AURA_EFFECT_HANDLE_REAL);
DEBUG:refactor.py:277:format_first_block_in_file():2258:        }
DEBUG:refactor.py:277:format_first_block_in_file():2259:    };
DEBUG:refactor.py:277:format_first_block_in_file():2260:
DEBUG:refactor.py:277:format_first_block_in_file():2261:    AuraScript* GetAuraScript() const override
DEBUG:refactor.py:277:format_first_block_in_file():2262:    {
DEBUG:refactor.py:277:format_first_block_in_file():2263:        return new spell_yogg_saron_malady_of_the_mind_AuraScript();
DEBUG:refactor.py:277:format_first_block_in_file():2264:    }
DEBUG:refactor.py:277:format_first_block_in_file():2265:};
DEBUG:refactor.py:277:format_first_block_in_file():2266:
DEBUG:refactor.py:277:format_first_block_in_file():2267:// 63802 - Brain Link
DEBUG:refactor.py:277:format_first_block_in_file():2268:class spell_yogg_saron_brain_link : public SpellScript
DEBUG:refactor.py:277:format_first_block_in_file():2269:{
DEBUG:refactor.py:277:format_first_block_in_file():2270:    PrepareSpellScript(spell_yogg_saron_brain_link);
DEBUG:refactor.py:277:format_first_block_in_file():2271:
DEBUG:refactor.py:277:format_first_block_in_file():2272:    void FilterTargets(std::list<WorldObject*>& targets)
DEBUG:refactor.py:277:format_first_block_in_file():2273:    {
DEBUG:refactor.py:277:format_first_block_in_file():2274:        std::list<WorldObject*> tempList;
DEBUG:refactor.py:277:format_first_block_in_file():2275:        for (std::list<WorldObject*>::iterator itr = targets.begin(); itr != targets.end(); ++itr)
DEBUG:refactor.py:277:format_first_block_in_file():2276:            if ((*itr)->GetPositionZ() > 300.0f)
DEBUG:refactor.py:277:format_first_block_in_file():2277:                tempList.push_back(*itr);
DEBUG:refactor.py:277:format_first_block_in_file():2278:
DEBUG:refactor.py:277:format_first_block_in_file():2279:        targets.clear();
DEBUG:refactor.py:277:format_first_block_in_file():2280:        for (std::list<WorldObject*>::iterator itr = tempList.begin(); itr != tempList.end(); ++itr)
DEBUG:refactor.py:277:format_first_block_in_file():2281:            targets.push_back(*itr);
DEBUG:refactor.py:277:format_first_block_in_file():2282:    }
DEBUG:refactor.py:277:format_first_block_in_file():2283:
DEBUG:refactor.py:277:format_first_block_in_file():2284:    void Register() override
DEBUG:refactor.py:277:format_first_block_in_file():2285:    {
DEBUG:refactor.py:277:format_first_block_in_file():2286:        OnObjectAreaTargetSelect += SpellObjectAreaTargetSelectFn(spell_yogg_saron_brain_link::FilterTargets, EFFECT_0, TARGET_UNIT_SRC_AREA_ENEMY);
DEBUG:refactor.py:277:format_first_block_in_file():2287:    }
DEBUG:refactor.py:277:format_first_block_in_file():2288:};
DEBUG:refactor.py:277:format_first_block_in_file():2289:
DEBUG:refactor.py:277:format_first_block_in_file():2290:class spell_yogg_saron_brain_link_aura : public AuraScript
DEBUG:refactor.py:277:format_first_block_in_file():2291:{
DEBUG:refactor.py:277:format_first_block_in_file():2292:    PrepareAuraScript(spell_yogg_saron_brain_link_aura);
DEBUG:refactor.py:277:format_first_block_in_file():2293:
DEBUG:refactor.py:277:format_first_block_in_file():2294:    void HandleOnEffectApply(AuraEffect const* /*aurEff*/, AuraEffectHandleModes /*mode*/)
DEBUG:refactor.py:277:format_first_block_in_file():2295:    {
DEBUG:refactor.py:277:format_first_block_in_file():2296:        PreventDefaultAction();
DEBUG:refactor.py:277:format_first_block_in_file():2297:        Player* target = nullptr;
DEBUG:refactor.py:277:format_first_block_in_file():2298:        Map::PlayerList const& pList = GetUnitOwner()->GetMap()->GetPlayers();
DEBUG:refactor.py:277:format_first_block_in_file():2299:        uint8 _offset = urand(0, pList.getSize() - 1);
DEBUG:refactor.py:277:format_first_block_in_file():2300:        uint8 _counter = 0;
DEBUG:refactor.py:277:format_first_block_in_file():2301:        for(Map::PlayerList::const_iterator itr = pList.begin(); itr != pList.end(); ++itr, ++_counter)
DEBUG:refactor.py:277:format_first_block_in_file():2302:        {
DEBUG:refactor.py:277:format_first_block_in_file():2303:            if (itr->GetSource() == GetUnitOwner() || GetUnitOwner()->GetDistance(itr->GetSource()) > 50.0f || !itr->GetSource()->IsAlive() || itr->GetSource()->IsGameMaster())
DEBUG:refactor.py:277:format_first_block_in_file():2304:                continue;
DEBUG:refactor.py:277:format_first_block_in_file():2305:
DEBUG:refactor.py:277:format_first_block_in_file():2306:            if (_counter <= _offset || !target)
DEBUG:refactor.py:277:format_first_block_in_file():2307:                target = itr->GetSource();
DEBUG:refactor.py:277:format_first_block_in_file():2308:            else
DEBUG:refactor.py:277:format_first_block_in_file():2309:                break;
DEBUG:refactor.py:277:format_first_block_in_file():2310:        }
DEBUG:refactor.py:277:format_first_block_in_file():2311:
DEBUG:refactor.py:277:format_first_block_in_file():2312:        if (!target)
DEBUG:refactor.py:277:format_first_block_in_file():2313:            SetDuration(0);
DEBUG:refactor.py:277:format_first_block_in_file():2314:        else
DEBUG:refactor.py:277:format_first_block_in_file():2315:            _targetGUID = target->GetGUID();
DEBUG:refactor.py:277:format_first_block_in_file():2316:    }
DEBUG:refactor.py:277:format_first_block_in_file():2317:
DEBUG:refactor.py:277:format_first_block_in_file():2318:    void OnPeriodic(AuraEffect const*  /*aurEff*/)
DEBUG:refactor.py:277:format_first_block_in_file():2319:    {
DEBUG:refactor.py:277:format_first_block_in_file():2320:        Unit* owner = GetUnitOwner();
DEBUG:refactor.py:277:format_first_block_in_file():2321:        if (!owner)
DEBUG:refactor.py:277:format_first_block_in_file():2322:        {
DEBUG:refactor.py:277:format_first_block_in_file():2323:            SetDuration(0);
DEBUG:refactor.py:277:format_first_block_in_file():2324:            return;
DEBUG:refactor.py:277:format_first_block_in_file():2325:        }
DEBUG:refactor.py:277:format_first_block_in_file():2326:
DEBUG:refactor.py:277:format_first_block_in_file():2327:        Unit* _target = ObjectAccessor::GetUnit(*owner, _targetGUID);
DEBUG:refactor.py:277:format_first_block_in_file():2328:        if (!_target || !_target->IsAlive() || std::fabs(owner->GetPositionZ() - _target->GetPositionZ()) > 10.0f) // Target or owner underground
DEBUG:refactor.py:277:format_first_block_in_file():2329:        {
DEBUG:refactor.py:277:format_first_block_in_file():2330:            SetDuration(0);
DEBUG:refactor.py:277:format_first_block_in_file():2331:            return;
DEBUG:refactor.py:277:format_first_block_in_file():2332:        }
DEBUG:refactor.py:277:format_first_block_in_file():2333:
DEBUG:refactor.py:277:format_first_block_in_file():2334:        if (owner->GetDistance(_target) > 20.0f)
DEBUG:refactor.py:277:format_first_block_in_file():2335:        {
DEBUG:refactor.py:277:format_first_block_in_file():2336:            owner->CastSpell(_target, SPELL_BRAIN_LINK_DAMAGE, true);
DEBUG:refactor.py:277:format_first_block_in_file():2337:            owner->CastSpell(owner, SPELL_BRAIN_LINK_DAMAGE, true);
DEBUG:refactor.py:277:format_first_block_in_file():2338:        }
DEBUG:refactor.py:277:format_first_block_in_file():2339:        else
DEBUG:refactor.py:277:format_first_block_in_file():2340:            owner->CastSpell(_target, SPELL_BRAIN_LINK_OK, true);
DEBUG:refactor.py:277:format_first_block_in_file():2341:    }
DEBUG:refactor.py:277:format_first_block_in_file():2342:
DEBUG:refactor.py:277:format_first_block_in_file():2343:    void Register() override
DEBUG:refactor.py:277:format_first_block_in_file():2344:    {
DEBUG:refactor.py:277:format_first_block_in_file():2345:        OnEffectApply += AuraEffectApplyFn(spell_yogg_saron_brain_link_aura::HandleOnEffectApply, EFFECT_0, SPELL_AURA_PERIODIC_DUMMY, AURA_EFFECT_HANDLE_REAL);
DEBUG:refactor.py:277:format_first_block_in_file():2346:        OnEffectPeriodic += AuraEffectPeriodicFn(spell_yogg_saron_brain_link_aura::OnPeriodic, EFFECT_0, SPELL_AURA_PERIODIC_DUMMY);
DEBUG:refactor.py:277:format_first_block_in_file():2347:    }
DEBUG:refactor.py:277:format_first_block_in_file():2348:
DEBUG:refactor.py:277:format_first_block_in_file():2349:protected:
DEBUG:refactor.py:277:format_first_block_in_file():2350:    ObjectGuid _targetGUID;
DEBUG:refactor.py:277:format_first_block_in_file():2351:};
DEBUG:refactor.py:277:format_first_block_in_file():2352:
DEBUG:refactor.py:277:format_first_block_in_file():2353:// 64465 - Shadow Beacon
DEBUG:refactor.py:277:format_first_block_in_file():2354:class spell_yogg_saron_shadow_beacon : public SpellScriptLoader
DEBUG:refactor.py:277:format_first_block_in_file():2355:{
DEBUG:refactor.py:277:format_first_block_in_file():2356:    public:
DEBUG:refactor.py:277:format_first_block_in_file():2357:        spell_yogg_saron_shadow_beacon() : SpellScriptLoader("spell_yogg_saron_shadow_beacon") { }
DEBUG:refactor.py:277:format_first_block_in_file():2358:
DEBUG:refactor.py:277:format_first_block_in_file():2359:        class spell_yogg_saron_shadow_beacon_AuraScript : public AuraScript
DEBUG:refactor.py:277:format_first_block_in_file():2360:        {
DEBUG:refactor.py:277:format_first_block_in_file():2361:            PrepareAuraScript(spell_yogg_saron_shadow_beacon_AuraScript);
DEBUG:refactor.py:277:format_first_block_in_file():2362:
DEBUG:refactor.py:277:format_first_block_in_file():2363:            void OnApply(AuraEffect const* /*aurEff*/, AuraEffectHandleModes /*mode*/)
DEBUG:refactor.py:277:format_first_block_in_file():2364:            {
DEBUG:refactor.py:277:format_first_block_in_file():2365:                if (Creature* target = GetTarget()->ToCreature())
DEBUG:refactor.py:277:format_first_block_in_file():2366:                {
DEBUG:refactor.py:277:format_first_block_in_file():2367:                    target->SetEntry(NPC_MARKED_IMMORTAL_GUARDIAN);
DEBUG:refactor.py:277:format_first_block_in_file():2368:                }
DEBUG:refactor.py:277:format_first_block_in_file():2369:            }
DEBUG:refactor.py:277:format_first_block_in_file():2370:
DEBUG:refactor.py:277:format_first_block_in_file():2371:            void OnRemove(AuraEffect const* /*aurEff*/, AuraEffectHandleModes /*mode*/)
DEBUG:refactor.py:277:format_first_block_in_file():2372:            {
DEBUG:refactor.py:277:format_first_block_in_file():2373:                if (Creature* target = GetTarget()->ToCreature())
DEBUG:refactor.py:277:format_first_block_in_file():2374:                {
DEBUG:refactor.py:277:format_first_block_in_file():2375:                    target->SetEntry(NPC_IMMORTAL_GUARDIAN);
DEBUG:refactor.py:277:format_first_block_in_file():2376:                }
DEBUG:refactor.py:277:format_first_block_in_file():2377:            }
DEBUG:refactor.py:277:format_first_block_in_file():2378:
DEBUG:refactor.py:277:format_first_block_in_file():2379:            void Register() override
DEBUG:refactor.py:277:format_first_block_in_file():2380:            {
DEBUG:refactor.py:277:format_first_block_in_file():2381:                AfterEffectApply += AuraEffectApplyFn(spell_yogg_saron_shadow_beacon_AuraScript::OnApply, EFFECT_0, SPELL_AURA_PERIODIC_TRIGGER_SPELL, AURA_EFFECT_HANDLE_REAL);
DEBUG:refactor.py:277:format_first_block_in_file():2382:                AfterEffectRemove += AuraEffectRemoveFn(spell_yogg_saron_shadow_beacon_AuraScript::OnRemove, EFFECT_0, SPELL_AURA_PERIODIC_TRIGGER_SPELL, AURA_EFFECT_HANDLE_REAL);
DEBUG:refactor.py:277:format_first_block_in_file():2383:            }
DEBUG:refactor.py:277:format_first_block_in_file():2384:        };
DEBUG:refactor.py:277:format_first_block_in_file():2385:
DEBUG:refactor.py:277:format_first_block_in_file():2386:        AuraScript* GetAuraScript() const override
DEBUG:refactor.py:277:format_first_block_in_file():2387:        {
DEBUG:refactor.py:277:format_first_block_in_file():2388:            return new spell_yogg_saron_shadow_beacon_AuraScript();
DEBUG:refactor.py:277:format_first_block_in_file():2389:        }
DEBUG:refactor.py:277:format_first_block_in_file():2390:};
DEBUG:refactor.py:277:format_first_block_in_file():2391:
DEBUG:refactor.py:277:format_first_block_in_file():2392:// 65206 - Destabilization Matrix
DEBUG:refactor.py:277:format_first_block_in_file():2393:class spell_yogg_saron_destabilization_matrix : public SpellScriptLoader
DEBUG:refactor.py:277:format_first_block_in_file():2394:{
DEBUG:refactor.py:277:format_first_block_in_file():2395:public:
DEBUG:refactor.py:277:format_first_block_in_file():2396:    spell_yogg_saron_destabilization_matrix() : SpellScriptLoader("spell_yogg_saron_destabilization_matrix") { }
DEBUG:refactor.py:277:format_first_block_in_file():2397:
DEBUG:refactor.py:277:format_first_block_in_file():2398:    class spell_yogg_saron_destabilization_matrix_SpellScript : public SpellScript
DEBUG:refactor.py:277:format_first_block_in_file():2399:    {
DEBUG:refactor.py:277:format_first_block_in_file():2400:        PrepareSpellScript(spell_yogg_saron_destabilization_matrix_SpellScript);
DEBUG:refactor.py:277:format_first_block_in_file():2401:
DEBUG:refactor.py:277:format_first_block_in_file():2402:        void HandleDummyEffect(SpellEffIndex effIndex)
DEBUG:refactor.py:277:format_first_block_in_file():2403:        {
DEBUG:refactor.py:277:format_first_block_in_file():2404:            PreventHitDefaultEffect(effIndex);
DEBUG:refactor.py:277:format_first_block_in_file():2405:            if (Unit* target = GetHitUnit())
DEBUG:refactor.py:277:format_first_block_in_file():2406:                GetCaster()->CastSpell(target, SPELL_DESTABILIZATION_MATRIX_ATTACK, false);
DEBUG:refactor.py:277:format_first_block_in_file():2407:        }
DEBUG:refactor.py:277:format_first_block_in_file():2408:
DEBUG:refactor.py:277:format_first_block_in_file():2409:        void FilterTargets(std::list<WorldObject*>& targets)
DEBUG:refactor.py:277:format_first_block_in_file():2410:        {
DEBUG:refactor.py:277:format_first_block_in_file():2411:            WorldObject* target = nullptr;
DEBUG:refactor.py:277:format_first_block_in_file():2412:            for (std::list<WorldObject*>::iterator itr = targets.begin(); itr != targets.end(); ++itr)
DEBUG:refactor.py:277:format_first_block_in_file():2413:                if (!(*itr)->ToUnit()->HasAura(SPELL_DESTABILIZATION_MATRIX_ATTACK))
DEBUG:refactor.py:277:format_first_block_in_file():2414:                {
DEBUG:refactor.py:277:format_first_block_in_file():2415:                    target = *itr;
DEBUG:refactor.py:277:format_first_block_in_file():2416:                    break;
DEBUG:refactor.py:277:format_first_block_in_file():2417:                }
DEBUG:refactor.py:277:format_first_block_in_file():2418:
DEBUG:refactor.py:277:format_first_block_in_file():2419:            targets.clear();
DEBUG:refactor.py:277:format_first_block_in_file():2420:            if (target)
DEBUG:refactor.py:277:format_first_block_in_file():2421:                targets.push_back(target);
DEBUG:refactor.py:277:format_first_block_in_file():2422:        }
DEBUG:refactor.py:277:format_first_block_in_file():2423:
DEBUG:refactor.py:277:format_first_block_in_file():2424:        void Register() override
DEBUG:refactor.py:277:format_first_block_in_file():2425:        {
DEBUG:refactor.py:277:format_first_block_in_file():2426:            OnEffectHitTarget += SpellEffectFn(spell_yogg_saron_destabilization_matrix_SpellScript::HandleDummyEffect, EFFECT_0, SPELL_EFFECT_DUMMY);
DEBUG:refactor.py:277:format_first_block_in_file():2427:            OnObjectAreaTargetSelect += SpellObjectAreaTargetSelectFn(spell_yogg_saron_destabilization_matrix_SpellScript::FilterTargets, EFFECT_0, TARGET_UNIT_SRC_AREA_ENTRY);
DEBUG:refactor.py:277:format_first_block_in_file():2428:        }
DEBUG:refactor.py:277:format_first_block_in_file():2429:    };
DEBUG:refactor.py:277:format_first_block_in_file():2430:
DEBUG:refactor.py:277:format_first_block_in_file():2431:    SpellScript* GetSpellScript() const override
DEBUG:refactor.py:277:format_first_block_in_file():2432:    {
DEBUG:refactor.py:277:format_first_block_in_file():2433:        return new spell_yogg_saron_destabilization_matrix_SpellScript();
DEBUG:refactor.py:277:format_first_block_in_file():2434:    }
DEBUG:refactor.py:277:format_first_block_in_file():2435:};
DEBUG:refactor.py:277:format_first_block_in_file():2436:
DEBUG:refactor.py:277:format_first_block_in_file():2437:// 64172 - Titanic Storm
DEBUG:refactor.py:277:format_first_block_in_file():2438:class spell_yogg_saron_titanic_storm : public SpellScriptLoader
DEBUG:refactor.py:277:format_first_block_in_file():2439:{
DEBUG:refactor.py:277:format_first_block_in_file():2440:public:
DEBUG:refactor.py:277:format_first_block_in_file():2441:    spell_yogg_saron_titanic_storm() : SpellScriptLoader("spell_yogg_saron_titanic_storm") { }
DEBUG:refactor.py:277:format_first_block_in_file():2442:
DEBUG:refactor.py:277:format_first_block_in_file():2443:    class spell_yogg_saron_titanic_storm_SpellScript : public SpellScript
DEBUG:refactor.py:277:format_first_block_in_file():2444:    {
DEBUG:refactor.py:277:format_first_block_in_file():2445:        PrepareSpellScript(spell_yogg_saron_titanic_storm_SpellScript);
DEBUG:refactor.py:277:format_first_block_in_file():2446:
DEBUG:refactor.py:277:format_first_block_in_file():2447:        void HandleDummyEffect(SpellEffIndex effIndex)
DEBUG:refactor.py:277:format_first_block_in_file():2448:        {
DEBUG:refactor.py:277:format_first_block_in_file():2449:            PreventHitDefaultEffect(effIndex);
DEBUG:refactor.py:277:format_first_block_in_file():2450:            if (Unit* target = GetHitUnit())
DEBUG:refactor.py:277:format_first_block_in_file():2451:                Unit::Kill(GetCaster(), target);
DEBUG:refactor.py:277:format_first_block_in_file():2452:        }
DEBUG:refactor.py:277:format_first_block_in_file():2453:
DEBUG:refactor.py:277:format_first_block_in_file():2454:        void FilterTargets(std::list<WorldObject*>& targets)
DEBUG:refactor.py:277:format_first_block_in_file():2455:        {
DEBUG:refactor.py:277:format_first_block_in_file():2456:            WorldObject* target = nullptr;
DEBUG:refactor.py:277:format_first_block_in_file():2457:            for (std::list<WorldObject*>::iterator itr = targets.begin(); itr != targets.end(); ++itr)
DEBUG:refactor.py:277:format_first_block_in_file():2458:                if ((*itr)->ToUnit()->HasAura(SPELL_WEAKENED))
DEBUG:refactor.py:277:format_first_block_in_file():2459:                {
DEBUG:refactor.py:277:format_first_block_in_file():2460:                    target = *itr;
DEBUG:refactor.py:277:format_first_block_in_file():2461:                    break;
DEBUG:refactor.py:277:format_first_block_in_file():2462:                }
DEBUG:refactor.py:277:format_first_block_in_file():2463:
DEBUG:refactor.py:277:format_first_block_in_file():2464:            targets.clear();
DEBUG:refactor.py:277:format_first_block_in_file():2465:            if (target)
DEBUG:refactor.py:277:format_first_block_in_file():2466:                targets.push_back(target);
DEBUG:refactor.py:277:format_first_block_in_file():2467:        }
DEBUG:refactor.py:277:format_first_block_in_file():2468:
DEBUG:refactor.py:277:format_first_block_in_file():2469:        void Register() override
DEBUG:refactor.py:277:format_first_block_in_file():2470:        {
DEBUG:refactor.py:277:format_first_block_in_file():2471:            OnEffectHitTarget += SpellEffectFn(spell_yogg_saron_titanic_storm_SpellScript::HandleDummyEffect, EFFECT_0, SPELL_EFFECT_DUMMY);
DEBUG:refactor.py:277:format_first_block_in_file():2472:            OnObjectAreaTargetSelect += SpellObjectAreaTargetSelectFn(spell_yogg_saron_titanic_storm_SpellScript::FilterTargets, EFFECT_0, TARGET_UNIT_SRC_AREA_ENTRY);
DEBUG:refactor.py:277:format_first_block_in_file():2473:        }
DEBUG:refactor.py:277:format_first_block_in_file():2474:    };
DEBUG:refactor.py:277:format_first_block_in_file():2475:
DEBUG:refactor.py:277:format_first_block_in_file():2476:    SpellScript* GetSpellScript() const override
DEBUG:refactor.py:277:format_first_block_in_file():2477:    {
DEBUG:refactor.py:277:format_first_block_in_file():2478:        return new spell_yogg_saron_titanic_storm_SpellScript();
DEBUG:refactor.py:277:format_first_block_in_file():2479:    }
DEBUG:refactor.py:277:format_first_block_in_file():2480:};
DEBUG:refactor.py:277:format_first_block_in_file():2481:
DEBUG:refactor.py:277:format_first_block_in_file():2482:// 64164, 64168 - Lunatic Gaze
DEBUG:refactor.py:277:format_first_block_in_file():2483:class spell_yogg_saron_lunatic_gaze : public SpellScriptLoader
DEBUG:refactor.py:277:format_first_block_in_file():2484:{
DEBUG:refactor.py:277:format_first_block_in_file():2485:public:
DEBUG:refactor.py:277:format_first_block_in_file():2486:    spell_yogg_saron_lunatic_gaze() : SpellScriptLoader("spell_yogg_saron_lunatic_gaze") { }
DEBUG:refactor.py:277:format_first_block_in_file():2487:
DEBUG:refactor.py:277:format_first_block_in_file():2488:    class spell_yogg_saron_lunatic_gaze_SpellScript : public SpellScript
DEBUG:refactor.py:277:format_first_block_in_file():2489:    {
DEBUG:refactor.py:277:format_first_block_in_file():2490:        PrepareSpellScript(spell_yogg_saron_lunatic_gaze_SpellScript);
DEBUG:refactor.py:277:format_first_block_in_file():2491:
DEBUG:refactor.py:277:format_first_block_in_file():2492:        void FilterTargets(std::list<WorldObject*>& targets)
DEBUG:refactor.py:277:format_first_block_in_file():2493:        {
DEBUG:refactor.py:277:format_first_block_in_file():2494:            std::list<WorldObject*> tmplist;
DEBUG:refactor.py:277:format_first_block_in_file():2495:            for (std::list<WorldObject*>::iterator itr = targets.begin(); itr != targets.end(); ++itr)
DEBUG:refactor.py:277:format_first_block_in_file():2496:                if ((*itr)->HasInArc(M_PI, GetCaster()))
DEBUG:refactor.py:277:format_first_block_in_file():2497:                    tmplist.push_back(*itr);
DEBUG:refactor.py:277:format_first_block_in_file():2498:
DEBUG:refactor.py:277:format_first_block_in_file():2499:            targets.clear();
DEBUG:refactor.py:277:format_first_block_in_file():2500:            for (std::list<WorldObject*>::iterator itr = tmplist.begin(); itr != tmplist.end(); ++itr)
DEBUG:refactor.py:277:format_first_block_in_file():2501:                targets.push_back(*itr);
DEBUG:refactor.py:277:format_first_block_in_file():2502:        }
DEBUG:refactor.py:277:format_first_block_in_file():2503:
DEBUG:refactor.py:277:format_first_block_in_file():2504:        void Register() override
DEBUG:refactor.py:277:format_first_block_in_file():2505:        {
DEBUG:refactor.py:277:format_first_block_in_file():2506:            OnObjectAreaTargetSelect += SpellObjectAreaTargetSelectFn(spell_yogg_saron_lunatic_gaze_SpellScript::FilterTargets, EFFECT_ALL, TARGET_UNIT_SRC_AREA_ENEMY);
DEBUG:refactor.py:277:format_first_block_in_file():2507:        }
DEBUG:refactor.py:277:format_first_block_in_file():2508:    };
DEBUG:refactor.py:277:format_first_block_in_file():2509:
DEBUG:refactor.py:277:format_first_block_in_file():2510:    SpellScript* GetSpellScript() const override
DEBUG:refactor.py:277:format_first_block_in_file():2511:    {
DEBUG:refactor.py:277:format_first_block_in_file():2512:        return new spell_yogg_saron_lunatic_gaze_SpellScript();
DEBUG:refactor.py:277:format_first_block_in_file():2513:    }
DEBUG:refactor.py:277:format_first_block_in_file():2514:};
DEBUG:refactor.py:277:format_first_block_in_file():2515:
DEBUG:refactor.py:277:format_first_block_in_file():2516:// 64174 - Protective Gaze
DEBUG:refactor.py:277:format_first_block_in_file():2517:class spell_yogg_saron_protective_gaze : public SpellScriptLoader
DEBUG:refactor.py:277:format_first_block_in_file():2518:{
DEBUG:refactor.py:277:format_first_block_in_file():2519:public:
DEBUG:refactor.py:277:format_first_block_in_file():2520:    spell_yogg_saron_protective_gaze() : SpellScriptLoader("spell_yogg_saron_protective_gaze") { }
DEBUG:refactor.py:277:format_first_block_in_file():2521:
DEBUG:refactor.py:277:format_first_block_in_file():2522:    class spell_yogg_saron_protective_gaze_AuraScript : public AuraScript
DEBUG:refactor.py:277:format_first_block_in_file():2523:    {
DEBUG:refactor.py:277:format_first_block_in_file():2524:        PrepareAuraScript(spell_yogg_saron_protective_gaze_AuraScript);
DEBUG:refactor.py:277:format_first_block_in_file():2525:
DEBUG:refactor.py:277:format_first_block_in_file():2526:        void CalculateAmount(AuraEffect const* /*aurEff*/, int32& amount, bool& /*canBeRecalculated*/)
DEBUG:refactor.py:277:format_first_block_in_file():2527:        {
DEBUG:refactor.py:277:format_first_block_in_file():2528:            // Set absorbtion amount to unlimited
DEBUG:refactor.py:277:format_first_block_in_file():2529:            amount = -1;
DEBUG:refactor.py:277:format_first_block_in_file():2530:        }
DEBUG:refactor.py:277:format_first_block_in_file():2531:
DEBUG:refactor.py:277:format_first_block_in_file():2532:        void Absorb(AuraEffect* /*aurEff*/, DamageInfo& dmgInfo, uint32& absorbAmount)
DEBUG:refactor.py:277:format_first_block_in_file():2533:        {
DEBUG:refactor.py:277:format_first_block_in_file():2534:            Unit* target = GetTarget();
DEBUG:refactor.py:277:format_first_block_in_file():2535:            if (dmgInfo.GetDamage() < target->GetHealth() || !GetCaster() || GetCaster()->ToCreature()->HasSpellCooldown(SPELL_HODIR_FLASH_FREEZE))
DEBUG:refactor.py:277:format_first_block_in_file():2536:                return;
DEBUG:refactor.py:277:format_first_block_in_file():2537:
DEBUG:refactor.py:277:format_first_block_in_file():2538:            target->CastSpell(target, SPELL_HODIR_FLASH_FREEZE, true);
DEBUG:refactor.py:277:format_first_block_in_file():2539:            GetCaster()->AddSpellCooldown(SPELL_HODIR_FLASH_FREEZE, 0, 0);
DEBUG:refactor.py:277:format_first_block_in_file():2540:            absorbAmount = dmgInfo.GetDamage();
DEBUG:refactor.py:277:format_first_block_in_file():2541:        }
DEBUG:refactor.py:277:format_first_block_in_file():2542:
DEBUG:refactor.py:277:format_first_block_in_file():2543:        void Register() override
DEBUG:refactor.py:277:format_first_block_in_file():2544:        {
DEBUG:refactor.py:277:format_first_block_in_file():2545:            DoEffectCalcAmount += AuraEffectCalcAmountFn(spell_yogg_saron_protective_gaze_AuraScript::CalculateAmount, EFFECT_0, SPELL_AURA_SCHOOL_ABSORB);
DEBUG:refactor.py:277:format_first_block_in_file():2546:            OnEffectAbsorb += AuraEffectAbsorbFn(spell_yogg_saron_protective_gaze_AuraScript::Absorb, EFFECT_0);
DEBUG:refactor.py:277:format_first_block_in_file():2547:        }
DEBUG:refactor.py:277:format_first_block_in_file():2548:    };
DEBUG:refactor.py:277:format_first_block_in_file():2549:
DEBUG:refactor.py:277:format_first_block_in_file():2550:    AuraScript* GetAuraScript() const override
DEBUG:refactor.py:277:format_first_block_in_file():2551:    {
DEBUG:refactor.py:277:format_first_block_in_file():2552:        return new spell_yogg_saron_protective_gaze_AuraScript();
DEBUG:refactor.py:277:format_first_block_in_file():2553:    }
DEBUG:refactor.py:277:format_first_block_in_file():2554:};
DEBUG:refactor.py:277:format_first_block_in_file():2555:
DEBUG:refactor.py:277:format_first_block_in_file():2556:// 64161 - Empowered
DEBUG:refactor.py:277:format_first_block_in_file():2557:class spell_yogg_saron_empowered : public SpellScriptLoader
DEBUG:refactor.py:277:format_first_block_in_file():2558:{
DEBUG:refactor.py:277:format_first_block_in_file():2559:public:
DEBUG:refactor.py:277:format_first_block_in_file():2560:    spell_yogg_saron_empowered() : SpellScriptLoader("spell_yogg_saron_empowered") { }
DEBUG:refactor.py:277:format_first_block_in_file():2561:
DEBUG:refactor.py:277:format_first_block_in_file():2562:    class spell_yogg_saron_empowered_AuraScript : public AuraScript
DEBUG:refactor.py:277:format_first_block_in_file():2563:    {
DEBUG:refactor.py:277:format_first_block_in_file():2564:        PrepareAuraScript(spell_yogg_saron_empowered_AuraScript);
DEBUG:refactor.py:277:format_first_block_in_file():2565:
DEBUG:refactor.py:277:format_first_block_in_file():2566:        void OnPeriodic(AuraEffect const*  /*aurEff*/)
DEBUG:refactor.py:277:format_first_block_in_file():2567:        {
DEBUG:refactor.py:277:format_first_block_in_file():2568:            Unit* target = GetUnitOwner();
DEBUG:refactor.py:277:format_first_block_in_file():2569:            uint8 stack = std::min(uint8(target->GetHealthPct() / 10), (uint8)9);
DEBUG:refactor.py:277:format_first_block_in_file():2570:
DEBUG:refactor.py:277:format_first_block_in_file():2571:            if (!stack)
DEBUG:refactor.py:277:format_first_block_in_file():2572:            {
DEBUG:refactor.py:277:format_first_block_in_file():2573:                target->RemoveAura(SPELL_EMPOWERED);
DEBUG:refactor.py:277:format_first_block_in_file():2574:                target->CastSpell(target, SPELL_WEAKENED, true);
DEBUG:refactor.py:277:format_first_block_in_file():2575:            }
DEBUG:refactor.py:277:format_first_block_in_file():2576:            else if (Aura* aur = target->AddAura(SPELL_EMPOWERED, target))
DEBUG:refactor.py:277:format_first_block_in_file():2577:            {
DEBUG:refactor.py:277:format_first_block_in_file():2578:                aur->SetStackAmount(stack);
DEBUG:refactor.py:277:format_first_block_in_file():2579:                target->RemoveAurasDueToSpell(SPELL_WEAKENED);
DEBUG:refactor.py:277:format_first_block_in_file():2580:            }
DEBUG:refactor.py:277:format_first_block_in_file():2581:        }
DEBUG:refactor.py:277:format_first_block_in_file():2582:
DEBUG:refactor.py:277:format_first_block_in_file():2583:        void Register() override
DEBUG:refactor.py:277:format_first_block_in_file():2584:        {
DEBUG:refactor.py:277:format_first_block_in_file():2585:            OnEffectPeriodic += AuraEffectPeriodicFn(spell_yogg_saron_empowered_AuraScript::OnPeriodic, EFFECT_0, SPELL_AURA_PERIODIC_DUMMY);
DEBUG:refactor.py:277:format_first_block_in_file():2586:        }
DEBUG:refactor.py:277:format_first_block_in_file():2587:    };
DEBUG:refactor.py:277:format_first_block_in_file():2588:
DEBUG:refactor.py:277:format_first_block_in_file():2589:    AuraScript* GetAuraScript() const override
DEBUG:refactor.py:277:format_first_block_in_file():2590:    {
DEBUG:refactor.py:277:format_first_block_in_file():2591:        return new spell_yogg_saron_empowered_AuraScript();
DEBUG:refactor.py:277:format_first_block_in_file():2592:    }
DEBUG:refactor.py:277:format_first_block_in_file():2593:};
DEBUG:refactor.py:277:format_first_block_in_file():2594:
DEBUG:refactor.py:277:format_first_block_in_file():2595:// 64555 - Insane Periodic
DEBUG:refactor.py:277:format_first_block_in_file():2596:class spell_yogg_saron_insane_periodic_trigger : public SpellScriptLoader
DEBUG:refactor.py:277:format_first_block_in_file():2597:{
DEBUG:refactor.py:277:format_first_block_in_file():2598:public:
DEBUG:refactor.py:277:format_first_block_in_file():2599:    spell_yogg_saron_insane_periodic_trigger() : SpellScriptLoader("spell_yogg_saron_insane_periodic_trigger") { }
DEBUG:refactor.py:277:format_first_block_in_file():2600:
DEBUG:refactor.py:277:format_first_block_in_file():2601:    class spell_yogg_saron_insane_periodic_trigger_SpellScript : public SpellScript
DEBUG:refactor.py:277:format_first_block_in_file():2602:    {
DEBUG:refactor.py:277:format_first_block_in_file():2603:        PrepareSpellScript(spell_yogg_saron_insane_periodic_trigger_SpellScript);
DEBUG:refactor.py:277:format_first_block_in_file():2604:
DEBUG:refactor.py:277:format_first_block_in_file():2605:        void HandleDummyEffect(SpellEffIndex effIndex)
DEBUG:refactor.py:277:format_first_block_in_file():2606:        {
DEBUG:refactor.py:277:format_first_block_in_file():2607:            PreventHitDefaultEffect(effIndex);
DEBUG:refactor.py:277:format_first_block_in_file():2608:            Player* target = GetHitPlayer();
DEBUG:refactor.py:277:format_first_block_in_file():2609:            if (!target)
DEBUG:refactor.py:277:format_first_block_in_file():2610:                return;
DEBUG:refactor.py:277:format_first_block_in_file():2611:
DEBUG:refactor.py:277:format_first_block_in_file():2612:            Unit* caster = GetCaster();
DEBUG:refactor.py:277:format_first_block_in_file():2613:            caster->CastSpell(target, SPELL_INSANE1, true);
DEBUG:refactor.py:277:format_first_block_in_file():2614:            target->CastSpell(target, SPELL_INSANE2, true);
DEBUG:refactor.py:277:format_first_block_in_file():2615:        }
DEBUG:refactor.py:277:format_first_block_in_file():2616:
DEBUG:refactor.py:277:format_first_block_in_file():2617:        void FilterTargets(std::list<WorldObject*>& targets)
DEBUG:refactor.py:277:format_first_block_in_file():2618:        {
DEBUG:refactor.py:277:format_first_block_in_file():2619:            std::list<WorldObject*> tmplist;
DEBUG:refactor.py:277:format_first_block_in_file():2620:            for (std::list<WorldObject*>::iterator itr = targets.begin(); itr != targets.end(); ++itr)
DEBUG:refactor.py:277:format_first_block_in_file():2621:                if ((*itr)->IsPlayer() && !(*itr)->ToPlayer()->HasAuraType(SPELL_AURA_AOE_CHARM) && !(*itr)->ToPlayer()->HasAura(SPELL_SANITY))
DEBUG:refactor.py:277:format_first_block_in_file():2622:                    tmplist.push_back(*itr);
DEBUG:refactor.py:277:format_first_block_in_file():2623:
DEBUG:refactor.py:277:format_first_block_in_file():2624:            targets.clear();
DEBUG:refactor.py:277:format_first_block_in_file():2625:            for (std::list<WorldObject*>::iterator itr = tmplist.begin(); itr != tmplist.end(); ++itr)
DEBUG:refactor.py:277:format_first_block_in_file():2626:                targets.push_back(*itr);
DEBUG:refactor.py:277:format_first_block_in_file():2627:        }
DEBUG:refactor.py:277:format_first_block_in_file():2628:
DEBUG:refactor.py:277:format_first_block_in_file():2629:        void Register() override
DEBUG:refactor.py:277:format_first_block_in_file():2630:        {
DEBUG:refactor.py:277:format_first_block_in_file():2631:            OnEffectHitTarget += SpellEffectFn(spell_yogg_saron_insane_periodic_trigger_SpellScript::HandleDummyEffect, EFFECT_0, SPELL_EFFECT_DUMMY);
DEBUG:refactor.py:277:format_first_block_in_file():2632:            OnObjectAreaTargetSelect += SpellObjectAreaTargetSelectFn(spell_yogg_saron_insane_periodic_trigger_SpellScript::FilterTargets, EFFECT_0, TARGET_UNIT_SRC_AREA_ENEMY);
DEBUG:refactor.py:277:format_first_block_in_file():2633:        }
DEBUG:refactor.py:277:format_first_block_in_file():2634:    };
DEBUG:refactor.py:277:format_first_block_in_file():2635:
DEBUG:refactor.py:277:format_first_block_in_file():2636:    SpellScript* GetSpellScript() const override
DEBUG:refactor.py:277:format_first_block_in_file():2637:    {
DEBUG:refactor.py:277:format_first_block_in_file():2638:        return new spell_yogg_saron_insane_periodic_trigger_SpellScript();
DEBUG:refactor.py:277:format_first_block_in_file():2639:    }
DEBUG:refactor.py:277:format_first_block_in_file():2640:};
DEBUG:refactor.py:277:format_first_block_in_file():2641:
DEBUG:refactor.py:277:format_first_block_in_file():2642:// 63120 - Insane
DEBUG:refactor.py:277:format_first_block_in_file():2643:class spell_yogg_saron_insane : public SpellScriptLoader
DEBUG:refactor.py:277:format_first_block_in_file():2644:{
DEBUG:refactor.py:277:format_first_block_in_file():2645:public:
DEBUG:refactor.py:277:format_first_block_in_file():2646:    spell_yogg_saron_insane() : SpellScriptLoader("spell_yogg_saron_insane") { }
DEBUG:refactor.py:277:format_first_block_in_file():2647:
DEBUG:refactor.py:277:format_first_block_in_file():2648:    class spell_yogg_saron_insane_AuraScript : public AuraScript
DEBUG:refactor.py:277:format_first_block_in_file():2649:    {
DEBUG:refactor.py:277:format_first_block_in_file():2650:        PrepareAuraScript(spell_yogg_saron_insane_AuraScript);
DEBUG:refactor.py:277:format_first_block_in_file():2651:
DEBUG:refactor.py:277:format_first_block_in_file():2652:        void OnRemove(AuraEffect const* /*aurEff*/, AuraEffectHandleModes /*mode*/)
DEBUG:refactor.py:277:format_first_block_in_file():2653:        {
DEBUG:refactor.py:277:format_first_block_in_file():2654:            Unit::Kill(GetUnitOwner(), GetUnitOwner());
DEBUG:refactor.py:277:format_first_block_in_file():2655:        }
DEBUG:refactor.py:277:format_first_block_in_file():2656:
DEBUG:refactor.py:277:format_first_block_in_file():2657:        void Register() override
DEBUG:refactor.py:277:format_first_block_in_file():2658:        {
DEBUG:refactor.py:277:format_first_block_in_file():2659:            OnEffectRemove += AuraEffectRemoveFn(spell_yogg_saron_insane_AuraScript::OnRemove, EFFECT_0, SPELL_AURA_AOE_CHARM, AURA_EFFECT_HANDLE_REAL);
DEBUG:refactor.py:277:format_first_block_in_file():2660:        }
DEBUG:refactor.py:277:format_first_block_in_file():2661:    };
DEBUG:refactor.py:277:format_first_block_in_file():2662:
DEBUG:refactor.py:277:format_first_block_in_file():2663:    AuraScript* GetAuraScript() const override
DEBUG:refactor.py:277:format_first_block_in_file():2664:    {
DEBUG:refactor.py:277:format_first_block_in_file():2665:        return new spell_yogg_saron_insane_AuraScript();
DEBUG:refactor.py:277:format_first_block_in_file():2666:    }
DEBUG:refactor.py:277:format_first_block_in_file():2667:};
DEBUG:refactor.py:277:format_first_block_in_file():2668:
DEBUG:refactor.py:277:format_first_block_in_file():2669:// 64169 - Sanity Well
DEBUG:refactor.py:277:format_first_block_in_file():2670:class spell_yogg_saron_sanity_well : public SpellScriptLoader
DEBUG:refactor.py:277:format_first_block_in_file():2671:{
DEBUG:refactor.py:277:format_first_block_in_file():2672:public:
DEBUG:refactor.py:277:format_first_block_in_file():2673:    spell_yogg_saron_sanity_well() : SpellScriptLoader("spell_yogg_saron_sanity_well") { }
DEBUG:refactor.py:277:format_first_block_in_file():2674:
DEBUG:refactor.py:277:format_first_block_in_file():2675:    class spell_yogg_saron_sanity_well_AuraScript : public AuraScript
DEBUG:refactor.py:277:format_first_block_in_file():2676:    {
DEBUG:refactor.py:277:format_first_block_in_file():2677:        PrepareAuraScript(spell_yogg_saron_sanity_well_AuraScript);
DEBUG:refactor.py:277:format_first_block_in_file():2678:
DEBUG:refactor.py:277:format_first_block_in_file():2679:        void HandleEffectCalcPeriodic(AuraEffect const* /*aurEff*/, bool& isPeriodic, int32& amplitude)
DEBUG:refactor.py:277:format_first_block_in_file():2680:        {
DEBUG:refactor.py:277:format_first_block_in_file():2681:            isPeriodic = true;
DEBUG:refactor.py:277:format_first_block_in_file():2682:            amplitude = 2 * IN_MILLISECONDS;
DEBUG:refactor.py:277:format_first_block_in_file():2683:        }
DEBUG:refactor.py:277:format_first_block_in_file():2684:
DEBUG:refactor.py:277:format_first_block_in_file():2685:        void HandleEffectPeriodic(AuraEffect const*   /*aurEff*/)
DEBUG:refactor.py:277:format_first_block_in_file():2686:        {
DEBUG:refactor.py:277:format_first_block_in_file():2687:            Unit* target = GetTarget();
DEBUG:refactor.py:277:format_first_block_in_file():2688:            if (!target || !target->IsPlayer())
DEBUG:refactor.py:277:format_first_block_in_file():2689:                return;
DEBUG:refactor.py:277:format_first_block_in_file():2690:
DEBUG:refactor.py:277:format_first_block_in_file():2691:            if (Aura* aur = target->GetAura(SPELL_SANITY))
DEBUG:refactor.py:277:format_first_block_in_file():2692:                aur->SetStackAmount(std::min(100, aur->GetStackAmount() + 20));
DEBUG:refactor.py:277:format_first_block_in_file():2693:        }
DEBUG:refactor.py:277:format_first_block_in_file():2694:
DEBUG:refactor.py:277:format_first_block_in_file():2695:        void Register() override
DEBUG:refactor.py:277:format_first_block_in_file():2696:        {
DEBUG:refactor.py:277:format_first_block_in_file():2697:            DoEffectCalcPeriodic += AuraEffectCalcPeriodicFn(spell_yogg_saron_sanity_well_AuraScript::HandleEffectCalcPeriodic, EFFECT_0, SPELL_AURA_MOD_DAMAGE_PERCENT_DONE);
DEBUG:refactor.py:277:format_first_block_in_file():2698:            OnEffectPeriodic += AuraEffectPeriodicFn(spell_yogg_saron_sanity_well_AuraScript::HandleEffectPeriodic, EFFECT_0, SPELL_AURA_MOD_DAMAGE_PERCENT_DONE);
DEBUG:refactor.py:277:format_first_block_in_file():2699:        }
DEBUG:refactor.py:277:format_first_block_in_file():2700:    };
DEBUG:refactor.py:277:format_first_block_in_file():2701:
DEBUG:refactor.py:277:format_first_block_in_file():2702:    AuraScript* GetAuraScript() const override
DEBUG:refactor.py:277:format_first_block_in_file():2703:    {
DEBUG:refactor.py:277:format_first_block_in_file():2704:        return new spell_yogg_saron_sanity_well_AuraScript();
DEBUG:refactor.py:277:format_first_block_in_file():2705:    }
DEBUG:refactor.py:277:format_first_block_in_file():2706:};
DEBUG:refactor.py:277:format_first_block_in_file():2707:
DEBUG:refactor.py:277:format_first_block_in_file():2708:// 64170 - Sanity Well
DEBUG:refactor.py:277:format_first_block_in_file():2709:class spell_keeper_freya_summon_sanity_well : public SpellScript
DEBUG:refactor.py:277:format_first_block_in_file():2710:{
DEBUG:refactor.py:277:format_first_block_in_file():2711:    PrepareSpellScript(spell_keeper_freya_summon_sanity_well);
DEBUG:refactor.py:277:format_first_block_in_file():2712:
DEBUG:refactor.py:277:format_first_block_in_file():2713:    void OnEffect(SpellEffIndex /*effIndex*/)
DEBUG:refactor.py:277:format_first_block_in_file():2714:    {
DEBUG:refactor.py:277:format_first_block_in_file():2715:        if (Unit* caster = GetCaster())
DEBUG:refactor.py:277:format_first_block_in_file():2716:            if (InstanceScript* instance = caster->GetInstanceScript())
DEBUG:refactor.py:277:format_first_block_in_file():2717:                if (Creature* sara = ObjectAccessor::GetCreature(*caster, caster->GetInstanceScript()->GetGuidData(NPC_SARA)))
DEBUG:refactor.py:277:format_first_block_in_file():2718:                {
DEBUG:refactor.py:277:format_first_block_in_file():2719:                    sara->SummonCreature(NPC_SANITY_WELL, 2042.56f, -40.3667f, 329.274f, 0.0f);
DEBUG:refactor.py:277:format_first_block_in_file():2720:                    sara->SummonCreature(NPC_SANITY_WELL, 1975.89f, 40.0216f, 331.1f, 0.0f);
DEBUG:refactor.py:277:format_first_block_in_file():2721:                    sara->SummonCreature(NPC_SANITY_WELL, 1987.12f, -91.2702f, 330.186f, 0.0f);
DEBUG:refactor.py:277:format_first_block_in_file():2722:                    sara->SummonCreature(NPC_SANITY_WELL, 1900.48f, -51.2386f, 332.13f, 0.0f);
DEBUG:refactor.py:277:format_first_block_in_file():2723:                    sara->SummonCreature(NPC_SANITY_WELL, 1899.94f, 0.330621f, 332.296f, 0.0f);
DEBUG:refactor.py:277:format_first_block_in_file():2724:                }
DEBUG:refactor.py:277:format_first_block_in_file():2725:    }
DEBUG:refactor.py:277:format_first_block_in_file():2726:
DEBUG:refactor.py:277:format_first_block_in_file():2727:    void Register() override
DEBUG:refactor.py:277:format_first_block_in_file():2728:    {
DEBUG:refactor.py:277:format_first_block_in_file():2729:        OnEffectLaunch += SpellEffectFn(spell_keeper_freya_summon_sanity_well::OnEffect, EFFECT_0, SPELL_EFFECT_SEND_EVENT);
DEBUG:refactor.py:277:format_first_block_in_file():2730:    }
DEBUG:refactor.py:277:format_first_block_in_file():2731:};
DEBUG:refactor.py:277:format_first_block_in_file():2732:
DEBUG:refactor.py:277:format_first_block_in_file():2733:/* 63881 - Malady of the Mind
DEBUG:refactor.py:277:format_first_block_in_file():2734:   63795 - Psychosis
DEBUG:refactor.py:277:format_first_block_in_file():2735:   63830 - Malady of the Mind
DEBUG:refactor.py:277:format_first_block_in_file():2736:   64164 - Lunatic Gaze
DEBUG:refactor.py:277:format_first_block_in_file():2737:   64059 - Induce Madness
DEBUG:refactor.py:277:format_first_block_in_file():2738:   63803 - Brain Link
DEBUG:refactor.py:277:format_first_block_in_file():2739:   65301 - Psychosis
DEBUG:refactor.py:277:format_first_block_in_file():2740:   64168 - Lunatic Gaze */
DEBUG:refactor.py:277:format_first_block_in_file():2741:class spell_yogg_saron_sanity_reduce : public SpellScriptLoader
DEBUG:refactor.py:277:format_first_block_in_file():2742:{
DEBUG:refactor.py:277:format_first_block_in_file():2743:public:
DEBUG:refactor.py:277:format_first_block_in_file():2744:    spell_yogg_saron_sanity_reduce() : SpellScriptLoader("spell_yogg_saron_sanity_reduce") { }
DEBUG:refactor.py:277:format_first_block_in_file():2745:
DEBUG:refactor.py:277:format_first_block_in_file():2746:    class spell_yogg_saron_sanity_reduce_SpellScript : public SpellScript
DEBUG:refactor.py:277:format_first_block_in_file():2747:    {
DEBUG:refactor.py:277:format_first_block_in_file():2748:        PrepareSpellScript(spell_yogg_saron_sanity_reduce_SpellScript);
DEBUG:refactor.py:277:format_first_block_in_file():2749:
DEBUG:refactor.py:277:format_first_block_in_file():2750:        void HandleScriptEffect(SpellEffIndex effIndex)
DEBUG:refactor.py:277:format_first_block_in_file():2751:        {
DEBUG:refactor.py:277:format_first_block_in_file():2752:            PreventHitDefaultEffect(effIndex);
DEBUG:refactor.py:277:format_first_block_in_file():2753:            Player* target = GetHitPlayer();
DEBUG:refactor.py:277:format_first_block_in_file():2754:            if (!target)
DEBUG:refactor.py:277:format_first_block_in_file():2755:                return;
DEBUG:refactor.py:277:format_first_block_in_file():2756:
DEBUG:refactor.py:277:format_first_block_in_file():2757:            uint8 _reduceAmount = 0;
DEBUG:refactor.py:277:format_first_block_in_file():2758:            switch (GetSpellInfo()->Id)
DEBUG:refactor.py:277:format_first_block_in_file():2759:            {
DEBUG:refactor.py:277:format_first_block_in_file():2760:                case SPELL_SARA_PSYCHOSIS_10:
DEBUG:refactor.py:277:format_first_block_in_file():2761:                    _reduceAmount = 9;
DEBUG:refactor.py:277:format_first_block_in_file():2762:                    break;
DEBUG:refactor.py:277:format_first_block_in_file():2763:                case SPELL_SARA_PSYCHOSIS_25:
DEBUG:refactor.py:277:format_first_block_in_file():2764:                    _reduceAmount = 12;
DEBUG:refactor.py:277:format_first_block_in_file():2765:                    break;
DEBUG:refactor.py:277:format_first_block_in_file():2766:                case SPELL_MALADY_OF_THE_MIND:
DEBUG:refactor.py:277:format_first_block_in_file():2767:                    _reduceAmount = 3;
DEBUG:refactor.py:277:format_first_block_in_file():2768:                    break;
DEBUG:refactor.py:277:format_first_block_in_file():2769:                case SPELL_MALADY_OF_THE_MIND_TRIGGER:
DEBUG:refactor.py:277:format_first_block_in_file():2770:                    _reduceAmount = 3;
DEBUG:refactor.py:277:format_first_block_in_file():2771:                    break;
DEBUG:refactor.py:277:format_first_block_in_file():2772:                case SPELL_BRAIN_LINK_DAMAGE:
DEBUG:refactor.py:277:format_first_block_in_file():2773:                    _reduceAmount = 2;
DEBUG:refactor.py:277:format_first_block_in_file():2774:                    break;
DEBUG:refactor.py:277:format_first_block_in_file():2775:                case 64168 /*SPELL_LUNATIC_GAZE*/:
DEBUG:refactor.py:277:format_first_block_in_file():2776:                    _reduceAmount = 2;
DEBUG:refactor.py:277:format_first_block_in_file():2777:                    break;
DEBUG:refactor.py:277:format_first_block_in_file():2778:                case 64164 /*SPELL_YS_LUNATIC_GAZE*/:
DEBUG:refactor.py:277:format_first_block_in_file():2779:                    _reduceAmount = 4;
DEBUG:refactor.py:277:format_first_block_in_file():2780:                    break;
DEBUG:refactor.py:277:format_first_block_in_file():2781:                case SPELL_INDUCE_MADNESS:
DEBUG:refactor.py:277:format_first_block_in_file():2782:                    // Teleported out of brain
DEBUG:refactor.py:277:format_first_block_in_file():2783:                    if (target->GetPositionZ() > 300.0f)
DEBUG:refactor.py:277:format_first_block_in_file():2784:                        return;
DEBUG:refactor.py:277:format_first_block_in_file():2785:                    else
DEBUG:refactor.py:277:format_first_block_in_file():2786:                        target->CastSpell(target, SPELL_CANCEL_ILLUSION_AURA, true); // else we are underground, remove illusion aura and teleport outside
DEBUG:refactor.py:277:format_first_block_in_file():2787:                    _reduceAmount = 100;
DEBUG:refactor.py:277:format_first_block_in_file():2788:                    break;
DEBUG:refactor.py:277:format_first_block_in_file():2789:            }
DEBUG:refactor.py:277:format_first_block_in_file():2790:
DEBUG:refactor.py:277:format_first_block_in_file():2791:            if (Aura* aur = target->GetAura(SPELL_SANITY))
DEBUG:refactor.py:277:format_first_block_in_file():2792:            {
DEBUG:refactor.py:277:format_first_block_in_file():2793:                if ((aur->GetStackAmount() - _reduceAmount) <= 20)
DEBUG:refactor.py:277:format_first_block_in_file():2794:                    target->CastSpell(target, 63752 /*SANITY_SCREEN_EFFECT*/, true);
DEBUG:refactor.py:277:format_first_block_in_file():2795:                aur->ModStackAmount(-_reduceAmount);
DEBUG:refactor.py:277:format_first_block_in_file():2796:            }
DEBUG:refactor.py:277:format_first_block_in_file():2797:        }
DEBUG:refactor.py:277:format_first_block_in_file():2798:
DEBUG:refactor.py:277:format_first_block_in_file():2799:        void Register() override
DEBUG:refactor.py:277:format_first_block_in_file():2800:        {
DEBUG:refactor.py:277:format_first_block_in_file():2801:            OnEffectHitTarget += SpellEffectFn(spell_yogg_saron_sanity_reduce_SpellScript::HandleScriptEffect, EFFECT_FIRST_FOUND, SPELL_EFFECT_SCRIPT_EFFECT);
DEBUG:refactor.py:277:format_first_block_in_file():2802:        }
DEBUG:refactor.py:277:format_first_block_in_file():2803:    };
DEBUG:refactor.py:277:format_first_block_in_file():2804:
DEBUG:refactor.py:277:format_first_block_in_file():2805:    SpellScript* GetSpellScript() const override
DEBUG:refactor.py:277:format_first_block_in_file():2806:    {
DEBUG:refactor.py:277:format_first_block_in_file():2807:        return new spell_yogg_saron_sanity_reduce_SpellScript();
DEBUG:refactor.py:277:format_first_block_in_file():2808:    }
DEBUG:refactor.py:277:format_first_block_in_file():2809:};
DEBUG:refactor.py:277:format_first_block_in_file():2810:
DEBUG:refactor.py:277:format_first_block_in_file():2811:// 64467 - Empowering Shadows
DEBUG:refactor.py:277:format_first_block_in_file():2812:class spell_yogg_saron_empowering_shadows : public SpellScriptLoader
DEBUG:refactor.py:277:format_first_block_in_file():2813:{
DEBUG:refactor.py:277:format_first_block_in_file():2814:public:
DEBUG:refactor.py:277:format_first_block_in_file():2815:    spell_yogg_saron_empowering_shadows() : SpellScriptLoader("spell_yogg_saron_empowering_shadows") { }
DEBUG:refactor.py:277:format_first_block_in_file():2816:
DEBUG:refactor.py:277:format_first_block_in_file():2817:    class spell_yogg_saron_empowering_shadows_SpellScript : public SpellScript
DEBUG:refactor.py:277:format_first_block_in_file():2818:    {
DEBUG:refactor.py:277:format_first_block_in_file():2819:        PrepareSpellScript(spell_yogg_saron_empowering_shadows_SpellScript);
DEBUG:refactor.py:277:format_first_block_in_file():2820:
DEBUG:refactor.py:277:format_first_block_in_file():2821:        void HandleScriptEffect(SpellEffIndex effIndex)
DEBUG:refactor.py:277:format_first_block_in_file():2822:        {
DEBUG:refactor.py:277:format_first_block_in_file():2823:            PreventHitDefaultEffect(effIndex);
DEBUG:refactor.py:277:format_first_block_in_file():2824:            if (Unit* target = GetHitUnit())
DEBUG:refactor.py:277:format_first_block_in_file():2825:                target->CastSpell(target, target->GetMap()->Is25ManRaid() ? 64486 : 64468, true); // SPELL_EMPOWERING_SHADOWS_HEAL
DEBUG:refactor.py:277:format_first_block_in_file():2826:        }
DEBUG:refactor.py:277:format_first_block_in_file():2827:
DEBUG:refactor.py:277:format_first_block_in_file():2828:        void Register() override
DEBUG:refactor.py:277:format_first_block_in_file():2829:        {
DEBUG:refactor.py:277:format_first_block_in_file():2830:            OnEffectHitTarget += SpellEffectFn(spell_yogg_saron_empowering_shadows_SpellScript::HandleScriptEffect, EFFECT_0, SPELL_EFFECT_SCRIPT_EFFECT);
DEBUG:refactor.py:277:format_first_block_in_file():2831:        }
DEBUG:refactor.py:277:format_first_block_in_file():2832:    };
DEBUG:refactor.py:277:format_first_block_in_file():2833:
DEBUG:refactor.py:277:format_first_block_in_file():2834:    SpellScript* GetSpellScript() const override
DEBUG:refactor.py:277:format_first_block_in_file():2835:    {
DEBUG:refactor.py:277:format_first_block_in_file():2836:        return new spell_yogg_saron_empowering_shadows_SpellScript();
DEBUG:refactor.py:277:format_first_block_in_file():2837:    }
DEBUG:refactor.py:277:format_first_block_in_file():2838:};
DEBUG:refactor.py:277:format_first_block_in_file():2839:
DEBUG:refactor.py:277:format_first_block_in_file():2840:// 64184 - In the Maws of the Old God
DEBUG:refactor.py:277:format_first_block_in_file():2841:class spell_yogg_saron_in_the_maws_of_the_old_god : public SpellScriptLoader
DEBUG:refactor.py:277:format_first_block_in_file():2842:{
DEBUG:refactor.py:277:format_first_block_in_file():2843:public:
DEBUG:refactor.py:277:format_first_block_in_file():2844:    spell_yogg_saron_in_the_maws_of_the_old_god() : SpellScriptLoader("spell_yogg_saron_in_the_maws_of_the_old_god") {}
DEBUG:refactor.py:277:format_first_block_in_file():2845:
DEBUG:refactor.py:277:format_first_block_in_file():2846:    class spell_yogg_saron_in_the_maws_of_the_old_god_SpellScript : public SpellScript
DEBUG:refactor.py:277:format_first_block_in_file():2847:    {
DEBUG:refactor.py:277:format_first_block_in_file():2848:        PrepareSpellScript(spell_yogg_saron_in_the_maws_of_the_old_god_SpellScript);
DEBUG:refactor.py:277:format_first_block_in_file():2849:
DEBUG:refactor.py:277:format_first_block_in_file():2850:        SpellCastResult CheckCast()
DEBUG:refactor.py:277:format_first_block_in_file():2851:        {
DEBUG:refactor.py:277:format_first_block_in_file():2852:            if (!GetCaster()->IsPlayer())
DEBUG:refactor.py:277:format_first_block_in_file():2853:                return SPELL_FAILED_BAD_TARGETS;
DEBUG:refactor.py:277:format_first_block_in_file():2854:
DEBUG:refactor.py:277:format_first_block_in_file():2855:            Unit* target = GetCaster()->ToPlayer()->GetSelectedUnit();
DEBUG:refactor.py:277:format_first_block_in_file():2856:            if (!target || target->GetEntry() != NPC_YOGG_SARON)
DEBUG:refactor.py:277:format_first_block_in_file():2857:                return SPELL_FAILED_BAD_TARGETS;
DEBUG:refactor.py:277:format_first_block_in_file():2858:
DEBUG:refactor.py:277:format_first_block_in_file():2859:            Spell* spell = target->GetCurrentSpell(CURRENT_GENERIC_SPELL);
DEBUG:refactor.py:277:format_first_block_in_file():2860:            if (!spell || spell->GetSpellInfo()->Id != SPELL_DEAFENING_ROAR)
DEBUG:refactor.py:277:format_first_block_in_file():2861:                return SPELL_FAILED_TARGET_AURASTATE;
DEBUG:refactor.py:277:format_first_block_in_file():2862:
DEBUG:refactor.py:277:format_first_block_in_file():2863:            return SPELL_CAST_OK;
DEBUG:refactor.py:277:format_first_block_in_file():2864:        }
DEBUG:refactor.py:277:format_first_block_in_file():2865:
DEBUG:refactor.py:277:format_first_block_in_file():2866:        void Register() override
DEBUG:refactor.py:277:format_first_block_in_file():2867:        {
DEBUG:refactor.py:277:format_first_block_in_file():2868:            OnCheckCast += SpellCheckCastFn(spell_yogg_saron_in_the_maws_of_the_old_god_SpellScript::CheckCast);
DEBUG:refactor.py:277:format_first_block_in_file():2869:        }
DEBUG:refactor.py:277:format_first_block_in_file():2870:    };
DEBUG:refactor.py:277:format_first_block_in_file():2871:
DEBUG:refactor.py:277:format_first_block_in_file():2872:    SpellScript* GetSpellScript() const override
DEBUG:refactor.py:277:format_first_block_in_file():2873:    {
DEBUG:refactor.py:277:format_first_block_in_file():2874:        return new spell_yogg_saron_in_the_maws_of_the_old_god_SpellScript();
DEBUG:refactor.py:277:format_first_block_in_file():2875:    }
DEBUG:refactor.py:277:format_first_block_in_file():2876:};
DEBUG:refactor.py:277:format_first_block_in_file():2877:
DEBUG:refactor.py:277:format_first_block_in_file():2878:/* 63744 - Sara's Anger
DEBUG:refactor.py:277:format_first_block_in_file():2879:   63747 - Sara's Fervor
DEBUG:refactor.py:277:format_first_block_in_file():2880:   63745 - Sara's Blessing */
DEBUG:refactor.py:277:format_first_block_in_file():2881:class spell_yogg_saron_target_selectors : public SpellScriptLoader
DEBUG:refactor.py:277:format_first_block_in_file():2882:{
DEBUG:refactor.py:277:format_first_block_in_file():2883:public:
DEBUG:refactor.py:277:format_first_block_in_file():2884:    spell_yogg_saron_target_selectors() : SpellScriptLoader("spell_yogg_saron_target_selectors") { }
DEBUG:refactor.py:277:format_first_block_in_file():2885:
DEBUG:refactor.py:277:format_first_block_in_file():2886:    class spell_yogg_saron_target_selectors_SpellScript : public SpellScript
DEBUG:refactor.py:277:format_first_block_in_file():2887:    {
DEBUG:refactor.py:277:format_first_block_in_file():2888:        PrepareSpellScript(spell_yogg_saron_target_selectors_SpellScript);
DEBUG:refactor.py:277:format_first_block_in_file():2889:
DEBUG:refactor.py:277:format_first_block_in_file():2890:        void HandleScript(SpellEffIndex /*effIndex*/)
DEBUG:refactor.py:277:format_first_block_in_file():2891:        {
DEBUG:refactor.py:277:format_first_block_in_file():2892:            if (Unit* target = GetHitUnit())
DEBUG:refactor.py:277:format_first_block_in_file():2893:            {
DEBUG:refactor.py:277:format_first_block_in_file():2894:                GetCaster()->SetFacingToObject(target);
DEBUG:refactor.py:277:format_first_block_in_file():2895:                GetCaster()->CastSpell(target, uint32(GetEffectValue()));
DEBUG:refactor.py:277:format_first_block_in_file():2896:            }
DEBUG:refactor.py:277:format_first_block_in_file():2897:        }
DEBUG:refactor.py:277:format_first_block_in_file():2898:
DEBUG:refactor.py:277:format_first_block_in_file():2899:        void Register() override
DEBUG:refactor.py:277:format_first_block_in_file():2900:        {
DEBUG:refactor.py:277:format_first_block_in_file():2901:            OnEffectHitTarget += SpellEffectFn(spell_yogg_saron_target_selectors_SpellScript::HandleScript, EFFECT_0, SPELL_EFFECT_DUMMY);
DEBUG:refactor.py:277:format_first_block_in_file():2902:        }
DEBUG:refactor.py:277:format_first_block_in_file():2903:    };
DEBUG:refactor.py:277:format_first_block_in_file():2904:
DEBUG:refactor.py:277:format_first_block_in_file():2905:    SpellScript* GetSpellScript() const override
DEBUG:refactor.py:277:format_first_block_in_file():2906:    {
DEBUG:refactor.py:277:format_first_block_in_file():2907:        return new spell_yogg_saron_target_selectors_SpellScript();
DEBUG:refactor.py:277:format_first_block_in_file():2908:    }
DEBUG:refactor.py:277:format_first_block_in_file():2909:};
DEBUG:refactor.py:277:format_first_block_in_file():2910:
DEBUG:refactor.py:277:format_first_block_in_file():2911:// 63305 - Grim Reprisal
DEBUG:refactor.py:277:format_first_block_in_file():2912:class spell_yogg_saron_grim_reprisal : public SpellScriptLoader
DEBUG:refactor.py:277:format_first_block_in_file():2913:{
DEBUG:refactor.py:277:format_first_block_in_file():2914:public:
DEBUG:refactor.py:277:format_first_block_in_file():2915:    spell_yogg_saron_grim_reprisal() : SpellScriptLoader("spell_yogg_saron_grim_reprisal") { }
DEBUG:refactor.py:277:format_first_block_in_file():2916:
DEBUG:refactor.py:277:format_first_block_in_file():2917:    class spell_yogg_saron_grim_reprisal_AuraScript : public AuraScript
DEBUG:refactor.py:277:format_first_block_in_file():2918:    {
DEBUG:refactor.py:277:format_first_block_in_file():2919:        PrepareAuraScript(spell_yogg_saron_grim_reprisal_AuraScript);
DEBUG:refactor.py:277:format_first_block_in_file():2920:
DEBUG:refactor.py:277:format_first_block_in_file():2921:        bool Validate(SpellInfo const* /*spellInfo*/) override
DEBUG:refactor.py:277:format_first_block_in_file():2922:        {
DEBUG:refactor.py:277:format_first_block_in_file():2923:            return ValidateSpellInfo({ SPELL_GRIM_REPRISAL_DAMAGE });
DEBUG:refactor.py:277:format_first_block_in_file():2924:        }
DEBUG:refactor.py:277:format_first_block_in_file():2925:
DEBUG:refactor.py:277:format_first_block_in_file():2926:        void HandleProc(AuraEffect const* aurEff, ProcEventInfo& eventInfo)
DEBUG:refactor.py:277:format_first_block_in_file():2927:        {
DEBUG:refactor.py:277:format_first_block_in_file():2928:            DamageInfo* damageInfo = eventInfo.GetDamageInfo();
DEBUG:refactor.py:277:format_first_block_in_file():2929:
DEBUG:refactor.py:277:format_first_block_in_file():2930:            if (!damageInfo || !damageInfo->GetDamage())
DEBUG:refactor.py:277:format_first_block_in_file():2931:            {
DEBUG:refactor.py:277:format_first_block_in_file():2932:                return;
DEBUG:refactor.py:277:format_first_block_in_file():2933:            }
DEBUG:refactor.py:277:format_first_block_in_file():2934:
DEBUG:refactor.py:277:format_first_block_in_file():2935:            int32 damage = CalculatePct(static_cast<int32>(damageInfo->GetDamage()), 60);
DEBUG:refactor.py:277:format_first_block_in_file():2936:            GetTarget()->CastCustomSpell(SPELL_GRIM_REPRISAL_DAMAGE, SPELLVALUE_BASE_POINT0, damage, damageInfo->GetAttacker(), true, nullptr, aurEff);
DEBUG:refactor.py:277:format_first_block_in_file():2937:        }
DEBUG:refactor.py:277:format_first_block_in_file():2938:
DEBUG:refactor.py:277:format_first_block_in_file():2939:        void Register() override
DEBUG:refactor.py:277:format_first_block_in_file():2940:        {
DEBUG:refactor.py:277:format_first_block_in_file():2941:            OnEffectProc += AuraEffectProcFn(spell_yogg_saron_grim_reprisal_AuraScript::HandleProc, EFFECT_0, SPELL_AURA_DUMMY);
DEBUG:refactor.py:277:format_first_block_in_file():2942:        }
DEBUG:refactor.py:277:format_first_block_in_file():2943:    };
DEBUG:refactor.py:277:format_first_block_in_file():2944:
DEBUG:refactor.py:277:format_first_block_in_file():2945:    AuraScript* GetAuraScript() const override
DEBUG:refactor.py:277:format_first_block_in_file():2946:    {
DEBUG:refactor.py:277:format_first_block_in_file():2947:        return new spell_yogg_saron_grim_reprisal_AuraScript();
DEBUG:refactor.py:277:format_first_block_in_file():2948:    }
DEBUG:refactor.py:277:format_first_block_in_file():2949:};
DEBUG:refactor.py:277:format_first_block_in_file():2950:
DEBUG:refactor.py:277:format_first_block_in_file():2951:class achievement_yogg_saron_drive_me_crazy : public AchievementCriteriaScript
DEBUG:refactor.py:277:format_first_block_in_file():2952:{
DEBUG:refactor.py:277:format_first_block_in_file():2953:public:
DEBUG:refactor.py:277:format_first_block_in_file():2954:    achievement_yogg_saron_drive_me_crazy() : AchievementCriteriaScript("achievement_yogg_saron_drive_me_crazy") {}
DEBUG:refactor.py:277:format_first_block_in_file():2955:
DEBUG:refactor.py:277:format_first_block_in_file():2956:    bool OnCheck(Player*  /*player*/, Unit* target, uint32 /*criteria_id*/) override
DEBUG:refactor.py:277:format_first_block_in_file():2957:    {
DEBUG:refactor.py:277:format_first_block_in_file():2958:        return target && target->GetAI()->GetData(DATA_GET_DRIVE_ME_CRAZY); // target = Yogg-Saron
DEBUG:refactor.py:277:format_first_block_in_file():2959:    }
DEBUG:refactor.py:277:format_first_block_in_file():2960:};
DEBUG:refactor.py:277:format_first_block_in_file():2961:
DEBUG:refactor.py:277:format_first_block_in_file():2962:class achievement_yogg_saron_darkness : public AchievementCriteriaScript
DEBUG:refactor.py:277:format_first_block_in_file():2963:{
DEBUG:refactor.py:277:format_first_block_in_file():2964:public:
DEBUG:refactor.py:277:format_first_block_in_file():2965:    achievement_yogg_saron_darkness(char const* name, uint32 count) : AchievementCriteriaScript(name),
DEBUG:refactor.py:277:format_first_block_in_file():2966:        _keepersCount(count)
DEBUG:refactor.py:277:format_first_block_in_file():2967:    {
DEBUG:refactor.py:277:format_first_block_in_file():2968:    }
DEBUG:refactor.py:277:format_first_block_in_file():2969:
DEBUG:refactor.py:277:format_first_block_in_file():2970:    bool OnCheck(Player* player, Unit*  /*target*/ /*Yogg-Saron*/, uint32 /*criteria_id*/) override
DEBUG:refactor.py:277:format_first_block_in_file():2971:    {
DEBUG:refactor.py:277:format_first_block_in_file():2972:        if (player->GetInstanceScript())
DEBUG:refactor.py:277:format_first_block_in_file():2973:            if (Creature* sara = ObjectAccessor::GetCreature(*player, player->GetInstanceScript()->GetGuidData(NPC_SARA)))
DEBUG:refactor.py:277:format_first_block_in_file():2974:                return sara->GetAI()->GetData(DATA_GET_KEEPERS_COUNT) <= _keepersCount;
DEBUG:refactor.py:277:format_first_block_in_file():2975:
DEBUG:refactor.py:277:format_first_block_in_file():2976:        return false;
DEBUG:refactor.py:277:format_first_block_in_file():2977:    }
DEBUG:refactor.py:277:format_first_block_in_file():2978:
DEBUG:refactor.py:277:format_first_block_in_file():2979:private:
DEBUG:refactor.py:277:format_first_block_in_file():2980:    uint32 const _keepersCount;
DEBUG:refactor.py:277:format_first_block_in_file():2981:};
DEBUG:refactor.py:277:format_first_block_in_file():2982:
DEBUG:refactor.py:277:format_first_block_in_file():2983:class achievement_yogg_saron_he_waits_dreaming : public AchievementCriteriaScript
DEBUG:refactor.py:277:format_first_block_in_file():2984:{
DEBUG:refactor.py:277:format_first_block_in_file():2985:public:
DEBUG:refactor.py:277:format_first_block_in_file():2986:    achievement_yogg_saron_he_waits_dreaming(char const* name, uint8 illusion) : AchievementCriteriaScript(name),
DEBUG:refactor.py:277:format_first_block_in_file():2987:        _requiredIllusion(illusion)
DEBUG:refactor.py:277:format_first_block_in_file():2988:    {
DEBUG:refactor.py:277:format_first_block_in_file():2989:    }
DEBUG:refactor.py:277:format_first_block_in_file():2990:
DEBUG:refactor.py:277:format_first_block_in_file():2991:    bool OnCheck(Player* player, Unit*  /*target*/ /*Yogg-Saron*/, uint32 /*criteria_id*/) override
DEBUG:refactor.py:277:format_first_block_in_file():2992:    {
DEBUG:refactor.py:277:format_first_block_in_file():2993:        if (player->GetInstanceScript())
DEBUG:refactor.py:277:format_first_block_in_file():2994:            if (Creature* sara = ObjectAccessor::GetCreature(*player, player->GetInstanceScript()->GetGuidData(NPC_BRAIN_OF_YOGG_SARON)))
DEBUG:refactor.py:277:format_first_block_in_file():2995:                return sara->GetAI()->GetData(DATA_GET_CURRENT_ILLUSION) == _requiredIllusion;
DEBUG:refactor.py:277:format_first_block_in_file():2996:
DEBUG:refactor.py:277:format_first_block_in_file():2997:        return false;
DEBUG:refactor.py:277:format_first_block_in_file():2998:    }
DEBUG:refactor.py:277:format_first_block_in_file():2999:
DEBUG:refactor.py:277:format_first_block_in_file():3000:private:
DEBUG:refactor.py:277:format_first_block_in_file():3001:    uint8 const _requiredIllusion;
DEBUG:refactor.py:277:format_first_block_in_file():3002:};
DEBUG:refactor.py:277:format_first_block_in_file():3003:
DEBUG:refactor.py:277:format_first_block_in_file():3004:class achievement_yogg_saron_kiss_and_make_up : public AchievementCriteriaScript
DEBUG:refactor.py:277:format_first_block_in_file():3005:{
DEBUG:refactor.py:277:format_first_block_in_file():3006:public:
DEBUG:refactor.py:277:format_first_block_in_file():3007:    achievement_yogg_saron_kiss_and_make_up() : AchievementCriteriaScript("achievement_yogg_saron_kiss_and_make_up") {}
DEBUG:refactor.py:277:format_first_block_in_file():3008:
DEBUG:refactor.py:277:format_first_block_in_file():3009:    bool OnCheck(Player*  /*player*/, Unit* target /*Sara*/, uint32 /*criteria_id*/) override
DEBUG:refactor.py:277:format_first_block_in_file():3010:    {
DEBUG:refactor.py:277:format_first_block_in_file():3011:        return target && target->GetEntry() == NPC_SARA && target->GetAI() && target->GetAI()->GetData(DATA_GET_SARA_PHASE);
DEBUG:refactor.py:277:format_first_block_in_file():3012:    }
DEBUG:refactor.py:277:format_first_block_in_file():3013:};
DEBUG:refactor.py:277:format_first_block_in_file():3014:
DEBUG:refactor.py:277:format_first_block_in_file():3015:void AddSC_boss_yoggsaron()
DEBUG:refactor.py:277:format_first_block_in_file():3016:{
DEBUG:refactor.py:277:format_first_block_in_file():3017:    new boss_yoggsaron();
DEBUG:refactor.py:277:format_first_block_in_file():3018:    new boss_yoggsaron_sara();
DEBUG:refactor.py:277:format_first_block_in_file():3019:    new boss_yoggsaron_cloud();
DEBUG:refactor.py:277:format_first_block_in_file():3020:    new boss_yoggsaron_guardian_of_ys();
DEBUG:refactor.py:277:format_first_block_in_file():3021:    new boss_yoggsaron_brain();
DEBUG:refactor.py:277:format_first_block_in_file():3022:    new boss_yoggsaron_death_orb();
DEBUG:refactor.py:277:format_first_block_in_file():3023:    new boss_yoggsaron_crusher_tentacle();
DEBUG:refactor.py:277:format_first_block_in_file():3024:    new boss_yoggsaron_corruptor_tentacle();
DEBUG:refactor.py:277:format_first_block_in_file():3025:    new boss_yoggsaron_constrictor_tentacle();
DEBUG:refactor.py:277:format_first_block_in_file():3026:    new boss_yoggsaron_keeper();
DEBUG:refactor.py:277:format_first_block_in_file():3027:    new boss_yoggsaron_descend_portal();
DEBUG:refactor.py:277:format_first_block_in_file():3028:    new boss_yoggsaron_influence_tentacle();
DEBUG:refactor.py:277:format_first_block_in_file():3029:    new boss_yoggsaron_immortal_guardian();
DEBUG:refactor.py:277:format_first_block_in_file():3030:    new boss_yoggsaron_lich_king();
DEBUG:refactor.py:277:format_first_block_in_file():3031:    new boss_yoggsaron_llane();
DEBUG:refactor.py:277:format_first_block_in_file():3032:    new boss_yoggsaron_neltharion();
DEBUG:refactor.py:277:format_first_block_in_file():3033:    new boss_yoggsaron_voice();
DEBUG:refactor.py:277:format_first_block_in_file():3034:
DEBUG:refactor.py:277:format_first_block_in_file():3035:    // SPELLS
DEBUG:refactor.py:277:format_first_block_in_file():3036:    new spell_yogg_saron_malady_of_the_mind();
DEBUG:refactor.py:277:format_first_block_in_file():3037:    RegisterSpellAndAuraScriptPair(spell_yogg_saron_brain_link, spell_yogg_saron_brain_link_aura);
DEBUG:refactor.py:277:format_first_block_in_file():3038:    new spell_yogg_saron_shadow_beacon();
DEBUG:refactor.py:277:format_first_block_in_file():3039:    new spell_yogg_saron_destabilization_matrix();
DEBUG:refactor.py:277:format_first_block_in_file():3040:    new spell_yogg_saron_titanic_storm();
DEBUG:refactor.py:277:format_first_block_in_file():3041:    new spell_yogg_saron_lunatic_gaze();
DEBUG:refactor.py:277:format_first_block_in_file():3042:    new spell_yogg_saron_protective_gaze();
DEBUG:refactor.py:277:format_first_block_in_file():3043:    new spell_yogg_saron_empowered();
DEBUG:refactor.py:277:format_first_block_in_file():3044:    new spell_yogg_saron_insane_periodic_trigger();
DEBUG:refactor.py:277:format_first_block_in_file():3045:    new spell_yogg_saron_insane();
DEBUG:refactor.py:277:format_first_block_in_file():3046:    new spell_yogg_saron_sanity_well();
DEBUG:refactor.py:277:format_first_block_in_file():3047:    RegisterSpellScript(spell_keeper_freya_summon_sanity_well);
DEBUG:refactor.py:277:format_first_block_in_file():3048:    new spell_yogg_saron_sanity_reduce();
DEBUG:refactor.py:277:format_first_block_in_file():3049:    new spell_yogg_saron_empowering_shadows();
DEBUG:refactor.py:277:format_first_block_in_file():3050:    new spell_yogg_saron_in_the_maws_of_the_old_god();
DEBUG:refactor.py:277:format_first_block_in_file():3051:    new spell_yogg_saron_target_selectors();
DEBUG:refactor.py:277:format_first_block_in_file():3052:    new spell_yogg_saron_grim_reprisal();
DEBUG:refactor.py:277:format_first_block_in_file():3053:
DEBUG:refactor.py:277:format_first_block_in_file():3054:    // ACHIEVEMENTS
DEBUG:refactor.py:277:format_first_block_in_file():3055:    new achievement_yogg_saron_drive_me_crazy();
DEBUG:refactor.py:277:format_first_block_in_file():3056:    new achievement_yogg_saron_darkness("achievement_yogg_saron_three_lights_in_the_darkness", 3);
DEBUG:refactor.py:277:format_first_block_in_file():3057:    new achievement_yogg_saron_darkness("achievement_yogg_saron_two_lights_in_the_darkness", 2);
DEBUG:refactor.py:277:format_first_block_in_file():3058:    new achievement_yogg_saron_darkness("achievement_yogg_saron_one_light_in_the_darkness", 1);
DEBUG:refactor.py:277:format_first_block_in_file():3059:    new achievement_yogg_saron_darkness("achievement_yogg_saron_alone_in_the_darkness", 0);
DEBUG:refactor.py:277:format_first_block_in_file():3060:    new achievement_yogg_saron_he_waits_dreaming("achievement_yogg_saron_he_waits_dreaming_stormwind", ACTION_ILLUSION_STORMWIND);
DEBUG:refactor.py:277:format_first_block_in_file():3061:    new achievement_yogg_saron_he_waits_dreaming("achievement_yogg_saron_he_waits_dreaming_chamber", ACTION_ILLUSION_DRAGONS);
DEBUG:refactor.py:277:format_first_block_in_file():3062:    new achievement_yogg_saron_he_waits_dreaming("achievement_yogg_saron_he_waits_dreaming_icecrown", ACTION_ILLUSION_ICECROWN);
DEBUG:refactor.py:277:format_first_block_in_file():3063:    new achievement_yogg_saron_kiss_and_make_up();
DEBUG:refactor.py:277:format_first_block_in_file():3064:}
DEBUG:refactor.py:277:format_first_block_in_file():3065:
